(()=>{var Vr=Object.defineProperty;var ms=Object.getOwnPropertySymbols;var Xr=Object.prototype.hasOwnProperty,Kr=Object.prototype.propertyIsEnumerable;var vs=(e,t,s)=>t in e?Vr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,ce=(e,t)=>{for(var s in t||(t={}))Xr.call(t,s)&&vs(e,s,t[s]);if(ms)for(var s of ms(t))Kr.call(t,s)&&vs(e,s,t[s]);return e};var Is=Object.defineProperty,Ur=Object.defineProperties,Yr=Object.getOwnPropertyDescriptors,ys=Object.getOwnPropertySymbols,Gr=Object.prototype.hasOwnProperty,Jr=Object.prototype.propertyIsEnumerable,bs=(e,t,s)=>t in e?Is(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,Zr=(e,t)=>{for(var s in t||(t={}))Gr.call(t,s)&&bs(e,s,t[s]);if(ys)for(var s of ys(t))Jr.call(t,s)&&bs(e,s,t[s]);return e},Qr=(e,t)=>Ur(e,Yr(t)),en=(e,t)=>{for(var s in t)Is(e,s,{get:t[s],enumerable:!0})},F=typeof window!="undefined"?window:{screen:{},navigator:{}},$e=(F.matchMedia||function(){return{matches:!1}}).bind(F),tn={get passive(){return!0}},Rs=function(){};F.addEventListener&&F.addEventListener("p",Rs,tn);F.removeEventListener&&F.removeEventListener("p",Rs,!1);var Mt="ontouchstart"in F,sn="TouchEvent"in F,_s=Mt||sn&&$e("(any-pointer: coarse)").matches,$s=(F.navigator.maxTouchPoints||0)>0||_s,Hs=F.navigator.userAgent||"",rn=$e("(pointer: coarse)").matches&&/iPad|Macintosh/.test(Hs)&&Math.min(F.screen.width||0,F.screen.height||0)>=768,nn=($e("(pointer: coarse)").matches||!$e("(pointer: fine)").matches&&Mt)&&!/Windows.*Firefox/.test(Hs),on=$e("(any-pointer: fine)").matches||$e("(any-hover: hover)").matches||rn||!Mt,Be=$s&&(on||!nn)?"hybrid":$s?"touchOnly":"mouseOnly",js=typeof window!="undefined";"content"in document.createElement("template");document.createRange&&"createContextualFragment"in document.createRange();var R=_s?"pointer":"mouse",Me=window.location.origin,ws=Object.create,C="",{warn:xs,info:an,error:As,debug:Co}=console,cn=()=>document.documentElement,M=()=>document.body,ln=()=>document.head,b=e=>e?Object.assign(ws(null),e):ws(null),fe=e=>new Set(e),fn=e=>new Proxy(b(),e),X=()=>new Map,k=class extends XMLHttpRequest{constructor(){super(...arguments),this.key=null}};k.$request=X();k.$transit=X();k.$timeout={};var a=b({index:"",eval:!0,patched:!1,loaded:!1,logLevel:2,qs:b(),config:b({fragments:["body"],timeout:3e4,globalThis:!0,schema:"spx-",logLevel:3,cache:!0,components:null,maxCache:100,reverse:!0,preload:null,annotate:!1,eval:b({script:null,style:null,link:null,meta:!1}),hover:b({trigger:"href",threshold:250}),intersect:b({rootMargin:"0px 0px 0px 0px",threshold:0}),proximity:b({distance:75,threshold:250,throttle:500}),progress:b({bgColor:"#111",barHeight:"3px",minimum:.08,easing:"linear",speed:200,threshold:500,trickle:!0,trickleSpeed:200})}),fragments:X(),components:b({$bindings:X(),$mounted:fe(),$registry:X(),$instances:X(),$reference:fn({get:(e,t)=>a.components.$instances.get(e[t])})}),events:b(),observe:b(),memory:b(),pages:b(),snaps:b(),resources:fe()}),Ee="SPX ",g=(e,t,s)=>{let r=a.logLevel;if(!(r>2&&e<=2)){if(Array.isArray(t)&&(t=t.join(" ")),(e===2||e===1)&&(r===1||r===2))an(`${Ee}%c${t}`,`color: ${s||"#999"};`);else if(e===3&&r<=3)s?xs(Ee+t,s):xs(Ee+t);else if(e===5||e===4){s?As(Ee+t,s):As(Ee+t);try{throw e===4?new TypeError(t):new Error(t)}catch(n){}}}};function Y(e,t){if(arguments.length===1)return i=>Y(e,i);let s=t.length;if(s===0)return;let r,n=0;for(;n<s&&(r=e(t[n],n,t),r!==!1);n++);return r}var dn=e=>{let t=e.replace(/\s+,/g,",").replace(/,\s+/g,",").replace(/['"]/g,"");return t.charCodeAt(0)===91&&(/^\[\s*\[/.test(t)||/,/.test(t)&&/\]$/.test(t))&&(t=t.replace(/^\[/,"").replace(/\]$/,"")),t.split(/,|\|/)},Ve=(e,t)=>{try{let s=(t||e).replace(/\\'|'/g,r=>r[0]==="\\"?r:'"').replace(/"(?:\\.|[^"])*"/g,r=>r.replace(/\n/g,"\\n")).replace(/\[|[^[\]]*|\]/g,r=>/[[\]]/.test(r)?r:r.split(",").map(n=>n.replace(/^(\w+)$/,'"$1"').replace(/^"([\d.]+)"$/g,"$1")).join(",")).replace(/([a-zA-Z0-9_-]+)\s*:/g,'"$1":').replace(/:\s*([$\w-]+)\s*([,\]}])/g,':"$1"$2').replace(/,(\s*[\]}])/g,"$1").replace(/([a-zA-Z_-]+)\s*,/g,'"$1",').replace(/([\]},\s]+)?"(true|false)"([\s,{}\]]+)/g,"$1$2$3");return JSON.parse(s)}catch(s){return g(5,"Invalid JSON in attribute value: "+JSON.stringify(e||t,null,2),s),t}},Xe=e=>e[e.length-1],hn=e=>e.replace(/\s+/g," ").trim(),un=e=>e.replace(/\./g,"\\.").replace(/@/g,"\\@").replace(/:/g,"\\:"),pn=()=>new Promise(e=>setTimeout(()=>e(),1)),Ae=(e,t=1,s)=>setTimeout(()=>e(),t),Ws=()=>Promise.resolve(),ks=e=>{switch(e.nodeName){case"SCRIPT":return e.matches(a.qs.$script);case"STYLE":return e.matches(a.qs.$script);case"META":return e.matches(a.qs.$meta);case"LINK":return e.matches(a.qs.$link);default:return e.getAttribute(a.qs.$eval)!=="false"}},gn=e=>{let t=document.createElement("textarea");return t.innerHTML=e,t.value},Ds=()=>new Date().getTime(),zs=e=>{let t=typeof e=="object";return s=>t&&s?typeof s=="string"?s in e:s.every(r=>r?r in e:!1):!1},K=(e,t)=>typeof e=="object"&&typeof t=="string"?t in e:!1,oe=(e,t,s,r=null)=>r!==null?t in e?e:Object.defineProperty(e,t,{get:()=>s,configurable:r}):Object.defineProperty(e,t,{get:()=>s}),Fs=(e,t)=>Y(([s,r])=>Object.defineProperty(e,s,{get:r}),t),Bs=e=>"target"in e?e.target.length===1&&e.target[0]==="body"?e.target:e.target.includes("body")?(g(3,`The body selector passed via ${a.qs.$target} will override`),["body"]):e.target.filter((t,s,r)=>t!==""&&t.indexOf(",")===-1?r.indexOf(t)===s:!1):a.config.fragments.length===1&&a.config.fragments[0]==="body"?["body"]:[],qt=e=>e.length===1&&e[0]==="body"?"body":e.length===0?null:e.join(","),Vs=e=>{let t=typeof e;if(t==="object"){for(let s in e)return!1;return!0}return t==="string"?e[0]===void 0:Array.isArray(e)?e.length>0:null},mn=(...e)=>e.join(C),ae=function e(t=5){let s=Math.random().toString(36).slice(-t);return e.$cache.has(s)?e(t):(e.$cache.add(s),s)};ae.$cache=fe();var vn=(e=2)=>(t,s)=>{let r=t.length;return(r<1||t[r-1].length===e?t.push([s]):t[r-1].push(s))&&t},yn=e=>e<1024?e+" B":e<1048576?(e/1024).toFixed(1)+" KB":e<1073741824?(e/1048576).toFixed(1)+" MB":(e/1073741824).toFixed(1)+" GB",Xs=e=>e[0].toLowerCase()+e.slice(1),Ks=e=>e[0].toUpperCase()+e.slice(1),Ls=e=>/[A-Z]/.test(e)?e.replace(/(.{1})([A-Z])/g,"$1-$2").toLowerCase():e,ye=e=>/[_-]/.test(Xs(e))?e.replace(/([_-]+).{1}/g,(t,s)=>t[s.length].toUpperCase()):e,bn=e=>fe([].slice.call(e)),de=(e,t)=>{let s=typeof e=="string"?M().querySelectorAll(e):e,r=s.length;if(r!==0)for(let n=0;n<r&&t(s[n],n)!==!1;n++);},Es=e=>{for(let t in e)delete e[t]},Us=(e=>{let t=r=>new Promise(n=>n(r())),s=async(r=2,n=200)=>{for(;e.length>0;){for(let i of e.splice(0,r))await t(i);await new Promise(i=>setTimeout(i,n))}};return(...r)=>{r.forEach(n=>e.push(n)),Ae(()=>s(),50)}})([]),$n=()=>{if(a.patched)return;a.patched=!0;let e=Element.prototype.setAttribute,t=document.createElement("i");Element.prototype.setAttribute=function(r,n){if(r.indexOf("@")<0)return e.call(this,r,n);t.innerHTML=`<i ${r}="${n}"></i>`;let i=t.firstElementChild.getAttributeNode(r);t.firstElementChild.removeAttributeNode(i),this.setAttributeNode(i)}},tt=(()=>{let e=[],t=document.createElement("div"),s=null,r,n=null,i=({bgColor:v,barHeight:A,speed:N,easing:W})=>{t.style.cssText=mn("pointer-events:none;",`background-color:${v};`,`height:${A};`,"position:fixed;","display:block;","z-index:2147483647;","top:0;","left:0;","width:100%;","will-change:opacity,transform;",`transition:transform ${N}ms ${W};`)},o=v=>(-1+v)*100,c=(v,A,N)=>v<A?A:v>N?N:v,l=()=>n||(t.style.setProperty("transform",`translateX(${o(s||0)}%)`),n=M().appendChild(t),t),f=()=>{let v=M();if(v.contains(n)){let A=n.animate({opacity:["1","0"]},{easing:"ease-out",duration:100});A.onfinish=()=>{v.removeChild(n),n=null}}else n=null},h=()=>{let v=e.shift();v&&v(h)},u=v=>{e.push(v),e.length===1&&h()},d=v=>{v=c(v,a.config.progress.minimum,1),s=v===1?null:v;let A=l();u(N=>{A.style.setProperty("transform",`translateX(${o(v)}%)`),v===1?setTimeout(()=>{f(),N()},a.config.progress.speed*2):setTimeout(N,a.config.progress.speed)})},y=v=>{let A=s;if(!A)return m();if(A<1)return typeof v!="number"&&(A>=0&&A<.2?v=.1:A>=.2&&A<.5?v=.04:A>=.5&&A<.8?v=.02:A>=.8&&A<.99?v=.005:v=0),A=c(A+v,0,.994),d(A)},p=()=>{setTimeout(()=>{s&&(y(),p())},a.config.progress.trickleSpeed)},m=v=>{a.config.progress&&(r=setTimeout(()=>{s||d(0),a.config.progress.trickle&&p()},v||0))};return{start:m,done:v=>{clearTimeout(r),!(!v&&!s)&&(y(.3+.5*Math.random()),d(1))},style:i}})(),At=(e,t)=>{let s=e.name,r=t;return t=Xs(t||s),e.define=Object.assign({id:t,merge:!1,state:{},nodes:[]},e.define),t!==e.define.id&&(t=ye(e.define.id)),s!==r&&/^[A-Z]|[_-]/.test(e.define.id)&&g(3,[`Component identifer id "${e.define.id}" must use camelCase format.`,`The identifer has been converted to "${t}"`]),t},me=(e,t=!1)=>{let{$registry:s}=a.components;for(let r in e){let n=e[r],i=t?r:At(n,r);s.has(i)||(s.set(i,n),g(1,`Component ${n.name} registered using id: ${i}`,"#F48FB1"))}a.config.components||(a.config.components=!0)},st=e=>new DOMParser().parseFromString(e,"text/html"),Se=e=>(e||document).documentElement.outerHTML,Ys=e=>{let t=e.indexOf("<title");if(t===-1||e.slice(0,t).indexOf("<svg")>-1)return C;let s=e.indexOf(">",t)+1,r=e.indexOf("</title",s);return gn(e.slice(s,r).trim())},wn=(e,t)=>t.querySelector(e),xn=(e,t)=>[].slice.call(t.querySelectorAll(e))||[];function Q(e,...t){let s=e==="before:cache";s&&(t[1]=st(t[1]));let r=!0;return Y(n=>{let i=n.apply(null,t);s?i instanceof Document?r=i.documentElement.outerHTML:typeof r!="string"&&(r=i!==!1):r=i!==!1},a.events[e]||[]),r}var An=(e,t,s)=>(e in a.events||(a.events[e]=[]),a.events[e].push(s?t.bind(s):t)-1),kn=(e,t)=>{if(e in a.events){let s=a.events[e];if(s&&typeof t=="number")s.splice(t,1),g(2,`Removed ${e} event listener (id: ${t})`),s.length===0&&delete a.events[e];else{let r=[];if(s&&t)for(let n=0,i=s.length;n<i;n++)s[n]!==t?r.push(s[n]):e!=="x"&&g(2,`Removed ${e} event listener (id: ${n})`);r.length?a.events[e]=r:delete a.events[e]}}else g(3,`There are no ${e} event listeners`)},Gs=(e,t)=>{let s=t(e);if(s===!1)return;s===1&&(e=e.nextSibling);let r,n;for(e.firstElementChild&&(n=0,r=e.children[n]);r;)r&&Gs(r,t),r=e.children[++n]},Ns=(e,t)=>`on${e}`in t?!0:(g(5,[`Invalid event name "${e}" provided. No such event exists in the DOM API.`,"Only known event listeners can be attached."],t),!1),Cs=(e,t)=>{let s=e[t.method];return function(n){t.params&&(n.attrs=t.params),s.call(e,n)}},kt=(e,t)=>{t.attached&&(t.listener.abort(),t.listener=new AbortController,t.options.signal=t.listener.signal,t.attached=!1,g(1,[`Detached ${t.key} ${t.eventName} event from ${t.method}() method in component`,`${e.scope.define.id}: ${e.scope.key}`]))},Js=(e,t,s)=>{if(t.attached)return;if(!(t.method in e)){g(3,`Undefined callback method: ${e.scope.define.id}.${t.method}()`);return}let r=s?oe(t,"dom",s).dom:t.dom;Hn(r.attributes,t),console.log(t),t.isWindow?Ns(t.eventName,window)&&addEventListener(t.eventName,Cs(e,t)):Ns(t.eventName,r)&&r.addEventListener(t.eventName,Cs(e,t),t.options),t.attached=!0,g(1,[`Attached ${t.key} ${t.eventName} event to ${t.method}() method in component`,`${e.scope.define.id}: ${e.scope.key}`])},wt,It=(wt=class{constructor(e){this.dom=b(),Reflect.defineProperty(this,"ref",{value:e,configurable:!1,enumerable:!1,writable:!1});let{scope:t,root:s}=this,r=`${a.config.schema}${t.instanceOf}`;if(this.state=new Proxy(t.state,{get:Reflect.get,set(n,i,o,c){let l=typeof o=="object"||Array.isArray(o)?JSON.stringify(o):`${o}`;if(s&&l.trim()!==""){let f=`${r}:${i}`,h=s.hasAttribute(f)?f:`${r}:${Ls(i)}`;l===s.getAttribute(h)||s.setAttribute(h,l)}if(i in t.binds){let f=t.binds[i];for(let h in f)f[h].live&&(f[h].value=l,de(f[h].selector,u=>{u.innerText=l}))}return Reflect.set(n,i,o,c)}}),Vs(t.state))for(let n in t.define.state){let i=t.define.state[n],o=i,c;switch(typeof i=="object"&&(o=i.typeof,c=i.default),o){case String:t.state[n]=c||C;break;case Boolean:t.state[n]=typeof c=="boolean"?c:c==="true"||!1;break;case Number:t.state[n]=c?Number(c):0;break;case Object:t.state[n]=typeof c=="object"?c:{};break;case Array:t.state[n]=Array.isArray(c)?c:[];break}}else for(let n in t.define.state){let i=t.define.state[n];if(!(n in t.state))if(typeof i=="object")t.state[n]=i.default;else switch(i){case String:t.state[n]="";break;case Boolean:t.state[n]=!1;break;case Number:t.state[n]=0;break;case Object:t.state[n]={};break;case Array:t.state[n]=[];break}let o=Ls(n),c=`has${Ks(n)}`,l=i,f=s.hasAttribute(`${r}:${o}`)?s.getAttribute(`${r}:${o}`):s.getAttribute(`${r}:${n}`),h=f!==null&&f!=="";if(typeof i=="object"&&(l=i.typeof,h||(f=i.default)),c in t.state||oe(t.state,c,h),typeof f=="string"&&f.startsWith("window."))t.state[n]=window[f.slice(7)];else switch(l){case String:t.state[n]=f||"";break;case Boolean:t.state[n]=typeof f=="boolean"?f:f==="true"||!1;break;case Number:t.state[n]=f?Number(f):0;break;case Object:t.state[n]=h?Ve(f):f||{};break;case Array:t.state[n]=h?Ve(f):f||[];break}}}get html(){return cn()}get root(){return this.scope.root}set root(e){oe(this.scope,"root",e)}get scope(){return It.scopes.get(this.ref)}},wt.scopes=X(),wt),Zs={};en(Zs,{connect:()=>rt,disconnect:()=>Ht,hargs:()=>Rt,hook:()=>Ue,mount:()=>_t,teardown:()=>tr});var S,Qs=fe(),Ln=()=>Ae(()=>S=void 0),Lt=(e,t)=>{for(let s of t){if(!a.components.$reference[s])continue;let r=a.components.$reference[s],n=s.charCodeAt(0);if(n===99)a.components.$mounted.add(r.scope.key),r.root=e,r.scope.status=2,g(1,`Component ${r.scope.define.id} mounted: ${r.scope.key}`,"#6DD093");else if(n===101)Js(r,r.scope.events[s],e);else if(n===110)for(let i in r.scope.nodes)r.scope.nodes[i].live++;else if(n===98){for(let i in r.scope.binds)if(s in r.scope.binds[i]){e.innerText=r.scope.binds[i][s].value,r.scope.binds[i][s].live=!0;break}}}},Et=(e,t,s)=>{for(let r of t){if(!a.components.$reference[r])continue;let n=a.components.$reference[r],i=r.charCodeAt(0);if(i===99){n.scope.hooks.unmount===2&&n.unmount(Rt()),a.components.$mounted.delete(n.scope.key),n.scope.define.merge&&(n.scope.snapshot=e.innerHTML,g(1,`Component ${n.scope.define.id} snapshot: ${n.scope.key}`,"#999"));for(let o in n.scope.nodes)n.scope.nodes[o].live=0;for(let o in n.scope.binds)for(let c in n.scope.binds[o])n.scope.binds[o][c].live=!1;for(let o in n.scope.events)kt(n,n.scope.events[o]);n.scope.status=5,g(1,`Component ${n.scope.define.id} unmounted: ${n.scope.key}`,"#7b97ca")}else if(i===101)kt(n,n.scope.events[r]);else if(i===110)for(let o in n.scope.nodes)--n.scope.nodes[o].live;else if(i===98){for(let o in n.scope.binds)if(r in n.scope.binds[o]){n.scope.binds[o][r].live=!1;break}}}},Ke=e=>{if(e.nodeType!==1&&e.nodeType!==11)return;let t=e.getAttribute(a.qs.$ref);t&&Et(e,t.split(","))},En=e=>{let t=e.getAttribute(a.qs.$ref);t?Lt(e,t.split(",")):we(e.attributes)&&(S?S.$morph=e:S=nt(e),be(e,S))},Nn=e=>{S?S.$morph=e:S=nt(e),be(e,S,!1)},Cn=(e,t,s,r)=>{s&&(s=s.split(",")),r&&(r=r.split(",")),s&&r?(Et(e,s),Lt(e,r)):!s&&r?Lt(e,r):(S?S.$morph=e:S=nt(e,t),s&&!r&&Et(e,s),we(t.attributes)&&be(e,S))},er=(e,t)=>Ae(()=>{let r=qe(e.snap).querySelector(`[${a.qs.$ref}="${e.ref}"]`);r?(r.innerHTML=e.snapshot,Ft(r.ownerDocument.documentElement.outerHTML,e.snap)):g(3,`Component snapshot merge failed: ${e.instanceOf} (${t})`)}),Ss=(e,t)=>{let{page:s,dom:r}=Xn(a.page.key),n=e.charCodeAt(0)===114?"removed":"appended";r.head.contains(t)?(r.head[e](t),a.snaps[s.snap]=r.documentElement.outerHTML,g(1,`Snapshot record was updated. Node ${n} from <head>`,t)):g(3,"Node does not exist in the snapshot record, no mutation applied",t)},Rt=()=>b({page:b(a.page)}),tr=()=>{for(let e in a.components.$reference)delete a.components.$reference[e];for(let e of a.components.$instances.values())for(let t in e.scope.events)kt(e,e.scope.events[t]);a.components.$instances.clear(),a.components.$mounted.clear(),g(2,"Component instances were disconnected")},_t=e=>{let t=Rt(),s=[];for(let[r,n,i]of e){let o=a.components.$instances.get(r),c=o.scope.status===4?"unmount":"onmount";o.scope.snap||(o.scope.snap=a.page.snap);let l=async()=>{try{i&&o.scope.status===1?(await o[n](t),await o[i](t)):o.scope.status===4?o.scope.define.merge&&er(o.scope,r):await o[n](t),o.scope.status=o.scope.status===4?5:3,o.scope.hooks.connect===2&&(o.scope.hooks.connect=3)}catch(f){return g(3,`Component to failed to ${c}: ${o.scope.instanceOf} (${r})`,f),Promise.reject(r)}};s.push(Ws().then(l))}return Promise.allSettled(s)},Ue=()=>{let{$mounted:e,$instances:t,$registry:s}=a.components;if(e.size===0&&t.size===0&&s.size>0)return Wt();let r=[];for(let n of e){if(!t.has(n))continue;let i=t.get(n);if(i.scope.status!==3&&i.scope.status!==5){let o=i.scope.status===4,c=o?"unmount":"onmount";c in i?c==="onmount"&&"connect"in i&&i.scope.hooks.connect===2?r.push([n,"connect",c]):r.push([n,c]):o&&(i.scope.define.merge&&er(i.scope,n),i.scope.status=5)}}r.length>0&&_t(r).catch(n=>{let i=t.get(n);i.scope.status=5,e.delete(n)})},rt=()=>{a.components.$registry.size===0||a.observe.components||(a.page.type===0?Wt():S?sr(S).then(Ue).then(Ln):Ue(),a.observe.components=!0)},Ht=()=>{a.observe.components&&(Ue(),a.observe.components=!1)},Te=(e=>{let t,s=(o,c)=>o.setAttribute(a.qs.$ref,o.hasAttribute(a.qs.$ref)?`${o.getAttribute(a.qs.$ref)},${c.shift()}`:c.shift());return{set:o=>(e.push([o,X()]),t=e[e.length-1][1],o),add:(o,c,l=!1)=>t.has(o)?t.get(o).push(c):t.set(o,[c]),sync:(o,c)=>Us(()=>{for(;e.length>0;){let[l,f]=e.shift();for(let[h,u]of f)l.matches(h)&&s(l,u),l.querySelectorAll(h).forEach(d=>s(d,u));f.clear()}Ft(o.documentElement.outerHTML,c),g(1,`Snapshot ${a.page.key} updated for: ${a.page.snap}`)})}})([]),Sn=(e,t)=>{e.hooks=b(),Y(s=>{e.hooks[s]=s in t?2:1},["connect","onmount","unmount","onmedia"])},Tn=(e,t,s)=>(r,n)=>{if(t===!1||s&&n.status===2){a.components.$mounted.add(n.key),a.components.$instances.set(n.key,r),g(1,`Component "${n.instanceOf}" connected: ${n.key}`,"#2cc9ee");let i=-1;n.hooks.connect===2&&(i=e.push([n.key,"connect"])-1,n.status=1),n.hooks.onmount===2&&(i=(i>-1?e[i].push("onmount"):e.push([n.key,"onmount"]))-1),i<0&&(n.status=3)}},Ts=(e,t,s)=>{for(let r in e.events)s!==null&&e.status===3&&(a.components.$reference[r]=e.key,t.scope.events[r]=e.events[r]),Js(t,e.events[r])},Os=(e,t)=>{for(let s in e){let r=e[s];r.schema[0]in t.dom?s in t.scope.nodes&&++t.scope.nodes[s].live:Object.defineProperties(t.dom,{[r.schema[0]]:{get:()=>wn(r.selector,r.isWithin?t.root:M())},[r.schema[1]]:{get:()=>xn(r.selector,r.isWithin?t.root:M())},[r.schema[2]]:{get:()=>r.live>0}})}},On=(e,t,s)=>{let r=s||a.page.type===4,n=Tn(e,s,r);return(i,o)=>{if(o)Os(i.nodes,o),Ts(i,o,s);else{i.define=b();let c=a.components.$registry.get(i.instanceOf),l=oe(i,"define",c.define);It.scopes.set(i.key,l);let f=new c(i.key);Sn(i,f),Os(i.nodes,f),Ts(i,f,s),n(f,i)}}},sr=(e,t)=>{let{$scopes:s,$aliases:r,$morph:n}=e,i=[],o=Kn(),c=On(i,o,n!==null);for(let l in s){if(!a.components.$registry.has(l)&&!o.has(l)){g(3,`Component does not exist in registry: ${l}`,s[l]);continue}for(let f of s[l]){if(f.instanceOf==null)if(l in r)f.instanceOf=r[l];else continue;if(o.has(l))for(let h of o.get(l))h.scope.instanceOf===l&&(f.instanceOf==="accordion"&&console.log(f),c(f,h));else c(f)}}return Ae(()=>[o.clear()]),a.page.type===0&&Te.sync(t,a.page.key),i.length>0?_t(i):Promise.resolve()},Pn=/\b(?:append|prepend)/,Mn=/\s+/g,Nt=/^\b(?:true|false)$/i,rr=/^\d*\.?\d+$/,Ct=/^(?:[.-]?\d*\.?\d+|NaN)$/,qn=/\b(?:intersect|hover|proximity)\b/,In=/\b(?:SCRIPT|STYLE|LINK)\b/,Rn=/\[(['"]?.*['"]?,?)\]/,Ps=/[xy]\s*|\d*\.?\d+/gi,be=(e,t,s=!0)=>{s&&!we(e.attributes)||(e.hasAttribute(a.qs.$component)?Fn(e,e.getAttribute(a.qs.$component),t):nr(e,t,null,null))},_n=(e,t)=>{let s=e.trim().replace(/\s+/," ").split(/[|, ]/);for(let r=0,n=0,i=s.length;r<i;r++)s[r]!==""&&((n=r+2)<i&&s[r+1]==="as"?(t(ye(s[r]),ye(s[n])),r=n):t(ye(s[r]),null))},Hn=(e,t)=>{for(let s=0,r=e.length;s<r;s++){let{name:n,value:i}=e[s];if(!a.qs.$param.test(n)||n.startsWith(a.qs.$data)||!i)continue;let o=n.slice(a.config.schema.length).split(":").pop();t.params===null&&(t.params=b()),o in t.params||(t.params[o]=jn(i))}},we=e=>{if(typeof e=="string")return e.indexOf("@")>-1||e===a.qs.$component||e===a.qs.$node||e===a.qs.$bind;for(let t=e.length-1;t>=0;t--)if(we(e[t].name))return!0;return!1},Ye=(e,t)=>(e.status===2||e.status===3)&&e.root?e.root.contains(t):!1,jt=e=>hn(e.replace(/\s \./g,".")).replace(/\s+/g," ").trim().split(/[ ,]/),jn=e=>{if(Ct.test(e))return e==="NaN"?NaN:+e;if(Nt.test(e))return e==="true";let t=e.charCodeAt(0);return t===123||t===91?Ve(e):e},nt=(e=null,t=null)=>b({$aliases:b(),$scopes:b(),$element:null,$snaps:e?b():null,$morph:e,$snapshot:t}),it=(e,t,s,r)=>(s||(s=e.getAttribute(t)),`${e.nodeName.toLowerCase()}[${t}${r?"*=":"="}"${s}"]`),ot=(e,{$scopes:t,$aliases:s})=>e in s?Xe(t[s[e]]):e in t?Xe(t[e]):(t[e]=[St([e])])[0],at=(e,t,s,r)=>{a.components.$reference[s]=t;let n=e.getAttribute(a.qs.$ref);return e.setAttribute(a.qs.$ref,n?`${n},${s}`:s),r&&Te.add(r,s),s},St=([e,t=null],s,r)=>{let n=b();if(n.key=ae(),n.ref=`c.${n.key}`,n.status=5,n.state=b(),n.nodes=b(),n.binds=b(),n.events=b(),s&&(n.snap=null,n.status=2,n.inFragment=Dt(s),n.alias=t||null,oe(n,"root",s,!0),at(s,n.key,n.ref,it(s,a.qs.$component))),a.components.$registry.has(e))if(n.instanceOf=e,n.alias)if(a.components.$registry.has(n.alias))g(5,[`The component alias ("${n.alias}") matches a component identifer in the registry.`,"An alias reference must be unique and cannot match component names."]);else if(n.alias in r.$scopes){for(let{events:i,nodes:o,binds:c}of r.$scopes[n.alias]){if("events"in n)for(let l in i)n.events[l]=i[l],a.components.$reference[l]=n.key;if("nodes"in n)for(let l in o)n.nodes[l]=o[l],a.components.$reference[l]=n.key;if("binds"in n)for(let l in c)n.binds[l]=c[l],a.components.$reference[l]=n.key}delete r.$scopes[n.alias]}else r.$aliases[n.alias]=e;else n.alias=null;else e?n.alias=e:n.instanceOf=null,n.status===2&&(r.$aliases[n.alias]=null);return n},Wn=(e,t,s,r)=>{let n=t.slice(a.config.schema.length),i=n.startsWith("window:"),o=s.indexOf("{"),c=s.trim().split(o>-1?new RegExp("(?<=[$_\\w}])\\s+(?=[$_\\w])"):/\s+/);for(let l=0,f=c.length;l<f;l++){let h=c[l],u=new AbortController,d=b();d.key=`e.${ae()}`,d.isWindow=i,d.eventName=i?n.slice(7):n,d.attached=!1,d.selector=it(e,un(t),h,!0),d.params=null,d.options={signal:u.signal};let y=h;if(o>-1){let v=h.slice(o,h.lastIndexOf("}",o)).match(/(passive|once|capture)/g);v!==null&&(d.options.once=v.indexOf("once")>-1,d.options.passive=v.indexOf("passive")>-1,d.options.capture=v.indexOf("capture")>-1),y=h.slice(0,o)}let[p,m]=jt(y)[0].split("."),L=ot(p,r);d.listener=u,d.method=m.trim(),d.isChild=Ye(L,e),oe(d,"dom",e,!0),at(e,L.key,d.key,d.selector),L.events[d.key]=d}},Dn=(e,t,s)=>{let r=jt(t);for(let n of r){let[i,o]=n.split("."),c=ot(i,s);if(o in c.nodes)c.nodes[o].live++,c.nodes[o].isWithin=Ye(c,e);else{let l=`[${a.qs.$node}*="${t}"]`,f=`${o}Node`;c.nodes[o]=b({name:o,key:`c.${c.key}`,selector:l,live:1,isWithin:Ye(c,e),schema:[f,`${f}s`,`has${Ks(f)}`]})}}},zn=(e,t,s)=>{var r;for(let n of jt(t)){let[i,o]=n.split("."),c=ot(i,s),l=`[${a.qs.$bind}="${t}"]`,f=at(e,c.key,`b.${ae()}`,`${e.nodeName.toLowerCase()}${l}`);(r=c.binds)[o]||(r[o]=b()),c.binds[o][f]=b({key:f,stateKey:o,selector:l,value:e.innerText,dom:s.$element,live:!0,stateAttr:`${a.config.schema}${i}:${o}`,isChild:Ye(c,e)})}},nr=(e,t,s,r)=>{s===null&&r===null&&(t.$element=ae());for(let n=e.attributes.length-1;n>=0;n--){let{name:i,value:o}=e.attributes[n];if(s){let c=`${a.config.schema}${s}:`;r&&!i.startsWith(c)&&(c=`${a.config.schema}${r}:`),i.startsWith(c)&&(ot(s,t).state[ye(i.slice(c.length))]=o)}i.indexOf("@")>-1?Wn(e,i,o,t):i===a.qs.$bind?zn(e,o,t):i===a.qs.$node&&Dn(e,o,t)}},Fn=(e,t,s)=>{_n(t,(r,n)=>{if(!a.components.$registry.has(r))g(5,`Component does not exist in registry: ${r}`);else{let i;r in s.$scopes?(i=Xe(s.$scopes[r]),i.status===5?(i.status=2,i.inFragment=Dt(e),oe(i,"root",e,!0),at(e,i.key,i.ref,it(e,a.qs.$component))):s.$scopes[r].push(St([r,n],e,s))):s.$scopes[r]=[St([r,n],e,s)],i=Xe(s.$scopes[r]),n?s.$aliases[n]=r:i.alias&&!(i.alias in s.$aliases)&&(a.components.$registry.has(i.alias)?(g(3,`Alias must not match a component identifier: ${i.instanceOf} as ${i.alias}`),i.alias=null):s.$aliases[i.alias]=r),nr(e,s,r,i.alias)}})},Wt=e=>{let t=nt();if(e)return e instanceof Set?(e.forEach(s=>be(s,t)),e.clear(),t):(be(e,t),t);{let s=Te.set(a.snapDom.body);Gs(M(),r=>be(r,t)),Vs(t.$scopes)||sr(t,s.ownerDocument)}},Dt=e=>{for(let[t,s]of a.fragments)if(t===e.id||s.contains(e))return!0;return!1},ir=()=>{a.fragments.clear();let e,t,s,r=M();if(a.page.target.length>0?(t=a.qs.$target,e=a.page.target.join(","),s=bn(r.querySelectorAll(`[id][${a.qs.$component}]`))):(t=a.qs.$fragment,e=a.config.fragments.length===1&&a.config.fragments[0]==="body"?a.qs.$fragments:`${a.config.fragments.join()},${a.qs.$fragments}`),de(e,n=>{if(s){for(let i of s)if(n.contains(i)){s.delete(i);break}}if(n.hasAttribute(t)){let i=n.getAttribute(t).trim();n.id!==C&&(i==="true"||i===C)?a.fragments.set(`#${n.id}`,n):a.fragments.set(it(n,t,i),n)}else a.fragments.set(`#${n.id}`,n)}),s&&s.size>0){for(let n of s)a.fragments.set(`#${n.id}`,n),a.page.target.push(`#${n.id}`),Qs.add(n.id);s.clear()}ct("fragments",[...a.fragments.keys()])},Bn=e=>{e.type===6||e.selector==="body"||e.selector===null||Ae(()=>{let t=qe(e.snap),s=t.body.querySelectorAll(a.qs.$targets),r=M().querySelectorAll(a.qs.$targets);de(s,(n,i)=>{if(Dt(n))g(3,"The fragment or target is a decedent of an element which morphs",n);else{if(!n.hasAttribute("id"))n.setAttribute("id",`t.${ae()}`),r&&r[i].setAttribute("id",`t.${ae()}`);else if(n.id.startsWith("t."))return;e.target.push(n.id)}}),Ft(t.documentElement.outerHTML,e.snap)})},B=e=>{let t=zs(e);return e.ts=Ds(),e.target=Bs(e),e.selector=qt(e.target),a.config.cache&&(t("cache")||(e.cache=a.config.cache),e.snap||(e.snap=ae())),a.config.hover!==!1&&e.type===10&&(e.threshold||(e.threshold=a.config.hover.threshold)),a.config.proximity!==!1&&e.type===12&&(e.proximity||(e.proximity=a.config.proximity.distance),e.threshold||(e.threshold=a.config.proximity.threshold)),a.config.progress&&(e.progress||(e.progress=a.config.progress.threshold)),t("history")||(e.history=!0),e.scrollY||(e.scrollY=0),e.scrollX||(e.scrollX=0),e.fragments||(e.fragments=a.config.fragments),e.visits||(e.visits=0),e.components||(e.components=[]),e.location||(e.location=Ce(e.key)),a.pages[e.key]=e,a.pages[e.key]},Vn=e=>{let t=b(Qr(Zr({},e),{target:[],selector:null,cache:a.config.cache,history:!0,scrollX:0,scrollY:0,fragments:a.config.fragments}));return a.config.hover&&(t.threshold=a.config.hover.threshold),a.config.proximity&&(t.proximity=a.config.proximity.distance,t.threshold=a.config.proximity.threshold),a.config.progress&&(t.progress=a.config.progress.threshold),t},ct=(e,t,s=a.history.key)=>{s in a.pages&&e in a.pages[s]&&(e==="location"?a.pages[s][e]=Object.assign(a.pages[e][s],t):e==="target"?(a.pages[s].target=Bs(t),a.pages[s].selector=qt(a.pages[s].target)):a.pages[s][e]=t)},zt=(e,t)=>{let s=Q("before:cache",e,t),r=typeof s=="string"?s:t;return e.type>5&&e.type>9&&(e.type=1),e.title=Ys(t),!a.config.cache||s===!1?e:e.type!==0&&!K(e,"snap")?xe(e,r):(a.pages[e.key]=e,a.snaps[e.snap]=r,Bn(e),Q("after:cache",e),e)},xe=(e,t=null)=>{let s=e.key in a.pages?a.pages[e.key]:B(e);return t&&(a.snaps[s.snap]=t,e.title=Ys(t)),Object.assign(s,e)},Ft=(e,t)=>{let s=t=t?t.charCodeAt(0)===47?t in a.pages?a.pages[t].snap:null:t:null;s?a.snaps[s]=e:(delete a.pages[t],g(3,"Snapshot record does not exist, update failed"))},Xn=e=>{if(!e){if(a.history===null){g(3,"Missing history state reference, page cannot be returned");return}e=a.history.key}if(e in a.pages)return Fs(b(),[["page",()=>a.pages[e]],["dom",()=>st(a.snaps[a.pages[e].snap])]]);g(5,`No record exists: ${e}`)},qe=e=>{let t=e?e.charCodeAt(0)===47?a.pages[e].snap:e:a.page.snap;return st(a.snaps[t])},Kn=()=>{let e=X(),{$instances:t,$mounted:s}=a.components;for(let r of s){if(!t.has(r))continue;let n=t.get(r),{scope:i}=n;i.status===2&&(i.alias!==null&&(e.has(i.alias)?e.get(i.alias).push(n):e.set(i.alias,[n])),e.has(i.instanceOf)?e.get(i.instanceOf).push(n):e.set(i.instanceOf,[n]))}return e},Un=e=>{if(!e){if(a.history===null){g(3,"Missing history state reference, page cannot be returned");return}e=a.history.key}if(K(a.pages,e))return a.pages[e];g(5,`No page record exists for: ${e}`)},U=e=>K(a.pages,e)&&K(a.pages[e],"snap")&&K(a.snaps,a.pages[e].snap)&&typeof a.snaps[a.pages[e].snap]=="string",Oe=e=>{e?typeof e=="string"?(delete a.snaps[a.pages[e].snap],delete a.pages[e]):Array.isArray(e)&&Y(t=>{delete a.snaps[a.pages[t].snap],delete a.pages[t]},e):(Es(a.snaps),Es(a.pages))},T=Me.replace(/(?:https?:)?(?:\/\/(?:www\.)?|(?:www\.))/,C),or=(e,t)=>{let s=t?Vn(t):b(),r=e.getAttributeNames();for(let n=0,i=r.length;n<i;n++){let o=r[n];if(o.startsWith(a.qs.$data)){K(s,"data")||(s.data=b());let c=ye(o.slice(a.qs.$data.length)),l=e.getAttribute(o).trim();Ct.test(l)?s.data[c]=l==="NaN"?NaN:+l:Nt.test(l)?s.data[c]=l==="true":l.charCodeAt(0)===123||l.charCodeAt(0)===91?s.data[c]=Ve(o,l):s.data[c]=l}else{if(!a.qs.$attrs.test(o))continue;let c=e.getAttribute(o).trim();if(o==="href")s.rev=z(location),t||(s.location=Ce(c),s.key=z(s.location));else{let l=o.slice(o.lastIndexOf("-")+1),f=c.replace(Mn,C).trim();if(l==="target")s[l]=f==="true"?[]:f!==C?dn(f):[],s.selector=qt(s[l]);else if(Rn.test(f)){let h=f.match(/\[?[^,'"[\]()\s]+\]?/g);s[l]=Pn.test(l)?h.reduce(vn(2),[]):h}else if(l==="position")if(Ps.test(f)){let h=f.match(Ps);s[`scroll${h[0].toUpperCase()}`]=+h[1],h.length===4&&(s[`scroll${h[2].toUpperCase()}`]=+h[3])}else g(3,`Invalid attribute value on <${o}>, expected: y:number or x:number`,e);else l==="scroll"?rr.test(f)?s.scrollY=+f:g(3,`Invalid attribute value on <${o}>, expected: number`,e):Nt.test(f)&&!qn.test(o)?s[l]=f==="true":Ct.test(f)?s[l]=+f:(l==="history"&&f!=="push"&&f!=="replace"&&g(5,`Invalid attribute value on <${o}>, expected: false, push or replace`,e),s[l]=f)}}}return s},ve=e=>{let t=b();if(e.length===1&&e.charCodeAt(0)===47)return t.pathname=e,t.hash=C,t.search=C,t;let r=e.indexOf("#");r>=0?(t.hash=e.slice(r),e=e.slice(0,r)):t.hash=C;let n=e.indexOf("?");return n>=0?(t.search=e.slice(n),e=e.slice(0,n)):t.search=C,t.pathname=e,t},Fe=(e,t)=>{let s=e.indexOf("/",t);if(s>t){let n=e.indexOf("#",s);return n<0?e.slice(s):e.slice(s,n)}let r=e.indexOf("?",t);if(r>t){let n=e.indexOf("#",r);return n<0?e.slice(r):e.slice(r,n)}return e.length-t===T.length?"/":null},xt=e=>{let t=e.startsWith("www.")?e.slice(4):e,s=t.indexOf("/");if(s>=0){let r=t.slice(s);if(t.slice(0,s)===T)return r.length>0?ve(r):ve("/")}else{let r=t.search(/[?#]/);if(r>=0){if(t.slice(0,r)===T)return ve("/"+t.slice(r))}else if(t===T)return ve("/")}return null},Yn=e=>e.startsWith("http:")||e.startsWith("https:")?1:e.startsWith("//")?2:e.startsWith("www.")?3:0,ar=e=>{if(typeof e!="string"||e.length===0)return!1;if(e.charCodeAt(0)===47)return e.charCodeAt(1)!==47?!0:e.startsWith("www.",2)?e.startsWith(T,6):e.startsWith(T,2);if(e.charCodeAt(0)===63)return!0;if(e.startsWith("www."))return e.startsWith(T,4);if(e.startsWith("http")){let t=e.indexOf("/",4)+2;return e.startsWith("www.",t)?e.startsWith(T,t+4):e.startsWith(T,t)}return!1},Gn=e=>e.charCodeAt(0)===47?e.charCodeAt(1)!==47?ve(e):xt(e.slice(2)):e.charCodeAt(0)===63?ve(location.pathname+e):e.startsWith("https:")||e.startsWith("http:")?xt(e.slice(e.indexOf("/",4)+2)):e.startsWith("www.")?xt(e):null,z=e=>{if(typeof e=="object")return e.pathname+e.search;if(e===C||e==="/")return"/";let t=Yn(e);if(t===1){let s=e.charCodeAt(4)===115?8:7,r=e.startsWith("www.",s)?s+4:s;return e.startsWith(T,r)?Fe(e,r):null}if(t===2){let s=e.startsWith("www.",2)?6:2;return e.startsWith(T,s)?Fe(e,s):null}return t===3?e.startsWith(T,4)?Fe(e,4):null:e.startsWith(T,0)?Fe(e,0):e.charCodeAt(0)===47?e:null},cr=({pathname:e,search:t,hash:s}=location)=>b({hostname:T,origin:Me,pathname:e,hash:s,search:t}),Ce=e=>{if(e===C)return cr();let t=Gn(e);return t===null&&g(3,`Invalid pathname: ${e}`),t.origin=Me,t.hostname=T,t},q=(e,t=6)=>{if(e instanceof Element){let r=or(e);return r.type=t||6,r}let s=b();return e===0?(s.location=cr(),s.key=s.rev=z(s.location),s.type=e,s.visits=1,a.index=s.key):t===7||t===4?(s.location=Ce(e),s.key=s.rev=z(s.location),s.type=t):(s.rev=location.pathname+location.search,s.location=Ce(typeof e=="string"?e:s.rev),s.key=z(s.location),s.type=t),s},lt=(e,{method:t="GET",body:s=null,headers:r=null,type:n="text"}={})=>new Promise(function(i,o){let c=new k;if(c.key=e,c.responseType=n,c.open(t,e,!0),c.setRequestHeader("spx-request","true"),r!==null)for(let l in r)c.setRequestHeader(l,r[l]);c.onloadstart=function(){k.$request.set(this.key,c)},c.onload=function(){i(this.response)},c.onerror=function(){o(this.statusText)},c.onabort=function(){delete k.$timeout[this.key],k.$transit.delete(this.key),k.$request.delete(this.key)},c.onloadend=function(l){k.$request.delete(this.key),a.memory.bytes=a.memory.bytes+l.loaded,a.memory.visits=a.memory.visits+1},c.send(s)}),lr=e=>e in k.$timeout?(clearTimeout(k.$timeout[e]),delete k.$timeout[e]):!0,fr=(e,t,s)=>{e in k.$timeout||U(e)||(k.$timeout[e]=setTimeout(t,s))},Ms=e=>{for(let[t,s]of k.$request)e!==t&&(s.abort(),g(3,`Pending request aborted: ${t}`))},Jn=e=>{if(a.config.preload!==null){if(Array.isArray(a.config.preload)){let t=a.config.preload.filter(s=>{let r=q(s,3);return r.key!==s?_(B(r)):!1});return Promise.allSettled(t)}else if(typeof a.config.preload=="object"&&K(a.config.preload,e.key)){let t=a.config.preload[e.key].map(s=>_(B(q(s,3))));return Promise.allSettled(t)}}},dr=async e=>{if(e.rev===e.key)return;let t=B(q(e.rev,4));await pn(),_(t).then(s=>{s?g(2,`Reverse fetch completed: ${s.rev}`):g(3,`Reverse fetch failed: ${e.rev}`)})},Bt=async e=>{if(!k.$transit.has(e.key))return e;let t=await k.$transit.get(e.key);return k.$transit.delete(e.key),delete k.$timeout[e.key],zt(e,t)},_=async e=>k.$request.has(e.key)&&e.type!==7?(e.type===4&&k.$request.has(e.rev)?(k.$request.get(e.rev).abort(),g(3,`Request aborted: ${e.rev}`)):g(3,`Request in transit: ${e.key}`),!1):Q("fetch",e)?(k.$transit.set(e.key,lt(e.key)),Bt(e)):(g(3,`Request cancelled via dispatched event: ${e.key}`),!1),Tt=(e,t,s)=>{e[s]!==t[s]&&(e[s]=t[s],e[s]?e.setAttribute(s,C):e.removeAttribute(s))},Zn=(e,t)=>{if(t.nodeType===11||e.nodeType===11)return;let s=t.attributes,r=e.getAttribute(a.qs.$ref),n=t.getAttribute(a.qs.$ref),i=!1,o,c,l,f,h;for(let d=s.length-1;d>=0;d--)o=s[d],c=o.name,f=o.value,l=o.namespaceURI,l?(c=o.localName||c,h=e.getAttributeNS(l,c),h!==f&&(o.prefix==="xmlns"&&(c=o.name),e.setAttributeNS(l,c,f))):(h=e.getAttribute(c),h!==f&&(e.setAttribute(c,f),!r&&!n&&!i&&(i=we(c))));let u=e.attributes;for(let d=u.length-1;d>=0;d--)u[d]!==void 0&&(o=u[d],c=o.name,f=o.value,l=o.namespaceURI,l?(c=o.localName||c,t.hasAttributeNS(l,c)||e.removeAttributeNS(l,c)):(t.hasAttribute(c)||e.removeAttribute(c),i||(i=we(c))));(r||n||i)&&Cn(e,t,r,n)},Qn=(e,t)=>{let s=e.parentNode;if(s){let r=s.nodeName.toUpperCase();r==="OPTGROUP"&&(s=s.parentNode,r=s&&s.nodeName.toUpperCase()),r==="SELECT"&&!s.hasAttribute("multiple")&&(e.hasAttribute("selected")&&!t.selected&&(e.setAttribute("selected","selected"),e.removeAttribute("selected")),s.selectedIndex=-1)}Tt(e,t,"selected")},ei=(e,t)=>{Tt(e,t,"checked"),Tt(e,t,"disabled"),e.value!==t.value&&(e.value=t.value),t.hasAttribute("value")||e.removeAttribute("value")},hr=(e,t)=>{let{value:s}=t;e.value!==s&&(e.value=s);let{firstChild:r}=e;if(r){let{nodeValue:n}=r;if(n===s||!s&&n===e.placeholder)return;r.nodeValue=s}},ti=(e,t)=>{if(!t.hasAttribute("multiple")){let s=0,r=-1,n=e.firstElementChild,i,o;for(;n;)if(o=n.nodeName&&n.nodeName.toUpperCase(),o==="OPTGROUP")i=n,n=i.firstElementChild;else{if(o==="OPTION"){if(n.hasAttribute("selected")){r=s;break}s++}n=n.nextElementSibling,!n&&i&&(n=i.nextElementSibling,i=null)}e.selectedIndex=r}},si=(e,t)=>!t||t==="http://www.w3.org/1999/xhtml"?document.createElement(e):document.createElementNS(t,e),Ge=(e,t)=>{if(e===t)return!0;let s=e.charCodeAt(0),r=t.charCodeAt(0);return s<=90&&r>=97?e===t.toUpperCase():r<=90&&s>=97?t===e.toUpperCase():!1},ri=(e,t)=>{switch(e.nodeName){case"INPUT":ei(e,t);break;case"OPTION":Qn(e,t);break;case"SELECT":ti(e,t);break;case"TEXTAREA":hr(e,t);break}},ie=e=>e&&"getAttribute"in e?e.getAttribute("id"):void 0,ni=(e,t)=>{let s=e.firstChild,r;for(;s;)r=s.nextSibling,t.appendChild(s),s=r;return t},Je=(e,t,s,r=!0)=>{Ke(e),t&&t.removeChild(e),ur(e,r,s)},ii=e=>{e.nodeType===1&&e.hasAttribute(a.qs.$node)&&Nn(e)},oi=(e,t,s)=>{let r=t.firstChild,n,i,o=e.firstChild,c,l,f,h;e:for(;r;){for(n=ie(r),i=r.nextSibling;o;){if(f=o.nextSibling,r.isEqualNode(o)){ii(o),r=i,o=f;continue e}c=ie(o),l=o.nodeType;let u;if(l===r.nodeType&&(l===1?(n?n!==c&&((h=s.$lookup.get(n))?f&&f.isEqualNode(h)?u=!1:(e.insertBefore(h,o),c?s.$remove.add(c):Je(o,e,s),o=h,c=ie(o)):u=!1):c&&(u=!1),u=u!==!1&&Ge(o.nodeName,r.nodeName),u&&Ze(o,r,s)):(l===3||l===8)&&(u=!0,o.nodeValue!==r.nodeValue&&(o.nodeValue=r.nodeValue))),u){r=i,o=f;continue e}c?s.$remove.add(c):Je(o,e,s),o=f}n&&(h=s.$lookup.get(n))&&Ge(h.nodeName,r.nodeName)?(e.appendChild(h),Ze(h,r,s)):(r.actualize&&(r=r.actualize(e.ownerDocument||document)),e.appendChild(r),Ot(r,s)),r=i,o=f}ai(e,o,c,s),ri(e,t)},Ze=(e,t,s)=>{let r=ie(t);if(r&&s.$lookup.delete(r),e.isEqualNode(t))return;let n=e.getAttribute(a.qs.$morph);n!=="false"&&(n!=="children"&&Zn(e,t),e.nodeName==="TEXTAREA"?hr(e,t):oi(e,t,s))},ur=(e,t,s)=>{if(e.nodeType!==1)return;let r=e.firstChild;for(;r;){let n;t&&(n=ie(r))?s.$remove.add(n):(Ke(r),r.firstChild&&ur(r,t,s)),r=r.nextSibling}},Ot=(e,t)=>{(e.nodeType===1||e.nodeType===11)&&En(e);let s=e.firstChild;for(;s;){let r=s.nextSibling,n=ie(s);if(n){let i=t.$lookup.get(n);i&&Ge(s.nodeName,i.nodeName)?(s.parentNode.replaceChild(i,s),Ze(i,s,t)):Ot(s,t)}else Ot(s,t);s=r}},ai=(e,t,s,r)=>{for(;t;){let n=t.nextSibling;(s=ie(t))?r.$remove.add(s):Je(t,e,r),t=n}},pr=(e,t)=>{if(e.nodeType===1||e.nodeType===11){let s=e.firstChild;for(;s;){let r=ie(s);r&&t.$lookup.set(r,s),pr(s,t),s=s.nextSibling}}},Qe=(e,t)=>{let s=t.cloneNode(!0),r=b({$remove:fe(),$lookup:X()});s.nodeType===11&&(s=s.firstElementChild),pr(e,r);let n=e,i=n.nodeType,o=s.nodeType;if(i===1)o===1?Ge(e.nodeName,s.nodeName)||(Ke(e),n=ni(e,si(s.nodeName,s.namespaceURI))):n=s;else if(i===3||i===8){if(o===i)return n.nodeValue!==s.nodeValue&&(n.nodeValue=s.nodeValue),n;n=s}if(n.isEqualNode(s))Ke(e);else{if(s.isEqualNode(n))return n;if(Ze(n,s,r),r.$remove.size>0){for(let c of r.$remove)if(r.$lookup.has(c)){let l=r.$lookup.get(c);Je(l,l.parentNode,r,!1)}}}return n!==e&&e.parentNode&&(n.actualize&&(n=n.actualize(e.ownerDocument||document)),e.parentNode.replaceChild(n,e)),r.$lookup.clear(),r.$remove.clear(),n},Vt=(e,t)=>{if(!(e instanceof Element))return!1;let s=e.closest(t);return s&&s.tagName==="A"?s:!1},Xt=e=>{if(e.nodeName!=="A")return 2;let t=e.getAttribute("href");if(!t||!ar(t))return 2;let s=z(t);return s===null||U(s)?2:1},ci=(e,t)=>{let s=[];return de(e,r=>{if(r.nodeName!=="A")de(t,n=>Xt(n)===1?s.push(n):null);else if(r.hasAttribute("href")&&ar(r.href)){let n=z(r.href);z(n)!==null&&U(n)===!1&&s.push(r)}}),s},Kt=e=>{let t=[];return de(e,s=>Xt(s)===1?t.push(s):null),t},gr=e=>{let t=Vt(e.target,a.qs.$hover);if(!t)return;let s=q(t,10);if(U(s.key)||s.key in k.$timeout)return;t.addEventListener(`${R}leave`,mr,{once:!0});let r=B(s),n=r.threshold||a.config.hover.threshold;fr(s.key,function(){Q("prefetch",t,s)&&_(r).then(function(){delete k.$timeout[s.key],vr(t)})},n)},mr=e=>{let t=Vt(e.target,a.qs.$hover);t&&lr(z(t.href))},li=e=>e.addEventListener(`${R}enter`,gr),vr=e=>{e.removeEventListener(`${R}enter`,gr),e.removeEventListener(`${R}leave`,mr)},yr=()=>{!a.config.hover||a.observe.hover||(Y(li,Kt(a.qs.$hover)),a.observe.hover=!0)},Ut=()=>{a.observe.hover&&(Y(vr,Kt(a.qs.$hover)),a.observe.hover=!1)},le,fi=async e=>{if(e.isIntersecting){let t=q(e.target,11);if(!Q("prefetch",e.target,t))return le.unobserve(e.target);await _(B(t))?le.unobserve(e.target):(g(3,`Prefetch will retry at next intersect for: ${t.key}`),le.observe(e.target))}},br=()=>{if(!a.config.intersect||a.observe.intersect)return;le||(le=new IntersectionObserver(Y(fi),a.config.intersect));let e=Y(s=>le.observe(s)),t=ci(a.qs.$intersector,a.qs.$intersect);e(t),a.observe.intersect=!0},Yt=()=>{a.observe.intersect&&(le.disconnect(),a.observe.intersect=!1)},di=e=>{let t=M().querySelectorAll(`${a.page.target.join(",")},[${a.qs.$target}]`);for(let s=0,r=t.length;s<r;s++)if(t[s].contains(e))return!1;return!0},et=new MutationObserver(function([e]){if(e.type!=="childList")return;let t=e.addedNodes.length;if(t||e.removedNodes.length>0){let s=t?e.addedNodes[0]:e.removedNodes[0];if(s.nodeType!==1)return;a.eval&&In.test(s.nodeName)?s.parentNode.nodeName==="HEAD"?Ss(t?"appendChild":"removeChild",s):di(s)&&!a.resources.has(s)?a.resources.add(s):a.resources.delete(s):s instanceof HTMLElement&&t&&!s.hasAttribute(a.qs.$ref)&&Wt(s)}}),$r=()=>{a.observe.mutations&&(et.observe(document.head,{childList:!0}),et.observe(M(),{childList:!0,subtree:!0}),a.observe.mutations=!0)},wr=()=>{if(a.observe.mutations){et.takeRecords(),et.disconnect();for(let e of a.resources)M().removeChild(e),a.resources.delete(e);a.observe.mutations=!1}},hi=({clientX:e,clientY:t},s)=>e<=s.right&&e>=s.left&&t<=s.bottom&&t>=s.top,ui=e=>{let t=e.getBoundingClientRect(),s=e.getAttribute(a.qs.$proximity),r=rr.test(s)?Number(s):a.config.proximity.distance;return{target:e,top:t.top-r,bottom:t.bottom+r,left:t.left-r,right:t.right+r}},pi=(e,t=!1)=>s=>{if(t)return;t=!0;let r=e.findIndex(n=>hi(s,n));if(r===-1)Ae(()=>t=!1,a.config.proximity.throttle);else{let{target:n}=e[r];if(Xt(n)===2)e.splice(r,1);else{let i=B(q(n,12)),o=i.threshold||a.config.proximity.threshold;fr(i.key,async()=>{if(!Q("prefetch",n,i))return Pe();await _(i)&&(e.splice(r,1),t=!1,e.length===0&&(Pe(),g(2,"Proximity observer disconnected")))},o)}}},Pt,xr=()=>{if(!a.config.proximity||a.observe.proximity)return;let t=Kt(a.qs.$proximity).map(ui);t.length>0&&(Pt=pi(t),addEventListener(`${R}move`,Pt,{passive:!0}),a.observe.proximity=!0)},Pe=()=>{a.observe.proximity&&(removeEventListener(`${R}move`,Pt),a.observe.proximity=!1)},gi=async(e,t)=>{if(!a.eval||!e.children||!t.children)return;let s=e.children,r=fe(),n=t.children,i=[];for(let l=0,f=n.length;l<f;l++)ks(n[l])&&r.add(n[l].outerHTML);for(let l=0,f=s.length;l<f;l++){let h=s[l],u=ks(h),d=h.outerHTML;r.has(d)?u?i.push(h):r.delete(d):u&&i.push(h)}let o=[],c=document.createRange();for(let l of r){let f=c.createContextualFragment(l).firstChild;if(K(f,"href")||K(f,"src")){let h,u=new Promise(d=>h=d);f.addEventListener("load",()=>h()),f.addEventListener("error",d=>{g(3,`Resource <${f.nodeName.toLowerCase()}> failed:`,d),h()}),o.push(u)}e.appendChild(f),r.delete(l)}for(let l=0,f=i.length;l<f;l++)e.removeChild(i[l]);await Promise.allSettled(o)},mi=(e,t)=>{let s=M();if(e.selector==="body"||e.fragments.length===0)Qe(s,t.body);else{let r=e.target.length>0?a.fragments.keys():e.fragments,n=a.components.$registry.size>0;for(let i of r){let o=a.fragments.get(i),c=t.body.querySelector(i);if(!(!c||!o)&&Q("render",o,c))if(Qs.has(c.id))c.setAttribute(a.qs.$ref,o.getAttribute(a.qs.$ref));else{if(o.isEqualNode(c))continue;n&&Te.set(c),Qe(o,c)}}}if(S&&Te.sync(t,e.key),e.type!==6&&ct("type",6),e.location.hash!==C){let r=s.querySelector(e.location.hash);r&&r.scrollIntoView()}scrollTo(e.scrollX,e.scrollY)},Z=e=>{Ut(),Yt(),Pe(),wr(),Ht(),ir(),a.eval===!1&&(document.title=e.title);let t=qe(e.snap);return gi(ln(),t.head),mi(e,t),tt.done(),yr(),br(),xr(),rt(),$r(),Q("load",e),e},E=window.history,vi=()=>E.state!==null&&"spx"in E.state&&"rev"in E.state.spx&&E.state.spx.key!==E.state.spx.rev,Ar=e=>{if(E.state===null||typeof E.state!="object"||!("spx"in E.state))return!1;let t=zs(E.state.spx)(["key","rev","scrollX","scrollY","title","target"]);return typeof e=="string"?t&&E.state.spx.key===e:t},yi=async()=>{await Ws(),a.loaded=!0},bi=e=>(Ar(e.key)?(Object.assign(e,E.state.spx),scrollTo(E.state.spx.scrollX,E.state.spx.scrollY)):ke(e),e),ke=({key:e,rev:t,title:s,scrollX:r,scrollY:n,target:i})=>(E.replaceState({spx:b({key:e,rev:t,scrollX:r,scrollY:n,target:i,title:s||document.title})},s,e),g(1,`History replaceState: ${e}`),E.state.spx),Ie=({key:e,rev:t,title:s,scrollX:r,scrollY:n,target:i})=>(E.pushState({spx:b({key:e,rev:t,scrollX:r,scrollY:n,target:i,title:s||document.title})},s,e),g(1,`History pushState: ${e}`),E.state.spx),kr=async e=>{if(e.state===null||!("spx"in e.state))return;let{spx:t}=e.state;if(U(t.key)){!U(t.rev)&&t.rev!==t.key&&dr(t),ct("type",5,t.key);let{type:s,key:r}=Z(a.pages[t.key]);s===4?g(1,`History popState reverse: ${r}`):g(1,`History popState session: ${r}`)}else{g(1,`History popState fetch: ${t.key}`),t.type=5;let s=await _(t);if(!s)return location.assign(t.key);let r=z(location);if(s.key===r)g(1,`History popState fetch Complete: ${t.key}`,"#2cc9ee"),s.target=[],s.selector=null,Z(s);else if(U(r))Z(a.pages[r]);else{let n=B(q(r,5)),i=await _(n);i&&Ie(i)}}},$i=e=>{if(!a.observe.history)return addEventListener("popstate",kr,!1),a.observe.history=!0,typeof e=="object"&&e.type===0?bi(e):e},wi=()=>{a.observe.history&&(E.scrollRestoration&&(E.scrollRestoration="auto"),removeEventListener("popstate",kr,!1),removeEventListener("load",yi,!1),a.observe.history=!1)},xi=e=>{for(let t of["hover","intersect","proximity","progress"])K(e,t)&&(e[t]===!1?a.config[t]=!1:typeof e[t]=="object"&&Object.assign(a.config[t],e[t]),delete e[t]);return e},Ne=(e,t)=>{let s=`:not([${e}${t}=false]):not([${e}link])`;switch(t.charCodeAt(0)){case 104:return`${s}:not([${e}proximity]):not([${e}intersect])`;case 105:return`${s}:not([${e}hover]):not([${e}proximity])`;case 112:return`${s}:not([${e}intersect]):not([${e}hover])`}},Ai=(e,t,s)=>{if("eval"in e)if(e.eval){if(typeof e.eval=="object"){let r=Object.assign(a.config.eval,e.eval);a.eval=!(r.link===!1&&r.meta===!1&&r.script===!1&&r.style===!1)}}else a.eval=!1;return r=>{if(a.eval===!1||a.config.eval[r]===!1)return`${r}[${t}eval]:${s}`;if(a.config.eval[r]===!0)return`${r}:${s}`;let n=r==="link"?`${r}[rel=stylesheet]:${s}`:r==="script"?`${r}:${s}:not([${t}eval=hydrate])`:`${r}:${s}`;if(a.config.eval[r]===null)return n;if(Array.isArray(a.config.eval[r]))return a.config.eval[r].length>0?a.config.eval[r].map(i=>`${i}:${s}`).join(","):(g(3,`Missing eval ${r} value, SPX will use defaults`),n);g(4,`Invalid eval ${r} value, expected boolean or array`)}},ki=e=>{let t=[];if("fragments"in e&&Array.isArray(e.fragments)&&e.fragments.length>0)for(let s of e.fragments){let r=s.charCodeAt(0);if(r===46||r===91){g(3,[`Invalid fragment selector "${s}" provided. Fragments must be id annotated values.`,"Use spx-target attributes for additional fragment selections."]);continue}else r===35?t.push(s.trim()):t.push(`#${s.trim()}`)}else return["body"];return t},Li=(e=b())=>{"logLevel"in e&&(a.logLevel=e.logLevel,a.logLevel===1&&g(1,"Verbose Logging")),$n(),Object.defineProperties(a,{history:{get:()=>typeof E.state=="object"&&"spx"in E.state?E.state.spx:null},ready:{get:()=>document.readyState==="complete"},types:{get:()=>b({INITIAL:0,PREFETCH:1,FETCH:2,PRELOAD:3,REVERSE:4,POPSTATE:5,VISIT:6,HYDRATE:7,CAPTURE:8,RELOAD:9,HOVER:10,INTERSECT:11,PROXIMITY:12})}}),"components"in e&&(me(e.components),delete e.components),Object.assign(a.config,xi(e));let t=a.config.schema,s=t==="spx"?"spx":t.endsWith("-")?t:t===null?C:`${t}-`,r=`:not([${s}disable]):not([href^=\\#])`,n=`not([${s}eval=false])`,i=Ai(e,s,n);a.config.fragments=ki(e),a.config.schema=s,a.config.index=null,a.memory.bytes=0,a.memory.visits=0,a.memory.limit=a.config.maxCache,Object.assign(a.qs,{$attrs:new RegExp(`^href|${s}(hydrate|append|prepend|target|progress|threshold|scroll|position|proximity|hover|cache|history)$`,"i"),$find:new RegExp(`${s}(?:node|bind|component)|@[a-z]|[a-z]:[a-z]`,"i"),$param:new RegExp(`^${s}[a-zA-Z0-9-]+:`,"i"),$target:`${s}target`,$fragment:`${s}fragment`,$fragments:`[${s}fragment]`,$targets:`[${s}target]:not(a[spx-target]):not([${s}target=false])`,$morph:`${s}morph`,$eval:`${s}eval`,$intersector:`[${s}intersect]${Ne(s,"intersect")}`,$track:`[${s}track]:not([${s}track=false])`,$component:`${s}component`,$node:`${s}node`,$bind:`${s}bind`,$ref:"data-spx",$href:a.config.annotate?`a[${s}link]${r}`:`a${r}`,$script:i("script"),$style:i("style"),$link:i("link"),$meta:i("meta"),$hydrate:`script[${s}eval=hydrate]:${n}`,$resource:`link[rel=stylesheet][href*=\\.css]:${n},script[src*=\\.js]:${n}`,$data:`${s}data:`,$proximity:`a[${s}proximity]${r}${Ne(s,"proximity")}`,$intersect:`a${r}${Ne(s,"intersect")}`,$hover:a.config.hover!==!1&&a.config.hover.trigger==="href"?`a${r}${Ne(s,"hover")}`:`a[${s}hover]${r}${Ne(s,"hover")}`}),tt.style(a.config.progress)},Ei=e=>!(e.target&&e.target.isContentEditable||e.defaultPrevented||e.button>1||e.altKey||e.ctrlKey||e.metaKey||e.shiftKey),I=function(e){if(!Ei(e))return;let t=Vt(e.target,a.qs.$href);if(!t)return;let s=z(t.href);if(s===null)return;let r=s===a.page.key,n=()=>{g(3,`Drag occurance, visit cancelled: ${s}`),I.drag=!0,t.removeEventListener(`${R}move`,n)};if(t.addEventListener(`${R}move`,n,{once:!0}),I.drag===!0)return I.drag=!1,I(e);if(t.removeEventListener(`${R}move`,n),!Q("visit",e))return;let i=(o,c=!0)=>{a.pages[o.key].ts=Ds(),a.pages[o.key].visits=o.visits+1,a.pages[o.key].target=a.pages[o.rev].target=o.target,a.pages[o.key].selector=a.pages[o.rev].selector=o.selector,a.pages[o.rev].scrollX=window.scrollX,a.pages[o.rev].scrollY=window.scrollY,r?g(2,`Identical pathname, page visit skipped: ${s}`):(ke(a.pages[o.rev]),c?(Ie(o),Z(o)):Lr(o))};if(Ut(),Pe(),Yt(),U(s)){let o=or(t,a.pages[s]),c=xe(o);t.onclick=l=>{l.preventDefault(),i(c)}}else if(k.$transit.has(s)){Ms(s),g(2,`Request in transit: ${s}`);let o=a.pages[s];t.onclick=c=>{c.preventDefault(),i(o,!1)}}else{Ms(),lr(s);let o=B(q(t,6));_(o),t.onclick=c=>{c.preventDefault(),i(o,!1)}}};async function Lr(e){e.progress&&tt.start(e.progress);try{let t=await Bt(e);t?(t.history==="replace"?ke(t):Ie(t),Z(t)):location.assign(e.key)}catch(t){location.assign(e.key)}}var qs=async(e,t)=>{if(t){typeof t.cache=="string"&&(t.cache==="clear"?Oe():Oe(t.key)),t.progress&&tt.start(t.progress);let s=await _(t);s?(Ie(s),Z(s)):location.assign(t.key)}else return Lr(a.pages[e])},Ni=()=>{a.observe.hrefs||(I.drag=!1,Be==="mouseOnly"?addEventListener(`${R}down`,I,!1):(Be==="touchOnly"||addEventListener(`${R}down`,I,!1),addEventListener("touchstart",I,!1)),a.observe.hrefs=!0)},Ci=()=>{a.observe.hrefs&&(Be==="mouseOnly"?removeEventListener(`${R}down`,I,!1):(Be==="touchOnly"||removeEventListener(`${R}down`,I,!1),removeEventListener("touchstart",I,!1)),a.observe.hrefs=!1)},Si=()=>{let e=q(0),t=$i(B(e));Fs(a,[["prev",()=>a.pages[a.history.rev]],["page",()=>a.pages[a.history.key]],["snapDom",()=>st(a.snaps[a.page.snap])]]);let s=()=>{let r=zt(t,Se());return Ni(),ir(),yr(),br(),xr(),rt(),$r(),Us(()=>ct("type",6),async()=>await dr(r),async()=>await Jn(r)),r};return new Promise(r=>{document.readyState==="loading"?addEventListener("DOMContentLoaded",()=>r(s())):r(s())})},Ti=()=>{wi(),Ci(),wr(),Ut(),Yt(),Pe(),a.config.components&&(Ht(),tr(),a.components.$registry.clear()),Oe(),a.config.globalThis&&delete window.spx,g(2,"Disconnected")};function x(e={}){if(js===!1)return g(5,"Invalid runtime environment: window is undefined.");if(!x.supported)return g(5,"Browser does not support SPX");if(!window.location.protocol.startsWith("http"))return g(5,"Invalid protocol, SPX expects HTTPS or HTTP protocol");Li(e),a.config.globalThis&&!("spx"in window)&&oe(window,"spx",x);let t=Si();return async function(s){let r=await t;if(s.constructor.name==="AsyncFunction")try{await s(r)}catch(n){g(3,"Connection Error",n)}else s(r);g(2,"Connection Established")}}x.Component=It;x.on=An;x.off=kn;x.component=Er;x.registed=Nr;x.component=Er;x.capture=Ri;x.form=Hi;x.render=Ii;x.session=Pi;x.reload=Mi;x.fetch=qi;x.clear=Oe;x.hydrate=ji;x.prefetch=_i;x.route=Wi;x.disconnect=Ti;x.register=Nr;x.supported=Oi();Object.defineProperties(x,{$:{get:()=>a},history:{value:b({get state(){return a.history},api:E,push:Ie,replace:ke,has:Ar,reverse:vi})}});function Oi(){return!!(js&&window.history.pushState&&window.requestAnimationFrame&&window.DOMParser&&window.Proxy)}function Er(e,t){let s=[];for(let r of a.components.$instances.values()){let{scope:n}=r;(n.instanceOf===e||n.alias===e)&&s.push(r)}return t?Y(t,s):s[0]}function Nr(...e){if(typeof e[0]=="string")e.length>2&&g(5,[`Named component registration expects 2 parameters, recieved ${e.length}.`,'Registry should follow this structure: spx.register("identifer", YourComponent)'],e),me({[Zs[0]]:e[1]});else for(let t of e)if(Array.isArray(t))for(let s of t)typeof s[0]=="string"?me({[s[0]]:s[1]}):typeof s=="function"&&me({[At(s)]:s},!0);else typeof t=="function"?me({[At(t)]:t},!0):typeof t=="object"&&me(t);rt()}function Pi(){return Object.defineProperties(b(),{config:{get:()=>a.config},snaps:{get:()=>a.snaps},pages:{get:()=>a.pages},observers:{get:()=>a.observe},components:{get:()=>a.components},fragments:{get:()=>a.fragments},memory:{get:()=>a.memory.size=yn(a.memory.bytes)}})}async function Mi(){a.page.type=9;let e=await _(a.page);return e?(g(2,"Triggered reload, page was re-cached"),Z(e)):(g(3,"Reload failed, triggering refresh (cache will purge)"),location.assign(a.page.key))}async function qi(e){let t=q(e,2);t.location.origin!==Me&&g(5,"Cross origin fetches are not allowed");let s=await lt(t.key);if(s)return s}async function Ii(e,t,s){let r=a.page,n=q(e);n.location.origin!==Me&&g(5,"Cross origin fetches are not allowed");let i=await lt(n.key,{type:"document"});if(i||g(5,`Fetch failed for: ${n.key}`,i),await s.call(r,i),t==="replace"){r.title=i.title;let o=xe(Object.assign(r,n),Se(i));return ke(o),o}else return Z(zt(n,Se(i)))}function Ri(e){let t=Un();if(!t)return;let s=qe();if(e=Array.isArray(e)?e:t.target,e.length===1&&e[0]==="body"){Qe(s.body,M()),xe(t,Se(s));return}let r=e.join(","),n=M().querySelectorAll(r);de(s.body.querySelectorAll(r),(i,o)=>{Qe(i,n[o])}),xe(t,Se(s))}async function _i(e){let t=q(e,1);if(U(t.key)){g(3,`Cache already exists for ${t.key}, prefetch skipped`);return}let s=await _(B(t));if(s)return s;g(5,`Prefetch failed for ${t.key}`)}async function Hi(e,t){let s=new FormData;for(let n in t.data)s.append(n,t.data[n]);return await lt(e,{method:t.method,body:s})}async function ji(e,t){let s=q(e,7);if(_(s),Array.isArray(t)){s.hydrate=[],s.preserve=[];for(let n of t)n.charCodeAt(0)===33?s.preserve.push(n.slice(1)):s.hydrate.push(n)}else s.hydrate=a.config.fragments;let r=await Bt(s);if(r){let{key:n}=a.history;if(ke(r),Z(r),s.key!==n){a.index===n&&(a.index=s.key);for(let i in a.pages)a.pages[i].rev===n&&(a.pages[i].rev=s.key);Oe(n)}}return qe(r.key)}async function Wi(e,t){let s=q(e),r=typeof t=="object"?Object.assign(s,t):s;return U(s.key)?qs(s.key,xe(r)):qs(s.key,B(r))}var w=function(e){if(Array.isArray(e))return e.forEach(w);if(!("id"in e)){for(let r of["onenter","onexit","oninit","onresize"])if(r in e)throw new Error('qvp: Missing an "id" reference');return Object.entries(e).forEach(([r,n])=>{let i=typeof e[r];if(i==="string")return w({id:r,query:n});throw new TypeError(`qvp: Invalid query type. Expected "string" received "${i}"`)})}let t=Di(e),{id:s}=t.screen;w.viewports.size||addEventListener("resize",Cr(()=>{w.viewports.forEach(r=>{r.screen.active&&r.onresize(window.innerWidth)})},25),!0),w.viewports.has(s)?console.warn(`qvp: The id "${s}" is already defined, use qvp.add() instead.`):w.viewports.set(s,t)};w.viewports=new Map;Object.defineProperty(w,"isTouch",{get(){return"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0}});w.get=e=>w.viewports.has(e)?w.viewports.get(e):!1;w.add=(e,t)=>{let s=w.get(e);if(s===!1)return console.error(`qvp: There is no viewport using an id of "${e}"`);dt(t,s.screen),s.screen.test.matches&&s.onenter()};w.off=(e,t)=>{let s=w.get(e.split(":")[0]);if(s===!1||!(e in s.events))return;let r=s.events[e].length;if(typeof t=="number")t<=r-1&&s.events[e].splice(t,1);else if(typeof t=="function"){let n=[];for(let i=0;i<r;i++)s.events[e][i]!==t&&n.push(s.events[e][i]);n.length>0&&(s.events[e]=n)}else delete s.events[e]};w.on=(e,t,s)=>{let[r,n]=e.split(":"),i=w.get(r);if(i===!1)return;e in i.events||(i.events[e]=[]);let o=s?t.bind(s):t;return o["qvp:event"]=i.events[e].length,i.events[e].push(o),i.screen.test.matches?n==="oninit"?o.call():(n==="onenter"&&o.call(),dt({[n]:o},i.screen)):dt({[n]:o},i.screen),o["qvp:event"]};w.list=e=>{let t=Array.from(w.viewports.values()).map(({screen:s})=>s);return e?t.filter(({id:s})=>e.includes(s)):t};w.active=e=>{let t=w.list();if(e){let r=w.get(e);return r?r.screen.active:!1}let s=t.filter(({active:r})=>r===!0);return s.length>1?s:s[0]};w.test=(e,t=",")=>typeof e=="string"?e.indexOf(t)>-1?e.split(t).some(w.active):!!w.active(e):e.some(w.active);w.remove=e=>{w.viewports.has(e)&&(w.viewports.get(e).destroy(),w.viewports.delete(e))};w.destroy=()=>{removeEventListener("resize",Cr()),w.viewports.forEach(e=>e.destroy()),w.viewports.clear()};w.screens=()=>{throw Error("qvp: The qvp.screens() is deprecated, use the default import, e.g: qvp(...)")};function Cr(e,t){let s=t;return function(){let r=()=>{s=null,e.apply(this,arguments)};s&&cancelAnimationFrame(s),s=requestAnimationFrame(r)}}function dt(e,t){typeof e.onenter=="function"&&("qvp:event"in e.onenter||(e.onenter["qvp:event"]=NaN),t.onenter.add(e.onenter)),typeof e.onexit=="function"&&("qvp:event"in e.onexit||(e.onexit["qvp:event"]=NaN),t.onexit.add(e.onexit)),typeof e.onresize=="function"&&("qvp:event"in e.onresize||(e.onresize["qvp:event"]=NaN),t.onresize.add(e.onresize)),typeof e.oninit=="function"&&("qvp:event"in e.oninit||(e.oninit["qvp:event"]=NaN),t.oninit.add(e.oninit))}function ft(e,...t){let s=w.get(e.split(":")[0]);if(s!==!1&&e in s.events)for(let r=0;r<s.events[e].length&&(s.events[e][r].apply(null,t),e.endsWith(":oninit")&&w.off(e,r),e in s.events);r++);}function Di(e){let t=e.query||"all",s={id:e.id,query:t,active:!1,test:matchMedia(t),onenter:new Set,onexit:new Set,onresize:new Set,oninit:new Set,events:Object.create(null)};dt(e,s);let r=()=>{s.oninit.size>0&&(s.oninit.forEach(l=>!isNaN(l["qvp:event"])||l()),ft(`${e.id}:oninit`),s.oninit.clear()),s.onenter.forEach(l=>!isNaN(l["qvp:event"])||l()),ft(`${e.id}:onenter`),s.active=!0},n=()=>{s.onexit.forEach(l=>!isNaN(l["qvp:event"])||l()),ft(`${e.id}:onexit`),s.active=!1},i=l=>{s.onresize.forEach(f=>!isNaN(f["qvp:event"])||f()),ft(`${e.id}:onresize`,l)},o=({matches:l})=>l?r():n(),c=()=>{for(let l in s.events)delete s.events[l];s.test.removeEventListener("change",o)};return s.test.addEventListener("change",o),s.test.matches&&r(),{onenter:r,onexit:n,onresize:i,destroy:c,get screen(){return s},get events(){return s.events}}}var Sr=w;var he=class extends x.Component{constructor(){super(...arguments);this.transition=s=>{if(s.propertyName==="transform"){if(this.state.hasShift)for(let r of this.shifts)r.classList.contains(this.shiftClass)&&(r.classList.remove(this.shiftClass),r.style.removeProperty("transform"));this.state.hasBackdropClass&&this.dom.backdropNode.classList.contains(this.state.backdropClass)&&this.dom.backdropNode.classList.remove(this.state.backdropClass),this.state.mode==="pull"?this.shifts.item(0).removeEventListener(s.type,this.transition):this.target.removeEventListener(s.type,this.transition)}};this.outsideClick=s=>{s.target!==this.target&&(this.close(),document.body.removeEventListener("click",this.outsideClick,!1))};this.toggle=s=>(s&&s.preventDefault(),this.state.isOpen=!this.state.isOpen,this.state.isOpen?this.open():this.close(),this.state.isOpen?this.open():this.close());this.touchMove=s=>{this.state.isOpen&&this.target.scrollHeight<=this.target.clientHeight&&s.preventDefault()};this.keyboard=s=>{switch(s.code){case"Esc":case"Escape":this.close();break}}}get directionClass(){return`drawer-${this.state.direction}`}get shiftClass(){return`drawer-${this.state.mode}`}get shifts(){return document.querySelectorAll(this.state.shift)}connect(){console.log(this.root),this.state.useParent?(this.target=this.root.parentElement,this.target.ariaHidden="true"):this.target=this.root,this.target.classList.contains("d-none")&&this.target.classList.remove("d-none"),this.state.mode!=="overlay"&&this.state.hasShift===!1&&console.error('Missing "data-drawer-shift-value" defintions on:',this.target),x.on("load",this.close,this)}onmount(){this.state.hasWidth&&this.target.style.setProperty("width",this.state.width),this.state.hasHeight&&this.target.style.setProperty("height",this.state.height),this.state.hasDirection&&this.target.classList.contains(this.directionClass)===!1&&this.target.classList.add(this.directionClass),this.state.mode==="pull"&&(this.target.style.setProperty("transform","translateX(0)"),this.target.style.setProperty("z-index","0")),this.html.classList.contains("drawer-open")&&this.html.classList.remove("drawer-open"),this.state.isOpen&&(Sr.test(["lg","xl","xxl"])?this.close():setTimeout(this.close.bind(this),200))}open(){this.target.classList.contains("drawer-active")||this.target.classList.add("drawer-active"),this.state.hasBackdropClass&&!this.dom.backdropNode.classList.contains(this.state.backdropClass)&&this.dom.backdropNode.classList.add(this.state.backdropClass),this.state.bodyScroll===!1&&document.body.style.setProperty("overflow","hidden"),this.state.hasShift&&this.shiftNodeElms(),this.state.hasWidth&&(this.state.direction==="top"?this.dom.backdropNode.style.setProperty("transform",`translateY(-${this.state.offset})`):this.dom.backdropNode.style.setProperty("transform",`translateX(-${this.state.width})`)),this.html.classList.add("drawer-open"),this.dom.backdropNode.addEventListener("click",this.toggle,{once:!0}),this.target.addEventListener("touchstart",this.touchStart,{passive:!0}),this.target.ariaHidden="false"}close(){this.state.isOpen&&(this.state.isOpen=!1),this.state.hasWidth&&this.dom.backdropNode.style.removeProperty("transform"),this.state.bodyScroll===!1&&document.body.style.removeProperty("overflow"),this.state.hasShift?this.shiftNodeElms():this.target.addEventListener("transitionend",this.transition),this.html.classList.remove("drawer-open"),this.target.removeEventListener("touchstart",this.touchStart),this.dom.backdropNode.removeEventListener("click",this.toggle),this.target.classList.remove("drawer-active"),this.target.ariaHidden="true"}shiftNodeElms(){this.state.mode==="pull"?(this.target.style.setProperty("transform","translateX(0)"),this.target.style.setProperty("z-index","0"),this.state.isOpen===!1&&this.shifts.item(0).addEventListener("transitionend",this.transition)):this.state.isOpen===!1&&this.target.addEventListener("transitionend",this.transition);for(let s of this.shifts)this.state.isOpen?(s.classList.contains(this.shiftClass)||s.classList.add(this.shiftClass),this.state.hasWidth&&(this.state.direction==="left"||this.state.direction==="right")?s.style.setProperty("transform",`translateX(-${this.state.width})`):this.state.hasHeight&&(this.state.direction==="top"||this.state.direction==="bottom")&&s.style.setProperty("transform",`translateY(-${this.state.height})`)):this.state.hasWidth&&(this.state.direction==="left"||this.state.direction==="right")?s.style.setProperty("transform","translateX(0)"):this.state.hasHeight&&(this.state.direction==="top"||this.state.direction==="bottom")&&s.style.setProperty("transform","translateY(0)")}touchStart({target:s}){let{scrollTop:r,offsetHeight:n}=s,i=r+n;r===0?s.scrollTop=1:i===r&&(s.scrollTop=r-1)}};he.opened=null,he.backdrop=null,he.define={state:{outsideClick:Boolean,height:String,width:String,offset:String,direction:String,shift:String,redraw:String,backdropClass:{typeof:String,default:"backdrop"},useParent:Boolean,isOpen:Boolean,bodyScroll:Boolean,mode:{typeof:String,default:"overlay"}},nodes:["mount","backdrop"]};var P=new Map,H=(e,t=Object.create(null))=>e?Object.assign(t,e):t,zi=class extends Array{constructor(){super(...arguments),this.ref=H(),this.get=e=>{let t=typeof e;if(t==="number")return this[e];if(t==="string"){if(e in this.ref)return this[this.ref[e]];console.error(`Relapse: Unknown fold id: ${e}`)}return this}}},Tr=(e,t)=>e.style.getPropertyValue(t)!=="",O=(e,t,s)=>e.style.setProperty(t,s),ue=(e,t)=>e.classList.add(t),ht=(e,t)=>e.classList.remove(t),Re=(e,t=1)=>{e.ariaExpanded=t===1?"true":"false"},Le=(e,t=1)=>{let s=t===1?"true":"false";e.tagName==="BUTTON"?(e.hasAttribute("aria-disabled")&&e.removeAttribute("aria-disabled"),t===1?e.setAttribute("disabled",s):e.hasAttribute("disabled")&&e.removeAttribute("disabled")):e.ariaDisabled=s},Fi=e=>{let t=H();return t.on=(s,r,n)=>(e[s]||(e[s]=[]),e[s].push(n?r.bind(n):r)-1),t.off=(s,r)=>{let n=e[s],i=`Relapse: Removed ${s} event listener`;if(n&&typeof r=="number")n.splice(r,1),console.warn(`${i} (id: ${r})`),n.length===0&&delete n[s];else{let o=[];if(n&&typeof r=="function")for(let c=0,l=n.length;c<l;c++)n[c]!==r?o.push(n[c]):console.warn(`${i} (id: ${c})`);o.length>0?n[s]=o:delete n[s]}},t.emit=(s,r,n)=>{let i=e[s]||[],o=null;for(let c=0,l=i.length;c<l;c++){let f=i[c].call(r,n);o===null&&f===!1&&(o=!0)}return o},t},Gt=e=>e.folds.filter(({expanded:t})=>t).length,Pr=(e,t,s,r=!0)=>{let n=t.button,i=t.wrapper;O(i,"overflow","hidden"),e.semantic?(t.height=n.offsetHeight,r&&O(i,"will-change","height")):(t.height=0,r&&O(i,"will-change","max-height"));let o=`${t.height}px`;return[o,i,()=>{e.semantic?(O(i,"height",o),i.removeAttribute("open")):O(t.element,"max-height","0"),t.expanded=!1,Re(n,2),ht(n,e.options.classes.opened),ht(i,e.options.classes.expanded),i.style.removeProperty("will-change"),e.opened=Gt(e),e.status=1,s.emit("collapse",e,focus)}]},Bi=(e,t,s)=>{let r=t.options.classes,n=t.options.fade,i=H({easing:n.easing,duration:n.duration*2}),o=u=>{if(typeof u!="number")return t.active!==e.index&&(t.active=e.index),e;if(!t.folds.get(u))throw new Error(`Relapse: No fold exists using id: "${u}"`);return t.active=e.index,t.folds.get(u)},c=(u,d,y)=>{O(u,"will-change","opacity,visibility");let p=u.animate({opacity:d,visibility:y},d[0]==="1"?i:n);p.onfinish=()=>{O(u,"opacity",d[1]),O(u,"visibility",y[1]),u.style.removeProperty("will-change")}},l=(u,d,y)=>{t.status=2;let p=u.animate(t.semantic?{height:d}:{maxHeight:d},t.options.fold);p.onfinish=y},f=u=>{if(u.disabled)return;let[d,y,p]=Pr(t,u,s);c(u.element,["1","0"],["visible","hidden"]),l(y,[`${y.offsetHeight}px`,d],p)},h=u=>d=>{u.close();let y=u.button,p=u.wrapper,m=u.element;Re(y);let L;t.semantic?(p.setAttribute("open",""),O(p,"will-change","height"),O(p,"overflow","hidden"),u.height=y.offsetHeight+m.offsetHeight,L=`${y.offsetHeight}px`):(O(p,"will-change","max-height"),u.height=m.scrollHeight,L="0px"),ue(y,r.opened),c(m,["0","1"],["hidden","visible"]),l(p,[L,`${u.height}px`],()=>{t.semantic?O(p,"height","auto"):O(p,"max-height","inherit"),p.style.removeProperty("overflow"),p.style.removeProperty("will-change"),ue(m,r.expanded),u.expanded=!0,t.opened=Gt(t),t.status=1,t.options.persist&&t.opened>1&&u.disable(),s.emit("expand",t,u)})};e.close=u=>{let d=o(u);if(t.options.multiple)t.options.persist===!0&&t.opened>1?d.expanded===!0&&f(d):t.options.persist===!1&&d.expanded===!0&&f(d);else for(let y of t.folds)if(y.expanded&&y.locked===!1){if(t.options.persist&&y.index===d.index)break;f(y),d=y;break}d.enable(),t.opened=Gt(t)},e.focus=()=>{t.active=e.index,e.button.focus({preventScroll:!0}),s.emit("focus",t,e)},e.enable=u=>{let d=o(u);d.disabled&&!d.locked&&(d.disabled=!1,Le(d.button,2),ht(d.button,r.disabled))},e.disable=u=>{let d=o(u);d.disabled||(d.expanded?t.options.persist&&(d.disabled=!0,Le(d.button)):(d.close(),d.disabled=!0,Le(d.button),ue(d.button,r.disabled)))},e.open=u=>{let d=o(u);t.status===2||d.expanded||requestAnimationFrame(h(d))},e.toggle=u=>{if(t.semantic&&u.preventDefault(),!(t.status===2||s.emit("toggle",t,e)===!1))return e.expanded?e.close():e.open()},e.destroy=()=>{e.button.removeEventListener("click",e.toggle),e.button.removeEventListener("focus",e.focus),e.button.removeEventListener("blur",e.blur)},e.button.addEventListener("click",e.toggle),e.button.addEventListener("focus",e.focus),t.folds.push(e),t.folds.ref[e.element.id]=t.folds.length-1},Vi=e=>typeof e=="object"&&"schema"in e?e.schema:"[data-relapse]",Or=e=>{let t=H({persist:!1,unique:!1,multiple:!1,schema:"data-relapse",fold:H({duration:200,easing:"ease-in-out"}),fade:H({duration:120,easing:"linear"}),classes:H({opened:"opened",disabled:"disabled",expanded:"expanded"})});if(typeof e=="object"){for(let s in e)if(s==="classes"||s==="fade"||s==="fold")for(let r in e[s])t[s][r]=e[s][r];else t[s]=e[s];"fade"in e&&"duration"in e.fade&&e.fade.duration!==t.fade.duration||t.fold.duration!==200&&(t.fade.duration=t.fold.duration-t.fold.duration/2.5)}return t},Xi=(e,t)=>{let s=e.schema.length+1,r=H({fold:H(),fade:H(),classes:H()});for(let{nodeName:n,nodeValue:i}of t){if(!n.startsWith(e.schema))continue;let o=n.slice(s);if(o==="schema"){console.warn('Relapse: The "schema" option cannot be defined via attribute');continue}let c=i.trim(),l=`Invalid ${n} attribute value.`;if(o==="persist"||o==="multiple"||o==="unique")if(c==="true"||c==="false")r[o]=c==="true";else throw new TypeError(`Relapse: ${l}. Boolean expected, received: ${c}`);else if(o==="fold-duration"||o==="fade-duration"){if(isNaN(+c))throw new TypeError(`Relapse: ${l}. Number expected, received: ${c}`);{let[f,h]=o.split("-");r[f][h]=+c}}else if(o.startsWith("class-")||o==="fold-easing"||o==="fade-easing"){let[f,h]=o.split("-");r[f][h]=c}}!("fade"in r&&"duration"in r.fade&&r.fade.duration!==e.fade.duration)&&"fold"in r&&"duration"in r.fold&&r.fold.duration!==e.fold.duration&&(r.fade.duration=r.fold.duration-r.fold.duration/2.5);for(let n in r)if(n==="fold"||n==="classes"||n==="fade")for(let i in r[n])e[n][i]=r[n][i];else e[n]=r[n];return e},Jt=(e,t)=>{if(e===null)return;let s=e,r=s.getAttribute(t.schema);if((r===null||r==="")&&(r=s.hasAttribute("id")?s.id:`R${P.size}`,s.setAttribute(t.schema,r)),P.has(r)){if(P.get(r).options.unique===!1)return;throw new Error(`Relapse: Instance already exists with id: ${r} `)}let n=Xi(t,s.attributes),i=new zi,o=P.set(r,{id:r,semantic:s.firstElementChild.nodeName==="DETAILS",opened:0,status:1,active:NaN,events:H(),get options(){return n},get folds(){return i},get element(){return s},set element(d){s=d,r=s.getAttribute(t.schema)}}).get(r),c=Fi(o.events),l=s.children.length,f=o.semantic?1:2,h=o.options.classes,u=0;do{let d=H({index:o.folds.length,locked:!1}),y=!1,p,m,L,v=o.semantic;if(v){if(L=s.children[u],L.nodeName!=="DETAILS")throw new Error(`Relapse: Invalid markup on "${o.id}", expected: <details>`);p=L.firstElementChild,m=p.nextElementSibling,y=L.hasAttribute("open")}else p=s.children[u],m=L=s.children[u+1],m.hasAttribute("hidden")&&m.removeAttribute("hidden"),m.firstElementChild.hasAttribute("hidden")&&m.firstElementChild.removeAttribute("hidden");let A=p.classList.contains(h.opened),N=m.classList.contains(h.expanded),W=p.classList.contains(h.disabled);p.ariaExpanded==="true"||y||A?(!A&&!W&&ue(p,h.opened),!N&&ue(m,h.expanded),v||(p.ariaExpanded!=="true"&&Re(p),p.ariaDisabled==="true"&&(Le(p),W=!0)),W&&(ue(p,h.disabled),d.disabled=!0,d.locked=!0),d.expanded=!0):p.ariaDisabled==="true"||W?(!W&&ue(p,h.disabled),A&&ht(p,h.opened),d.expanded=(N||y)===!0,d.disabled=!0,d.locked=!0,v||(p.ariaDisabled!=="true"&&Le(p),Re(p,d.expanded?1:2))):(d.expanded=!1,d.disabled=!1,v||(Re(p,2),Le(p,2))),d.id=`${o.id}F${d.index}`,p.hasAttribute("id")||(p.id=`${o.id}B${d.index}`),m.hasAttribute("id")||(m.id=`${o.id}C${d.index}`),p.setAttribute("aria-controls",m.id),m.setAttribute("aria-labelledby",p.id),d.expanded?(p.tabIndex=-1,o.opened=o.opened+1,o.options.multiple===!1&&o.opened===2&&console.warn(`Relapse: More than 1 fold is expanded but "multiple" is set to false on: ${o.id}`),v?d.height=p.offsetHeight+m.offsetHeight:d.height=m.scrollHeight):(p.tabIndex=0,v?d.height=p.offsetHeight:(d.height=0,!Tr(m,"max-height")&&O(m,"max-height","0"),!Tr(m,"overflow")&&O(m,"overflow","hidden"))),d.button=p,d.wrapper=L,d.element=m,Bi(d,o,c),u=u+f}while(u<l);o.on=c.on,o.off=c.off,o.config=d=>{let y=n.persist,p=n.multiple;for(let m in d)m==="unique"||m==="schema"||m==="classes"||(typeof n[m]=="object"?Object.assign(n[m],d[m]):n[m]!==d[m]&&(n[m]=d[m]));if(!y&&n.persist&&o.opened===0&&o.expand(isNaN(o.active)?0:o.active),p&&!n.multiple&&o.opened>0)for(let m of o.folds)!m.expanded||m.locked||n.persist&&o.active!==m.index||(c.emit("toggle",o,m),Pr(o,m,c,!1)[2]());return n},o.collapse=(d=o.active)=>isNaN(d)?null:i.get(d).close(d),o.expand=(d=o.active)=>isNaN(d)?null:i.get(d).open(d),o.destroy=()=>{i.forEach(d=>d.destroy()),c.emit("destroy",o),P.delete(r)},o.reinit=()=>{i.forEach(d=>d.destroy()),Jt(e,t)}},ee=function e(t,s){if(document.readyState==="loading")return addEventListener("DOMContentLoaded",()=>e(t,s));let r=typeof t=="object"&&"tagName"in t;if(r&&t instanceof NodeList)throw TypeError("Relapse: Invalid NodeList selector. Provide string or HTMLElement");if(r){let i=typeof t=="string"?document.body.querySelector(t):t;i!==null&&Jt(i,Or(s))}else document.body.querySelectorAll(Vi(t)).forEach(i=>Jt(i,Or(t)));let n=Array.from(P.values());return r?n[n.length-1]:n},Zt=e=>typeof e=="string"?P.has(e)?P.get(e):null:Array.isArray(e)?e.filter(t=>P.has(t)).map(t=>P.get(t)):P.size>0?Array.from(P.values()):null;ee.version="0.9.1";ee.get=Zt;ee.each=e=>{for(let[t,s]of P)if(e(s,t)===!1)break};ee.reinit=e=>{let t=Zt(e);if(t===null)return;let s=Array.isArray(t)?t:[t];for(let r of s)if(typeof r=="object"&&"id"in r){let{id:n,options:i}=r;r.destroy(),ee(`#${n}`,i)}};ee.has=e=>e?(Array.isArray(e)?e:[e]).every(P.has):P.size>0;ee.destroy=e=>{let t=Zt(e),s=Array.isArray(t)?t:[t];for(let r of s)r.destroy()};window.relapse||Object.defineProperty(window,"relapse",{get(){return ee}});var ut=ee;var _e=class extends x.Component{inViewport(){let t=this.dom.collapseNode.getBoundingClientRect();for(let{element:s,folds:r}of ut.get())if(s.id===this.state.accordion){t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)||r.find(n=>n.expanded===!0).close();break}}toggle(t){if(t.stopPropagation(),this.root.classList.contains("is-open"))return this.close();this.state.collapse="opened",this.root.classList.add("is-open"),this.dom.buttonNode.classList.remove("selected"),this.dom.hasAccordionNode&&this.inViewport(),addEventListener("click",this.outsideClick.bind(this))}outsideClick(t){this.dom.buttonNode!==t.target&&this.dom.collapseNode!==t.target&&this.root.classList.contains("is-open")&&this.close()}close(){this.root.classList.remove("is-open"),this.state.collapse==="selected"||this.state.hasSelected?(this.root.classList.add("selected"),this.state.collapse="selected"):this.state.collapse="closed",removeEventListener("click",this.outsideClick),this.dom.buttonNode.focus()}select({target:t}){t.checked=!0,this.state.selected=t.value,this.dom.buttonNode.innerText=t.getAttribute("aria-label"),this.state.collapse="selected";for(let s of this.root.getElementsByTagName("label"))s.getAttribute("for")===t.id?s.classList.contains("selected")||s.classList.add("selected"):s.classList.contains("selected")&&s.classList.remove("selected");this.close()}option(t){if(t.target instanceof HTMLElement){if(t.currentTarget instanceof HTMLElement){let[s]=t.currentTarget.getElementsByClassName("selected");s&&(this.state.selected=s.id)}t.currentTarget instanceof HTMLElement,this.state.hasRequired&&(this.dom.buttonNode.classList.contains("is-invalid")&&this.dom.buttonNode.classList.remove("is-invalid"),this.state.required=!1,this.dom.buttonNode.classList.add("selected")),this.state.kind==="preset"?(this.state.selected=`Preset (${t.target.textContent.trim()})`,this.dom.buttonNode.innerHTML=`Preset (${t.target.textContent.trim()})<span class="icon"></span>`):(this.state.selected=t.target.textContent,this.dom.buttonNode.textContent=t.target.textContent);for(let s of this.dom.collapseNode.children)s.id!==t.target.id?s.classList.remove("selected"):s.classList.add("selected");this.state.collapse="selected",this.toggle(t)}}};_e.define={state:{selected:String,form:String,accordion:String,kind:String,required:{typeof:Boolean,default:!1},collapse:{typeof:String,default:"closed"},type:{typeof:String,default:"dropdown"}},nodes:["button","accordion","collapse","viewport","placeholder"]};function te(e){return Array.isArray?Array.isArray(e):Wr(e)==="[object Array]"}var Ki=1/0;function Ui(e){if(typeof e=="string")return e;let t=e+"";return t=="0"&&1/e==-Ki?"-0":t}function Yi(e){return e==null?"":Ui(e)}function G(e){return typeof e=="string"}function Hr(e){return typeof e=="number"}function Gi(e){return e===!0||e===!1||Ji(e)&&Wr(e)=="[object Boolean]"}function jr(e){return typeof e=="object"}function Ji(e){return jr(e)&&e!==null}function j(e){return e!=null}function Qt(e){return!e.trim().length}function Wr(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}var Zi="Incorrect 'index' type",Qi=e=>`Invalid value for key ${e}`,eo=e=>`Pattern length exceeds max of ${e}.`,to=e=>`Missing ${e} property in key`,so=e=>`Property 'weight' in key '${e}' must be a positive integer`,Mr=Object.prototype.hasOwnProperty,es=class{constructor(t){this._keys=[],this._keyMap={};let s=0;t.forEach(r=>{let n=Dr(r);this._keys.push(n),this._keyMap[n.id]=n,s+=n.weight}),this._keys.forEach(r=>{r.weight/=s})}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}};function Dr(e){let t=null,s=null,r=null,n=1,i=null;if(G(e)||te(e))r=e,t=qr(e),s=ts(e);else{if(!Mr.call(e,"name"))throw new Error(to("name"));let o=e.name;if(r=o,Mr.call(e,"weight")&&(n=e.weight,n<=0))throw new Error(so(o));t=qr(o),s=ts(o),i=e.getFn}return{path:t,id:s,weight:n,src:r,getFn:i}}function qr(e){return te(e)?e:e.split(".")}function ts(e){return te(e)?e.join("."):e}function ro(e,t){let s=[],r=!1,n=(i,o,c)=>{if(j(i))if(!o[c])s.push(i);else{let l=o[c],f=i[l];if(!j(f))return;if(c===o.length-1&&(G(f)||Hr(f)||Gi(f)))s.push(Yi(f));else if(te(f)){r=!0;for(let h=0,u=f.length;h<u;h+=1)n(f[h],o,c+1)}else o.length&&n(f,o,c+1)}};return n(e,G(t)?t.split("."):t,0),r?s:s[0]}var no={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},io={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1},oo={location:0,threshold:.6,distance:100},ao={useExtendedSearch:!1,getFn:ro,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1},$=ce(ce(ce(ce({},io),no),oo),ao),co=/[^ ]+/g;function lo(e=1,t=3){let s=new Map,r=Math.pow(10,t);return{get(n){let i=n.match(co).length;if(s.has(i))return s.get(i);let o=1/Math.pow(i,.5*e),c=parseFloat(Math.round(o*r)/r);return s.set(i,c),c},clear(){s.clear()}}}var He=class{constructor({getFn:t=$.getFn,fieldNormWeight:s=$.fieldNormWeight}={}){this.norm=lo(s,3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach((s,r)=>{this._keysMap[s.id]=r})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,G(this.docs[0])?this.docs.forEach((t,s)=>{this._addString(t,s)}):this.docs.forEach((t,s)=>{this._addObject(t,s)}),this.norm.clear())}add(t){let s=this.size();G(t)?this._addString(t,s):this._addObject(t,s)}removeAt(t){this.records.splice(t,1);for(let s=t,r=this.size();s<r;s+=1)this.records[s].i-=1}getValueForItemAtKeyId(t,s){return t[this._keysMap[s]]}size(){return this.records.length}_addString(t,s){if(!j(t)||Qt(t))return;let r={v:t,i:s,n:this.norm.get(t)};this.records.push(r)}_addObject(t,s){let r={i:s,$:{}};this.keys.forEach((n,i)=>{let o=n.getFn?n.getFn(t):this.getFn(t,n.path);if(j(o)){if(te(o)){let c=[],l=[{nestedArrIndex:-1,value:o}];for(;l.length;){let{nestedArrIndex:f,value:h}=l.pop();if(j(h))if(G(h)&&!Qt(h)){let u={v:h,i:f,n:this.norm.get(h)};c.push(u)}else te(h)&&h.forEach((u,d)=>{l.push({nestedArrIndex:d,value:u})})}r.$[i]=c}else if(G(o)&&!Qt(o)){let c={v:o,n:this.norm.get(o)};r.$[i]=c}}}),this.records.push(r)}toJSON(){return{keys:this.keys,records:this.records}}};function zr(e,t,{getFn:s=$.getFn,fieldNormWeight:r=$.fieldNormWeight}={}){let n=new He({getFn:s,fieldNormWeight:r});return n.setKeys(e.map(Dr)),n.setSources(t),n.create(),n}function fo(e,{getFn:t=$.getFn,fieldNormWeight:s=$.fieldNormWeight}={}){let{keys:r,records:n}=e,i=new He({getFn:t,fieldNormWeight:s});return i.setKeys(r),i.setIndexRecords(n),i}function pt(e,{errors:t=0,currentLocation:s=0,expectedLocation:r=0,distance:n=$.distance,ignoreLocation:i=$.ignoreLocation}={}){let o=t/e.length;if(i)return o;let c=Math.abs(r-s);return n?o+c/n:c?1:o}function ho(e=[],t=$.minMatchCharLength){let s=[],r=-1,n=-1,i=0;for(let o=e.length;i<o;i+=1){let c=e[i];c&&r===-1?r=i:!c&&r!==-1&&(n=i-1,n-r+1>=t&&s.push([r,n]),r=-1)}return e[i-1]&&i-r>=t&&s.push([r,i-1]),s}var pe=32;function uo(e,t,s,{location:r=$.location,distance:n=$.distance,threshold:i=$.threshold,findAllMatches:o=$.findAllMatches,minMatchCharLength:c=$.minMatchCharLength,includeMatches:l=$.includeMatches,ignoreLocation:f=$.ignoreLocation}={}){if(t.length>pe)throw new Error(eo(pe));let h=t.length,u=e.length,d=Math.max(0,Math.min(r,u)),y=i,p=d,m=c>1||l,L=m?Array(u):[],v;for(;(v=e.indexOf(t,p))>-1;){let D=pt(t,{currentLocation:v,expectedLocation:d,distance:n,ignoreLocation:f});if(y=Math.min(D,y),p=v+h,m){let re=0;for(;re<h;)L[v+re]=1,re+=1}}p=-1;let A=[],N=1,W=h+u,Br=1<<h-1;for(let D=0;D<h;D+=1){let re=0,ne=W;for(;re<ne;)pt(t,{errors:D,currentLocation:d+ne,expectedLocation:d,distance:n,ignoreLocation:f})<=y?re=ne:W=ne,ne=Math.floor((W-re)/2+re);W=ne;let ps=Math.max(1,d-ne+1),$t=o?u:Math.min(d+ne,u)+h,ge=Array($t+2);ge[$t+1]=(1<<D)-1;for(let V=$t;V>=ps;V-=1){let ze=V-1,gs=s[e.charAt(ze)];if(m&&(L[ze]=+!!gs),ge[V]=(ge[V+1]<<1|1)&gs,D&&(ge[V]|=(A[V+1]|A[V])<<1|1|A[V+1]),ge[V]&Br&&(N=pt(t,{errors:D,currentLocation:ze,expectedLocation:d,distance:n,ignoreLocation:f}),N<=y)){if(y=N,p=ze,p<=d)break;ps=Math.max(1,2*d-p)}}if(pt(t,{errors:D+1,currentLocation:d,expectedLocation:d,distance:n,ignoreLocation:f})>y)break;A=ge}let bt={isMatch:p>=0,score:Math.max(.001,N)};if(m){let D=ho(L,c);D.length?l&&(bt.indices=D):bt.isMatch=!1}return bt}function po(e){let t={};for(let s=0,r=e.length;s<r;s+=1){let n=e.charAt(s);t[n]=(t[n]||0)|1<<r-s-1}return t}var gt=class{constructor(t,{location:s=$.location,threshold:r=$.threshold,distance:n=$.distance,includeMatches:i=$.includeMatches,findAllMatches:o=$.findAllMatches,minMatchCharLength:c=$.minMatchCharLength,isCaseSensitive:l=$.isCaseSensitive,ignoreLocation:f=$.ignoreLocation}={}){if(this.options={location:s,threshold:r,distance:n,includeMatches:i,findAllMatches:o,minMatchCharLength:c,isCaseSensitive:l,ignoreLocation:f},this.pattern=l?t:t.toLowerCase(),this.chunks=[],!this.pattern.length)return;let h=(d,y)=>{this.chunks.push({pattern:d,alphabet:po(d),startIndex:y})},u=this.pattern.length;if(u>pe){let d=0,y=u%pe,p=u-y;for(;d<p;)h(this.pattern.substr(d,pe),d),d+=pe;if(y){let m=u-pe;h(this.pattern.substr(m),m)}}else h(this.pattern,0)}searchIn(t){let{isCaseSensitive:s,includeMatches:r}=this.options;if(s||(t=t.toLowerCase()),this.pattern===t){let p={isMatch:!0,score:0};return r&&(p.indices=[[0,t.length-1]]),p}let{location:n,distance:i,threshold:o,findAllMatches:c,minMatchCharLength:l,ignoreLocation:f}=this.options,h=[],u=0,d=!1;this.chunks.forEach(({pattern:p,alphabet:m,startIndex:L})=>{let{isMatch:v,score:A,indices:N}=uo(t,p,m,{location:n+L,distance:i,threshold:o,findAllMatches:c,minMatchCharLength:l,includeMatches:r,ignoreLocation:f});v&&(d=!0),u+=A,v&&N&&(h=[...h,...N])});let y={isMatch:d,score:d?u/this.chunks.length:1};return d&&r&&(y.indices=h),y}},J=class{constructor(t){this.pattern=t}static isMultiMatch(t){return Ir(t,this.multiRegex)}static isSingleMatch(t){return Ir(t,this.singleRegex)}search(){}};function Ir(e,t){let s=e.match(t);return s?s[1]:null}var ss=class extends J{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){let s=t===this.pattern;return{isMatch:s,score:s?0:1,indices:[0,this.pattern.length-1]}}},rs=class extends J{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){let r=t.indexOf(this.pattern)===-1;return{isMatch:r,score:r?0:1,indices:[0,t.length-1]}}},ns=class extends J{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){let s=t.startsWith(this.pattern);return{isMatch:s,score:s?0:1,indices:[0,this.pattern.length-1]}}},is=class extends J{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){let s=!t.startsWith(this.pattern);return{isMatch:s,score:s?0:1,indices:[0,t.length-1]}}},os=class extends J{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){let s=t.endsWith(this.pattern);return{isMatch:s,score:s?0:1,indices:[t.length-this.pattern.length,t.length-1]}}},as=class extends J{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){let s=!t.endsWith(this.pattern);return{isMatch:s,score:s?0:1,indices:[0,t.length-1]}}},mt=class extends J{constructor(t,{location:s=$.location,threshold:r=$.threshold,distance:n=$.distance,includeMatches:i=$.includeMatches,findAllMatches:o=$.findAllMatches,minMatchCharLength:c=$.minMatchCharLength,isCaseSensitive:l=$.isCaseSensitive,ignoreLocation:f=$.ignoreLocation}={}){super(t),this._bitapSearch=new gt(t,{location:s,threshold:r,distance:n,includeMatches:i,findAllMatches:o,minMatchCharLength:c,isCaseSensitive:l,ignoreLocation:f})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}},vt=class extends J{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let s=0,r,n=[],i=this.pattern.length;for(;(r=t.indexOf(this.pattern,s))>-1;)s=r+i,n.push([r,s-1]);let o=!!n.length;return{isMatch:o,score:o?0:1,indices:n}}},cs=[ss,vt,ns,is,as,os,rs,mt],Rr=cs.length,go=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,mo="|";function vo(e,t={}){return e.split(mo).map(s=>{let r=s.trim().split(go).filter(i=>i&&!!i.trim()),n=[];for(let i=0,o=r.length;i<o;i+=1){let c=r[i],l=!1,f=-1;for(;!l&&++f<Rr;){let h=cs[f],u=h.isMultiMatch(c);u&&(n.push(new h(u,t)),l=!0)}if(!l)for(f=-1;++f<Rr;){let h=cs[f],u=h.isSingleMatch(c);if(u){n.push(new h(u,t));break}}}return n})}var yo=new Set([mt.type,vt.type]),ls=class{constructor(t,{isCaseSensitive:s=$.isCaseSensitive,includeMatches:r=$.includeMatches,minMatchCharLength:n=$.minMatchCharLength,ignoreLocation:i=$.ignoreLocation,findAllMatches:o=$.findAllMatches,location:c=$.location,threshold:l=$.threshold,distance:f=$.distance}={}){this.query=null,this.options={isCaseSensitive:s,includeMatches:r,minMatchCharLength:n,findAllMatches:o,ignoreLocation:i,location:c,threshold:l,distance:f},this.pattern=s?t:t.toLowerCase(),this.query=vo(this.pattern,this.options)}static condition(t,s){return s.useExtendedSearch}searchIn(t){let s=this.query;if(!s)return{isMatch:!1,score:1};let{includeMatches:r,isCaseSensitive:n}=this.options;t=n?t:t.toLowerCase();let i=0,o=[],c=0;for(let l=0,f=s.length;l<f;l+=1){let h=s[l];o.length=0,i=0;for(let u=0,d=h.length;u<d;u+=1){let y=h[u],{isMatch:p,indices:m,score:L}=y.search(t);if(p){if(i+=1,c+=L,r){let v=y.constructor.type;yo.has(v)?o=[...o,...m]:o.push(m)}}else{c=0,i=0,o.length=0;break}}if(i){let u={isMatch:!0,score:c/i};return r&&(u.indices=o),u}}return{isMatch:!1,score:1}}},fs=[];function bo(...e){fs.push(...e)}function ds(e,t){for(let s=0,r=fs.length;s<r;s+=1){let n=fs[s];if(n.condition(e,t))return new n(e,t)}return new gt(e,t)}var yt={AND:"$and",OR:"$or"},hs={PATH:"$path",PATTERN:"$val"},us=e=>!!(e[yt.AND]||e[yt.OR]),$o=e=>!!e[hs.PATH],wo=e=>!te(e)&&jr(e)&&!us(e),_r=e=>({[yt.AND]:Object.keys(e).map(t=>({[t]:e[t]}))});function Fr(e,t,{auto:s=!0}={}){let r=n=>{let i=Object.keys(n),o=$o(n);if(!o&&i.length>1&&!us(n))return r(_r(n));if(wo(n)){let l=o?n[hs.PATH]:i[0],f=o?n[hs.PATTERN]:n[l];if(!G(f))throw new Error(Qi(l));let h={keyId:ts(l),pattern:f};return s&&(h.searcher=ds(f,t)),h}let c={children:[],operator:i[0]};return i.forEach(l=>{let f=n[l];te(f)&&f.forEach(h=>{c.children.push(r(h))})}),c};return us(e)||(e=_r(e)),r(e)}function xo(e,{ignoreFieldNorm:t=$.ignoreFieldNorm}){e.forEach(s=>{let r=1;s.matches.forEach(({key:n,norm:i,score:o})=>{let c=n?n.weight:null;r*=Math.pow(o===0&&c?Number.EPSILON:o,(c||1)*(t?1:i))}),s.score=r})}function Ao(e,t){let s=e.matches;t.matches=[],j(s)&&s.forEach(r=>{if(!j(r.indices)||!r.indices.length)return;let{indices:n,value:i}=r,o={indices:n,value:i};r.key&&(o.key=r.key.src),r.idx>-1&&(o.refIndex=r.idx),t.matches.push(o)})}function ko(e,t){t.score=e.score}function Lo(e,t,{includeMatches:s=$.includeMatches,includeScore:r=$.includeScore}={}){let n=[];return s&&n.push(Ao),r&&n.push(ko),e.map(i=>{let{idx:o}=i,c={item:t[o],refIndex:o};return n.length&&n.forEach(l=>{l(i,c)}),c})}var se=class{constructor(t,s={},r){this.options=ce(ce({},$),s),this.options.useExtendedSearch,this._keyStore=new es(this.options.keys),this.setCollection(t,r)}setCollection(t,s){if(this._docs=t,s&&!(s instanceof He))throw new Error(Zi);this._myIndex=s||zr(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){j(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){let s=[];for(let r=0,n=this._docs.length;r<n;r+=1){let i=this._docs[r];t(i,r)&&(this.removeAt(r),r-=1,n-=1,s.push(i))}return s}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:s=-1}={}){let{includeMatches:r,includeScore:n,shouldSort:i,sortFn:o,ignoreFieldNorm:c}=this.options,l=G(t)?G(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return xo(l,{ignoreFieldNorm:c}),i&&l.sort(o),Hr(s)&&s>-1&&(l=l.slice(0,s)),Lo(l,this._docs,{includeMatches:r,includeScore:n})}_searchStringList(t){let s=ds(t,this.options),{records:r}=this._myIndex,n=[];return r.forEach(({v:i,i:o,n:c})=>{if(!j(i))return;let{isMatch:l,score:f,indices:h}=s.searchIn(i);l&&n.push({item:i,idx:o,matches:[{score:f,value:i,norm:c,indices:h}]})}),n}_searchLogical(t){let s=Fr(t,this.options),r=(c,l,f)=>{if(!c.children){let{keyId:u,searcher:d}=c,y=this._findMatches({key:this._keyStore.get(u),value:this._myIndex.getValueForItemAtKeyId(l,u),searcher:d});return y&&y.length?[{idx:f,item:l,matches:y}]:[]}let h=[];for(let u=0,d=c.children.length;u<d;u+=1){let y=c.children[u],p=r(y,l,f);if(p.length)h.push(...p);else if(c.operator===yt.AND)return[]}return h},n=this._myIndex.records,i={},o=[];return n.forEach(({$:c,i:l})=>{if(j(c)){let f=r(s,c,l);f.length&&(i[l]||(i[l]={idx:l,item:c,matches:[]},o.push(i[l])),f.forEach(({matches:h})=>{i[l].matches.push(...h)}))}}),o}_searchObjectList(t){let s=ds(t,this.options),{keys:r,records:n}=this._myIndex,i=[];return n.forEach(({$:o,i:c})=>{if(!j(o))return;let l=[];r.forEach((f,h)=>{l.push(...this._findMatches({key:f,value:o[h],searcher:s}))}),l.length&&i.push({idx:c,item:o,matches:l})}),i}_findMatches({key:t,value:s,searcher:r}){if(!j(s))return[];let n=[];if(te(s))s.forEach(({v:i,i:o,n:c})=>{if(!j(i))return;let{isMatch:l,score:f,indices:h}=r.searchIn(i);l&&n.push({score:f,key:t,value:i,idx:o,norm:c,indices:h})});else{let{v:i,n:o}=s,{isMatch:c,score:l,indices:f}=r.searchIn(i);c&&n.push({score:l,key:t,value:i,norm:o,indices:f})}return n}};se.version="7.0.0";se.createIndex=zr;se.parseIndex=fo;se.config=$;se.parseQuery=Fr;bo(ls);var je=class extends x.Component{constructor(){super(...arguments);this.list=[];this.result=[]}async connect(){let s=await fetch(this.state.source);this.list=await s.json(),this.fuse=new se(this.list,{keys:["title","heading","content"],threshold:.1,isCaseSensitive:!1,includeMatches:!1})}hide(){removeEventListener("click",this.outsideClick),this.dom.listNode.classList.replace("d-block","d-none"),this.dom.inputNode.classList.remove("is-active","is-results"),this.state.active=!1}outsideClick(s){this.dom.listNode!==s.target&&this.dom.inputNode!==s.target&&this.hide()}onFocus(){this.dom.inputNode.classList.add("is-active"),this.result.length>0&&!this.dom.listNode.classList.contains("d-block")&&(setTimeout(()=>this.dom.listNode.classList.replace("d-none","d-block"),80),this.dom.inputNode.classList.add("is-results")),this.state.query.length<=2?this.dom.inputNode.classList.remove("is-results"):this.dom.inputNode.classList.add("is-results")}onInput({target:s}){this.state.query=s.value,this.result=this.fuse.search(this.state.query,{limit:10}),this.state.active||(this.dom.listNode.classList.replace("d-none","d-block"),this.state.active=!0,addEventListener("click",this.outsideClick.bind(this))),this.state.query.length===0?(this.dom.inputNode.classList.remove("is-results"),this.dom.listNode.classList.replace("d-block","d-none")):this.dom.listNode.classList.contains("d-block")||this.dom.listNode.classList.replace("d-none","d-block"),this.showList()}showList(){this.state.query.length<1?this.dom.inputNode.classList.remove("is-results"):this.dom.inputNode.classList.add("is-results");let s={},r=new RegExp(`(${this.state.query})`,"gi");this.dom.listNode.innerHTML="",this.dom.listNode.classList.remove("no-results"),this.result.forEach(({item:i})=>{let o=i.content===""?i.title:i.content,c=i.heading.search(r),l=!0;c===-1&&(c=o.search(r),l=!1);let f=o.slice(c);if(f.trim().length>0){let h=f.trim().slice(0,100);if(h.length>2){let u;i.title!==i.heading&&i.heading!==""&&!/[(:]/.test(i.heading)?u=i.heading:u="",i.title in s||(s[i.title]={header:u,isHeader:u!==""?l:!1,url:i.url,items:[]}),h.length>50&&s[i.title].items.push('<div class="result">',"<span>",h.replace(r,'<strong class="fc-blue">$1</strong>'),"...","</span>","</div>")}}});let n=Object.keys(s);if(n.length===0){let i=document.createElement("li");i.innerHTML='<h4 class="mb-0">No Results</h4>',this.dom.listNode.classList.add("no-results"),this.dom.listNode.appendChild(i)}else n.forEach(i=>{let o=s[i],c=document.createElement("li");c.innerHTML=[`<a href="${o.url}">`,'<h5 class="row ai-center jc-between px-2">',`<span class="col-auto">${o.isHeader?o.header:i}</span>`,`<span class="col-auto fc-dark-gray fs-xs">${o.isHeader?i:o.header}</span>`,"</h5>",`${o.items.join("")}`,"</a>"].join(""),this.dom.listNode.appendChild(c)})}};je.define={id:"search",state:{active:Boolean,query:String,source:String},nodes:["list","input"]};var We=class extends x.Component{onmount(){this.relapse?this.relapse.reinit():this.relapse=ut(this.root)}unmount(){this.relapse.destroy()}};We.define={state:{multiple:Boolean,open:{default:0,typeof:Number}}};var De=class extends x.Component{constructor(){super(...arguments);this.onScroll=()=>{this.dom.anchorNodes.filter(s=>this.anchors.includes(s.id)).forEach((s,r)=>{s.getBoundingClientRect().top<window.screenY&&this.dom.hrefNodes[r]&&(this.dom.hrefNodes.forEach(i=>i.classList.remove("fc-blue")),this.dom.hrefNodes[r].classList.add("fc-blue"))})}}connect(){window.onscroll=this.onScroll,this.anchors=[],this.options={rootMargin:this.state.rootMargin,threshold:this.state.threshold}}onmount(){if(console.log("onmount"),this.dom.hasHrefNode){this.dom.hrefNode.classList.add("fc-blue");for(let s of this.dom.hrefNodes)this.anchors.push(s.href.slice(s.href.lastIndexOf("#")+1)),s.onclick=()=>{setTimeout(()=>{this.dom.hrefNodes.forEach(r=>r.classList.remove("fc-blue")),s.classList.add("fc-blue")},300)}}this.onScroll()}unmount(){console.log("unmount"),this.anchors=[]}};De.define={id:"scrollspy",state:{threshold:Number,rootMargin:{typeof:String,default:"0px"}},nodes:["href","anchor"]};x({fragments:["content","menu"],components:{Dropdown:_e,Drawer:he,Search:je,ScrollSpy:De,Sidebar:We},logLevel:1,hover:{threshold:100,trigger:"href"},progress:{bgColor:"red"}});})();
/**
* SPX ~ Single Page XHR | https://spx.js.org
*
* @license CC BY-NC-ND 4.0
* @version 0.1.2-beta.1
* @copyright 2024 Nikolas Savvidis
*/
