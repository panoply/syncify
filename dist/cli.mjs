var Oh=Object.create;var Ao=Object.defineProperty;var _h=Object.getOwnPropertyDescriptor;var Ih=Object.getOwnPropertyNames;var jh=Object.getPrototypeOf,Mh=Object.prototype.hasOwnProperty;var Pe=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,r)=>(typeof require<"u"?require:t)[r]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')});var Wh=(e,t)=>()=>(e&&(t=e(e=0)),t);var oe=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),lc=(e,t)=>{for(var r in t)Ao(e,r,{get:t[r],enumerable:!0})},qh=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of Ih(t))!Mh.call(e,s)&&s!==r&&Ao(e,s,{get:()=>t[s],enumerable:!(n=_h(t,s))||n.enumerable});return e};var Ct=(e,t,r)=>(r=e!=null?Oh(jh(e)):{},qh(t||!e||!e.__esModule?Ao(r,"default",{value:e,enumerable:!0}):r,e));import{fileURLToPath as Hh}from"url";var Gh,y,l=Wh(()=>{Gh=()=>Hh(import.meta.url),y=Gh()});var Bl=oe((eC,Yo)=>{"use strict";l();var zg=Object.prototype.hasOwnProperty,wt="~";function os(){}Object.create&&(os.prototype=Object.create(null),new os().__proto__||(wt=!1));function Vg(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function Ll(e,t,r,n,s){if(typeof r!="function")throw new TypeError("The listener must be a function");var o=new Vg(r,n||e,s),a=wt?wt+t:t;return e._events[a]?e._events[a].fn?e._events[a]=[e._events[a],o]:e._events[a].push(o):(e._events[a]=o,e._eventsCount++),e}function fi(e,t){--e._eventsCount===0?e._events=new os:delete e._events[t]}function gt(){this._events=new os,this._eventsCount=0}gt.prototype.eventNames=function(){var t=[],r,n;if(this._eventsCount===0)return t;for(n in r=this._events)zg.call(r,n)&&t.push(wt?n.slice(1):n);return Object.getOwnPropertySymbols?t.concat(Object.getOwnPropertySymbols(r)):t};gt.prototype.listeners=function(t){var r=wt?wt+t:t,n=this._events[r];if(!n)return[];if(n.fn)return[n.fn];for(var s=0,o=n.length,a=new Array(o);s<o;s++)a[s]=n[s].fn;return a};gt.prototype.listenerCount=function(t){var r=wt?wt+t:t,n=this._events[r];return n?n.fn?1:n.length:0};gt.prototype.emit=function(t,r,n,s,o,a){var u=wt?wt+t:t;if(!this._events[u])return!1;var c=this._events[u],f=arguments.length,p,d;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),f){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,r),!0;case 3:return c.fn.call(c.context,r,n),!0;case 4:return c.fn.call(c.context,r,n,s),!0;case 5:return c.fn.call(c.context,r,n,s,o),!0;case 6:return c.fn.call(c.context,r,n,s,o,a),!0}for(d=1,p=new Array(f-1);d<f;d++)p[d-1]=arguments[d];c.fn.apply(c.context,p)}else{var g=c.length,w;for(d=0;d<g;d++)switch(c[d].once&&this.removeListener(t,c[d].fn,void 0,!0),f){case 1:c[d].fn.call(c[d].context);break;case 2:c[d].fn.call(c[d].context,r);break;case 3:c[d].fn.call(c[d].context,r,n);break;case 4:c[d].fn.call(c[d].context,r,n,s);break;default:if(!p)for(w=1,p=new Array(f-1);w<f;w++)p[w-1]=arguments[w];c[d].fn.apply(c[d].context,p)}}return!0};gt.prototype.on=function(t,r,n){return Ll(this,t,r,n,!1)};gt.prototype.once=function(t,r,n){return Ll(this,t,r,n,!0)};gt.prototype.removeListener=function(t,r,n,s){var o=wt?wt+t:t;if(!this._events[o])return this;if(!r)return fi(this,o),this;var a=this._events[o];if(a.fn)a.fn===r&&(!s||a.once)&&(!n||a.context===n)&&fi(this,o);else{for(var u=0,c=[],f=a.length;u<f;u++)(a[u].fn!==r||s&&!a[u].once||n&&a[u].context!==n)&&c.push(a[u]);c.length?this._events[o]=c.length===1?c[0]:c:fi(this,o)}return this};gt.prototype.removeAllListeners=function(t){var r;return t?(r=wt?wt+t:t,this._events[r]&&fi(this,r)):(this._events=new os,this._eventsCount=0),this};gt.prototype.off=gt.prototype.removeListener;gt.prototype.addListener=gt.prototype.on;gt.prefixed=wt;gt.EventEmitter=gt;typeof Yo<"u"&&(Yo.exports=gt)});var ys=oe((b3,gf)=>{"use strict";l();var X0=Pe("path"),fr="\\\\/",pf=`[^${fr}]`,xr="\\.",Z0="\\+",Q0="\\?",Ei="\\/",ey="(?=.)",mf="[^/]",Aa=`(?:${Ei}|$)`,df=`(?:^|${Ei})`,Ta=`${xr}{1,2}${Aa}`,ty=`(?!${xr})`,ry=`(?!${df}${Ta})`,ny=`(?!${xr}{0,1}${Aa})`,sy=`(?!${Ta})`,iy=`[^.${Ei}]`,oy=`${mf}*?`,hf={DOT_LITERAL:xr,PLUS_LITERAL:Z0,QMARK_LITERAL:Q0,SLASH_LITERAL:Ei,ONE_CHAR:ey,QMARK:mf,END_ANCHOR:Aa,DOTS_SLASH:Ta,NO_DOT:ty,NO_DOTS:ry,NO_DOT_SLASH:ny,NO_DOTS_SLASH:sy,QMARK_NO_DOT:iy,STAR:oy,START_ANCHOR:df},ay={...hf,SLASH_LITERAL:`[${fr}]`,QMARK:pf,STAR:`${pf}*?`,DOTS_SLASH:`${xr}{1,2}(?:[${fr}]|$)`,NO_DOT:`(?!${xr})`,NO_DOTS:`(?!(?:^|[${fr}])${xr}{1,2}(?:[${fr}]|$))`,NO_DOT_SLASH:`(?!${xr}{0,1}(?:[${fr}]|$))`,NO_DOTS_SLASH:`(?!${xr}{1,2}(?:[${fr}]|$))`,QMARK_NO_DOT:`[^.${fr}]`,START_ANCHOR:`(?:^|[${fr}])`,END_ANCHOR:`(?:[${fr}]|$)`},uy={alnum:"a-zA-Z0-9",alpha:"a-zA-Z",ascii:"\\x00-\\x7F",blank:" \\t",cntrl:"\\x00-\\x1F\\x7F",digit:"0-9",graph:"\\x21-\\x7E",lower:"a-z",print:"\\x20-\\x7E ",punct:"\\-!\"#$%&'()\\*+,./:;<=>?@[\\]^_`{|}~",space:" \\t\\r\\n\\v\\f",upper:"A-Z",word:"A-Za-z0-9_",xdigit:"A-Fa-f0-9"};gf.exports={MAX_LENGTH:1024*64,POSIX_REGEX_SOURCE:uy,REGEX_BACKSLASH:/\\(?![*+?^${}(|)[\]])/g,REGEX_NON_SPECIAL_CHARS:/^[^@![\].,$*+?^{}()|\\/]+/,REGEX_SPECIAL_CHARS:/[-*+?.^${}(|)[\]]/,REGEX_SPECIAL_CHARS_BACKREF:/(\\?)((\W)(\3*))/g,REGEX_SPECIAL_CHARS_GLOBAL:/([-*+?.^${}(|)[\]])/g,REGEX_REMOVE_BACKSLASH:/(?:\[.*?[^\\]\]|\\(?=.))/g,REPLACEMENTS:{"***":"*","**/**":"**","**/**/**":"**"},CHAR_0:48,CHAR_9:57,CHAR_UPPERCASE_A:65,CHAR_LOWERCASE_A:97,CHAR_UPPERCASE_Z:90,CHAR_LOWERCASE_Z:122,CHAR_LEFT_PARENTHESES:40,CHAR_RIGHT_PARENTHESES:41,CHAR_ASTERISK:42,CHAR_AMPERSAND:38,CHAR_AT:64,CHAR_BACKWARD_SLASH:92,CHAR_CARRIAGE_RETURN:13,CHAR_CIRCUMFLEX_ACCENT:94,CHAR_COLON:58,CHAR_COMMA:44,CHAR_DOT:46,CHAR_DOUBLE_QUOTE:34,CHAR_EQUAL:61,CHAR_EXCLAMATION_MARK:33,CHAR_FORM_FEED:12,CHAR_FORWARD_SLASH:47,CHAR_GRAVE_ACCENT:96,CHAR_HASH:35,CHAR_HYPHEN_MINUS:45,CHAR_LEFT_ANGLE_BRACKET:60,CHAR_LEFT_CURLY_BRACE:123,CHAR_LEFT_SQUARE_BRACKET:91,CHAR_LINE_FEED:10,CHAR_NO_BREAK_SPACE:160,CHAR_PERCENT:37,CHAR_PLUS:43,CHAR_QUESTION_MARK:63,CHAR_RIGHT_ANGLE_BRACKET:62,CHAR_RIGHT_CURLY_BRACE:125,CHAR_RIGHT_SQUARE_BRACKET:93,CHAR_SEMICOLON:59,CHAR_SINGLE_QUOTE:39,CHAR_SPACE:32,CHAR_TAB:9,CHAR_UNDERSCORE:95,CHAR_VERTICAL_LINE:124,CHAR_ZERO_WIDTH_NOBREAK_SPACE:65279,SEP:X0.sep,extglobChars(e){return{"!":{type:"negate",open:"(?:(?!(?:",close:`))${e.STAR})`},"?":{type:"qmark",open:"(?:",close:")?"},"+":{type:"plus",open:"(?:",close:")+"},"*":{type:"star",open:"(?:",close:")*"},"@":{type:"at",open:"(?:",close:")"}}},globChars(e){return e===!0?ay:hf}}});var $i=oe(Rt=>{"use strict";l();var cy=Pe("path"),ly=process.platform==="win32",{REGEX_BACKSLASH:fy,REGEX_REMOVE_BACKSLASH:py,REGEX_SPECIAL_CHARS:my,REGEX_SPECIAL_CHARS_GLOBAL:dy}=ys();Rt.isObject=e=>e!==null&&typeof e=="object"&&!Array.isArray(e);Rt.hasRegexChars=e=>my.test(e);Rt.isRegexChar=e=>e.length===1&&Rt.hasRegexChars(e);Rt.escapeRegex=e=>e.replace(dy,"\\$1");Rt.toPosixSlashes=e=>e.replace(fy,"/");Rt.removeBackslashes=e=>e.replace(py,t=>t==="\\"?"":t);Rt.supportsLookbehinds=()=>{let e=process.version.slice(1).split(".").map(Number);return e.length===3&&e[0]>=9||e[0]===8&&e[1]>=10};Rt.isWindows=e=>e&&typeof e.windows=="boolean"?e.windows:ly===!0||cy.sep==="\\";Rt.escapeLast=(e,t,r)=>{let n=e.lastIndexOf(t,r);return n===-1?e:e[n-1]==="\\"?Rt.escapeLast(e,t,n-1):`${e.slice(0,n)}\\${e.slice(n)}`};Rt.removePrefix=(e,t={})=>{let r=e;return r.startsWith("./")&&(r=r.slice(2),t.prefix="./"),r};Rt.wrapOutput=(e,t={},r={})=>{let n=r.contains?"":"^",s=r.contains?"":"$",o=`${n}(?:${e})${s}`;return t.negated===!0&&(o=`(?:^(?!${o}).*$)`),o}});var vf=oe((F3,Ff)=>{"use strict";l();var yf=$i(),{CHAR_ASTERISK:La,CHAR_AT:hy,CHAR_BACKWARD_SLASH:Ds,CHAR_COMMA:gy,CHAR_DOT:Ba,CHAR_EXCLAMATION_MARK:Ra,CHAR_FORWARD_SLASH:Sf,CHAR_LEFT_CURLY_BRACE:Pa,CHAR_LEFT_PARENTHESES:ka,CHAR_LEFT_SQUARE_BRACKET:yy,CHAR_PLUS:Dy,CHAR_QUESTION_MARK:Df,CHAR_RIGHT_CURLY_BRACE:by,CHAR_RIGHT_PARENTHESES:bf,CHAR_RIGHT_SQUARE_BRACKET:wy}=ys(),wf=e=>e===Sf||e===Ds,xf=e=>{e.isPrefix!==!0&&(e.depth=e.isGlobstar?1/0:1)},xy=(e,t)=>{let r=t||{},n=e.length-1,s=r.parts===!0||r.scanToEnd===!0,o=[],a=[],u=[],c=e,f=-1,p=0,d=0,g=!1,w=!1,b=!1,C=!1,q=!1,M=!1,te=!1,H=!1,Z=!1,Q=!1,qe=0,ke,K,de={value:"",depth:0,isGlob:!1},Ne=()=>f>=n,v=()=>c.charCodeAt(f+1),Be=()=>(ke=K,c.charCodeAt(++f));for(;f<n;){K=Be();let it;if(K===Ds){te=de.backslashes=!0,K=Be(),K===Pa&&(M=!0);continue}if(M===!0||K===Pa){for(qe++;Ne()!==!0&&(K=Be());){if(K===Ds){te=de.backslashes=!0,Be();continue}if(K===Pa){qe++;continue}if(M!==!0&&K===Ba&&(K=Be())===Ba){if(g=de.isBrace=!0,b=de.isGlob=!0,Q=!0,s===!0)continue;break}if(M!==!0&&K===gy){if(g=de.isBrace=!0,b=de.isGlob=!0,Q=!0,s===!0)continue;break}if(K===by&&(qe--,qe===0)){M=!1,g=de.isBrace=!0,Q=!0;break}}if(s===!0)continue;break}if(K===Sf){if(o.push(f),a.push(de),de={value:"",depth:0,isGlob:!1},Q===!0)continue;if(ke===Ba&&f===p+1){p+=2;continue}d=f+1;continue}if(r.noext!==!0&&(K===Dy||K===hy||K===La||K===Df||K===Ra)===!0&&v()===ka){if(b=de.isGlob=!0,C=de.isExtglob=!0,Q=!0,K===Ra&&f===p&&(Z=!0),s===!0){for(;Ne()!==!0&&(K=Be());){if(K===Ds){te=de.backslashes=!0,K=Be();continue}if(K===bf){b=de.isGlob=!0,Q=!0;break}}continue}break}if(K===La){if(ke===La&&(q=de.isGlobstar=!0),b=de.isGlob=!0,Q=!0,s===!0)continue;break}if(K===Df){if(b=de.isGlob=!0,Q=!0,s===!0)continue;break}if(K===yy){for(;Ne()!==!0&&(it=Be());){if(it===Ds){te=de.backslashes=!0,Be();continue}if(it===wy){w=de.isBracket=!0,b=de.isGlob=!0,Q=!0;break}}if(s===!0)continue;break}if(r.nonegate!==!0&&K===Ra&&f===p){H=de.negated=!0,p++;continue}if(r.noparen!==!0&&K===ka){if(b=de.isGlob=!0,s===!0){for(;Ne()!==!0&&(K=Be());){if(K===ka){te=de.backslashes=!0,K=Be();continue}if(K===bf){Q=!0;break}}continue}break}if(b===!0){if(Q=!0,s===!0)continue;break}}r.noext===!0&&(C=!1,b=!1);let $e=c,rr="",S="";p>0&&(rr=c.slice(0,p),c=c.slice(p),d-=p),$e&&b===!0&&d>0?($e=c.slice(0,d),S=c.slice(d)):b===!0?($e="",S=c):$e=c,$e&&$e!==""&&$e!=="/"&&$e!==c&&wf($e.charCodeAt($e.length-1))&&($e=$e.slice(0,-1)),r.unescape===!0&&(S&&(S=yf.removeBackslashes(S)),$e&&te===!0&&($e=yf.removeBackslashes($e)));let F={prefix:rr,input:e,start:p,base:$e,glob:S,isBrace:g,isBracket:w,isGlob:b,isExtglob:C,isGlobstar:q,negated:H,negatedExtglob:Z};if(r.tokens===!0&&(F.maxDepth=0,wf(K)||a.push(de),F.tokens=a),r.parts===!0||r.tokens===!0){let it;for(let me=0;me<o.length;me++){let vt=it?it+1:p,It=o[me],O=e.slice(vt,It);r.tokens&&(me===0&&p!==0?(a[me].isPrefix=!0,a[me].value=rr):a[me].value=O,xf(a[me]),F.maxDepth+=a[me].depth),(me!==0||O!=="")&&u.push(O),it=It}if(it&&it+1<e.length){let me=e.slice(it+1);u.push(me),r.tokens&&(a[a.length-1].value=me,xf(a[a.length-1]),F.maxDepth+=a[a.length-1].depth)}F.slashes=o,F.parts=u}return F};Ff.exports=xy});var $f=oe((C3,Ef)=>{"use strict";l();var Ai=ys(),Ot=$i(),{MAX_LENGTH:Ti,POSIX_REGEX_SOURCE:Sy,REGEX_NON_SPECIAL_CHARS:Fy,REGEX_SPECIAL_CHARS_BACKREF:vy,REPLACEMENTS:Cf}=Ai,Cy=(e,t)=>{if(typeof t.expandRange=="function")return t.expandRange(...e,t);e.sort();let r=`[${e.join("-")}]`;try{new RegExp(r)}catch{return e.map(s=>Ot.escapeRegex(s)).join("..")}return r},Ln=(e,t)=>`Missing ${e}: "${t}" - use "\\\\${t}" to match literal characters`,Na=(e,t)=>{if(typeof e!="string")throw new TypeError("Expected a string");e=Cf[e]||e;let r={...t},n=typeof r.maxLength=="number"?Math.min(Ti,r.maxLength):Ti,s=e.length;if(s>n)throw new SyntaxError(`Input length: ${s}, exceeds maximum allowed length: ${n}`);let o={type:"bos",value:"",output:r.prepend||""},a=[o],u=r.capture?"":"?:",c=Ot.isWindows(t),f=Ai.globChars(c),p=Ai.extglobChars(f),{DOT_LITERAL:d,PLUS_LITERAL:g,SLASH_LITERAL:w,ONE_CHAR:b,DOTS_SLASH:C,NO_DOT:q,NO_DOT_SLASH:M,NO_DOTS_SLASH:te,QMARK:H,QMARK_NO_DOT:Z,STAR:Q,START_ANCHOR:qe}=f,ke=B=>`(${u}(?:(?!${qe}${B.dot?C:d}).)*?)`,K=r.dot?"":q,de=r.dot?H:Z,Ne=r.bash===!0?ke(r):Q;r.capture&&(Ne=`(${Ne})`),typeof r.noext=="boolean"&&(r.noextglob=r.noext);let v={input:e,index:-1,start:0,dot:r.dot===!0,consumed:"",output:"",prefix:"",backtrack:!1,negated:!1,brackets:0,braces:0,parens:0,quotes:0,globstar:!1,tokens:a};e=Ot.removePrefix(e,v),s=e.length;let Be=[],$e=[],rr=[],S=o,F,it=()=>v.index===s-1,me=v.peek=(B=1)=>e[v.index+B],vt=v.advance=()=>e[++v.index]||"",It=()=>e.slice(v.index+1),O=(B="",ue=0)=>{v.consumed+=B,v.index+=ue},z=B=>{v.output+=B.output!=null?B.output:B.value,O(B.value)},ce=()=>{let B=1;for(;me()==="!"&&(me(2)!=="("||me(3)==="?");)vt(),v.start++,B++;return B%2===0?!1:(v.negated=!0,v.start++,!0)},he=B=>{v[B]++,rr.push(B)},je=B=>{v[B]--,rr.pop()},V=B=>{if(S.type==="globstar"){let ue=v.braces>0&&(B.type==="comma"||B.type==="brace"),$=B.extglob===!0||Be.length&&(B.type==="pipe"||B.type==="paren");B.type!=="slash"&&B.type!=="paren"&&!ue&&!$&&(v.output=v.output.slice(0,-S.output.length),S.type="star",S.value="*",S.output=Ne,v.output+=S.output)}if(Be.length&&B.type!=="paren"&&(Be[Be.length-1].inner+=B.value),(B.value||B.output)&&z(B),S&&S.type==="text"&&B.type==="text"){S.value+=B.value,S.output=(S.output||"")+B.value;return}B.prev=S,a.push(B),S=B},Je=(B,ue)=>{let $={...p[ue],conditions:1,inner:""};$.prev=S,$.parens=v.parens,$.output=v.output;let Y=(r.capture?"(":"")+$.open;he("parens"),V({type:B,value:ue,output:v.output?"":b}),V({type:"paren",extglob:!0,value:vt(),output:Y}),Be.push($)},Un=B=>{let ue=B.close+(r.capture?")":""),$;if(B.type==="negate"){let Y=Ne;if(B.inner&&B.inner.length>1&&B.inner.includes("/")&&(Y=ke(r)),(Y!==Ne||it()||/^\)+$/.test(It()))&&(ue=B.close=`)$))${Y}`),B.inner.includes("*")&&($=It())&&/^\.[^\\/.]+$/.test($)){let Ce=Na($,{...t,fastpaths:!1}).output;ue=B.close=`)${Ce})${Y})`}B.prev.type==="bos"&&(v.negatedExtglob=!0)}V({type:"paren",extglob:!0,value:F,output:ue}),je("parens")};if(r.fastpaths!==!1&&!/(^[*!]|[/()[\]{}"])/.test(e)){let B=!1,ue=e.replace(vy,($,Y,Ce,Ye,Re,Vt)=>Ye==="\\"?(B=!0,$):Ye==="?"?Y?Y+Ye+(Re?H.repeat(Re.length):""):Vt===0?de+(Re?H.repeat(Re.length):""):H.repeat(Ce.length):Ye==="."?d.repeat(Ce.length):Ye==="*"?Y?Y+Ye+(Re?Ne:""):Ne:Y?$:`\\${$}`);return B===!0&&(r.unescape===!0?ue=ue.replace(/\\/g,""):ue=ue.replace(/\\+/g,$=>$.length%2===0?"\\\\":$?"\\":"")),ue===e&&r.contains===!0?(v.output=e,v):(v.output=Ot.wrapOutput(ue,v,t),v)}for(;!it();){if(F=vt(),F==="\0")continue;if(F==="\\"){let $=me();if($==="/"&&r.bash!==!0||$==="."||$===";")continue;if(!$){F+="\\",V({type:"text",value:F});continue}let Y=/^\\+/.exec(It()),Ce=0;if(Y&&Y[0].length>2&&(Ce=Y[0].length,v.index+=Ce,Ce%2!==0&&(F+="\\")),r.unescape===!0?F=vt():F+=vt(),v.brackets===0){V({type:"text",value:F});continue}}if(v.brackets>0&&(F!=="]"||S.value==="["||S.value==="[^")){if(r.posix!==!1&&F===":"){let $=S.value.slice(1);if($.includes("[")&&(S.posix=!0,$.includes(":"))){let Y=S.value.lastIndexOf("["),Ce=S.value.slice(0,Y),Ye=S.value.slice(Y+2),Re=Sy[Ye];if(Re){S.value=Ce+Re,v.backtrack=!0,vt(),!o.output&&a.indexOf(S)===1&&(o.output=b);continue}}}(F==="["&&me()!==":"||F==="-"&&me()==="]")&&(F=`\\${F}`),F==="]"&&(S.value==="["||S.value==="[^")&&(F=`\\${F}`),r.posix===!0&&F==="!"&&S.value==="["&&(F="^"),S.value+=F,z({value:F});continue}if(v.quotes===1&&F!=='"'){F=Ot.escapeRegex(F),S.value+=F,z({value:F});continue}if(F==='"'){v.quotes=v.quotes===1?0:1,r.keepQuotes===!0&&V({type:"text",value:F});continue}if(F==="("){he("parens"),V({type:"paren",value:F});continue}if(F===")"){if(v.parens===0&&r.strictBrackets===!0)throw new SyntaxError(Ln("opening","("));let $=Be[Be.length-1];if($&&v.parens===$.parens+1){Un(Be.pop());continue}V({type:"paren",value:F,output:v.parens?")":"\\)"}),je("parens");continue}if(F==="["){if(r.nobracket===!0||!It().includes("]")){if(r.nobracket!==!0&&r.strictBrackets===!0)throw new SyntaxError(Ln("closing","]"));F=`\\${F}`}else he("brackets");V({type:"bracket",value:F});continue}if(F==="]"){if(r.nobracket===!0||S&&S.type==="bracket"&&S.value.length===1){V({type:"text",value:F,output:`\\${F}`});continue}if(v.brackets===0){if(r.strictBrackets===!0)throw new SyntaxError(Ln("opening","["));V({type:"text",value:F,output:`\\${F}`});continue}je("brackets");let $=S.value.slice(1);if(S.posix!==!0&&$[0]==="^"&&!$.includes("/")&&(F=`/${F}`),S.value+=F,z({value:F}),r.literalBrackets===!1||Ot.hasRegexChars($))continue;let Y=Ot.escapeRegex(S.value);if(v.output=v.output.slice(0,-S.value.length),r.literalBrackets===!0){v.output+=Y,S.value=Y;continue}S.value=`(${u}${Y}|${S.value})`,v.output+=S.value;continue}if(F==="{"&&r.nobrace!==!0){he("braces");let $={type:"brace",value:F,output:"(",outputIndex:v.output.length,tokensIndex:v.tokens.length};$e.push($),V($);continue}if(F==="}"){let $=$e[$e.length-1];if(r.nobrace===!0||!$){V({type:"text",value:F,output:F});continue}let Y=")";if($.dots===!0){let Ce=a.slice(),Ye=[];for(let Re=Ce.length-1;Re>=0&&(a.pop(),Ce[Re].type!=="brace");Re--)Ce[Re].type!=="dots"&&Ye.unshift(Ce[Re].value);Y=Cy(Ye,r),v.backtrack=!0}if($.comma!==!0&&$.dots!==!0){let Ce=v.output.slice(0,$.outputIndex),Ye=v.tokens.slice($.tokensIndex);$.value=$.output="\\{",F=Y="\\}",v.output=Ce;for(let Re of Ye)v.output+=Re.output||Re.value}V({type:"brace",value:F,output:Y}),je("braces"),$e.pop();continue}if(F==="|"){Be.length>0&&Be[Be.length-1].conditions++,V({type:"text",value:F});continue}if(F===","){let $=F,Y=$e[$e.length-1];Y&&rr[rr.length-1]==="braces"&&(Y.comma=!0,$="|"),V({type:"comma",value:F,output:$});continue}if(F==="/"){if(S.type==="dot"&&v.index===v.start+1){v.start=v.index+1,v.consumed="",v.output="",a.pop(),S=o;continue}V({type:"slash",value:F,output:w});continue}if(F==="."){if(v.braces>0&&S.type==="dot"){S.value==="."&&(S.output=d);let $=$e[$e.length-1];S.type="dots",S.output+=F,S.value+=F,$.dots=!0;continue}if(v.braces+v.parens===0&&S.type!=="bos"&&S.type!=="slash"){V({type:"text",value:F,output:d});continue}V({type:"dot",value:F,output:d});continue}if(F==="?"){if(!(S&&S.value==="(")&&r.noextglob!==!0&&me()==="("&&me(2)!=="?"){Je("qmark",F);continue}if(S&&S.type==="paren"){let Y=me(),Ce=F;if(Y==="<"&&!Ot.supportsLookbehinds())throw new Error("Node.js v10 or higher is required for regex lookbehinds");(S.value==="("&&!/[!=<:]/.test(Y)||Y==="<"&&!/<([!=]|\w+>)/.test(It()))&&(Ce=`\\${F}`),V({type:"text",value:F,output:Ce});continue}if(r.dot!==!0&&(S.type==="slash"||S.type==="bos")){V({type:"qmark",value:F,output:Z});continue}V({type:"qmark",value:F,output:H});continue}if(F==="!"){if(r.noextglob!==!0&&me()==="("&&(me(2)!=="?"||!/[!=<:]/.test(me(3)))){Je("negate",F);continue}if(r.nonegate!==!0&&v.index===0){ce();continue}}if(F==="+"){if(r.noextglob!==!0&&me()==="("&&me(2)!=="?"){Je("plus",F);continue}if(S&&S.value==="("||r.regex===!1){V({type:"plus",value:F,output:g});continue}if(S&&(S.type==="bracket"||S.type==="paren"||S.type==="brace")||v.parens>0){V({type:"plus",value:F});continue}V({type:"plus",value:g});continue}if(F==="@"){if(r.noextglob!==!0&&me()==="("&&me(2)!=="?"){V({type:"at",extglob:!0,value:F,output:""});continue}V({type:"text",value:F});continue}if(F!=="*"){(F==="$"||F==="^")&&(F=`\\${F}`);let $=Fy.exec(It());$&&(F+=$[0],v.index+=$[0].length),V({type:"text",value:F});continue}if(S&&(S.type==="globstar"||S.star===!0)){S.type="star",S.star=!0,S.value+=F,S.output=Ne,v.backtrack=!0,v.globstar=!0,O(F);continue}let B=It();if(r.noextglob!==!0&&/^\([^?]/.test(B)){Je("star",F);continue}if(S.type==="star"){if(r.noglobstar===!0){O(F);continue}let $=S.prev,Y=$.prev,Ce=$.type==="slash"||$.type==="bos",Ye=Y&&(Y.type==="star"||Y.type==="globstar");if(r.bash===!0&&(!Ce||B[0]&&B[0]!=="/")){V({type:"star",value:F,output:""});continue}let Re=v.braces>0&&($.type==="comma"||$.type==="brace"),Vt=Be.length&&($.type==="pipe"||$.type==="paren");if(!Ce&&$.type!=="paren"&&!Re&&!Vt){V({type:"star",value:F,output:""});continue}for(;B.slice(0,3)==="/**";){let yr=e[v.index+4];if(yr&&yr!=="/")break;B=B.slice(3),O("/**",3)}if($.type==="bos"&&it()){S.type="globstar",S.value+=F,S.output=ke(r),v.output=S.output,v.globstar=!0,O(F);continue}if($.type==="slash"&&$.prev.type!=="bos"&&!Ye&&it()){v.output=v.output.slice(0,-($.output+S.output).length),$.output=`(?:${$.output}`,S.type="globstar",S.output=ke(r)+(r.strictSlashes?")":"|$)"),S.value+=F,v.globstar=!0,v.output+=$.output+S.output,O(F);continue}if($.type==="slash"&&$.prev.type!=="bos"&&B[0]==="/"){let yr=B[1]!==void 0?"|$":"";v.output=v.output.slice(0,-($.output+S.output).length),$.output=`(?:${$.output}`,S.type="globstar",S.output=`${ke(r)}${w}|${w}${yr})`,S.value+=F,v.output+=$.output+S.output,v.globstar=!0,O(F+vt()),V({type:"slash",value:"/",output:""});continue}if($.type==="bos"&&B[0]==="/"){S.type="globstar",S.value+=F,S.output=`(?:^|${w}|${ke(r)}${w})`,v.output=S.output,v.globstar=!0,O(F+vt()),V({type:"slash",value:"/",output:""});continue}v.output=v.output.slice(0,-S.output.length),S.type="globstar",S.output=ke(r),S.value+=F,v.output+=S.output,v.globstar=!0,O(F);continue}let ue={type:"star",value:F,output:Ne};if(r.bash===!0){ue.output=".*?",(S.type==="bos"||S.type==="slash")&&(ue.output=K+ue.output),V(ue);continue}if(S&&(S.type==="bracket"||S.type==="paren")&&r.regex===!0){ue.output=F,V(ue);continue}(v.index===v.start||S.type==="slash"||S.type==="dot")&&(S.type==="dot"?(v.output+=M,S.output+=M):r.dot===!0?(v.output+=te,S.output+=te):(v.output+=K,S.output+=K),me()!=="*"&&(v.output+=b,S.output+=b)),V(ue)}for(;v.brackets>0;){if(r.strictBrackets===!0)throw new SyntaxError(Ln("closing","]"));v.output=Ot.escapeLast(v.output,"["),je("brackets")}for(;v.parens>0;){if(r.strictBrackets===!0)throw new SyntaxError(Ln("closing",")"));v.output=Ot.escapeLast(v.output,"("),je("parens")}for(;v.braces>0;){if(r.strictBrackets===!0)throw new SyntaxError(Ln("closing","}"));v.output=Ot.escapeLast(v.output,"{"),je("braces")}if(r.strictSlashes!==!0&&(S.type==="star"||S.type==="bracket")&&V({type:"maybe_slash",value:"",output:`${w}?`}),v.backtrack===!0){v.output="";for(let B of v.tokens)v.output+=B.output!=null?B.output:B.value,B.suffix&&(v.output+=B.suffix)}return v};Na.fastpaths=(e,t)=>{let r={...t},n=typeof r.maxLength=="number"?Math.min(Ti,r.maxLength):Ti,s=e.length;if(s>n)throw new SyntaxError(`Input length: ${s}, exceeds maximum allowed length: ${n}`);e=Cf[e]||e;let o=Ot.isWindows(t),{DOT_LITERAL:a,SLASH_LITERAL:u,ONE_CHAR:c,DOTS_SLASH:f,NO_DOT:p,NO_DOTS:d,NO_DOTS_SLASH:g,STAR:w,START_ANCHOR:b}=Ai.globChars(o),C=r.dot?d:p,q=r.dot?g:p,M=r.capture?"":"?:",te={negated:!1,prefix:""},H=r.bash===!0?".*?":w;r.capture&&(H=`(${H})`);let Z=K=>K.noglobstar===!0?H:`(${M}(?:(?!${b}${K.dot?f:a}).)*?)`,Q=K=>{switch(K){case"*":return`${C}${c}${H}`;case".*":return`${a}${c}${H}`;case"*.*":return`${C}${H}${a}${c}${H}`;case"*/*":return`${C}${H}${u}${c}${q}${H}`;case"**":return C+Z(r);case"**/*":return`(?:${C}${Z(r)}${u})?${q}${c}${H}`;case"**/*.*":return`(?:${C}${Z(r)}${u})?${q}${H}${a}${c}${H}`;case"**/.*":return`(?:${C}${Z(r)}${u})?${a}${c}${H}`;default:{let de=/^(.*?)\.(\w+)$/.exec(K);if(!de)return;let Ne=Q(de[1]);return Ne?Ne+a+de[2]:void 0}}},qe=Ot.removePrefix(e,te),ke=Q(qe);return ke&&r.strictSlashes!==!0&&(ke+=`${u}?`),ke};Ef.exports=Na});var Tf=oe(($3,Af)=>{"use strict";l();var Ey=Pe("path"),$y=vf(),Oa=$f(),_a=$i(),Ay=ys(),Ty=e=>e&&typeof e=="object"&&!Array.isArray(e),Xe=(e,t,r=!1)=>{if(Array.isArray(e)){let p=e.map(g=>Xe(g,t,r));return g=>{for(let w of p){let b=w(g);if(b)return b}return!1}}let n=Ty(e)&&e.tokens&&e.input;if(e===""||typeof e!="string"&&!n)throw new TypeError("Expected pattern to be a non-empty string");let s=t||{},o=_a.isWindows(t),a=n?Xe.compileRe(e,t):Xe.makeRe(e,t,!1,!0),u=a.state;delete a.state;let c=()=>!1;if(s.ignore){let p={...t,ignore:null,onMatch:null,onResult:null};c=Xe(s.ignore,p,r)}let f=(p,d=!1)=>{let{isMatch:g,match:w,output:b}=Xe.test(p,a,t,{glob:e,posix:o}),C={glob:e,state:u,regex:a,posix:o,input:p,output:b,match:w,isMatch:g};return typeof s.onResult=="function"&&s.onResult(C),g===!1?(C.isMatch=!1,d?C:!1):c(p)?(typeof s.onIgnore=="function"&&s.onIgnore(C),C.isMatch=!1,d?C:!1):(typeof s.onMatch=="function"&&s.onMatch(C),d?C:!0)};return r&&(f.state=u),f};Xe.test=(e,t,r,{glob:n,posix:s}={})=>{if(typeof e!="string")throw new TypeError("Expected input to be a string");if(e==="")return{isMatch:!1,output:""};let o=r||{},a=o.format||(s?_a.toPosixSlashes:null),u=e===n,c=u&&a?a(e):e;return u===!1&&(c=a?a(e):e,u=c===n),(u===!1||o.capture===!0)&&(o.matchBase===!0||o.basename===!0?u=Xe.matchBase(e,t,r,s):u=t.exec(c)),{isMatch:!!u,match:u,output:c}};Xe.matchBase=(e,t,r,n=_a.isWindows(r))=>(t instanceof RegExp?t:Xe.makeRe(t,r)).test(Ey.basename(e));Xe.isMatch=(e,t,r)=>Xe(t,r)(e);Xe.parse=(e,t)=>Array.isArray(e)?e.map(r=>Xe.parse(r,t)):Oa(e,{...t,fastpaths:!1});Xe.scan=(e,t)=>$y(e,t);Xe.compileRe=(e,t,r=!1,n=!1)=>{if(r===!0)return e.output;let s=t||{},o=s.contains?"":"^",a=s.contains?"":"$",u=`${o}(?:${e.output})${a}`;e&&e.negated===!0&&(u=`^(?!${u}).*$`);let c=Xe.toRegex(u,t);return n===!0&&(c.state=e),c};Xe.makeRe=(e,t={},r=!1,n=!1)=>{if(!e||typeof e!="string")throw new TypeError("Expected a non-empty string");let s={negated:!1,fastpaths:!0};return t.fastpaths!==!1&&(e[0]==="."||e[0]==="*")&&(s.output=Oa.fastpaths(e,t)),s.output||(s=Oa(e,t)),Xe.compileRe(s,t,r,n)};Xe.toRegex=(e,t)=>{try{let r=t||{};return new RegExp(e,r.flags||(r.nocase?"i":""))}catch(r){if(t&&t.debug===!0)throw r;return/$^/}};Xe.constants=Ay;Af.exports=Xe});var Bf=oe((T3,Lf)=>{"use strict";l();Lf.exports=Tf()});var Pf=oe((B3,Rf)=>{l();Rf.exports=function(e,t){if(typeof e!="string")throw new TypeError("expected path to be a string");if(e==="\\"||e==="/")return"/";var r=e.length;if(r<=1)return e;var n="";if(r>4&&e[3]==="\\"){var s=e[2];(s==="?"||s===".")&&e.slice(0,2)==="\\\\"&&(e=e.slice(2),n="//")}var o=e.split(/[/\\]+/);return t!==!1&&o[o.length-1]===""&&o.pop(),n+o.join("/")}});var Rr=oe((_f,If)=>{"use strict";l();Object.defineProperty(_f,"__esModule",{value:!0});var Of=Bf(),Ly=Pf(),kf="!",By={returnIndex:!1},Ry=e=>Array.isArray(e)?e:[e],Py=(e,t)=>{if(typeof e=="function")return e;if(typeof e=="string"){let r=Of(e,t);return n=>e===n||r(n)}return e instanceof RegExp?r=>e.test(r):r=>!1},Nf=(e,t,r,n)=>{let s=Array.isArray(r),o=s?r[0]:r;if(!s&&typeof o!="string")throw new TypeError("anymatch: second argument must be a string: got "+Object.prototype.toString.call(o));let a=Ly(o,!1);for(let c=0;c<t.length;c++){let f=t[c];if(f(a))return n?-1:!1}let u=s&&[a].concat(r.slice(1));for(let c=0;c<e.length;c++){let f=e[c];if(s?f(...u):f(a))return n?c:!0}return n?-1:!1},Ia=(e,t,r=By)=>{if(e==null)throw new TypeError("anymatch: specify first argument");let n=typeof r=="boolean"?{returnIndex:r}:r,s=n.returnIndex||!1,o=Ry(e),a=o.filter(c=>typeof c=="string"&&c.charAt(0)===kf).map(c=>c.slice(1)).map(c=>Of(c,n)),u=o.filter(c=>typeof c!="string"||typeof c=="string"&&c.charAt(0)!==kf).map(c=>Py(c,n));return t==null?(c,f=!1)=>Nf(u,a,c,typeof f=="boolean"?f:!1):Nf(u,a,t,s)};Ia.default=Ia;If.exports=Ia});var sp=oe(Pi=>{l();Object.defineProperty(Pi,"__esModule",{value:!0});Pi.default=/((['"])(?:(?!\2|\\).|\\(?:\r\n|[\s\S]))*(\2)?|`(?:[^`\\$]|\\[\s\S]|\$(?!\{)|\$\{(?:[^{}]|\{[^}]*\}?)*\}?)*(`)?)|(\/\/.*)|(\/\*(?:[^*]|\*(?!\/))*(\*\/)?)|(\/(?!\*)(?:\[(?:(?![\]\\]).|\\.)*\]|(?![\/\]\\]).|\\.)+\/(?:(?!\s*(?:\b|[\u0080-\uFFFF$\\'"~({]|[+\-!](?!=)|\.?\d))|[gmiyus]{1,6}\b(?![\u0080-\uFFFF$\\]|\s*(?:[+\-*%&|^<>!=?({]|\/(?![\/*])))))|(0[xX][\da-fA-F]+|0[oO][0-7]+|0[bB][01]+|(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?)|((?!\d)(?:(?!\s)[$\w\u0080-\uFFFF]|\\u[\da-fA-F]{4}|\\u\{[\da-fA-F]+\})+)|(--|\+\+|&&|\|\||=>|\.{3}|(?:[+\-\/%&|^]|\*{1,2}|<{1,2}|>{1,3}|!=?|={1,2})=?|[?~.,:;[\](){}])|(\s+)|(^$|[\s\S])/g;Pi.matchToToken=function(e){var t={type:"invalid",value:e[0],closed:void 0};return e[1]?(t.type="string",t.closed=!!(e[3]||e[4])):e[5]?t.type="comment":e[6]?(t.type="comment",t.closed=!!e[7]):e[8]?t.type="regex":e[9]?t.type="number":e[10]?t.type="name":e[11]?t.type="punctuator":e[12]&&(t.type="whitespace"),t}});var cp=oe(Cs=>{"use strict";l();Object.defineProperty(Cs,"__esModule",{value:!0});Cs.isIdentifierChar=up;Cs.isIdentifierName=hD;Cs.isIdentifierStart=ap;var Xa="\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC",ip="\xB7\u0300-\u036F\u0387\u0483-\u0487\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u0669\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u06F0-\u06F9\u0711\u0730-\u074A\u07A6-\u07B0\u07C0-\u07C9\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0897-\u089F\u08CA-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0966-\u096F\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09E6-\u09EF\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A66-\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AE6-\u0AEF\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B66-\u0B6F\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0BE6-\u0BEF\u0C00-\u0C04\u0C3C\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C66-\u0C6F\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0CE6-\u0CEF\u0CF3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D66-\u0D6F\u0D81-\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0E50-\u0E59\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0ED0-\u0ED9\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1040-\u1049\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F-\u109D\u135D-\u135F\u1369-\u1371\u1712-\u1715\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u17E0-\u17E9\u180B-\u180D\u180F-\u1819\u18A9\u1920-\u192B\u1930-\u193B\u1946-\u194F\u19D0-\u19DA\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AB0-\u1ABD\u1ABF-\u1ACE\u1B00-\u1B04\u1B34-\u1B44\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BB0-\u1BB9\u1BE6-\u1BF3\u1C24-\u1C37\u1C40-\u1C49\u1C50-\u1C59\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DFF\u200C\u200D\u203F\u2040\u2054\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\u30FB\uA620-\uA629\uA66F\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA82C\uA880\uA881\uA8B4-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F1\uA8FF-\uA909\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9D0-\uA9D9\uA9E5\uA9F0-\uA9F9\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA50-\uAA59\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uABF0-\uABF9\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFF10-\uFF19\uFF3F\uFF65",pD=new RegExp("["+Xa+"]"),mD=new RegExp("["+Xa+ip+"]");Xa=ip=null;var op=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,4,51,13,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,39,27,10,22,251,41,7,1,17,2,60,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,31,9,2,0,3,0,2,37,2,0,26,0,2,0,45,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,200,32,32,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,26,3994,6,582,6842,29,1763,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,433,44,212,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,42,9,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,229,29,3,0,496,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],dD=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,7,9,32,4,318,1,80,3,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,68,8,2,0,3,0,2,3,2,4,2,0,15,1,83,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,7,19,58,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,343,9,54,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,10,5350,0,7,14,11465,27,2343,9,87,9,39,4,60,6,26,9,535,9,470,0,2,54,8,3,82,0,12,1,19628,1,4178,9,519,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,245,1,2,9,726,6,110,6,6,9,4759,9,787719,239];function Ka(e,t){let r=65536;for(let n=0,s=t.length;n<s;n+=2){if(r+=t[n],r>e)return!1;if(r+=t[n+1],r>=e)return!0}return!1}function ap(e){return e<65?e===36:e<=90?!0:e<97?e===95:e<=122?!0:e<=65535?e>=170&&pD.test(String.fromCharCode(e)):Ka(e,op)}function up(e){return e<48?e===36:e<58?!0:e<65?!1:e<=90?!0:e<97?e===95:e<=122?!0:e<=65535?e>=170&&mD.test(String.fromCharCode(e)):Ka(e,op)||Ka(e,dD)}function hD(e){let t=!0;for(let r=0;r<e.length;r++){let n=e.charCodeAt(r);if((n&64512)===55296&&r+1<e.length){let s=e.charCodeAt(++r);(s&64512)===56320&&(n=65536+((n&1023)<<10)+(s&1023))}if(t){if(t=!1,!ap(n))return!1}else if(!up(n))return!1}return!t}});var mp=oe(un=>{"use strict";l();Object.defineProperty(un,"__esModule",{value:!0});un.isKeyword=wD;un.isReservedWord=lp;un.isStrictBindOnlyReservedWord=pp;un.isStrictBindReservedWord=bD;un.isStrictReservedWord=fp;var Za={keyword:["break","case","catch","continue","debugger","default","do","else","finally","for","function","if","return","switch","throw","try","var","const","while","with","new","this","super","class","extends","export","import","null","true","false","in","instanceof","typeof","void","delete"],strict:["implements","interface","let","package","private","protected","public","static","yield"],strictBind:["eval","arguments"]},gD=new Set(Za.keyword),yD=new Set(Za.strict),DD=new Set(Za.strictBind);function lp(e,t){return t&&e==="await"||e==="enum"}function fp(e,t){return lp(e,t)||yD.has(e)}function pp(e){return DD.has(e)}function bD(e,t){return fp(e,t)||pp(e)}function wD(e){return gD.has(e)}});var dp=oe(mr=>{"use strict";l();Object.defineProperty(mr,"__esModule",{value:!0});Object.defineProperty(mr,"isIdentifierChar",{enumerable:!0,get:function(){return Qa.isIdentifierChar}});Object.defineProperty(mr,"isIdentifierName",{enumerable:!0,get:function(){return Qa.isIdentifierName}});Object.defineProperty(mr,"isIdentifierStart",{enumerable:!0,get:function(){return Qa.isIdentifierStart}});Object.defineProperty(mr,"isKeyword",{enumerable:!0,get:function(){return Es.isKeyword}});Object.defineProperty(mr,"isReservedWord",{enumerable:!0,get:function(){return Es.isReservedWord}});Object.defineProperty(mr,"isStrictBindOnlyReservedWord",{enumerable:!0,get:function(){return Es.isStrictBindOnlyReservedWord}});Object.defineProperty(mr,"isStrictBindReservedWord",{enumerable:!0,get:function(){return Es.isStrictBindReservedWord}});Object.defineProperty(mr,"isStrictReservedWord",{enumerable:!0,get:function(){return Es.isStrictReservedWord}});var Qa=cp(),Es=mp()});var tu=oe((DT,eu)=>{l();var hp=process.argv||[],ki=process.env,xD=!("NO_COLOR"in ki||hp.includes("--no-color"))&&("FORCE_COLOR"in ki||hp.includes("--color")||process.platform==="win32"||Pe!=null&&Pe("tty").isatty(1)&&ki.TERM!=="dumb"||"CI"in ki),SD=(e,t,r=e)=>n=>{let s=""+n,o=s.indexOf(t,e.length);return~o?e+FD(s,t,r,o)+t:e+s+t},FD=(e,t,r,n)=>{let s="",o=0;do s+=e.substring(o,n)+r,o=n+t.length,n=e.indexOf(t,o);while(~n);return s+e.substring(o)},gp=(e=xD)=>{let t=e?SD:()=>String;return{isColorSupported:e,reset:t("\x1B[0m","\x1B[0m"),bold:t("\x1B[1m","\x1B[22m","\x1B[22m\x1B[1m"),dim:t("\x1B[2m","\x1B[22m","\x1B[22m\x1B[2m"),italic:t("\x1B[3m","\x1B[23m"),underline:t("\x1B[4m","\x1B[24m"),inverse:t("\x1B[7m","\x1B[27m"),hidden:t("\x1B[8m","\x1B[28m"),strikethrough:t("\x1B[9m","\x1B[29m"),black:t("\x1B[30m","\x1B[39m"),red:t("\x1B[31m","\x1B[39m"),green:t("\x1B[32m","\x1B[39m"),yellow:t("\x1B[33m","\x1B[39m"),blue:t("\x1B[34m","\x1B[39m"),magenta:t("\x1B[35m","\x1B[39m"),cyan:t("\x1B[36m","\x1B[39m"),white:t("\x1B[37m","\x1B[39m"),gray:t("\x1B[90m","\x1B[39m"),bgBlack:t("\x1B[40m","\x1B[49m"),bgRed:t("\x1B[41m","\x1B[49m"),bgGreen:t("\x1B[42m","\x1B[49m"),bgYellow:t("\x1B[43m","\x1B[49m"),bgBlue:t("\x1B[44m","\x1B[49m"),bgMagenta:t("\x1B[45m","\x1B[49m"),bgCyan:t("\x1B[46m","\x1B[49m"),bgWhite:t("\x1B[47m","\x1B[49m"),blackBright:t("\x1B[90m","\x1B[39m"),redBright:t("\x1B[91m","\x1B[39m"),greenBright:t("\x1B[92m","\x1B[39m"),yellowBright:t("\x1B[93m","\x1B[39m"),blueBright:t("\x1B[94m","\x1B[39m"),magentaBright:t("\x1B[95m","\x1B[39m"),cyanBright:t("\x1B[96m","\x1B[39m"),whiteBright:t("\x1B[97m","\x1B[39m"),bgBlackBright:t("\x1B[100m","\x1B[49m"),bgRedBright:t("\x1B[101m","\x1B[49m"),bgGreenBright:t("\x1B[102m","\x1B[49m"),bgYellowBright:t("\x1B[103m","\x1B[49m"),bgBlueBright:t("\x1B[104m","\x1B[49m"),bgMagentaBright:t("\x1B[105m","\x1B[49m"),bgCyanBright:t("\x1B[106m","\x1B[49m"),bgWhiteBright:t("\x1B[107m","\x1B[49m")}};eu.exports=gp();eu.exports.createColors=gp});var Dp=oe((xT,yp)=>{"use strict";l();var vD=/[|\\{}()[\]^$+*?.]/g;yp.exports=function(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(vD,"\\$&")}});var wp=oe((FT,bp)=>{"use strict";l();bp.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}});var ru=oe((CT,vp)=>{l();var cn=wp(),Fp={};for(Ni in cn)cn.hasOwnProperty(Ni)&&(Fp[cn[Ni]]=Ni);var Ni,W=vp.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(St in W)if(W.hasOwnProperty(St)){if(!("channels"in W[St]))throw new Error("missing channels property: "+St);if(!("labels"in W[St]))throw new Error("missing channel labels property: "+St);if(W[St].labels.length!==W[St].channels)throw new Error("channel and label counts mismatch: "+St);xp=W[St].channels,Sp=W[St].labels,delete W[St].channels,delete W[St].labels,Object.defineProperty(W[St],"channels",{value:xp}),Object.defineProperty(W[St],"labels",{value:Sp})}var xp,Sp,St;W.rgb.hsl=function(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,s=Math.min(t,r,n),o=Math.max(t,r,n),a=o-s,u,c,f;return o===s?u=0:t===o?u=(r-n)/a:r===o?u=2+(n-t)/a:n===o&&(u=4+(t-r)/a),u=Math.min(u*60,360),u<0&&(u+=360),f=(s+o)/2,o===s?c=0:f<=.5?c=a/(o+s):c=a/(2-o-s),[u,c*100,f*100]};W.rgb.hsv=function(e){var t,r,n,s,o,a=e[0]/255,u=e[1]/255,c=e[2]/255,f=Math.max(a,u,c),p=f-Math.min(a,u,c),d=function(g){return(f-g)/6/p+1/2};return p===0?s=o=0:(o=p/f,t=d(a),r=d(u),n=d(c),a===f?s=n-r:u===f?s=1/3+t-n:c===f&&(s=2/3+r-t),s<0?s+=1:s>1&&(s-=1)),[s*360,o*100,f*100]};W.rgb.hwb=function(e){var t=e[0],r=e[1],n=e[2],s=W.rgb.hsl(e)[0],o=1/255*Math.min(t,Math.min(r,n));return n=1-1/255*Math.max(t,Math.max(r,n)),[s,o*100,n*100]};W.rgb.cmyk=function(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,s,o,a,u;return u=Math.min(1-t,1-r,1-n),s=(1-t-u)/(1-u)||0,o=(1-r-u)/(1-u)||0,a=(1-n-u)/(1-u)||0,[s*100,o*100,a*100,u*100]};function CD(e,t){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)+Math.pow(e[2]-t[2],2)}W.rgb.keyword=function(e){var t=Fp[e];if(t)return t;var r=1/0,n;for(var s in cn)if(cn.hasOwnProperty(s)){var o=cn[s],a=CD(e,o);a<r&&(r=a,n=s)}return n};W.keyword.rgb=function(e){return cn[e]};W.rgb.xyz=function(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255;t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92,r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92,n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92;var s=t*.4124+r*.3576+n*.1805,o=t*.2126+r*.7152+n*.0722,a=t*.0193+r*.1192+n*.9505;return[s*100,o*100,a*100]};W.rgb.lab=function(e){var t=W.rgb.xyz(e),r=t[0],n=t[1],s=t[2],o,a,u;return r/=95.047,n/=100,s/=108.883,r=r>.008856?Math.pow(r,1/3):7.787*r+16/116,n=n>.008856?Math.pow(n,1/3):7.787*n+16/116,s=s>.008856?Math.pow(s,1/3):7.787*s+16/116,o=116*n-16,a=500*(r-n),u=200*(n-s),[o,a,u]};W.hsl.rgb=function(e){var t=e[0]/360,r=e[1]/100,n=e[2]/100,s,o,a,u,c;if(r===0)return c=n*255,[c,c,c];n<.5?o=n*(1+r):o=n+r-n*r,s=2*n-o,u=[0,0,0];for(var f=0;f<3;f++)a=t+1/3*-(f-1),a<0&&a++,a>1&&a--,6*a<1?c=s+(o-s)*6*a:2*a<1?c=o:3*a<2?c=s+(o-s)*(2/3-a)*6:c=s,u[f]=c*255;return u};W.hsl.hsv=function(e){var t=e[0],r=e[1]/100,n=e[2]/100,s=r,o=Math.max(n,.01),a,u;return n*=2,r*=n<=1?n:2-n,s*=o<=1?o:2-o,u=(n+r)/2,a=n===0?2*s/(o+s):2*r/(n+r),[t,a*100,u*100]};W.hsv.rgb=function(e){var t=e[0]/60,r=e[1]/100,n=e[2]/100,s=Math.floor(t)%6,o=t-Math.floor(t),a=255*n*(1-r),u=255*n*(1-r*o),c=255*n*(1-r*(1-o));switch(n*=255,s){case 0:return[n,c,a];case 1:return[u,n,a];case 2:return[a,n,c];case 3:return[a,u,n];case 4:return[c,a,n];case 5:return[n,a,u]}};W.hsv.hsl=function(e){var t=e[0],r=e[1]/100,n=e[2]/100,s=Math.max(n,.01),o,a,u;return u=(2-r)*n,o=(2-r)*s,a=r*s,a/=o<=1?o:2-o,a=a||0,u/=2,[t,a*100,u*100]};W.hwb.rgb=function(e){var t=e[0]/360,r=e[1]/100,n=e[2]/100,s=r+n,o,a,u,c;s>1&&(r/=s,n/=s),o=Math.floor(6*t),a=1-n,u=6*t-o,o&1&&(u=1-u),c=r+u*(a-r);var f,p,d;switch(o){default:case 6:case 0:f=a,p=c,d=r;break;case 1:f=c,p=a,d=r;break;case 2:f=r,p=a,d=c;break;case 3:f=r,p=c,d=a;break;case 4:f=c,p=r,d=a;break;case 5:f=a,p=r,d=c;break}return[f*255,p*255,d*255]};W.cmyk.rgb=function(e){var t=e[0]/100,r=e[1]/100,n=e[2]/100,s=e[3]/100,o,a,u;return o=1-Math.min(1,t*(1-s)+s),a=1-Math.min(1,r*(1-s)+s),u=1-Math.min(1,n*(1-s)+s),[o*255,a*255,u*255]};W.xyz.rgb=function(e){var t=e[0]/100,r=e[1]/100,n=e[2]/100,s,o,a;return s=t*3.2406+r*-1.5372+n*-.4986,o=t*-.9689+r*1.8758+n*.0415,a=t*.0557+r*-.204+n*1.057,s=s>.0031308?1.055*Math.pow(s,1/2.4)-.055:s*12.92,o=o>.0031308?1.055*Math.pow(o,1/2.4)-.055:o*12.92,a=a>.0031308?1.055*Math.pow(a,1/2.4)-.055:a*12.92,s=Math.min(Math.max(0,s),1),o=Math.min(Math.max(0,o),1),a=Math.min(Math.max(0,a),1),[s*255,o*255,a*255]};W.xyz.lab=function(e){var t=e[0],r=e[1],n=e[2],s,o,a;return t/=95.047,r/=100,n/=108.883,t=t>.008856?Math.pow(t,1/3):7.787*t+16/116,r=r>.008856?Math.pow(r,1/3):7.787*r+16/116,n=n>.008856?Math.pow(n,1/3):7.787*n+16/116,s=116*r-16,o=500*(t-r),a=200*(r-n),[s,o,a]};W.lab.xyz=function(e){var t=e[0],r=e[1],n=e[2],s,o,a;o=(t+16)/116,s=r/500+o,a=o-n/200;var u=Math.pow(o,3),c=Math.pow(s,3),f=Math.pow(a,3);return o=u>.008856?u:(o-16/116)/7.787,s=c>.008856?c:(s-16/116)/7.787,a=f>.008856?f:(a-16/116)/7.787,s*=95.047,o*=100,a*=108.883,[s,o,a]};W.lab.lch=function(e){var t=e[0],r=e[1],n=e[2],s,o,a;return s=Math.atan2(n,r),o=s*360/2/Math.PI,o<0&&(o+=360),a=Math.sqrt(r*r+n*n),[t,a,o]};W.lch.lab=function(e){var t=e[0],r=e[1],n=e[2],s,o,a;return a=n/360*2*Math.PI,s=r*Math.cos(a),o=r*Math.sin(a),[t,s,o]};W.rgb.ansi16=function(e){var t=e[0],r=e[1],n=e[2],s=1 in arguments?arguments[1]:W.rgb.hsv(e)[2];if(s=Math.round(s/50),s===0)return 30;var o=30+(Math.round(n/255)<<2|Math.round(r/255)<<1|Math.round(t/255));return s===2&&(o+=60),o};W.hsv.ansi16=function(e){return W.rgb.ansi16(W.hsv.rgb(e),e[2])};W.rgb.ansi256=function(e){var t=e[0],r=e[1],n=e[2];if(t===r&&r===n)return t<8?16:t>248?231:Math.round((t-8)/247*24)+232;var s=16+36*Math.round(t/255*5)+6*Math.round(r/255*5)+Math.round(n/255*5);return s};W.ansi16.rgb=function(e){var t=e%10;if(t===0||t===7)return e>50&&(t+=3.5),t=t/10.5*255,[t,t,t];var r=(~~(e>50)+1)*.5,n=(t&1)*r*255,s=(t>>1&1)*r*255,o=(t>>2&1)*r*255;return[n,s,o]};W.ansi256.rgb=function(e){if(e>=232){var t=(e-232)*10+8;return[t,t,t]}e-=16;var r,n=Math.floor(e/36)/5*255,s=Math.floor((r=e%36)/6)/5*255,o=r%6/5*255;return[n,s,o]};W.rgb.hex=function(e){var t=((Math.round(e[0])&255)<<16)+((Math.round(e[1])&255)<<8)+(Math.round(e[2])&255),r=t.toString(16).toUpperCase();return"000000".substring(r.length)+r};W.hex.rgb=function(e){var t=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!t)return[0,0,0];var r=t[0];t[0].length===3&&(r=r.split("").map(function(u){return u+u}).join(""));var n=parseInt(r,16),s=n>>16&255,o=n>>8&255,a=n&255;return[s,o,a]};W.rgb.hcg=function(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,s=Math.max(Math.max(t,r),n),o=Math.min(Math.min(t,r),n),a=s-o,u,c;return a<1?u=o/(1-a):u=0,a<=0?c=0:s===t?c=(r-n)/a%6:s===r?c=2+(n-t)/a:c=4+(t-r)/a+4,c/=6,c%=1,[c*360,a*100,u*100]};W.hsl.hcg=function(e){var t=e[1]/100,r=e[2]/100,n=1,s=0;return r<.5?n=2*t*r:n=2*t*(1-r),n<1&&(s=(r-.5*n)/(1-n)),[e[0],n*100,s*100]};W.hsv.hcg=function(e){var t=e[1]/100,r=e[2]/100,n=t*r,s=0;return n<1&&(s=(r-n)/(1-n)),[e[0],n*100,s*100]};W.hcg.rgb=function(e){var t=e[0]/360,r=e[1]/100,n=e[2]/100;if(r===0)return[n*255,n*255,n*255];var s=[0,0,0],o=t%1*6,a=o%1,u=1-a,c=0;switch(Math.floor(o)){case 0:s[0]=1,s[1]=a,s[2]=0;break;case 1:s[0]=u,s[1]=1,s[2]=0;break;case 2:s[0]=0,s[1]=1,s[2]=a;break;case 3:s[0]=0,s[1]=u,s[2]=1;break;case 4:s[0]=a,s[1]=0,s[2]=1;break;default:s[0]=1,s[1]=0,s[2]=u}return c=(1-r)*n,[(r*s[0]+c)*255,(r*s[1]+c)*255,(r*s[2]+c)*255]};W.hcg.hsv=function(e){var t=e[1]/100,r=e[2]/100,n=t+r*(1-t),s=0;return n>0&&(s=t/n),[e[0],s*100,n*100]};W.hcg.hsl=function(e){var t=e[1]/100,r=e[2]/100,n=r*(1-t)+.5*t,s=0;return n>0&&n<.5?s=t/(2*n):n>=.5&&n<1&&(s=t/(2*(1-n))),[e[0],s*100,n*100]};W.hcg.hwb=function(e){var t=e[1]/100,r=e[2]/100,n=t+r*(1-t);return[e[0],(n-t)*100,(1-n)*100]};W.hwb.hcg=function(e){var t=e[1]/100,r=e[2]/100,n=1-r,s=n-t,o=0;return s<1&&(o=(n-s)/(1-s)),[e[0],s*100,o*100]};W.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]};W.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]};W.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]};W.gray.hsl=W.gray.hsv=function(e){return[0,0,e[0]]};W.gray.hwb=function(e){return[0,100,e[0]]};W.gray.cmyk=function(e){return[0,0,0,e[0]]};W.gray.lab=function(e){return[e[0],0,0]};W.gray.hex=function(e){var t=Math.round(e[0]/100*255)&255,r=(t<<16)+(t<<8)+t,n=r.toString(16).toUpperCase();return"000000".substring(n.length)+n};W.rgb.gray=function(e){var t=(e[0]+e[1]+e[2])/3;return[t/255*100]}});var Ep=oe(($T,Cp)=>{l();var Oi=ru();function ED(){for(var e={},t=Object.keys(Oi),r=t.length,n=0;n<r;n++)e[t[n]]={distance:-1,parent:null};return e}function $D(e){var t=ED(),r=[e];for(t[e].distance=0;r.length;)for(var n=r.pop(),s=Object.keys(Oi[n]),o=s.length,a=0;a<o;a++){var u=s[a],c=t[u];c.distance===-1&&(c.distance=t[n].distance+1,c.parent=n,r.unshift(u))}return t}function AD(e,t){return function(r){return t(e(r))}}function TD(e,t){for(var r=[t[e].parent,e],n=Oi[t[e].parent][e],s=t[e].parent;t[s].parent;)r.unshift(t[s].parent),n=AD(Oi[t[s].parent][s],n),s=t[s].parent;return n.conversion=r,n}Cp.exports=function(e){for(var t=$D(e),r={},n=Object.keys(t),s=n.length,o=0;o<s;o++){var a=n[o],u=t[a];u.parent!==null&&(r[a]=TD(a,t))}return r}});var Ap=oe((TT,$p)=>{l();var nu=ru(),LD=Ep(),Rn={},BD=Object.keys(nu);function RD(e){var t=function(r){return r==null?r:(arguments.length>1&&(r=Array.prototype.slice.call(arguments)),e(r))};return"conversion"in e&&(t.conversion=e.conversion),t}function PD(e){var t=function(r){if(r==null)return r;arguments.length>1&&(r=Array.prototype.slice.call(arguments));var n=e(r);if(typeof n=="object")for(var s=n.length,o=0;o<s;o++)n[o]=Math.round(n[o]);return n};return"conversion"in e&&(t.conversion=e.conversion),t}BD.forEach(function(e){Rn[e]={},Object.defineProperty(Rn[e],"channels",{value:nu[e].channels}),Object.defineProperty(Rn[e],"labels",{value:nu[e].labels});var t=LD(e),r=Object.keys(t);r.forEach(function(n){var s=t[n];Rn[e][n]=PD(s),Rn[e][n].raw=RD(s)})});$p.exports=Rn});var Lp=oe((BT,Tp)=>{"use strict";l();var Pn=Ap(),_i=(e,t)=>function(){return`\x1B[${e.apply(Pn,arguments)+t}m`},Ii=(e,t)=>function(){let r=e.apply(Pn,arguments);return`\x1B[${38+t};5;${r}m`},ji=(e,t)=>function(){let r=e.apply(Pn,arguments);return`\x1B[${38+t};2;${r[0]};${r[1]};${r[2]}m`};function kD(){let e=new Map,t={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],gray:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};t.color.grey=t.color.gray;for(let s of Object.keys(t)){let o=t[s];for(let a of Object.keys(o)){let u=o[a];t[a]={open:`\x1B[${u[0]}m`,close:`\x1B[${u[1]}m`},o[a]=t[a],e.set(u[0],u[1])}Object.defineProperty(t,s,{value:o,enumerable:!1}),Object.defineProperty(t,"codes",{value:e,enumerable:!1})}let r=s=>s,n=(s,o,a)=>[s,o,a];t.color.close="\x1B[39m",t.bgColor.close="\x1B[49m",t.color.ansi={ansi:_i(r,0)},t.color.ansi256={ansi256:Ii(r,0)},t.color.ansi16m={rgb:ji(n,0)},t.bgColor.ansi={ansi:_i(r,10)},t.bgColor.ansi256={ansi256:Ii(r,10)},t.bgColor.ansi16m={rgb:ji(n,10)};for(let s of Object.keys(Pn)){if(typeof Pn[s]!="object")continue;let o=Pn[s];s==="ansi16"&&(s="ansi"),"ansi16"in o&&(t.color.ansi[s]=_i(o.ansi16,0),t.bgColor.ansi[s]=_i(o.ansi16,10)),"ansi256"in o&&(t.color.ansi256[s]=Ii(o.ansi256,0),t.bgColor.ansi256[s]=Ii(o.ansi256,10)),"rgb"in o&&(t.color.ansi16m[s]=ji(o.rgb,0),t.bgColor.ansi16m[s]=ji(o.rgb,10))}return t}Object.defineProperty(Tp,"exports",{enumerable:!0,get:kD})});var Rp=oe((PT,Bp)=>{"use strict";l();Bp.exports=(e,t)=>{t=t||process.argv;let r=e.startsWith("-")?"":e.length===1?"-":"--",n=t.indexOf(r+e),s=t.indexOf("--");return n!==-1&&(s===-1?!0:n<s)}});var kp=oe((NT,Pp)=>{"use strict";l();var ND=Pe("os"),Zt=Rp(),Dt=process.env,kn;Zt("no-color")||Zt("no-colors")||Zt("color=false")?kn=!1:(Zt("color")||Zt("colors")||Zt("color=true")||Zt("color=always"))&&(kn=!0);"FORCE_COLOR"in Dt&&(kn=Dt.FORCE_COLOR.length===0||parseInt(Dt.FORCE_COLOR,10)!==0);function OD(e){return e===0?!1:{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}function _D(e){if(kn===!1)return 0;if(Zt("color=16m")||Zt("color=full")||Zt("color=truecolor"))return 3;if(Zt("color=256"))return 2;if(e&&!e.isTTY&&kn!==!0)return 0;let t=kn?1:0;if(process.platform==="win32"){let r=ND.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(r[0])>=10&&Number(r[2])>=10586?Number(r[2])>=14931?3:2:1}if("CI"in Dt)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(r=>r in Dt)||Dt.CI_NAME==="codeship"?1:t;if("TEAMCITY_VERSION"in Dt)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(Dt.TEAMCITY_VERSION)?1:0;if(Dt.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in Dt){let r=parseInt((Dt.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(Dt.TERM_PROGRAM){case"iTerm.app":return r>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(Dt.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(Dt.TERM)||"COLORTERM"in Dt?1:(Dt.TERM==="dumb",t)}function su(e){let t=_D(e);return OD(t)}Pp.exports={supportsColor:su,stdout:su(process.stdout),stderr:su(process.stderr)}});var jp=oe((_T,Ip)=>{"use strict";l();var ID=/(?:\\(u[a-f\d]{4}|x[a-f\d]{2}|.))|(?:\{(~)?(\w+(?:\([^)]*\))?(?:\.\w+(?:\([^)]*\))?)*)(?:[ \t]|(?=\r?\n)))|(\})|((?:.|[\r\n\f])+?)/gi,Np=/(?:^|\.)(\w+)(?:\(([^)]*)\))?/g,jD=/^(['"])((?:\\.|(?!\1)[^\\])*)\1$/,MD=/\\(u[a-f\d]{4}|x[a-f\d]{2}|.)|([^\\])/gi,WD=new Map([["n",`
`],["r","\r"],["t","	"],["b","\b"],["f","\f"],["v","\v"],["0","\0"],["\\","\\"],["e","\x1B"],["a","\x07"]]);function _p(e){return e[0]==="u"&&e.length===5||e[0]==="x"&&e.length===3?String.fromCharCode(parseInt(e.slice(1),16)):WD.get(e)||e}function qD(e,t){let r=[],n=t.trim().split(/\s*,\s*/g),s;for(let o of n)if(!isNaN(o))r.push(Number(o));else if(s=o.match(jD))r.push(s[2].replace(MD,(a,u,c)=>u?_p(u):c));else throw new Error(`Invalid Chalk template style argument: ${o} (in style '${e}')`);return r}function HD(e){Np.lastIndex=0;let t=[],r;for(;(r=Np.exec(e))!==null;){let n=r[1];if(r[2]){let s=qD(n,r[2]);t.push([n].concat(s))}else t.push([n])}return t}function Op(e,t){let r={};for(let s of t)for(let o of s.styles)r[o[0]]=s.inverse?null:o.slice(1);let n=e;for(let s of Object.keys(r))if(Array.isArray(r[s])){if(!(s in n))throw new Error(`Unknown Chalk style: ${s}`);r[s].length>0?n=n[s].apply(n,r[s]):n=n[s]}return n}Ip.exports=(e,t)=>{let r=[],n=[],s=[];if(t.replace(ID,(o,a,u,c,f,p)=>{if(a)s.push(_p(a));else if(c){let d=s.join("");s=[],n.push(r.length===0?d:Op(e,r)(d)),r.push({inverse:u,styles:HD(c)})}else if(f){if(r.length===0)throw new Error("Found extraneous } in Chalk template literal");n.push(Op(e,r)(s.join(""))),s=[],r.pop()}else s.push(p)}),n.push(s.join("")),r.length>0){let o=`Chalk template literal is missing ${r.length} closing bracket${r.length===1?"":"s"} (\`}\`)`;throw new Error(o)}return n.join("")}});var Gp=oe((jT,As)=>{"use strict";l();var ou=Dp(),tt=Lp(),iu=kp().stdout,GD=jp(),Wp=process.platform==="win32"&&!(process.env.TERM||"").toLowerCase().startsWith("xterm"),qp=["ansi","ansi","ansi256","ansi16m"],Hp=new Set(["gray"]),Nn=Object.create(null);function Mp(e,t){t=t||{};let r=iu?iu.level:0;e.level=t.level===void 0?r:t.level,e.enabled="enabled"in t?t.enabled:e.level>0}function $s(e){if(!this||!(this instanceof $s)||this.template){let t={};return Mp(t,e),t.template=function(){let r=[].slice.call(arguments);return VD.apply(null,[t.template].concat(r))},Object.setPrototypeOf(t,$s.prototype),Object.setPrototypeOf(t.template,t),t.template.constructor=$s,t.template}Mp(this,e)}Wp&&(tt.blue.open="\x1B[94m");for(let e of Object.keys(tt))tt[e].closeRe=new RegExp(ou(tt[e].close),"g"),Nn[e]={get(){let t=tt[e];return Mi.call(this,this._styles?this._styles.concat(t):[t],this._empty,e)}};Nn.visible={get(){return Mi.call(this,this._styles||[],!0,"visible")}};tt.color.closeRe=new RegExp(ou(tt.color.close),"g");for(let e of Object.keys(tt.color.ansi))Hp.has(e)||(Nn[e]={get(){let t=this.level;return function(){let n={open:tt.color[qp[t]][e].apply(null,arguments),close:tt.color.close,closeRe:tt.color.closeRe};return Mi.call(this,this._styles?this._styles.concat(n):[n],this._empty,e)}}});tt.bgColor.closeRe=new RegExp(ou(tt.bgColor.close),"g");for(let e of Object.keys(tt.bgColor.ansi)){if(Hp.has(e))continue;let t="bg"+e[0].toUpperCase()+e.slice(1);Nn[t]={get(){let r=this.level;return function(){let s={open:tt.bgColor[qp[r]][e].apply(null,arguments),close:tt.bgColor.close,closeRe:tt.bgColor.closeRe};return Mi.call(this,this._styles?this._styles.concat(s):[s],this._empty,e)}}}}var UD=Object.defineProperties(()=>{},Nn);function Mi(e,t,r){let n=function(){return zD.apply(n,arguments)};n._styles=e,n._empty=t;let s=this;return Object.defineProperty(n,"level",{enumerable:!0,get(){return s.level},set(o){s.level=o}}),Object.defineProperty(n,"enabled",{enumerable:!0,get(){return s.enabled},set(o){s.enabled=o}}),n.hasGrey=this.hasGrey||r==="gray"||r==="grey",n.__proto__=UD,n}function zD(){let e=arguments,t=e.length,r=String(arguments[0]);if(t===0)return"";if(t>1)for(let s=1;s<t;s++)r+=" "+e[s];if(!this.enabled||this.level<=0||!r)return this._empty?"":r;let n=tt.dim.open;Wp&&this.hasGrey&&(tt.dim.open="");for(let s of this._styles.slice().reverse())r=s.open+r.replace(s.closeRe,s.open)+s.close,r=r.replace(/\r?\n/g,`${s.close}$&${s.open}`);return tt.dim.open=n,r}function VD(e,t){if(!Array.isArray(t))return[].slice.call(arguments,1).join(" ");let r=[].slice.call(arguments,2),n=[t.raw[0]];for(let s=1;s<t.length;s++)n.push(String(r[s-1]).replace(/[{}\\]/g,"\\$&")),n.push(String(t.raw[s]));return GD(e,n.join(""))}Object.defineProperties($s.prototype,Nn);As.exports=$s();As.exports.supportsColor=iu;As.exports.default=As.exports});var Zp=oe(Ts=>{"use strict";l();Object.defineProperty(Ts,"__esModule",{value:!0});Ts.default=t1;Ts.shouldHighlight=Xp;var Up=sp(),zp=dp(),uu=JD(tu(),!0);function Jp(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,r=new WeakMap;return(Jp=function(n){return n?r:t})(e)}function JD(e,t){if(!t&&e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var r=Jp(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(o!=="default"&&{}.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}var Yp=typeof process=="object"&&(process.env.FORCE_COLOR==="0"||process.env.FORCE_COLOR==="false")?(0,uu.createColors)(!1):uu.default,Vp=(e,t)=>r=>e(t(r)),YD=new Set(["as","async","from","get","of","set"]);function KD(e){return{keyword:e.cyan,capitalized:e.yellow,jsxIdentifier:e.yellow,punctuator:e.yellow,number:e.magenta,string:e.green,regex:e.magenta,comment:e.gray,invalid:Vp(Vp(e.white,e.bgRed),e.bold)}}var XD=/\r\n|[\n\r\u2028\u2029]/,ZD=/^[()[\]{}]$/,Kp;{let e=/^[a-z][\w-]*$/i,t=function(r,n,s){if(r.type==="name"){if((0,zp.isKeyword)(r.value)||(0,zp.isStrictReservedWord)(r.value,!0)||YD.has(r.value))return"keyword";if(e.test(r.value)&&(s[n-1]==="<"||s.slice(n-2,n)==="</"))return"jsxIdentifier";if(r.value[0]!==r.value[0].toLowerCase())return"capitalized"}return r.type==="punctuator"&&ZD.test(r.value)?"bracket":r.type==="invalid"&&(r.value==="@"||r.value==="#")?"punctuator":r.type};Kp=function*(r){let n;for(;n=Up.default.exec(r);){let s=Up.matchToToken(n);yield{type:t(s,n.index,r),value:s.value}}}}function QD(e,t){let r="";for(let{type:n,value:s}of Kp(t)){let o=e[n];o?r+=s.split(XD).map(a=>o(a)).join(`
`):r+=s}return r}function Xp(e){return Yp.isColorSupported||e.forceColor}var au;function e1(e){if(e){var t;return(t=au)!=null||(au=(0,uu.createColors)(!0)),au}return Yp}function t1(e,t={}){if(e!==""&&Xp(t)){let r=KD(e1(t.forceColor));return QD(r,e)}else return e}{let e,t;Ts.getChalk=({forceColor:r})=>{var n;if((n=e)!=null||(e=Gp()),r){var s;return(s=t)!=null||(t=new e.constructor({enabled:!0,level:1})),t}return e}}});var im=oe(Wi=>{"use strict";l();Object.defineProperty(Wi,"__esModule",{value:!0});Wi.codeFrameColumns=sm;Wi.default=a1;var Qp=Zp(),lu=r1(tu(),!0);function nm(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,r=new WeakMap;return(nm=function(n){return n?r:t})(e)}function r1(e,t){if(!t&&e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var r=nm(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(o!=="default"&&{}.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}var n1=typeof process=="object"&&(process.env.FORCE_COLOR==="0"||process.env.FORCE_COLOR==="false")?(0,lu.createColors)(!1):lu.default,em=(e,t)=>r=>e(t(r)),cu;function s1(e){if(e){var t;return(t=cu)!=null||(cu=(0,lu.createColors)(!0)),cu}return n1}var tm=!1;function i1(e){return{gutter:e.gray,marker:em(e.red,e.bold),message:em(e.red,e.bold)}}var rm=/\r\n|[\n\r\u2028\u2029]/;function o1(e,t,r){let n=Object.assign({column:0,line:-1},e.start),s=Object.assign({},n,e.end),{linesAbove:o=2,linesBelow:a=3}=r||{},u=n.line,c=n.column,f=s.line,p=s.column,d=Math.max(u-(o+1),0),g=Math.min(t.length,f+a);u===-1&&(d=0),f===-1&&(g=t.length);let w=f-u,b={};if(w)for(let C=0;C<=w;C++){let q=C+u;if(!c)b[q]=!0;else if(C===0){let M=t[q-1].length;b[q]=[c,M-c+1]}else if(C===w)b[q]=[0,p];else{let M=t[q-C].length;b[q]=[0,M]}}else c===p?c?b[u]=[c,0]:b[u]=!0:b[u]=[c,p-c];return{start:d,end:g,markerLines:b}}function sm(e,t,r={}){let n=(r.highlightCode||r.forceColor)&&(0,Qp.shouldHighlight)(r),s=s1(r.forceColor),o=i1(s),a=(C,q)=>n?C(q):q,u=e.split(rm),{start:c,end:f,markerLines:p}=o1(t,u,r),d=t.start&&typeof t.start.column=="number",g=String(f).length,b=(n?(0,Qp.default)(e,r):e).split(rm,f).slice(c,f).map((C,q)=>{let M=c+1+q,H=` ${` ${M}`.slice(-g)} |`,Z=p[M],Q=!p[M+1];if(Z){let qe="";if(Array.isArray(Z)){let ke=C.slice(0,Math.max(Z[0]-1,0)).replace(/[^\t]/g," "),K=Z[1]||1;qe=[`
 `,a(o.gutter,H.replace(/\d/g," "))," ",ke,a(o.marker,"^").repeat(K)].join(""),Q&&r.message&&(qe+=" "+a(o.message,r.message))}return[a(o.marker,">"),a(o.gutter,H),C.length>0?` ${C}`:"",qe].join("")}else return` ${a(o.gutter,H)}${C.length>0?` ${C}`:""}`}).join(`
`);return r.message&&!d&&(b=`${" ".repeat(g+1)}${r.message}
${b}`),n?s.reset(b):b}function a1(e,t,r,n={}){if(!tm){tm=!0;let o="Passing lineNumber and colNumber is deprecated to @babel/code-frame. Please use `codeFrameColumns`.";if(process.emitWarning)process.emitWarning(o,"DeprecationWarning");else{let a=new Error(o);a.name="DeprecationWarning",console.warn(new Error(o))}}return r=Math.max(r,0),sm(e,{start:{column:r,line:t}},n)}});var Am=oe((k6,xu)=>{l();(function(){var e;function t(r,n){var s=this instanceof t?this:e;if(s.reset(n),typeof r=="string"&&r.length>0&&s.hash(r),s!==this)return s}t.prototype.hash=function(r){var n,s,o,a,u;switch(u=r.length,this.len+=u,s=this.k1,o=0,this.rem){case 0:s^=u>o?r.charCodeAt(o++)&65535:0;case 1:s^=u>o?(r.charCodeAt(o++)&65535)<<8:0;case 2:s^=u>o?(r.charCodeAt(o++)&65535)<<16:0;case 3:s^=u>o?(r.charCodeAt(o)&255)<<24:0,s^=u>o?(r.charCodeAt(o++)&65280)>>8:0}if(this.rem=u+this.rem&3,u-=this.rem,u>0){for(n=this.h1;s=s*11601+(s&65535)*3432906752&4294967295,s=s<<15|s>>>17,s=s*13715+(s&65535)*461832192&4294967295,n^=s,n=n<<13|n>>>19,n=n*5+3864292196&4294967295,!(o>=u);)s=r.charCodeAt(o++)&65535^(r.charCodeAt(o++)&65535)<<8^(r.charCodeAt(o++)&65535)<<16,a=r.charCodeAt(o++),s^=(a&255)<<24^(a&65280)>>8;switch(s=0,this.rem){case 3:s^=(r.charCodeAt(o+2)&65535)<<16;case 2:s^=(r.charCodeAt(o+1)&65535)<<8;case 1:s^=r.charCodeAt(o)&65535}this.h1=n}return this.k1=s,this},t.prototype.result=function(){var r,n;return r=this.k1,n=this.h1,r>0&&(r=r*11601+(r&65535)*3432906752&4294967295,r=r<<15|r>>>17,r=r*13715+(r&65535)*461832192&4294967295,n^=r),n^=this.len,n^=n>>>16,n=n*51819+(n&65535)*2246770688&4294967295,n^=n>>>13,n=n*44597+(n&65535)*3266445312&4294967295,n^=n>>>16,n>>>0},t.prototype.reset=function(r){return this.h1=typeof r=="number"?r:0,this.rem=this.k1=this.len=0,this},e=new t,typeof xu<"u"?xu.exports=t:this.MurmurHash3=t})()});var Tm=oe(fn=>{"use strict";l();Object.defineProperty(fn,"__esModule",{value:!0});fn.signals=void 0;fn.signals=[];fn.signals.push("SIGHUP","SIGINT","SIGTERM");process.platform!=="win32"&&fn.signals.push("SIGALRM","SIGABRT","SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT");process.platform==="linux"&&fn.signals.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT")});var Lm=oe(hr=>{"use strict";l();var Yi;Object.defineProperty(hr,"__esModule",{value:!0});hr.unload=hr.load=hr.onExit=hr.signals=void 0;var Ki=Tm();Object.defineProperty(hr,"signals",{enumerable:!0,get:function(){return Ki.signals}});var Xi=e=>!!e&&typeof e=="object"&&typeof e.removeListener=="function"&&typeof e.emit=="function"&&typeof e.reallyExit=="function"&&typeof e.listeners=="function"&&typeof e.kill=="function"&&typeof e.pid=="number"&&typeof e.on=="function",Su=Symbol.for("signal-exit emitter"),Fu=globalThis,z1=Object.defineProperty.bind(Object),vu=class{emitted={afterExit:!1,exit:!1};listeners={afterExit:[],exit:[]};count=0;id=Math.random();constructor(){if(Fu[Su])return Fu[Su];z1(Fu,Su,{value:this,writable:!1,enumerable:!1,configurable:!1})}on(t,r){this.listeners[t].push(r)}removeListener(t,r){let n=this.listeners[t],s=n.indexOf(r);s!==-1&&(s===0&&n.length===1?n.length=0:n.splice(s,1))}emit(t,r,n){if(this.emitted[t])return!1;this.emitted[t]=!0;let s=!1;for(let o of this.listeners[t])s=o(r,n)===!0||s;return t==="exit"&&(s=this.emit("afterExit",r,n)||s),s}},Zi=class{},V1=e=>({onExit(t,r){return e.onExit(t,r)},load(){return e.load()},unload(){return e.unload()}}),Cu=class extends Zi{onExit(){return()=>{}}load(){}unload(){}},Eu=class extends Zi{#n=$u.platform==="win32"?"SIGINT":"SIGHUP";#t=new vu;#e;#a;#o;#i={};#r=!1;constructor(t){super(),this.#e=t,this.#i={};for(let r of Ki.signals)this.#i[r]=()=>{let n=this.#e.listeners(r),{count:s}=this.#t,o=t;if(typeof o.__signal_exit_emitter__=="object"&&typeof o.__signal_exit_emitter__.count=="number"&&(s+=o.__signal_exit_emitter__.count),n.length===s){this.unload();let a=this.#t.emit("exit",null,r),u=r==="SIGHUP"?this.#n:r;a||t.kill(t.pid,u)}};this.#o=t.reallyExit,this.#a=t.emit}onExit(t,r){if(!Xi(this.#e))return()=>{};this.#r===!1&&this.load();let n=r?.alwaysLast?"afterExit":"exit";return this.#t.on(n,t),()=>{this.#t.removeListener(n,t),this.#t.listeners.exit.length===0&&this.#t.listeners.afterExit.length===0&&this.unload()}}load(){if(!this.#r){this.#r=!0,this.#t.count+=1;for(let t of Ki.signals)try{let r=this.#i[t];r&&this.#e.on(t,r)}catch{}this.#e.emit=(t,...r)=>this.#s(t,...r),this.#e.reallyExit=t=>this.#c(t)}}unload(){this.#r&&(this.#r=!1,Ki.signals.forEach(t=>{let r=this.#i[t];if(!r)throw new Error("Listener not defined for signal: "+t);try{this.#e.removeListener(t,r)}catch{}}),this.#e.emit=this.#a,this.#e.reallyExit=this.#o,this.#t.count-=1)}#c(t){return Xi(this.#e)?(this.#e.exitCode=t||0,this.#t.emit("exit",this.#e.exitCode,null),this.#o.call(this.#e,this.#e.exitCode)):0}#s(t,...r){let n=this.#a;if(t==="exit"&&Xi(this.#e)){typeof r[0]=="number"&&(this.#e.exitCode=r[0]);let s=n.call(this.#e,t,...r);return this.#t.emit("exit",this.#e.exitCode,null),s}else return n.call(this.#e,t,...r)}},$u=globalThis.process;Yi=V1(Xi($u)?new Eu($u):new Cu),hr.onExit=Yi.onExit,hr.load=Yi.load,hr.unload=Yi.unload});var Rm=oe((M6,Bs)=>{"use strict";l();Bs.exports=eb;Bs.exports.sync=tb;Bs.exports._getTmpname=Au;Bs.exports._cleanupOnExit=Tu;var We=Pe("fs"),J1=Am(),{onExit:Bm}=Lm(),Y1=Pe("path"),{promisify:zt}=Pe("util"),Ir={},K1=function(){try{return Pe("worker_threads").threadId}catch{return 0}}(),X1=0;function Au(e){return e+"."+J1(y).hash(String(process.pid)).hash(String(K1)).hash(String(++X1)).result()}function Tu(e){return()=>{try{We.unlinkSync(typeof e=="function"?e():e)}catch{}}}function Z1(e){return new Promise(t=>{Ir[e]||(Ir[e]=[]),Ir[e].push(t),Ir[e].length===1&&t()})}function Qi(e){return e.code==="ENOSYS"||(!process.getuid||process.getuid()!==0)&&(e.code==="EINVAL"||e.code==="EPERM")}async function Q1(e,t,r={}){typeof r=="string"&&(r={encoding:r});let n,s,o=Bm(Tu(()=>s)),a=Y1.resolve(e);try{await Z1(a);let u=await zt(We.realpath)(e).catch(()=>e);if(s=Au(u),!r.mode||!r.chown){let c=await zt(We.stat)(u).catch(()=>{});c&&(r.mode==null&&(r.mode=c.mode),r.chown==null&&process.getuid&&(r.chown={uid:c.uid,gid:c.gid}))}n=await zt(We.open)(s,"w",r.mode),r.tmpfileCreated&&await r.tmpfileCreated(s),ArrayBuffer.isView(t)?await zt(We.write)(n,t,0,t.length,0):t!=null&&await zt(We.write)(n,String(t),0,String(r.encoding||"utf8")),r.fsync!==!1&&await zt(We.fsync)(n),await zt(We.close)(n),n=null,r.chown&&await zt(We.chown)(s,r.chown.uid,r.chown.gid).catch(c=>{if(!Qi(c))throw c}),r.mode&&await zt(We.chmod)(s,r.mode).catch(c=>{if(!Qi(c))throw c}),await zt(We.rename)(s,u)}finally{n&&await zt(We.close)(n).catch(()=>{}),o(),await zt(We.unlink)(s).catch(()=>{}),Ir[a].shift(),Ir[a].length>0?Ir[a][0]():delete Ir[a]}}async function eb(e,t,r,n){r instanceof Function&&(n=r,r={});let s=Q1(e,t,r);if(n)try{let o=await s;return n(o)}catch(o){return n(o)}return s}function tb(e,t,r){typeof r=="string"?r={encoding:r}:r||(r={});try{e=We.realpathSync(e)}catch{}let n=Au(e);if(!r.mode||!r.chown)try{let c=We.statSync(e);r=Object.assign({},r),r.mode||(r.mode=c.mode),!r.chown&&process.getuid&&(r.chown={uid:c.uid,gid:c.gid})}catch{}let s,o=Tu(n),a=Bm(o),u=!0;try{if(s=We.openSync(n,"w",r.mode||438),r.tmpfileCreated&&r.tmpfileCreated(n),ArrayBuffer.isView(t)?We.writeSync(s,t,0,t.length,0):t!=null&&We.writeSync(s,String(t),0,String(r.encoding||"utf8")),r.fsync!==!1&&We.fsyncSync(s),We.closeSync(s),s=null,r.chown)try{We.chownSync(n,r.chown.uid,r.chown.gid)}catch(c){if(!Qi(c))throw c}if(r.mode)try{We.chmodSync(n,r.mode)}catch(c){if(!Qi(c))throw c}We.renameSync(n,e),u=!1}finally{if(s)try{We.closeSync(s)}catch{}a(),u&&o()}}});var Sd=oe((O8,xd)=>{"use strict";l();var wd=Pe("child_process"),yd=wd.spawn,Ub=wd.exec;xd.exports=function(e,t,r){if(typeof t=="function"&&r===void 0&&(r=t,t=void 0),e=parseInt(e),Number.isNaN(e)){if(r)return r(new Error("pid must be a number"));throw new Error("pid must be a number")}var n={},s={};switch(n[e]=[],s[e]=1,process.platform){case"win32":Ub("taskkill /pid "+e+" /T /F",r);break;case"darwin":ju(e,n,s,function(o){return yd("pgrep",["-P",o])},function(){Dd(n,t,r)});break;default:ju(e,n,s,function(o){return yd("ps",["-o","pid","--no-headers","--ppid",o])},function(){Dd(n,t,r)});break}};function Dd(e,t,r){var n={};try{Object.keys(e).forEach(function(s){e[s].forEach(function(o){n[o]||(bd(o,t),n[o]=1)}),n[s]||(bd(s,t),n[s]=1)})}catch(s){if(r)return r(s);throw s}if(r)return r()}function bd(e,t){try{process.kill(parseInt(e,10),t)}catch(r){if(r.code!=="ESRCH")throw r}}function ju(e,t,r,n,s){var o=n(e),a="";o.stdout.on("data",function(f){var f=f.toString("ascii");a+=f});var u=function(c){if(delete r[e],c!=0){Object.keys(r).length==0&&s();return}a.match(/\d+/g).forEach(function(f){f=parseInt(f,10),t[e].push(f),t[f]=[],r[f]=1,ju(f,t,r,n,s)})};o.on("close",u)}});var Ud=oe((hk,Gd)=>{"use strict";l();Gd.exports=e=>{if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}});var Vd=oe((yk,zd)=>{l();var Ns=1e3,Os=Ns*60,_s=Os*60,Is=_s*24,aw=Is*365.25;zd.exports=function(e,t){t=t||{};var r=typeof e;if(r==="string"&&e.length>0)return uw(e);if(r==="number"&&isNaN(e)===!1)return t.long?lw(e):cw(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function uw(e){if(e=String(e),!(e.length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]),n=(t[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*aw;case"days":case"day":case"d":return r*Is;case"hours":case"hour":case"hrs":case"hr":case"h":return r*_s;case"minutes":case"minute":case"mins":case"min":case"m":return r*Os;case"seconds":case"second":case"secs":case"sec":case"s":return r*Ns;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function cw(e){return e>=Is?Math.round(e/Is)+"d":e>=_s?Math.round(e/_s)+"h":e>=Os?Math.round(e/Os)+"m":e>=Ns?Math.round(e/Ns)+"s":e+"ms"}function lw(e){return mo(e,Is,"day")||mo(e,_s,"hour")||mo(e,Os,"minute")||mo(e,Ns,"second")||e+" ms"}function mo(e,t,r){if(!(e<t))return e<t*1.5?Math.floor(e/t)+" "+r:Math.ceil(e/t)+" "+r+"s"}});var Vu=oe((ve,Jd)=>{l();ve=Jd.exports=zu.debug=zu.default=zu;ve.coerce=hw;ve.disable=mw;ve.enable=pw;ve.enabled=dw;ve.humanize=Vd();ve.names=[];ve.skips=[];ve.formatters={};var Uu;function fw(e){var t=0,r;for(r in e)t=(t<<5)-t+e.charCodeAt(r),t|=0;return ve.colors[Math.abs(t)%ve.colors.length]}function zu(e){function t(){if(t.enabled){var r=t,n=+new Date,s=n-(Uu||n);r.diff=s,r.prev=Uu,r.curr=n,Uu=n;for(var o=new Array(arguments.length),a=0;a<o.length;a++)o[a]=arguments[a];o[0]=ve.coerce(o[0]),typeof o[0]!="string"&&o.unshift("%O");var u=0;o[0]=o[0].replace(/%([a-zA-Z%])/g,function(f,p){if(f==="%%")return f;u++;var d=ve.formatters[p];if(typeof d=="function"){var g=o[u];f=d.call(r,g),o.splice(u,1),u--}return f}),ve.formatArgs.call(r,o);var c=t.log||ve.log||console.log.bind(console);c.apply(r,o)}}return t.namespace=e,t.enabled=ve.enabled(e),t.useColors=ve.useColors(),t.color=fw(e),typeof ve.init=="function"&&ve.init(t),t}function pw(e){ve.save(e),ve.names=[],ve.skips=[];for(var t=(typeof e=="string"?e:"").split(/[\s,]+/),r=t.length,n=0;n<r;n++)t[n]&&(e=t[n].replace(/\*/g,".*?"),e[0]==="-"?ve.skips.push(new RegExp("^"+e.substr(1)+"$")):ve.names.push(new RegExp("^"+e+"$")))}function mw(){ve.enable("")}function dw(e){var t,r;for(t=0,r=ve.skips.length;t<r;t++)if(ve.skips[t].test(e))return!1;for(t=0,r=ve.names.length;t<r;t++)if(ve.names[t].test(e))return!0;return!1}function hw(e){return e instanceof Error?e.stack||e.message:e}});var Xd=oe((Ft,Kd)=>{l();Ft=Kd.exports=Vu();Ft.log=Dw;Ft.formatArgs=yw;Ft.save=bw;Ft.load=Yd;Ft.useColors=gw;Ft.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:ww();Ft.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function gw(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}Ft.formatters.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}};function yw(e){var t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+Ft.humanize(this.diff),!!t){var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var n=0,s=0;e[0].replace(/%[a-zA-Z%]/g,function(o){o!=="%%"&&(n++,o==="%c"&&(s=n))}),e.splice(s,0,r)}}function Dw(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function bw(e){try{e==null?Ft.storage.removeItem("debug"):Ft.storage.debug=e}catch{}}function Yd(){var e;try{e=Ft.storage.debug}catch{}return!e&&typeof process<"u"&&"env"in process&&(e=process.env.DEBUG),e}Ft.enable(Yd());function ww(){try{return window.localStorage}catch{}}});var th=oe((ct,eh)=>{l();var Zd=Pe("tty"),js=Pe("util");ct=eh.exports=Vu();ct.init=$w;ct.log=vw;ct.formatArgs=Fw;ct.save=Cw;ct.load=Qd;ct.useColors=Sw;ct.colors=[6,2,3,4,5,1];ct.inspectOpts=Object.keys(process.env).filter(function(e){return/^debug_/i.test(e)}).reduce(function(e,t){var r=t.substring(6).toLowerCase().replace(/_([a-z])/g,function(s,o){return o.toUpperCase()}),n=process.env[t];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),e[r]=n,e},{});var In=parseInt(process.env.DEBUG_FD,10)||2;In!==1&&In!==2&&js.deprecate(function(){},"except for stderr(2) and stdout(1), any other usage of DEBUG_FD is deprecated. Override debug.log if you want to use a different log function (https://git.io/debug_fd)")();var xw=In===1?process.stdout:In===2?process.stderr:Ew(In);function Sw(){return"colors"in ct.inspectOpts?!!ct.inspectOpts.colors:Zd.isatty(In)}ct.formatters.o=function(e){return this.inspectOpts.colors=this.useColors,js.inspect(e,this.inspectOpts).split(`
`).map(function(t){return t.trim()}).join(" ")};ct.formatters.O=function(e){return this.inspectOpts.colors=this.useColors,js.inspect(e,this.inspectOpts)};function Fw(e){var t=this.namespace,r=this.useColors;if(r){var n=this.color,s="  \x1B[3"+n+";1m"+t+" \x1B[0m";e[0]=s+e[0].split(`
`).join(`
`+s),e.push("\x1B[3"+n+"m+"+ct.humanize(this.diff)+"\x1B[0m")}else e[0]=new Date().toUTCString()+" "+t+" "+e[0]}function vw(){return xw.write(js.format.apply(js,arguments)+`
`)}function Cw(e){e==null?delete process.env.DEBUG:process.env.DEBUG=e}function Qd(){return process.env.DEBUG}function Ew(e){var t,r=process.binding("tty_wrap");switch(r.guessHandleType(e)){case"TTY":t=new Zd.WriteStream(e),t._type="tty",t._handle&&t._handle.unref&&t._handle.unref();break;case"FILE":var n=Pe("fs");t=new n.SyncWriteStream(e,{autoClose:!1}),t._type="fs";break;case"PIPE":case"TCP":var s=Pe("net");t=new s.Socket({fd:e,readable:!1,writable:!0}),t.readable=!1,t.read=null,t._type="pipe",t._handle&&t._handle.unref&&t._handle.unref();break;default:throw new Error("Implement me. Unknown stream file type!")}return t.fd=e,t._isStdio=!0,t}function $w(e){e.inspectOpts={};for(var t=Object.keys(ct.inspectOpts),r=0;r<t.length;r++)e.inspectOpts[t[r]]=ct.inspectOpts[t[r]]}ct.enable(Qd())});var rh=oe((Sk,Ju)=>{l();typeof process<"u"&&process.type==="renderer"?Ju.exports=Xd():Ju.exports=th()});var fh=oe((Tk,lh)=>{"use strict";l();var ch=Pe("fs"),Xu;function Rw(){try{return ch.statSync("/.dockerenv"),!0}catch{return!1}}function Pw(){try{return ch.readFileSync("/proc/self/cgroup","utf8").includes("docker")}catch{return!1}}lh.exports=()=>(Xu===void 0&&(Xu=Rw()||Pw()),Xu)});var dh=oe((Bk,Zu)=>{"use strict";l();var kw=Pe("os"),Nw=Pe("fs"),ph=fh(),mh=()=>{if(process.platform!=="linux")return!1;if(kw.release().toLowerCase().includes("microsoft"))return!ph();try{return Nw.readFileSync("/proc/version","utf8").toLowerCase().includes("microsoft")?!ph():!1}catch{return!1}};process.env.__IS_WSL_TEST__?Zu.exports=mh:Zu.exports=mh()});l();import{argv as g2}from"node:process";l();import{parseArgs as Ug}from"node:util";l();l();import{stdout as zn,stderr as Vn,env as Jn,platform as fc}from"node:process";import{execFileSync as tg}from"node:child_process";import{fileURLToPath as rg}from"node:url";import{dirname as ng,join as sg}from"node:path";var Uh=Object.create,mc=Object.defineProperty,zh=Object.getOwnPropertyDescriptor,Vh=Object.getOwnPropertyNames,Jh=Object.getPrototypeOf,Yh=Object.prototype.hasOwnProperty,Kh=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Xh=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of Vh(t))!Yh.call(e,s)&&s!==r&&mc(e,s,{get:()=>t[s],enumerable:!(n=zh(t,s))||n.enumerable});return e},Zh=(e,t,r)=>(r=e!=null?Uh(Jh(e)):{},Xh(t||!e||!e.__esModule?mc(r,"default",{value:e,enumerable:!0}):r,e)),Qh=Kh((e,t)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var{round:r,floor:n,max:s}=Math,o=O=>{let[,z]=/([a-f\d]{3,6})/i.exec(O)||[],ce=z?z.length:0;if(ce===3)z=z[0]+z[0]+z[1]+z[1]+z[2]+z[2];else if(ce!==6)return[0,0,0];let he=parseInt(z,16);return[he>>16&255,he>>8&255,255&he]},a=(O,z,ce)=>O===z&&z===ce?O<8?16:O>248?231:r((O-8)/247*24)+232:16+36*r(O/51)+6*r(z/51)+r(ce/51),u=O=>{let z,ce,he,je,V,Je;return O<8?30+O:O<16?O-8+90:(O>=232?z=ce=he=(10*(O-232)+8)/255:(Je=(O-=16)%36,z=n(O/36)/5,ce=n(Je/6)/5,he=Je%6/5),je=2*s(z,ce,he),je===0?30:(V=30+(r(he)<<2|r(ce)<<1|r(z)),je===2?V+60:V))},c=(O,z,ce)=>u(a(O,z,ce)),f=(O=>{let z=Gr=>!!B.find($o=>Gr.test($o)),ce=globalThis,he=ce.Deno,je=he!=null,V=ce.process||he||{},Je=V.stdout,Un=(je?he.build.os:V.platform)==="win32",B=V.argv||V.args||[],ue=V.env||{},$=-1;if(je)try{ue=ue.toObject()}catch{$=0}let Y="FORCE_COLOR",Ce=ue[Y],Ye=parseInt(Ce),Re=Ce==="false"?0:isNaN(Ye)?3:Ye,Vt="NO_COLOR"in ue||Re===0||z(/^-{1,2}(no-color|color=(false|never))$/),yr=Y in ue&&Re||z(/^-{1,2}color=?(true|always)?$/),Ph=(ue.NEXT_RUNTIME||"").indexOf("edge")>-1||"PM2_HOME"in ue&&"pm_id"in ue||(je?he.isatty(1):Je&&"isTTY"in Je);return Vt?0:($<0&&($=((Gr,$o,kh)=>{let{TERM:Hs,COLORTERM:cc}=Gr;return"TF_BUILD"in Gr?1:"TEAMCITY_VERSION"in Gr?2:"CI"in Gr?["GITHUB_ACTIONS","GITEA_ACTIONS"].some(Nh=>Nh in Gr)?3:1:!$o||/-mono|dumb/i.test(Hs)?0:kh||cc==="truecolor"||cc==="24bit"||Hs==="xterm-kitty"?3:/-256(colou?r)?$/i.test(Hs)?2:/^screen|^tmux|^xterm|^vt[1-5][0-9]([0-9])?|^ansi|color|cygwin|linux|mintty|rxvt/i.test(Hs)?1:3})(ue,Ph,Un)),yr&&$===0?3:$)})(),p=f>0,d={open:"",close:""},g=p?(O,z)=>({open:`\x1B[${O}m`,close:`\x1B[${z}m`}):()=>d,w=39,b=49,C=O=>(z,ce,he)=>O(a(z,ce,he)),q=O=>z=>{let[ce,he,je]=o(z);return O(ce,he,je)},M=O=>g(`38;5;${O}`,w),te=O=>g(`48;5;${O}`,b),H=(O,z,ce)=>g(`38;2;${O};${z};${ce}`,w),Z=(O,z,ce)=>g(`48;2;${O};${z};${ce}`,b);f===1?(M=O=>g(u(O),w),te=O=>g(u(O)+10,b),H=(O,z,ce)=>g(c(O,z,ce),w),Z=(O,z,ce)=>g(c(O,z,ce)+10,b)):f===2&&(H=C(M),Z=C(te));var Q,qe,ke={ansi256:M,bgAnsi256:te,fg:M,bg:te,rgb:H,bgRgb:Z,hex:q(H),bgHex:q(Z),visible:d,reset:g(0,0),inverse:g(7,27),hidden:g(8,28),bold:g(1,22),dim:g(2,22),italic:g(3,23),underline:g(4,24),strikethrough:g(9,29),strike:g(9,29),grey:g(90,w),gray:g(90,w),bgGrey:g(100,b),bgGray:g(100,b)},K=["black","red","green","yellow","blue","magenta","cyan","white"],de="Bright",Ne=30;for(Q of K)qe="bg"+Q[0].toUpperCase()+Q.slice(1),ke[Q]=g(Ne,w),ke[Q+de]=g(Ne+60,w),ke[qe]=g(Ne+10,b),ke[qe+de]=g(Ne+70,b),Ne++;var{defineProperty:v,defineProperties:Be,setPrototypeOf:$e}=Object,rr=/[][[()#;?]*(?:[0-9]{1,4}(?:;[0-9]{0,4})*)?[0-9A-ORZcf-nqry=><]/g,S=/(\r?\n)/g,F={},it=({_p:O},{open:z,close:ce})=>{let he=(Je,...Un)=>{if(!Je)return"";let B=he._p,{_a:ue,_b:$}=B,Y=Je.raw!=null?String.raw(Je,...Un):""+Je;if(Y.includes("\x1B"))for(;B!=null;){let Ce=B.close,Ye=Ce.length;if(Ye){let Re,Vt=0,yr="";for(;~(Re=Y.indexOf(Ce,Vt));)yr+=Y.slice(Vt,Re)+B.open,Vt=Re+Ye;Vt&&(Y=yr+Y.slice(Vt))}B=B._p}return Y.includes(`
`)&&(Y=Y.replace(S,$+"$1"+ue)),ue+Y+$},je=z,V=ce;return O!=null&&(je=O._a+z,V=ce+O._b),$e(he,vt),he._p={open:z,close:ce,_a:je,_b:V,_p:O},he.open=je,he.close=V,he},me=function(){let O=z=>""+z;return O.isSupported=()=>p,O.strip=z=>z.replace(rr,""),O.extend=z=>{for(let ce in z){let he=z[ce],je=typeof he,V=je==="string"?H(...o(he)):he;F[ce]=je==="function"?{get(){return(...Je)=>it(this,he(...Je))}}:{get(){let Je=it(this,V);return v(this,ce,{value:Je}),Je}}}vt=Be({},F),$e(O,vt)},O.extend(ke),O},vt,It=new me;t.exports=It,t.exports.Ansis=me}),Yn=Zh(Qh(),1),{ansi256:w2,fg:x2,bgAnsi256:S2,bg:F2,rgb:v2,bgRgb:C2,hex:E2,bgHex:$2,reset:A2,inverse:T2,hidden:L2,visible:B2,bold:R2,dim:P2,italic:k2,underline:N2,strikethrough:O2,strike:_2,black:I2,red:j2,green:M2,yellow:W2,blue:q2,magenta:H2,cyan:G2,white:U2,grey:z2,gray:V2,blackBright:J2,redBright:Y2,greenBright:K2,yellowBright:X2,blueBright:Z2,magentaBright:Q2,cyanBright:ex,whiteBright:tx,bgBlack:rx,bgRed:nx,bgGreen:sx,bgYellow:ix,bgBlue:ox,bgMagenta:ax,bgCyan:ux,bgWhite:cx,bgGrey:lx,bgGray:fx,bgBlackBright:px,bgRedBright:mx,bgGreenBright:dx,bgYellowBright:hx,bgBlueBright:gx,bgMagentaBright:yx,bgCyanBright:Dx,bgWhiteBright:bx}=Yn.default,dc="\x1B[H\x1B[2J";Yn.default.extend({brown:"#c19a6b",pink:"#ff75d1",teal:"#91EBC2",lightGray:"#2a2a2e",orange:"#FFAB40",lavender:"#8080FF",neonGreen:"#56ef83",neonCyan:"#69d5fd",neonRouge:"#FF8095",neonMagenta:"#7b68ee"});var{cyan:ge,red:ae,green:eg,yellow:nr,magenta:To,blue:N,white:A,gray:m,dim:wx,cyanBright:xx,redBright:xe,greenBright:Sx,yellowBright:re,magentaBright:Us,blueBright:hc,whiteBright:_,strip:gc,underline:sr,bold:h,reset:Et,lightGray:J,pink:jt,brown:Fx,teal:Ur,orange:dt,lavender:vx,neonGreen:Ee,neonCyan:ye,neonRouge:zs,neonMagenta:mn}=Yn.default,E={open:`${J.open}\u250C\u2500${J.close} `,stub:`${J.open}\u251C${J.close}  `,dash:`${J.open}\u251C\u2500${J.close} `,trim:`${J.open}\u2502${J.close}`,line:`${J.open}\u2502${J.close}  `,next:`
${J.open}\u2502${J.close}`,after:`${J.open}\u2502${J.close}`,wrap:`
${J.open}\u2502${J.close}
`,base:`${J.open}\u2514\u2500${J.close} `,red:`${ae.dim.open}\u2502${ae.dim.close}  `,redTrim:`${ae.dim.open}\u2502${ae.dim.close}`,yellow:`${nr.dim.open}\u2502${nr.dim.close}  `,yellowTrim:`${nr.dim.open}\u2502${nr.dim.close}`,indent:{edge:`${J.open}\u251C\u2500\u2500\u252C\u2500${J.close} `,fall:`${J.open}\u251C\u2500\u2500\u2510${J.close} `,line:`${J.open}\u2502  \u2502${J.close} `,stub:`${J.open}\u2502  \u251C${J.close} `,dash:`${J.open}\u2502  \u251C\u2500${J.close} `,base:`${J.open}\u2502  \u2514\u2500${J.close} `}},Cx=`${m.open}|${m.close}`,yc=`${m.open}#${m.close}`,Ex=`${m.open}+${m.close}`,$x=`${m.open}-${m.close}`,Ax=`${m.open},${m.close}`,Dc=`${Ee.open}\u2713${Ee.close}`,vr=`${xe.open}\u{10102}${xe.close}`,k=`${m.open}:${m.close}`,j=`${m.open}\u2192${m.close}`,Dr=`${m.open}\u25B8${m.close}`,Kn=`${m.open}\u2942${m.close}`,ie=`${m.open}~${m.close}`,zr=`${m.open}\u2014${m.close}`,Vs=`${m.open}(${m.close}`,Js=`${m.open})${m.close}`,bc=`${m.open}{${m.close}`,wc=`${m.open}}${m.close}`,xc=`${m.open}[${m.close}`,Sc=`${m.open}]${m.close}`,Ys=`${m.open}<${m.close}`,Ks=`${m.open}>${m.close}`;function Xn(e,t={}){let r=Object.assign({showPercentage:!0,barColor:"neonGreen",percentColor:"whiteBright",barSize:40,clearOnComplete:!1},t),n=0,s=u=>E.line+u+" ".repeat(Math.max(0,r.barSize-u.length)),o=(u,c=!1)=>(c?"\u25B1":"\u25B0").repeat(u),a=()=>{r.clearOnComplete&&console.clear()};return{stop:a,increment:(u=1)=>{let c=n+u;n=Math.min(c,e),n===e&&a()},decrement:(u=1)=>{let c=n-u;n=Math.max(c,0)},render:u=>{let c=Math.round(n/e*r.barSize),f=o(c),p=o(r.barSize-c,!0),d=Yn.default[r.barColor](f)+J(p);return r.showPercentage&&(d+=(u||_)(` ${String(Math.round(n/e*100))}%`)),s(d)},get percent(){return n}}}function Gs(e,t,r){return tg(e,t,{encoding:"utf8",shell:r,stdio:["ignore","pipe","ignore"]}).trim()}function pc(e,t){let r=ng(rg(import.meta.url));return Gs(sg(r,e),[],t).split(/\r?\n/)}function Fr(e,t){let r=Number.parseInt(e,10);return{wrap:r>85?85:r,cols:Number.parseInt(e,10),rows:Number.parseInt(t,10)}}function Fc(){if(zn&&zn.columns&&zn.rows)return Fr(zn.columns,zn.rows);if(Vn&&Vn.columns&&Vn.rows)return Fr(Vn.columns,Vn.rows);if(Jn.COLUMNS&&Jn.LINES)return Fr(Jn.COLUMNS,Jn.LINES);if(fc==="win32")try{let e=pc("vendor/windows/term-size.exe",!1);if(e.length===2)return Fr(e[0],e[1])}catch{}else{if(fc==="darwin")try{let e=pc("vendor/macos/term-size",!0);if(e.length===2)return Fr(e[0],e[1])}catch{}try{let e=Gs("resize",["-u"]).match(/\d+/g);if(e.length===2)return Fr(e[0],e[1])}catch{}if(Jn.TERM)try{let e=Gs("tput",["cols"]),t=Gs("tput",["lines"]);if(e&&t)return Fr(e,t)}catch{}}return Fr(80,24)}var Px=Yn.Ansis;import{join as yg}from"node:path";import{homedir as Dg,tmpdir as bg}from"node:os";l();var vc=["script","stylesheet","section","svg","assets","reload","replace","connect","disconnect","connected"],Cc=["syncify.config.ts","syncify.config.js","syncify.config.mjs","syncify.config.cjs","syncify.config.json"],Xs=["build","checksum","metafields","pages","paths","schema","sections","settings","templates"],Ec=["chrome"],$c=[["cache","node_modules"],["input","source"],["output","theme"],["export","export"],["import","import"],["config","."]],Vr=["assets","config","layout","customers","locales","sections","schema","snippets","templates","metaobject","metafields","pages","redirects"],Ac=["styles","scripts","svgs","sections","layouts","metaobject","templates","snippets","locales","configs","schema","pages","metafields","assets"],Jr=["templates","templates/customers","templates/metaobject","assets","config","layout","locales","sections","snippets"],Tc=["js","cjs","mjs","ts"];var Zn=/([|,])/g,Zs=/\.(mjs|cjs|ts|js|tsx|jsx)$/;var Lo={404:"The requested resource was not found.",400:"The request was not understood by the server, generally due to bad syntax or because the Content-Type header was not correctly set to application / json. This status is also returned when the request provides an invalid code parameter during the OAuth token exchange process.",303:"The response to the request can be found under a different URL in the Location header and can be retrieved using a GET method on that resource.",401:"The necessary authentication credentials are not present in the request or are incorrect",402:"The requested shop is currently frozen. The shop owner needs to log in to the shop's admin, and pay the outstanding balance to unfreeze the shop.",406:"The requested resource is only capable of generating content not acceptable according to the Accept headers sent in the request.",423:"The requested shop is currently locked. Shops are locked if they repeatedly exceed their API request limit. or if there is an issue with the account, such as a detected compromise or fraud risk.",403:"The server is refusing to respond to the request. This is generally because you have not requested the appropriate scope for this action.",501:"The requested endpoint is not available on that particular shop, e.g. requesting access to a Shopify Plus\u2013only API on a non-Plus shop. This response may also indicate that this endpoint is reserved for future use.",503:"The server is currently unavailable. Check the Shopify status page for reported service outages. See https://www.shopifystatus.com"};l();var Lc=()=>({input:"source",output:"theme",import:"import",export:"export",config:".",paths:{assets:"assets/*",config:"config/*.json",layout:"layout/*.liquid",locales:"locales/*.json",metafields:"metafields/**/*.json",redirects:"redirects.yaml",schema:"schema/*.{schema,json}",templates:"templates/*",customers:"templates/customers/*",metaobject:"templates/metaobject/*",pages:"pages/*",snippets:"snippets/**/*.liquid",sections:"sections/**/*.{liquid,json}"},transform:{svg:null,style:null,script:null,json:{indent:2,useTab:!1,crlf:!1,comments:!0,exclude:[],terse:!1},liquid:{terse:!1}},publish:{bindVersion:!1,publishRole:"unpublished",themeLimit:3,tunnelPort:80},spawn:{build:null,watch:null},hot:!1,log:{clear:!0,silent:!1,stats:!0,warnings:!0}});l();var Bc=()=>({sharp:{installed:!1,required:!1,loaded:!1,file:!1,config:{}},tailwind:{installed:!1,loaded:!1,file:!1,map:null,config:null},sass:{installed:!1,loaded:!1,file:!1,config:{warnings:!0,style:"compressed",sourcemap:!0,quietDeps:!1,include:["node_modules"]}},esbuild:{tsconfig:void 0,bundle:!0,format:"esm",globalName:void 0,target:"es2016",metafile:!0,external:[],platform:"browser",splitting:!1,sourcemap:"linked",write:!1,logLevel:"silent",plugins:[]},postcss:{file:!1,config:[]},sprite:{mode:{inline:!0,symbol:{example:!1}},shape:{transform:["svgo"],id:{generator:"svg-%s"}},svg:{xmlDeclaration:!1,doctypeDeclaration:!1,dimensionAttributes:!1,namespaceClassnames:!1,namespaceIDs:!1}},svgo:{multipass:!0,js2svg:{indent:2,pretty:!0},plugins:["preset-default"]}});l();var Rc=()=>({onBuild:[],onChange:[],onReload:[],onTransform:[],onWatch:[]});l();import{createHash as mg}from"node:crypto";import{createRequire as dg}from"node:module";l();var Bo=Symbol("singleComment"),Pc=Symbol("multiComment"),ig=()=>"",og=(e,t,r)=>e.slice(t,r).replace(/\S/g," "),ag=(e,t)=>{let r=t-1,n=0;for(;e[r]==="\\";)r-=1,n+=1;return!!(n%2)};function Qn(e,{whitespace:t=!0,trailingCommas:r=!1}={}){if(typeof e!="string")throw new TypeError(`Expected argument \`jsonString\` to be a \`string\`, got \`${typeof e}\``);let n=t?og:ig,s=!1,o=!1,a=0,u="",c="",f=-1;for(let p=0;p<e.length;p++){let d=e[p],g=e[p+1];if(!o&&d==='"'&&(ag(e,p)||(s=!s)),!s)if(!o&&d+g==="//")u+=e.slice(a,p),a=p,o=Bo,p++;else if(o===Bo&&d+g===`\r
`){p++,o=!1,u+=n(e,a,p),a=p;continue}else if(o===Bo&&d===`
`)o=!1,u+=n(e,a,p),a=p;else if(!o&&d+g==="/*"){u+=e.slice(a,p),a=p,o=Pc,p++;continue}else if(o===Pc&&d+g==="*/"){p++,o=!1,u+=n(e,a,p+1),a=p+1;continue}else r&&!o&&(f!==-1?d==="}"||d==="]"?(u+=e.slice(a,p),c+=n(u,0,1)+u.slice(1),u="",a=p,f=-1):d!==" "&&d!=="	"&&d!=="\r"&&d!==`
`&&(u+=e.slice(a,p),a=p,f=-1):d===","&&(c+=u+e.slice(a,p),u="",a=p,f=p))}return c+u+(o?n(e.slice(a)):e.slice(a))}l();import{Console as ug}from"node:console";import{stdout as cg,stderr as lg}from"node:process";import{EventEmitter as fg}from"node:events";var At=new fg,{error:Se,log:L,warn:dn,clear:Jx}=new ug(cg,lg),{create:Yr,assign:ne,defineProperty:ft,defineProperties:kc,keys:Mt,values:hn,setPrototypeOf:Yx}=Object,Cr=Array.from,gn=Buffer.from,{abs:Kr}=Math,{toString:Kx}=Object.prototype;function be(e,...t){let r=R(e);return function n(s,o,a){let u=typeof a;if(a&&u==="object")if(R(a))for(let c of a)o=n(s,o,c);else for(let c in a){let f=a[c];Ze(f)?o[c]=f(o[c],be):f===void 0?s?o.splice(c,1):delete o[c]:f===null||I(f)===!1||R(f)?o[c]=f:typeof o[c]=="object"?o[c]=f===o[c]?f:be(o[c],f):o[c]=n(!1,{},f)}else u==="function"&&(o=a(o,be));return o}(r,r?e.slice():ne({},e),t)}function x(e,t){return I(t)?e in t:!1}function Ge(e){let t=I(e);return r=>t?r in e:!1}function U(e){return e?ne(Yr(null),e):Yr(null)}function Nc(e,{onlyFirst:t=!1}={}){let r=e.match(new RegExp(["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-nq-uy=><~]))"].join("|"),t?void 0:"g"));return r!==null?r:!1}function Qs(e){if(Qn(e).trim()==="")return{};try{return new Function(`return ${Qn(e).trim()}`)()}catch{return{}}}async function Oc(e,{format:t}){return t==="esm"?r=>import(r):hg(e)}function hg(e){return Ze(Pe)?Pe(e):dg(import.meta.url)(e)}function _c(e){return e===".mjs"||e===".cjs"?"js":e.slice(1)}function yn(){let e=new Date,t=e.getHours(),r=e.getMinutes(),n=e.getSeconds();return(t<10?`0${t}`:t)+k+(r<10?`0${r}`:r)+k+(n<10?`0${n}`:n)}function Ic(e,t=2){return e.reduce((r,n,s)=>{let o=Math.floor(s/t);return r[o]||(r[o]=[]),r[o].push(n),r},[])}function jc(){return new Promise(e=>{Ze(setImmediate)?setImmediate(e):setTimeout(e)})}function Te(e){return bt(e)?e.toString():I(e)||R(e)?JSON.stringify(e):Ae(e)||Lt(e)?`${e}`:G(e)?e:String(e)}function ir(e){return mg("md5").update(e).digest("hex")}function Mc(e){return e.toLowerCase().replace(/[^a-z0-9_:]+/g,"-").replace(/-$/,"").replace(/^-/,"")}function Tt(e,t){return t>=2||t===0?e[e.length-1]!=="s"?`${e}s`:e:e[e.length-1]!=="s"?e:e.slice(0,-1)}function Er(e){return e.charAt(0).toUpperCase()+e.slice(1)}function ei(e){let t=e%10,r=e%100;return e+(t===1&&r!==11?"st":t===2&&r!==12?"nd":t===3&&r!==13?"rd":"th")}function fe(...e){return e.join(" ")}function pe(...e){return R(e[0])?e[0].join(""):e.join("")}function kt(e,t=null){let r=0;if(R(e))for(let n of e)t?n[t].length>r&&(r=n[t].length):n.length>r&&(r=n.length);else for(let n in e)n.length>r&&(r=n.length);return r=r+1,function(s){let o=G(s)?r-s.length:r-s;return o<1?" ":" ".repeat(o)}}function Jt(){return Math.random().toString(36).slice(2)}function Oe(e){return e==null}function Wc(e){return bt(e)?e.toString().trim().length===0:e.trim().length===0}function De(e){if(I(e)){for(let t in e)return!1;return!0}return R(e)?e.length===0:le(e)||Lt(e)||gg(e)||Ro(e)?!1:!e}function R(e){return Array.isArray(e)}function I(e){return Object.prototype.toString.call(e).slice(8,-1)==="Object"}function G(e){return typeof e=="string"}function ti(e){return Object.prototype.toString.call(e).slice(8,-1)==="RegExp"}function Ze(e){return typeof e=="function"}function Ae(e){return typeof e=="boolean"}function Lt(e){return typeof e=="number"}function Ro(e){return Number.isNaN(e)}function gg(e){return e===null}function le(e){return typeof e>"u"}function bt(e){return Buffer.isBuffer(e)}var wg=()=>{let e=U();for(let t of Vr)e[t]=U({input:new Set,match:null,config:null,rename:[]});return e.transforms=new Map,e},i=new class Wt{static defaults=Lc();static plugins=Rc();static processor=Bc();static package=U();static cache=U();static watch=new Set;process;restart=!1;wss=null;stats=U();version="0.0.1-rc.1";cwd=process.cwd();cmd=null;argv=null;filters=U();errors=new Set;warnings=new Map;home=yg(Dg()||bg(),".syncify");dirs=U({chrome:null,static:null,cache:null,config:null,export:null,import:null,input:null,output:null,sourcemaps:{root:null,scripts:null,styles:null}});file=U({base:null,path:null,relative:null});publish=U({ngrok:null,bindVersion:!1,publishRole:"unpublished",themeLimit:3,tunnelPort:80});vc=U({dir:null,number:null,zip:null,patch:0,major:0,minor:0,update:null});env=U({cli:!1,tree:!1,dev:!0,prod:!1,ready:!1,sync:0,file:null,vars:{}});hot=U({server:3e3,socket:8089,method:"hot",strategy:"hydrate",label:"visible",source:null,previewBar:!1,loadEventJS:"",chromeFlags:["--disable-gpu","--no-sandbox","--no-first-run","--no-default-browser-check","--disable-extensions","--disable-sync","--disable-password-manager","--disable-save-password-bubble","--disable-translate","--disable-features=TranslateUI","--disable-infobars","--disable-web-security","--test-type"]});log=U({idle:!1,group:"Syncify",title:"",uri:"",listen:null,thrown:null,queue:new Set,changes:U(),config:{clear:!0,silent:!1,stats:!0,warnings:!0}});mode=U({dev:!0,build:!1,interactive:!1,prod:!1,strap:!1,watch:!1,clean:!1,cache:!1,setup:!1,upload:!1,import:!1,metafields:!1,terse:!1,hot:!1,pages:!1,pull:!1,force:!1,script:!1,image:!1,style:!1,svg:!1,redirects:!1,export:!1,release:!1,publish:!1,themes:!1});files=new Map;stores=[];sync=U({themes:[],stores:[]});spawn=U({paths:new Set,streams:new Map,invoked:!1,commands:U()});section={schema:null,shared:new Map};paths=wg();page=U({safeSync:!0,author:"",global:null,language:"html",export:{quotes:"\u201C\u201D\u2018\u2019",html:!0,linkify:!1,typographer:!1,xhtmlOut:!1,breaks:!0,langPrefix:"language-"},import:{codeBlockStyle:"fenced",emDelimiter:"_",fence:"```",headingStyle:"atx",hr:"---",linkReferenceStyle:"full",linkStyle:"inlined",strongDelimiter:"**",bulletListMarker:"-"}});script=[];style=[];svg=[];liquid={terse:{enabled:!1,exclude:null,liquid:{minifySchema:!0},markup:{minifyCSS:!0,minifyJS:!0,collapseWhitespace:!0,removeComments:!0,caseSensitive:!1,collapseBooleanAttributes:!1,collapseInlineTagWhitespace:!1,conservativeCollapse:!1,keepClosingSlash:!1,noNewlinesBeforeTagClose:!1,preventAttributesEscaping:!1,removeEmptyAttributes:!1,removeEmptyElements:!1,removeOptionalTags:!1,removeRedundantAttributes:!1,removeScriptTypeAttributes:!0,removeStyleLinkTypeAttributes:!0,useShortDoctype:!1,continueOnParseError:!0,trimCustomFragments:!1,ignoreCustomFragments:[/(?<=\bstyle\b=["']\s?)[\s\S]*?(?="[\s\n>]?)/,/<style[\s\S]*?<\/style>/,/<script[\s\S]*?<\/script>/,/{%[\s\S]*?%}/]}}};json={crlf:!1,cache:null,comments:!1,exclude:null,indent:2,useTab:!1,terse:{enabled:!1,exclude:null,options:{assets:!0,config:!0,locales:!0,metafields:!0,metaobject:!0,groups:!0,templates:!0}}};image;get watch(){return Wt.watch}set watch(t){Wt.watch=t}get cache(){return Wt.cache}set cache(t){Wt.cache=t}get processor(){return Wt.processor}set config(t){Wt.defaults=be(Wt.defaults,t)}get config(){return Wt.defaults}set pkg(t){Wt.package=t}get pkg(){return Wt.package}get plugins(){return Wt.plugins}get terminal(){return Fc()}};l();import{mkdir as Fn,emptyDir as Fl,pathExists as vn,readdirSync as Hg}from"fs-extra";import{join as wr}from"node:path";l();l();l();l();function ht(e){if(e===null)return"Null";if(e===void 0)return"Undefined";if(Number.isNaN(e))return"NaN";let t=Object.prototype.toString.call(e).slice(8,-1);return t==="AsyncFunction"?"Promise":t}l();var{isArray:Dn}=Array;function bn(e){return Dn(e)?e.length>0:ht(e)==="Object"?Object.keys(e).length>0:!!e}function $r(...e){let t=0;for(;t<e.length;){let r=e[t];if(ht(r)==="Function"){if(bn(r()))return!1}else if(bn(r))return!1;t++}return!0}l();function qc(...e){let t=0;for(;t<e.length;){let r=e[t];if(ht(r)==="Function"){if(bn(r()))return!0}else if(bn(r))return!0;t++}return!1}l();l();function xg(e){return e<<0===e}var Hc=Number.isInteger||xg;function ri(e,t="."){return typeof e=="string"?e.split(t).map(r=>Hc(r)?Number(r):r):e}l();function Sg(e,t){let r=t,n=0,s=ri(e);for(;n<s.length;){if(r==null||r[s[n]]===null)return;r=r[s[n]],n++}return r}function Po(e,t){if(arguments.length===1)return r=>Po(e,r);if(t!=null)return Sg(e,t)}l();function ko(e,t){if(!Dn(t))throw new Error(`Cannot read property 'indexOf' of ${t}`);let r=ht(e);if(!["Array","NaN","Object","RegExp"].includes(r))return t.indexOf(e);let n=-1,s=-1,{length:o}=t;for(;++n<o&&s===-1;)ni(t[n],e)&&(s=n);return s}function Gc(e){let t=[],r;for(;!(r=e.next()).done;)t.push(r.value);return t}function Fg(e,t){if(e.size!==t.size)return!1;let r=Gc(e.values()),n=Gc(t.values());return r.filter(o=>ko(o,n)===-1).length===0}function vg(e,t){return e.message!==t.message||e.toString!==t.toString?!1:e.toString()===t.toString()}function Uc(e){return e.toDateString?[!0,e.getTime()]:[!1]}function zc(e){return e.constructor!==RegExp?[!1]:[!0,e.toString()]}function ni(e,t){if(arguments.length===1)return u=>ni(e,u);if(Object.is(e,t))return!0;let r=ht(e);if(r!==ht(t))return!1;if(r==="Function")return e.name===void 0?!1:e.name===t.name;if(["NaN","Null","Undefined"].includes(r))return!0;if(["BigInt","Number"].includes(r))return Object.is(-0,e)!==Object.is(-0,t)?!1:e.toString()===t.toString();if(["Boolean","String"].includes(r))return e.toString()===t.toString();if(r==="Array"){let u=Array.from(e),c=Array.from(t);if(u.toString()!==c.toString())return!1;let f=!0;return u.forEach((p,d)=>{f&&p!==c[d]&&!ni(p,c[d])&&(f=!1)}),f}let n=zc(e),s=zc(t);if(n[0])return s[0]?n[1]===s[1]:!1;if(s[0])return!1;let o=Uc(e),a=Uc(t);if(o[0])return a[0]?o[1]===a[1]:!1;if(a[0])return!1;if(e instanceof Error)return t instanceof Error?vg(e,t):!1;if(r==="Set")return Fg(e,t);if(r==="Object"){let u=Object.keys(e);if(u.length!==Object.keys(t).length)return!1;let c=!0;return u.forEach(f=>{if(c){let p=e[f],d=t[f];p!==d&&!ni(p,d)&&(c=!1)}}),c}return!1}l();var Cg="RAMBDAX_DELAY";function pt(e){return new Promise(t=>{setTimeout(()=>{t(Cg)},e)})}l();function No(e,t){if(arguments.length===1)return r=>No(e,r);if(typeof t=="string")return t.includes(e);if(!t)throw new TypeError(`Cannot read property 'indexOf' of ${t}`);return Dn(t)?ko(e,t)>-1:!1}l();function wn(e,t){return arguments.length===1?r=>wn(e,r):ht(t)===e}l();async function Vc(e,t){let r=t.map((n,s)=>e(n,s));return Promise.all(r)}function Jc(e,t){return arguments.length===1?async r=>Vc(e,r):new Promise((r,n)=>{Vc(e,t).then(r).catch(n)})}l();l();l();function Yc(e,t){return String(e)===String(t)}function Kc(e,t){let r=-1,{length:n}=t;for(;++r<n;)if(Yc(t[r],e))return!0;return!1}function Oo(e,t){if(arguments.length===1)return s=>Oo(e,s);if(t==null)return;let r=ri(e,","),n={};for(let s in t)Kc(s,r)||(n[s]=t[s]);return n}l();function Ke(e,t){return arguments.length===1?r=>Ke(e,r):t?t.hasOwnProperty(e):!1}l();function qt(e,t){return arguments.length===1?r=>qt(e,r):Po(e,t)!==void 0}l();function Xr(e){let t=ht(e);return["Undefined","NaN","Number","Null"].includes(t)?!1:e?t==="Object"?Object.keys(e).length===0:t==="Array"?e.length===0:!1:!0}l();function Xc(e){return e==null}l();function Zc(e){return typeof e=="string"?e[e.length-1]||"":e[e.length-1]}import{join as ci,dirname as xl,resolve as xv}from"node:path";l();import{argv as Wg}from"node:process";l();l();l();l();l();function _o({onlyFirst:e=!1}={}){let r=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?(?:\\u0007|\\u001B\\u005C|\\u009C))","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-nq-uy=><~]))"].join("|");return new RegExp(r,e?void 0:"g")}var Eg=_o();function Zr(e){if(typeof e!="string")throw new TypeError(`Expected a \`string\`, got \`${typeof e}\``);return e.replace(Eg,"")}l();l();function Qc(e){return e===161||e===164||e===167||e===168||e===170||e===173||e===174||e>=176&&e<=180||e>=182&&e<=186||e>=188&&e<=191||e===198||e===208||e===215||e===216||e>=222&&e<=225||e===230||e>=232&&e<=234||e===236||e===237||e===240||e===242||e===243||e>=247&&e<=250||e===252||e===254||e===257||e===273||e===275||e===283||e===294||e===295||e===299||e>=305&&e<=307||e===312||e>=319&&e<=322||e===324||e>=328&&e<=331||e===333||e===338||e===339||e===358||e===359||e===363||e===462||e===464||e===466||e===468||e===470||e===472||e===474||e===476||e===593||e===609||e===708||e===711||e>=713&&e<=715||e===717||e===720||e>=728&&e<=731||e===733||e===735||e>=768&&e<=879||e>=913&&e<=929||e>=931&&e<=937||e>=945&&e<=961||e>=963&&e<=969||e===1025||e>=1040&&e<=1103||e===1105||e===8208||e>=8211&&e<=8214||e===8216||e===8217||e===8220||e===8221||e>=8224&&e<=8226||e>=8228&&e<=8231||e===8240||e===8242||e===8243||e===8245||e===8251||e===8254||e===8308||e===8319||e>=8321&&e<=8324||e===8364||e===8451||e===8453||e===8457||e===8467||e===8470||e===8481||e===8482||e===8486||e===8491||e===8531||e===8532||e>=8539&&e<=8542||e>=8544&&e<=8555||e>=8560&&e<=8569||e===8585||e>=8592&&e<=8601||e===8632||e===8633||e===8658||e===8660||e===8679||e===8704||e===8706||e===8707||e===8711||e===8712||e===8715||e===8719||e===8721||e===8725||e===8730||e>=8733&&e<=8736||e===8739||e===8741||e>=8743&&e<=8748||e===8750||e>=8756&&e<=8759||e===8764||e===8765||e===8776||e===8780||e===8786||e===8800||e===8801||e>=8804&&e<=8807||e===8810||e===8811||e===8814||e===8815||e===8834||e===8835||e===8838||e===8839||e===8853||e===8857||e===8869||e===8895||e===8978||e>=9312&&e<=9449||e>=9451&&e<=9547||e>=9552&&e<=9587||e>=9600&&e<=9615||e>=9618&&e<=9621||e===9632||e===9633||e>=9635&&e<=9641||e===9650||e===9651||e===9654||e===9655||e===9660||e===9661||e===9664||e===9665||e>=9670&&e<=9672||e===9675||e>=9678&&e<=9681||e>=9698&&e<=9701||e===9711||e===9733||e===9734||e===9737||e===9742||e===9743||e===9756||e===9758||e===9792||e===9794||e===9824||e===9825||e>=9827&&e<=9829||e>=9831&&e<=9834||e===9836||e===9837||e===9839||e===9886||e===9887||e===9919||e>=9926&&e<=9933||e>=9935&&e<=9939||e>=9941&&e<=9953||e===9955||e===9960||e===9961||e>=9963&&e<=9969||e===9972||e>=9974&&e<=9977||e===9979||e===9980||e===9982||e===9983||e===10045||e>=10102&&e<=10111||e>=11094&&e<=11097||e>=12872&&e<=12879||e>=57344&&e<=63743||e>=65024&&e<=65039||e===65533||e>=127232&&e<=127242||e>=127248&&e<=127277||e>=127280&&e<=127337||e>=127344&&e<=127373||e===127375||e===127376||e>=127387&&e<=127404||e>=917760&&e<=917999||e>=983040&&e<=1048573||e>=1048576&&e<=1114109}function el(e){return e===12288||e>=65281&&e<=65376||e>=65504&&e<=65510}function tl(e){return e>=4352&&e<=4447||e===8986||e===8987||e===9001||e===9002||e>=9193&&e<=9196||e===9200||e===9203||e===9725||e===9726||e===9748||e===9749||e>=9800&&e<=9811||e===9855||e===9875||e===9889||e===9898||e===9899||e===9917||e===9918||e===9924||e===9925||e===9934||e===9940||e===9962||e===9970||e===9971||e===9973||e===9978||e===9981||e===9989||e===9994||e===9995||e===10024||e===10060||e===10062||e>=10067&&e<=10069||e===10071||e>=10133&&e<=10135||e===10160||e===10175||e===11035||e===11036||e===11088||e===11093||e>=11904&&e<=11929||e>=11931&&e<=12019||e>=12032&&e<=12245||e>=12272&&e<=12287||e>=12289&&e<=12350||e>=12353&&e<=12438||e>=12441&&e<=12543||e>=12549&&e<=12591||e>=12593&&e<=12686||e>=12688&&e<=12771||e>=12783&&e<=12830||e>=12832&&e<=12871||e>=12880&&e<=19903||e>=19968&&e<=42124||e>=42128&&e<=42182||e>=43360&&e<=43388||e>=44032&&e<=55203||e>=63744&&e<=64255||e>=65040&&e<=65049||e>=65072&&e<=65106||e>=65108&&e<=65126||e>=65128&&e<=65131||e>=94176&&e<=94180||e===94192||e===94193||e>=94208&&e<=100343||e>=100352&&e<=101589||e>=101632&&e<=101640||e>=110576&&e<=110579||e>=110581&&e<=110587||e===110589||e===110590||e>=110592&&e<=110882||e===110898||e>=110928&&e<=110930||e===110933||e>=110948&&e<=110951||e>=110960&&e<=111355||e===126980||e===127183||e===127374||e>=127377&&e<=127386||e>=127488&&e<=127490||e>=127504&&e<=127547||e>=127552&&e<=127560||e===127568||e===127569||e>=127584&&e<=127589||e>=127744&&e<=127776||e>=127789&&e<=127797||e>=127799&&e<=127868||e>=127870&&e<=127891||e>=127904&&e<=127946||e>=127951&&e<=127955||e>=127968&&e<=127984||e===127988||e>=127992&&e<=128062||e===128064||e>=128066&&e<=128252||e>=128255&&e<=128317||e>=128331&&e<=128334||e>=128336&&e<=128359||e===128378||e===128405||e===128406||e===128420||e>=128507&&e<=128591||e>=128640&&e<=128709||e===128716||e>=128720&&e<=128722||e>=128725&&e<=128727||e>=128732&&e<=128735||e===128747||e===128748||e>=128756&&e<=128764||e>=128992&&e<=129003||e===129008||e>=129292&&e<=129338||e>=129340&&e<=129349||e>=129351&&e<=129535||e>=129648&&e<=129660||e>=129664&&e<=129672||e>=129680&&e<=129725||e>=129727&&e<=129733||e>=129742&&e<=129755||e>=129760&&e<=129768||e>=129776&&e<=129784||e>=131072&&e<=196605||e>=196608&&e<=262141}function $g(e){if(!Number.isSafeInteger(e))throw new TypeError(`Expected a code point, got \`${typeof e}\`.`)}function si(e,{ambiguousAsWide:t=!1}={}){return $g(e),el(e)||tl(e)||t&&Qc(e)?2:1}l();var rl=()=>/[#*0-9]\uFE0F?\u20E3|[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23ED-\u23EF\u23F1\u23F2\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB\u25FC\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692\u2694-\u2697\u2699\u269B\u269C\u26A0\u26A7\u26AA\u26B0\u26B1\u26BD\u26BE\u26C4\u26C8\u26CF\u26D1\u26E9\u26F0-\u26F5\u26F7\u26F8\u26FA\u2702\u2708\u2709\u270F\u2712\u2714\u2716\u271D\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u27A1\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B55\u3030\u303D\u3297\u3299]\uFE0F?|[\u261D\u270C\u270D](?:\uD83C[\uDFFB-\uDFFF]|\uFE0F)?|[\u270A\u270B](?:\uD83C[\uDFFB-\uDFFF])?|[\u23E9-\u23EC\u23F0\u23F3\u25FD\u2693\u26A1\u26AB\u26C5\u26CE\u26D4\u26EA\u26FD\u2705\u2728\u274C\u274E\u2753-\u2755\u2795-\u2797\u27B0\u27BF\u2B50]|\u26D3\uFE0F?(?:\u200D\uD83D\uDCA5)?|\u26F9(?:\uD83C[\uDFFB-\uDFFF]|\uFE0F)?(?:\u200D[\u2640\u2642]\uFE0F?)?|\u2764\uFE0F?(?:\u200D(?:\uD83D\uDD25|\uD83E\uDE79))?|\uD83C(?:[\uDC04\uDD70\uDD71\uDD7E\uDD7F\uDE02\uDE37\uDF21\uDF24-\uDF2C\uDF36\uDF7D\uDF96\uDF97\uDF99-\uDF9B\uDF9E\uDF9F\uDFCD\uDFCE\uDFD4-\uDFDF\uDFF5\uDFF7]\uFE0F?|[\uDF85\uDFC2\uDFC7](?:\uD83C[\uDFFB-\uDFFF])?|[\uDFC4\uDFCA](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDFCB\uDFCC](?:\uD83C[\uDFFB-\uDFFF]|\uFE0F)?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDCCF\uDD8E\uDD91-\uDD9A\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF43\uDF45-\uDF4A\uDF4C-\uDF7C\uDF7E-\uDF84\uDF86-\uDF93\uDFA0-\uDFC1\uDFC5\uDFC6\uDFC8\uDFC9\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF8-\uDFFF]|\uDDE6\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF]|\uDDE7\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF]|\uDDE8\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF7\uDDFA-\uDDFF]|\uDDE9\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF]|\uDDEA\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA]|\uDDEB\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7]|\uDDEC\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE]|\uDDED\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA]|\uDDEE\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9]|\uDDEF\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5]|\uDDF0\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF]|\uDDF1\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE]|\uDDF2\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF]|\uDDF3\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF]|\uDDF4\uD83C\uDDF2|\uDDF5\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE]|\uDDF6\uD83C\uDDE6|\uDDF7\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC]|\uDDF8\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF]|\uDDF9\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF]|\uDDFA\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF]|\uDDFB\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA]|\uDDFC\uD83C[\uDDEB\uDDF8]|\uDDFD\uD83C\uDDF0|\uDDFE\uD83C[\uDDEA\uDDF9]|\uDDFF\uD83C[\uDDE6\uDDF2\uDDFC]|\uDF44(?:\u200D\uD83D\uDFEB)?|\uDF4B(?:\u200D\uD83D\uDFE9)?|\uDFC3(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?|\uDFF3\uFE0F?(?:\u200D(?:\u26A7\uFE0F?|\uD83C\uDF08))?|\uDFF4(?:\u200D\u2620\uFE0F?|\uDB40\uDC67\uDB40\uDC62\uDB40(?:\uDC65\uDB40\uDC6E\uDB40\uDC67|\uDC73\uDB40\uDC63\uDB40\uDC74|\uDC77\uDB40\uDC6C\uDB40\uDC73)\uDB40\uDC7F)?)|\uD83D(?:[\uDC3F\uDCFD\uDD49\uDD4A\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA\uDECB\uDECD-\uDECF\uDEE0-\uDEE5\uDEE9\uDEF0\uDEF3]\uFE0F?|[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC](?:\uD83C[\uDFFB-\uDFFF])?|[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4\uDEB5](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD74\uDD90](?:\uD83C[\uDFFB-\uDFFF]|\uFE0F)?|[\uDC00-\uDC07\uDC09-\uDC14\uDC16-\uDC25\uDC27-\uDC3A\uDC3C-\uDC3E\uDC40\uDC44\uDC45\uDC51-\uDC65\uDC6A\uDC79-\uDC7B\uDC7D-\uDC80\uDC84\uDC88-\uDC8E\uDC90\uDC92-\uDCA9\uDCAB-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDDA4\uDDFB-\uDE2D\uDE2F-\uDE34\uDE37-\uDE41\uDE43\uDE44\uDE48-\uDE4A\uDE80-\uDEA2\uDEA4-\uDEB3\uDEB7-\uDEBF\uDEC1-\uDEC5\uDED0-\uDED2\uDED5-\uDED7\uDEDC-\uDEDF\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB\uDFF0]|\uDC08(?:\u200D\u2B1B)?|\uDC15(?:\u200D\uD83E\uDDBA)?|\uDC26(?:\u200D(?:\u2B1B|\uD83D\uDD25))?|\uDC3B(?:\u200D\u2744\uFE0F?)?|\uDC41\uFE0F?(?:\u200D\uD83D\uDDE8\uFE0F?)?|\uDC68(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDC68\uDC69]\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFE])))?))?|\uDC69(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?[\uDC68\uDC69]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?|\uDC69\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?))|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFE])))?))?|\uDC6F(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDD75(?:\uD83C[\uDFFB-\uDFFF]|\uFE0F)?(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDE2E(?:\u200D\uD83D\uDCA8)?|\uDE35(?:\u200D\uD83D\uDCAB)?|\uDE36(?:\u200D\uD83C\uDF2B\uFE0F?)?|\uDE42(?:\u200D[\u2194\u2195]\uFE0F?)?|\uDEB6(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?)|\uD83E(?:[\uDD0C\uDD0F\uDD18-\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5\uDEC3-\uDEC5\uDEF0\uDEF2-\uDEF8](?:\uD83C[\uDFFB-\uDFFF])?|[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD\uDDCF\uDDD4\uDDD6-\uDDDD](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDDDE\uDDDF](?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD0D\uDD0E\uDD10-\uDD17\uDD20-\uDD25\uDD27-\uDD2F\uDD3A\uDD3F-\uDD45\uDD47-\uDD76\uDD78-\uDDB4\uDDB7\uDDBA\uDDBC-\uDDCC\uDDD0\uDDE0-\uDDFF\uDE70-\uDE7C\uDE80-\uDE89\uDE8F-\uDEC2\uDEC6\uDECE-\uDEDC\uDEDF-\uDEE9]|\uDD3C(?:\u200D[\u2640\u2642]\uFE0F?|\uD83C[\uDFFB-\uDFFF])?|\uDDCE(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?|\uDDD1(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1|\uDDD1\u200D\uD83E\uDDD2(?:\u200D\uD83E\uDDD2)?|\uDDD2(?:\u200D\uD83E\uDDD2)?))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFC-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFD-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFD\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFE]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?))?|\uDEF1(?:\uD83C(?:\uDFFB(?:\u200D\uD83E\uDEF2\uD83C[\uDFFC-\uDFFF])?|\uDFFC(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFD-\uDFFF])?|\uDFFD(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])?|\uDFFE(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFD\uDFFF])?|\uDFFF(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFE])?))?)/g;var Ag=new Intl.Segmenter,Tg=/^\p{Default_Ignorable_Code_Point}$/u;function Qr(e,t={}){if(typeof e!="string"||e.length===0)return 0;let{ambiguousIsNarrow:r=!0,countAnsiEscapeCodes:n=!1}=t;if(n||(e=Zr(e)),e.length===0)return 0;let s=0,o={ambiguousAsWide:!r};for(let{segment:a}of Ag.segment(e)){let u=a.codePointAt(0);if(!(u<=31||u>=127&&u<=159)&&!(u>=8203&&u<=8207||u===65279)&&!(u>=768&&u<=879||u>=6832&&u<=6911||u>=7616&&u<=7679||u>=8400&&u<=8447||u>=65056&&u<=65071)&&!(u>=55296&&u<=57343)&&!(u>=65024&&u<=65039)&&!Tg.test(a)){if(rl().test(a)){s+=2;continue}s+=si(u,o)}}return s}l();var nl=(e=0)=>t=>`\x1B[${t+e}m`,sl=(e=0)=>t=>`\x1B[${38+e};5;${t}m`,il=(e=0)=>(t,r,n)=>`\x1B[${38+e};2;${t};${r};${n}m`,Me={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],gray:[90,39],grey:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgGray:[100,49],bgGrey:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}},jF=Object.keys(Me.modifier),Lg=Object.keys(Me.color),Bg=Object.keys(Me.bgColor),MF=[...Lg,...Bg];function Rg(){let e=new Map;for(let[t,r]of Object.entries(Me)){for(let[n,s]of Object.entries(r))Me[n]={open:`\x1B[${s[0]}m`,close:`\x1B[${s[1]}m`},r[n]=Me[n],e.set(s[0],s[1]);Object.defineProperty(Me,t,{value:r,enumerable:!1})}return Object.defineProperty(Me,"codes",{value:e,enumerable:!1}),Me.color.close="\x1B[39m",Me.bgColor.close="\x1B[49m",Me.color.ansi=nl(),Me.color.ansi256=sl(),Me.color.ansi16m=il(),Me.bgColor.ansi=nl(10),Me.bgColor.ansi256=sl(10),Me.bgColor.ansi16m=il(10),Object.defineProperties(Me,{rgbToAnsi256:{value:(t,r,n)=>t===r&&r===n?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(r/255*5)+Math.round(n/255*5),enumerable:!1},hexToRgb:{value:t=>{let r=/[a-f\d]{6}|[a-f\d]{3}/i.exec(t.toString(16));if(!r)return[0,0,0];let[n]=r;n.length===3&&(n=[...n].map(o=>o+o).join(""));let s=Number.parseInt(n,16);return[s>>16&255,s>>8&255,s&255]},enumerable:!1},hexToAnsi256:{value:t=>Me.rgbToAnsi256(...Me.hexToRgb(t)),enumerable:!1},ansi256ToAnsi:{value:t=>{if(t<8)return 30+t;if(t<16)return 90+(t-8);let r,n,s;if(t>=232)r=((t-232)*10+8)/255,n=r,s=r;else{t-=16;let u=t%36;r=Math.floor(t/36)/5,n=Math.floor(u/6)/5,s=u%6/5}let o=Math.max(r,n,s)*2;if(o===0)return 30;let a=30+(Math.round(s)<<2|Math.round(n)<<1|Math.round(r));return o===2&&(a+=60),a},enumerable:!1},rgbToAnsi:{value:(t,r,n)=>Me.ansi256ToAnsi(Me.rgbToAnsi256(t,r,n)),enumerable:!1},hexToAnsi:{value:t=>Me.ansi256ToAnsi(Me.hexToAnsi256(t)),enumerable:!1}}),Me}var Pg=Rg(),Yt=Pg;var oi=new Set(["\x1B","\x9B"]),kg=39,jo="\x07",ul="[",Ng="]",cl="m",ii=`${Ng}8;;`,ol=e=>`${oi.values().next().value}${ul}${e}${cl}`,al=e=>`${oi.values().next().value}${ii}${e}${jo}`,Og=e=>e.split(" ").map(t=>Qr(t)),Io=(e,t,r)=>{let n=[...t],s=!1,o=!1,a=Qr(Zr(e.at(-1)));for(let[u,c]of n.entries()){let f=Qr(c);if(a+f<=r?e[e.length-1]+=c:(e.push(c),a=0),oi.has(c)&&(s=!0,o=n.slice(u+1,u+1+ii.length).join("")===ii),s){o?c===jo&&(s=!1,o=!1):c===cl&&(s=!1);continue}a+=f,a===r&&u<n.length-1&&(e.push(""),a=0)}!a&&e.at(-1).length>0&&e.length>1&&(e[e.length-2]+=e.pop())},_g=e=>{let t=e.split(" "),r=t.length;for(;r>0&&!(Qr(t[r-1])>0);)r--;return r===t.length?e:t.slice(0,r).join(" ")+t.slice(r).join("")},Ig=(e,t,r={})=>{if(r.trim!==!1&&e.trim()==="")return"";let n="",s,o,a=Og(e),u=[""];for(let[d,g]of e.split(" ").entries()){r.trim!==!1&&(u[u.length-1]=u.at(-1).trimStart());let w=Qr(u.at(-1));if(d!==0&&(w>=t&&(r.wordWrap===!1||r.trim===!1)&&(u.push(""),w=0),(w>0||r.trim===!1)&&(u[u.length-1]+=" ",w++)),r.hard&&a[d]>t){let b=t-w,C=1+Math.floor((a[d]-b-1)/t);Math.floor((a[d]-1)/t)<C&&u.push(""),Io(u,g,t);continue}if(w+a[d]>t&&w>0&&a[d]>0){if(r.wordWrap===!1&&w<t){Io(u,g,t);continue}u.push("")}if(w+a[d]>t&&r.wordWrap===!1){Io(u,g,t);continue}u[u.length-1]+=g}r.trim!==!1&&(u=u.map(d=>_g(d)));let c=u.join(`
`),f=[...c],p=0;for(let[d,g]of f.entries()){if(n+=g,oi.has(g)){let{groups:b}=new RegExp(`(?:\\${ul}(?<code>\\d+)m|\\${ii}(?<uri>.*)${jo})`).exec(c.slice(p))||{groups:{}};if(b.code!==void 0){let C=Number.parseFloat(b.code);s=C===kg?void 0:C}else b.uri!==void 0&&(o=b.uri.length===0?void 0:b.uri)}let w=Yt.codes.get(Number(s));f[d+1]===`
`?(o&&(n+=al("")),s&&w&&(n+=ol(w))):g===`
`&&(s&&w&&(n+=ol(s)),o&&(n+=al(o))),p+=g.length}return n};function Ar(e,t,r){return String(e).normalize().replaceAll(`\r
`,`
`).split(`
`).map(n=>Ig(n,t,r)).join(`
`)}l();l();function Mo(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}l();import jg from"node:os";var Mg=()=>jg.homedir().replace(/\\/g,"/"),ll=Mg;var fl=/\s+at.*[(\s](.*)\)?/,pl=/^(?:(?:(?:node|node:[\w/]+|(?:(?:node:)?internal\/[\w/]*|.*node_modules\/(?:babel-polyfill|pirates)\/.*)?\w+)(?:\.js)?:\d+:\d+)|native)/;function es(e,{pretty:t=!1,basePath:r,pathFilter:n}={}){let s=r&&new RegExp(`(file://)?${Mo(r.replace(/\\/g,"/"))}/?`,"g"),o=t?ll():"";if(typeof e=="string")return e.replace(/\\/g,"/").split(`
`).filter(a=>{let u=a.match(fl);if(u===null||!u[1])return!0;let c=u[1];return c.includes(".app/Contents/Resources/electron.asar")||c.includes(".app/Contents/Resources/default_app.asar")||c.includes("node_modules/electron/dist/resources/electron.asar")||c.includes("node_modules/electron/dist/resources/default_app.asar")?!1:n?!pl.test(c)&&n(c):!pl.test(c)}).filter(a=>a.trim()!=="").map(a=>(s&&(a=a.replace(s,"")),t&&(a=a.replace(fl,(u,c)=>u.replace(c,c.replace(o,"~")))),a)).join(`
`)}function P(e,...t){let r=e.length>9?"  ":" ".repeat(11-e.length),n=t.length>0?t.length===1?j+"  "+t[0]:t.length===2?j+"  "+t[0]+" "+j+" "+t[1]:j+"  "+t[0]+" "+j+" "+t[1]+" "+_e(t[2]):"";return e+r+n}function _e(e){return e?ie+" "+Et.gray(e):""}function qo(e,t,{spaced:r=!1}={}){let n=r?" ":"";switch(e){case"AN":return Ys+n+t+n+Ks;case"CB":return bc+n+t+n+wc;case"PR":return Vs+n+t+n+Js;case"SB":return xc+n+t+n+Sc}}var en=U({warning:nr(` ${ie} Type ${h("w")} and press ${h("enter")} to view`),error:ae(` ${ie} Type ${h("v")} and press ${h("enter")} to view`),stack:m(`Type ${h("s")} and press ${h("enter")} to view stack trace`)}),ml=(e=i.terminal.wrap,t=!0)=>{let r="\u251C"+"\u2500".repeat(e-10);return t?`${J.open}
${r}
\u2502${J.close}`:`${J.open}${r}${J.close}`},rs=e=>E.open+Et.gray(`${e} ~ ${yn()}`);var ts=(...e)=>{let t=U({color:null,line:E.line}),r,n="";for(R(e[0])?(I(e[1])&&ne(t,e[1]),r=Ar(e[0].join(" "),i.terminal.wrap).split(`
`)):(I(e[e.length-1])&&ne(t,e.pop()),r=Ar(e.join(" "),i.terminal.wrap).split(`
`));r.length!==0;){let s=r.shift().trim();s.length>0?n+=t.line+(t.color?t.color(s):s)+`
`:n+=t.line+`
`}return n.trimEnd()},ar=e=>E.trim+`
`+E.line+e+`
`+E.trim;var we=e=>E.line+e,ns=e=>E.red+e,Tr=e=>E.yellow+e,dl=e=>E.trim+`
`+E.line+e,hl=e=>E.line+e+`
`+E.line,Ho=e=>E.dash+e,ss=e=>E.base+Et.gray(`${e} ~ ${yn()}`)+`
`;function Go(e){let t=kt(e.entries),r=X({type:e.type||"error"});if(G(e.stack)){let n=e.cleanStack?es(e.stack,{pretty:!0,basePath:i.cwd}):e.stack;r.Wrap(n.split(`
`),m).NL.Newline()}for(let n in e.entries){if(le(e.entries[n]))continue;let s;if(Lt(e.entries[n])){if(Ro(e.entries[n]))continue;s=zs(Te(e.entries[n]))}else s=Te(e.entries[n]);if(s.length===0)continue;let o=e.type==="warning"?re(n):xe(n);n==="source"||n==="output"||n==="input"||n==="file"?r.Line(o+k+" "+t(n)+sr(s),m):r.Line(o+k+" "+t(n)+s,m)}return e.stack===!0&&r.NL.Line(en.stack),r.toString()}var Wo=class{type="info";line;trim;text;constructor(t){if(I(t)){let r=Ge(t);this.type=r("type")?t.type:"info",this.text=r("text")?t.text:[],this.type==="error"?(this.line=E.red,this.trim=E.redTrim):this.type==="warning"?(this.line=E.yellow,this.trim=E.yellowTrim):this.type==="nil"?(this.line="",this.trim=""):(this.line=E.line,this.trim=E.trim)}else this.line=E.line,this.trim=E.trim,this.text=[]}toRaw(){return this.text}toLine(t){if(this.text.length===0)return"";this.text[this.text.length-1]=this.text[this.text.length-1].trimEnd();let r;return t?r=t(pe(this.text)):this.type==="info"?r=A(pe(this.text)):this.type==="error"?r=ae(pe(this.text)):this.type==="warning"?r=re(pe(this.text)):r=pe(this.text),this.text=[],r+`
`+this.trim}toString(t){if(this.text.length===0)return"";this.text[this.text.length-1]=this.text[this.text.length-1].trimEnd();let r;return t?r=t(pe(this.text)):this.type==="info"?r=A(pe(this.text)):this.type==="error"?r=ae(pe(this.text)):this.type==="warning"?r=re(pe(this.text)):r=pe(this.text),this.text=[],r}Get(t=this.text.length-1){return this.text[t]}Remove(t){return this.text.splice(t,1),this}Replace(t,r,n){return this.text[t]&&(this.text[t]=this.line+(n?n(r):r)+`
`),this}Ruler(t=i.terminal.wrap){return this.text.push(E.trim+`
`+J(`\u251C${"\u2500".repeat(t)}`)+`
`+E.trim+`
`),this}get NL(){return this.text.push(this.trim+`
`),this}get BR(){return this.text.push(`
`),this}Pop(){return this.text.pop(),this}Newline(t,r){if(Lt(t)){let n=this.trim+`
`;r&&(r==="yellow"?n=E.yellowTrim+`
`:r==="red"?n=E.redTrim+`
`:r===""&&(n=`
`));for(let s=0;s<t;s++)this.text.push(n)}else t===""?this.text.push(`
`):t==="line"?this.text.push(E.trim+`
`):t==="yellow"?this.text.push(E.yellowTrim+`
`):t==="red"?this.text.push(E.redTrim+`
`):this.text.push(this.trim+`
`);return this}Inline(t,r){let n=this.text.length;return n>0?this.text[n-1]=this.text[n-1].trimEnd()+" "+(r?r(t):t)+`
`:this.text.push(this.line+(r?r(t):t)+`
`),this}Trim(t,r){return this.text.push(this.line+(r?r(t):t)+`
`),this}Insert(t,r){return this.text.push((r?r(t):t)+`
`),this}Line(t,r){return this.type==="error"?this.Error(t,r):this.type==="warning"?this.Warn(t,r):(this.text.push(this.line+(r?r(t):t)+`
`),this)}Error(t,r){return this.text.push(E.red+(r?r(t):ae(t))+`
`),this}Warn(t,r){return this.text.push(E.yellow+(r?r(t):nr(t))+`
`),this}Break(t,r){return this.text.push(this.trim+`
`+this.line+(r?r(t):t)+`
`+this.trim+`
`),this}Top(t){return this.text.push(rs(t)+`
`),this}End(t){return this.text.push(ss(t)),this}Context(t){return this.text.push(Go(t)+`
`),this}Dash(t,r){return this.text.push(E.dash+(r?r(t):t)+`
`),this}Multiline(t){let r=R(t)?t:t.split(`
`);for(;r.length!==0;)this.text.push(this.line+r.shift()+`
`);return this}Wrap(...t){let r=U({line:this.line});return this.type==="error"?r.color=ae:this.type==="warning"?r.color=nr:r.color=_,R(t[0])?(Ze(t[1])&&(r.color=t.pop()),this.text.push(ts(t[0],r)+`
`)):(Ze(t[t.length-1])&&(r.color=t.pop()),this.text.push(ts(t,r)+`
`)),this}};function X(e){return i.env.tree===!1&&(I(e)?e.type="nil":e=U({type:"nil"})),new Wo(e)}var Lr={};function ot(e){return Ke(e,Lr)||(Lr[e]=[]),(t,r)=>{le(r)?Lr[e].push(re(t)):Lr[e].push(re(t+k+" "+h(r)))}}function ee({option:e,name:t,provided:r,expects:n}){Se(X({type:"error"}).Line("TYPE ERROR",h).NL.Line(`An invalid ${ge(e)} type value was provided within your ${h(i.file.base)} file.`).Line(`The ${ge(t)} option has an incorrect type. Syncify will not intialize until this is fixed.`).NL.Line(`provided${k} ${re(ht(r).toLowerCase())}`).Line(`expected${k} ${N(n.replace(/([|,])/g,m("$1")))}`).Line(`location${k} ${ie}${m.underline(i.file.base)}`).NL.Line("How to fix?",m.bold).Line(`You need to change the option value to use the ${N("expected")} type.`,m).Line(`Use the ${A("defineConfig")} named export for type checking`,m).End(i.log.group).BR.toString()),process.exit(0)}function br({message:e,expected:t,provided:r=void 0,fix:n}){r?t=_(`syncify ${t}`):(r=Wg.slice(2).join(" "),t=_(`syncify ${r} ${ge(t.replace(/([|,-])/g,m("$1")))}`)),Se(X({type:"error"}).Line("COMMAND ERROR",h).NL.Wrap(e).NL.Line(`provided${k} ${_("$")} ${_("syncify "+r)}`).Line(`expected${k} ${_("$")} ${t}`).NL.Line("How to fix?",m.bold).Wrap(n,m).NL.End(i.log.group).BR.toString()),process.exit(0)}function gl({type:e,message:t,provided:r,expected:n,fix:s}){Zn.test(r)&&(r=r.replace(Zn,m("$1"))),Zn.test(n)&&(n=n.replace(Zn,m("$1"))),Se(X({type:"error"}).Line("INVALID TARGET",h).NL.Wrap(`Invalid ${ge(e)} target provided. `,...t).NL.Line(`provided${k} ${re(n)}`).Line(`expected${k} ${N(r)}`).NL.Line("How to fix?",m.bold).Wrap(s,m).End(i.log.group).BR.toString()),process.exit(0)}function zo(e){let t=X({type:"error"}).Line("DEPENDENCY ERROR",h).NL;if(G(e))t.Wrap(`Missing ${ge(e)} dependency. You need to install ${ge(e)} to use it as a processor.`).NL.Line("How to fix?",m.bold).Line("Install the above module as a development dependency, for example:").NL.Line(`$ pnpm add ${e} -D`,_);else{let r=[`Missing ${ge(`${e.length}`)} dependencies. You are attempting to use processor`,"(transforms) which are not yet installed. Install the below modules as development","dependencies or disable the transform:"];t.Wrap(r).Newline();for(let n of e)t.Line(`$ pnpm add ${n} -D`,_)}Se(t.NL.Wrap("If you are using a different package manager please consider adopting pnpm.",m).End(i.log.group).BR.toString()),process.exit(0)}function yl({option:e,key:t,expects:r,reason:n}){e.indexOf(".")>-1&&(e=e.split(".").filter(Boolean).join(m(" \u2192 "))),Se(X({type:"error"}).Line("MISSING OPTION",h).NL.Wrap(`Missing ${qo("CB",ge(e))} config option. The ${ge(t)} option must be defined`).NL.Line(`expected${k} ${N(r.replace(/([|,])/g,m("$1")))}`).Line(`location${k} ${m.underline(i.file.base)}`).NL.Line("Why?",m.bold).Wrap(n,m).End(i.log.group).BR.toString()),process.exit(0)}function rt({option:e,name:t,value:r,expects:n,reason:s=[""]}){e.indexOf(".")>-1&&(e=e.split(".").filter(Boolean).join(m(" \u2192 "))),Se(X({type:"error"}).Line("INVALID ERROR",h).NL.Wrap(`Invalid ${ge(e)} configuration. The ${ge(t)} option is invalid. `,...s).NL.Line(`provided${k} ${re(r)}`).Line(`expected${k} ${N(n.replace(/([|,])/g,m("$1")))}`).NL.Line("How to fix?",m.bold).Line("You need to update the option and use one of the expected values.",m).Line(`Use the ${A("defineConfig")} named export for type checking`,m).End(i.log.group).BR.toString(ae)),process.exit(0)}function Dl(e){Se(X({type:"error"}).Line("MISSING REFERENCE",h).NL.Line(`You have not provided any ${h("stores")} within your ${ge("package.json")} file.`).NL.Line("How to fix?",A.bold).Line(`You need to provide ${ge("stores")} via ${ge("syncify")} key`,m).Line("passing both your store name and a key > value list of theme targets.",m).NL.Line("{",m).Line('  "syncify": {'.replace(/"/g,A('"')),m).Line('    "stores": {'.replace(/"/g,A('"')),m).Line(`      "domain": "${xe("your-store")}"`.replace(/"/g,A('"')),m).Line('      "themes": {}'.replace(/"/g,A('"')),m).Line("    }",m).Line("  }",m).Line("}",m).NL.Line(`Replace the ${A("your-store")} with the name of your .myshopify domain.`,m).Line("Syncify will prompt you and provide a list of theme targets to select from.",m).NL.End(i.log.group).BR.toString()),process.exit(0)}function bl(e){Se(X({type:"nil"}).Line(`${`Missing ${ge("syncify.config.js")} configuration`}`,h).BR.Line("Unable to resolve a configuration file within the workspace").BR.Line(`at${k} ${m.underline("~"+e)}`).BR.Line("How to fix?",A.bold).Line("You need to add one the following files to your project",m).BR.Line(` - ${A("syncify.config.ts")}`,m).Line(` - ${A("syncify.config.js")}`,m).Line(` - ${A("syncify.config.mjs")}`,m).Line(` - ${A("syncify.config.cjs")}`,m).Line(` - ${A("syncify.config.json")}`,m).BR.Line(`You can also provide configuration in your ${A("package.json")}`,m).Line(`file using the ${ge('"syncify": { "config": {} }')} 'property.`,m).BR.toString(ae)),process.exit(0)}function ai(e){let t=[`Missing ${ge(".env")} credentials. Syncify could not resolve credentials within the workspace.`,`Check you have ${ge(".env")} file present in the root of your project`];Se(X({type:"error"}).Line("MISSING ENV",h).NL.Wrap(t).NL.End(i.log.group).BR.toString(ae)),process.exit(0)}function wl(e,t){let r=e instanceof Error?Ke("message",e)?e.message:e.toString():e;Ke("code",e)&&(t.entries.code=e.code),Ke("name",e)&&(t.entries.name=e.name),Se(X({type:"error"}).Line("ERROR",h).NL.Wrap(t.message,xe).NL.Wrap(r,xe.bold).NL.Line("How to fix?",m.bold).Wrap(t.solution,m).NL.Context({entries:t.entries}).NL.End(i.log.group).BR.toString()),process.exit(0)}function Qe(e,t){Se(X({type:"error"}).Line("ERROR",h).NL.Wrap(e).NL.Line("How to fix?",m.bold).Wrap(t,m).NL.End(i.log.group).BR.toString()),process.exit(0)}function ui(e,t){e.indexOf(".")>-1&&(e=qo("CB",fe(e.split(".").filter(Boolean).join(m(" \u2192 ")),j,xe.bold(t)),{spaced:!0}));let r=i.file.base==="package.json"?`${N("syncify")} config in the ${N("package.json")} file.`:`${N(i.file.base)} file.`;Se(X({type:"error"}).Line("ERROR",h).NL.Line(`Unknown ${ge(e)} option provided.`).NL.Line("How to fix?",m.bold).Line(`The ${ge(t)} option is invalid or unsupported.`).Line(`You need to remove it from the ${r}`).End(i.log.group).BR.toString()),process.exit(0)}function Br(e){return R(e)?e.filter(t=>/\*/.test(t)):/\*/.test(e)?e:null}function tn(e){if(R(e))return e.map(tn);if(e.indexOf("/")===-1)return e;let t=e.endsWith("/")?xl(e.slice(0,-1)):xl(e),r=t.lastIndexOf("/")+1;return t.slice(r)}function Vo(e){if(R(e))return e.map(Vo);let t=e.lastIndexOf("/");if(t===-1)return e;let r=e.indexOf("*");return r===-1?e.slice(0,t):e.slice(0,r)}function xn(e,t=null){let r=new RegExp(`^\\.?\\/?${e}\\/`);return function n(s){if(Array.isArray(s))return s.map(n);let o=s.charCodeAt(0)===33;if(o&&(s=s.slice(1)),r.test(s))return o?"!"+s:s;if(s.charCodeAt(0)===46&&s.charCodeAt(1)===46&&s.charCodeAt(2)===47&&Qe(`Invalid path defined at: ${k} ${re(`"${s}"`)}`,["Paths must be relative to source"]),t!==null){let a=ci(t,s);return(o?"!":"")+(a.startsWith(e)?a:ci(e,s))}else return(o?"!":"")+ci(e,s)}}var Sl=e=>t=>{if(t.indexOf("*")!==-1&&Qe(`Base directory path cannot contain glob${k} ${re(`"${t}"`)}`,["Ensure that path you are resolving is correctly formed"]),t.charCodeAt(0)===46){if(t.length===1)return e+"/";t.charCodeAt(1)===47?t=t.slice(1):Qe(`Directory path is invalid at${k} ${re(`"${t}"`)}`,["Ensure the path you are resolving is correctly formed"])}if(t.charCodeAt(0)===47){if(t.length===1)return e+"/";t=t.slice(1)}if(/^[a-zA-Z0-9_-]+/.test(t))return t=ci(e,t),Zc(t).charCodeAt(0)===47?t:t+"/";Qe(`Directory path is invalid at${k} ${re(`"${t}"`)}`,["Ensure that path you are resolving is correctly formed"])};async function vl(){await Sn(i.home);for(let e of Ec)i.dirs[e]=wr(i.home,`.${e}`),await Sn(i.dirs[e])}async function Cl(){return await Sn(i.dirs.cache),await Sn(i.dirs.sourcemaps.root),Promise.all([Sn(i.dirs.sourcemaps.scripts),Sn(i.dirs.sourcemaps.styles)])}async function Jo(e){if(e||(e=i.dirs.output),await vn(e)){if(i.mode.clean)try{await Fl(e)}catch(t){throw new Error(t)}}else try{await Fn(e)}catch(t){throw new Error(t)}for(let t of Jr){let r=wr(e,t),n=t.startsWith("templates/")?t.slice(10):t;if(await vn(r))i.stats[n]=Hg(r).length;else try{await Fn(r),i.stats[n]=0}catch(s){throw new Error(s)}}}async function El(e){let t=Sl(i.cwd);for(let[r,n]of $c){if(r==="cache"){i.dirs[r]=wr(i.cwd,n,".syncify"),i.dirs.static=wr(i.dirs[r],"static"),i.dirs.sourcemaps=Yr(null),i.dirs.sourcemaps.root=wr(i.dirs[r],"sourcemaps"),i.dirs.sourcemaps.scripts=wr(i.dirs.sourcemaps.root,"scripts"),i.dirs.sourcemaps.styles=wr(i.dirs.sourcemaps.root,"styles");continue}if(r==="import"){i.dirs[r]=t(i.mode.import&&x("output",e)?e.output:i.config.import);continue}else if(r==="export"){i.dirs[r]=t(i.mode.export&&x("output",e)?e.output:i.config.export);continue}else if(x(r,e)&&e[r]===n&&i.config[r]===n){i.dirs[r]=t(e[r]);continue}let s=G(e[r])?e[r]:i.config[r];G(s)?i.dirs[r]=t(s):ee({option:"config",name:r,provided:s,expects:"string"})}i.watch.add(i.file.path)}async function $l(){let{dirs:e,sync:t,mode:r}=i;if(r.import){if(!await vn(e.import))try{await Fn(e.import)}catch(n){throw new Error(n)}for(let n in t.themes){let{store:s,target:o}=t.themes[n],a=wr(e.import,s);if(await vn(a)){if(r.clean)try{await Fl(a)}catch(u){throw new Error(u)}}else try{await Fn(a)}catch(u){throw new Error(u)}await Jo(wr(a,o))}}}async function Sn(e){if(R(e)){for(let t of e)if(!await vn(t))try{await Fn(t)}catch(r){throw new Error(r)}}else if(!await vn(e))try{await Fn(e)}catch(t){throw new Error(t)}}l();function Al(e){let t=Ge(i.config.log);t("silent")&&(i.log.config.silent=i.config.log.silent),t("clear")&&(i.log.config.clear=i.config.log.clear),t("stats")&&(i.log.config.stats=i.config.log.stats),t("warnings")&&(i.log.config.warnings=i.config.log.warnings);let r=e.pages||e.metafields||e.redirects,n=e.style||e.script||e.image||e.svg,s=r||e.upload||e.import?!1:e.watch;i.mode=ne(i.mode,{watch:s,dev:!e.prod,prod:e.prod,setup:e.mode==="setup",strap:e.mode==="strap",themes:e.mode==="themes",hot:e.watch&&e.hot,interactive:e.interactive,redirects:e.redirects,metafields:e.metafields,pages:e.pages,pull:e.pull,cache:e.build&&e.cache,force:e.force,script:n?e.script:!1,style:n?e.style:!1,image:n?e.image:!1,svg:n?e.svg:!1,terse:e.terse||e.prod,clean:r||n||e.upload?!1:e.export&&e.build||e.clean,build:e.watch||e.import?!1:e.build,upload:n||s?!1:e.upload,export:e.export,import:r||n||e.upload||e.watch||e.build?!1:e.import,publish:e.publish,release:G(e.release)}),Gg(i.mode,e),i.mode.release&&(i.mode.clean=!0,i.mode.build=!0,i.mode.export=!0,i.mode.publish=!0),i.mode.build&&!i.mode.script&&!i.mode.style&&!i.mode.svg&&!i.mode.pages&&!i.mode.metafields&&!i.mode.image&&(i.mode.script=!0,i.mode.style=!0,i.mode.svg=!0,i.mode.image=!0)}function Gg(e,t){if(t.cache&&t.build===!1&&br({expected:"-b, --build",message:["Cache resets can only be executed along side build operations"],fix:[`Attempting to purge cache outside ${h("build")} mode Syncify requires you to pass`,"the build mode flags when executing a cache reset, for example:",`

`,`${_("$")} ${A(`syncify ${i.argv} ${N("-b --cache")}`)}`,`

`,`Run ${m("syncify --help")} for more information, or pass an execution`,`operation mode as per the ${_("expected")} value.`,`

`]}),hn(e).every(r=>r===!1)&&br({expected:"--<cmd>",message:["Execution is unclear, you have not provided Syncify with a valid operation","mode to execute"],fix:["Syncify requires that you provide an operation. In most cases, this","error occurs when you have forgotten to pass the mode, for example:",`

`,`${_("$")} ${_(`syncify ${Ys}${ge("mode")}${Ks}`)}`,`

`,`Run ${N("syncify --help")} for more information`]}),e.export){let r=Mt(e);r.push("filter","delete","spawn","resource");for(let n of r)if(!(n==="build"||n==="clean"||n==="cache"||n==="export")&&e[n]){let s=r.filter(c=>c!=="build"&&c!=="clean"&&c!=="export");s.push("f\\b","u\\b","w\\b","s\\b","d\\b","r\\b");let o=s.map(c=>c==="filter"||c==="f"||c==="resource"||c==="-r"?`--?${c}.*?(?=(--?${s.join("|--?")}))`:`--?${c}`).join("|"),a=new RegExp(`(--?${s.join("|--?")})`,"g"),u=new RegExp(`(${o})`,"g");return br({message:[`Bad command ${Vs}argv${Js} sequence passed with ${N("export")} mode.`,"Theme exports are performed in isolation. You command includes","execution modes that cannot be run when exporting theme/s"],provided:i.argv.replace(a,ae("$1")).replace(/(--export)/,N("$1")),expected:i.argv.replace(u,"").replace(/(--export)/,N("$1")),fix:[`Removed the flags marked ${ae("red")} as shown in provided aboved.`]})}}}function Tl(e,t){let{values:r,tokens:n}=Ug({args:e,options:t,allowPositionals:!0,tokens:!0});if(i.argv=e.slice(2).join(" ").trimStart(),i.cmd=ne(r),n[2].kind==="positional")for(let s of n.slice(2)){if(s.kind!=="positional")break;/\b(themes|strap|setup)\b/.test(s.value)?i.cmd.mode=s.value:i.cmd.stores=s.value.split(",").filter(Boolean)}return x("stores",i.cmd)||(i.cmd.stores=[]),i.env.cli=!0,i.env.prod=i.cmd.prod,i.env.dev=i.cmd.dev&&!i.cmd.prod,i.terminal.wrap=Math.round(i.terminal.cols-i.terminal.cols/3),Al(i.cmd),El(i.cmd),i.cmd}l();import h2 from"node:process";l();import iD from"fast-glob";import{relative as oD}from"node:path";import{readFile as aD}from"fs-extra";l();l();async function ur(e,t,{concurrency:r=Number.POSITIVE_INFINITY,stopOnError:n=!0,signal:s}={}){return new Promise((o,a)=>{if(e[Symbol.iterator]===void 0&&e[Symbol.asyncIterator]===void 0)throw new TypeError(`Expected \`input\` to be either an \`Iterable\` or \`AsyncIterable\`, got (${typeof e})`);if(typeof t!="function")throw new TypeError("Mapper function is required");if(!(Number.isSafeInteger(r)&&r>=1||r===Number.POSITIVE_INFINITY))throw new TypeError(`Expected \`concurrency\` to be an integer from 1 and up or \`Infinity\`, got \`${r}\` (${typeof r})`);let u=[],c=[],f=new Map,p=!1,d=!1,g=!1,w=0,b=0,C=e[Symbol.iterator]===void 0?e[Symbol.asyncIterator]():e[Symbol.iterator](),q=te=>{p=!0,d=!0,a(te)};s&&(s.aborted&&q(s.reason),s.addEventListener("abort",()=>{q(s.reason)}));let M=async()=>{if(d)return;let te=await C.next(),H=b;if(b++,te.done){if(g=!0,w===0&&!d){if(!n&&c.length>0){q(new AggregateError(c));return}if(d=!0,f.size===0){o(u);return}let Z=[];for(let[Q,qe]of u.entries())f.get(Q)!==li&&Z.push(qe);o(Z)}return}w++,(async()=>{try{let Z=await te.value;if(d)return;let Q=await t(Z,H);Q===li&&f.set(H,Q),u[H]=Q,w--,await M()}catch(Z){if(n)q(Z);else{c.push(Z),w--;try{await M()}catch(Q){q(Q)}}}})()};(async()=>{for(let te=0;te<r;te++){try{await M()}catch(H){q(H);break}if(g||p)break}})()})}var li=Symbol("skip");l();l();l();var Ko=Ct(Bl(),1);l();var as=class extends Error{constructor(t){super(t),this.name="TimeoutError"}},Xo=class extends Error{constructor(t){super(),this.name="AbortError",this.message=t}},Rl=e=>globalThis.DOMException===void 0?new Xo(e):new DOMException(e),Pl=e=>{let t=e.reason===void 0?Rl("This operation was aborted."):e.reason;return t instanceof Error?t:Rl(t)};function Zo(e,t){let{milliseconds:r,fallback:n,message:s,customTimers:o={setTimeout,clearTimeout}}=t,a,c=new Promise((f,p)=>{if(typeof r!="number"||Math.sign(r)!==1)throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${r}\``);if(t.signal){let{signal:g}=t;g.aborted&&p(Pl(g)),g.addEventListener("abort",()=>{p(Pl(g))})}if(r===Number.POSITIVE_INFINITY){e.then(f,p);return}let d=new as;a=o.setTimeout.call(void 0,()=>{if(n){try{f(n())}catch(g){p(g)}return}typeof e.cancel=="function"&&e.cancel(),s===!1?f():s instanceof Error?p(s):(d.message=s??`Promise timed out after ${r} milliseconds`,p(d))},r),(async()=>{try{f(await e)}catch(g){p(g)}})()}).finally(()=>{c.clear()});return c.clear=()=>{o.clearTimeout.call(void 0,a),a=void 0},c}l();l();function Qo(e,t,r){let n=0,s=e.length;for(;s>0;){let o=Math.trunc(s/2),a=n+o;r(e[a],t)<=0?(n=++a,s-=o+1):s=o}return n}var us=class{#n=[];enqueue(t,r){r={priority:0,...r};let n={priority:r.priority,run:t};if(this.size&&this.#n[this.size-1].priority>=r.priority){this.#n.push(n);return}let s=Qo(this.#n,n,(o,a)=>a.priority-o.priority);this.#n.splice(s,0,n)}dequeue(){return this.#n.shift()?.run}filter(t){return this.#n.filter(r=>r.priority===t.priority).map(r=>r.run)}get size(){return this.#n.length}};var rn=class extends Ko.default{#n;#t;#e=0;#a;#o;#i=0;#r;#c;#s;#h;#u=0;#f;#l;#g;timeout;constructor(t){if(super(),t={carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:us,...t},!(typeof t.intervalCap=="number"&&t.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${t.intervalCap?.toString()??""}\` (${typeof t.intervalCap})`);if(t.interval===void 0||!(Number.isFinite(t.interval)&&t.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${t.interval?.toString()??""}\` (${typeof t.interval})`);this.#n=t.carryoverConcurrencyCount,this.#t=t.intervalCap===Number.POSITIVE_INFINITY||t.interval===0,this.#a=t.intervalCap,this.#o=t.interval,this.#s=new t.queueClass,this.#h=t.queueClass,this.concurrency=t.concurrency,this.timeout=t.timeout,this.#g=t.throwOnTimeout===!0,this.#l=t.autoStart===!1}get#b(){return this.#t||this.#e<this.#a}get#w(){return this.#u<this.#f}#x(){this.#u--,this.#p(),this.emit("next")}#S(){this.#D(),this.#y(),this.#c=void 0}get#F(){let t=Date.now();if(this.#r===void 0){let r=this.#i-t;if(r<0)this.#e=this.#n?this.#u:0;else return this.#c===void 0&&(this.#c=setTimeout(()=>{this.#S()},r)),!0}return!1}#p(){if(this.#s.size===0)return this.#r&&clearInterval(this.#r),this.#r=void 0,this.emit("empty"),this.#u===0&&this.emit("idle"),!1;if(!this.#l){let t=!this.#F;if(this.#b&&this.#w){let r=this.#s.dequeue();return r?(this.emit("active"),r(),t&&this.#y(),!0):!1}}return!1}#y(){this.#t||this.#r!==void 0||(this.#r=setInterval(()=>{this.#D()},this.#o),this.#i=Date.now()+this.#o)}#D(){this.#e===0&&this.#u===0&&this.#r&&(clearInterval(this.#r),this.#r=void 0),this.#e=this.#n?this.#u:0,this.#m()}#m(){for(;this.#p(););}get concurrency(){return this.#f}set concurrency(t){if(!(typeof t=="number"&&t>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${t}\` (${typeof t})`);this.#f=t,this.#m()}async#v(t){return new Promise((r,n)=>{t.addEventListener("abort",()=>{n(t.reason)},{once:!0})})}async add(t,r={}){return r={timeout:this.timeout,throwOnTimeout:this.#g,...r},new Promise((n,s)=>{this.#s.enqueue(async()=>{this.#u++,this.#e++;try{r.signal?.throwIfAborted();let o=t({signal:r.signal});r.timeout&&(o=Zo(Promise.resolve(o),{milliseconds:r.timeout})),r.signal&&(o=Promise.race([o,this.#v(r.signal)]));let a=await o;n(a),this.emit("completed",a)}catch(o){if(o instanceof as&&!r.throwOnTimeout){n();return}s(o),this.emit("error",o)}finally{this.#x()}},r),this.emit("add"),this.#p()})}async addAll(t,r){return Promise.all(t.map(async n=>this.add(n,r)))}start(){return this.#l?(this.#l=!1,this.#m(),this):this}pause(){this.#l=!0}clear(){this.#s=new this.#h}async onEmpty(){this.#s.size!==0&&await this.#d("empty")}async onSizeLessThan(t){this.#s.size<t||await this.#d("next",()=>this.#s.size<t)}async onIdle(){this.#u===0&&this.#s.size===0||await this.#d("idle")}async#d(t,r){return new Promise(n=>{let s=()=>{r&&!r()||(this.off(t,s),n())};this.on(t,s)})}get size(){return this.#s.size}sizeBy(t){return this.#s.filter(t).length}get pending(){return this.#u}get isPaused(){return this.#l}};import Jg from"axios";var Cn=Jg.create({responseType:"json",headers:{}}),se=new rn({interval:500,intervalCap:2});function nn(e){return e===429||e===500?!0:(se.isPaused||se.pause(),!1)}l();import{performance as ea}from"node:perf_hooks";var T=new class{marks=[];time={};cache={};now(t){return this.stop(t||!0)}sec(t){let r=this.stop(t||!0);return r.slice(0,r.lastIndexOf(" "))}pause(t){t in this.marks&&(this.cache[t]=this.stop(t||!0))}start(t){t?this.time[t]=ea.now():this.marks.push(ea.now())}clear(t){if(t){if(t in this.time){delete this.time[t];return}if(t in this.cache){delete this.cache[t];return}}for(;this.marks.length!==0;)this.marks.pop()}stop(t=!1,r=!1){let n;if(typeof t=="boolean")n=t?this.marks[this.marks.length-1]:this.marks.pop();else if(t){if(t in this.cache){let u=this.cache[t];return delete this.cache[t],u}r?(n=this.time[t],delete this.time[t]):n=this.time[t]}let s=ea.now()-n;if(s<1e3)return`${Kr(+s.toFixed(0))}ms`;let o=s/1e3;if(o<60)return`${Kr(+o.toFixed(0))}s ${Kr(+s.toFixed(0).slice(1,4))}ms`;let a=Kr(+(o/60).toFixed(0));return`${a}m ${Kr(+(o-60*Number(a)).toFixed(0))}s ${Kr(+s.toFixed(0).slice(1,4))}ms`}};l();l();var En=class{constructor({base:t,dir:r,ext:n,name:s,root:o}){this.base=t,this.dir=r,this.ext=n,this.name=s,this.root=o}data=void 0;hash;uuid;type;resource;root;dir;name;ext;base;relative;key;namespace;kind;input;output;size};l();import{cursorTo as J0,clearScreenDown as Y0}from"node:readline";import{stdout as ga,stderr as $$}from"node:process";import Da from"node-notifier";l();l();function pi(e,{type:t="info"}={}){let r=X({type:t}),n=R(e)?e:e.split(`
`),s=t==="error"?"red":t==="warn"?"yellow":"line";for(;n.length!==0;){let o=n.shift();o.trim().length>0?r.Line(o.trimEnd()):r.Newline(s)}return r.Newline(s).toString()}function $n(e){let t=kt(e.entries),r=x("message",e);x("warning",e)||(e.warning=!1),r||(e.warning===!1?e.message=X({type:"error"}).NL:e.message=X({type:"warn"}).NL);for(let n in e.entries){let s=Te(e.entries[n]);n==="source"||n==="output"||n==="input"||n==="file"?e.message.Line(A(n)+k+t(n)+ie+sr(s),m):e.message.Line(A(n)+k+t(n)+s,m)}return G(e.stack)&&(e.warning===!1&&i.errors.add(e.stack),e.message.Break(en.stack)),e.message.toLine()}function kl(e,{line:t=E.line,span:r=null}={}){if(t==="red"?t=E.red:t==="yellow"&&(t=E.yellow),r!==null){let n=x("end",r)?r.end:r.start+1;return t+`
`+[t+N(`${r.start-1}`)+k,t+N(`${r.start}`)+k+e,t+N(`${n}`)+k].join(`
`)}return t+`
`+t+e}function Nl(e,{type:t="info",color:r=A}={}){let n=t==="error"?"red":t==="warn"?"yellow":"line";return X({type:t}).Newline(n).Wrap(e,r).toLine()}l();l();import Vl from"node:process";l();var ps={};lc(ps,{beep:()=>w0,clearScreen:()=>g0,clearTerminal:()=>y0,cursorBackward:()=>t0,cursorDown:()=>Qg,cursorForward:()=>e0,cursorGetPosition:()=>s0,cursorHide:()=>a0,cursorLeft:()=>Il,cursorMove:()=>Zg,cursorNextLine:()=>i0,cursorPrevLine:()=>o0,cursorRestorePosition:()=>n0,cursorSavePosition:()=>r0,cursorShow:()=>u0,cursorTo:()=>Xg,cursorUp:()=>_l,enterAlternativeScreen:()=>D0,eraseDown:()=>p0,eraseEndLine:()=>l0,eraseLine:()=>jl,eraseLines:()=>c0,eraseScreen:()=>ta,eraseStartLine:()=>f0,eraseUp:()=>m0,exitAlternativeScreen:()=>b0,iTerm:()=>F0,image:()=>S0,link:()=>x0,scrollDown:()=>h0,scrollUp:()=>d0});l();import ra from"node:process";l();var mi=globalThis.window?.document!==void 0,_C=globalThis.process?.versions?.node!==void 0,IC=globalThis.process?.versions?.bun!==void 0,jC=globalThis.Deno?.version?.deno!==void 0,MC=globalThis.process?.versions?.electron!==void 0,WC=globalThis.navigator?.userAgent?.includes("jsdom")===!0,qC=typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope,HC=typeof DedicatedWorkerGlobalScope<"u"&&globalThis instanceof DedicatedWorkerGlobalScope,GC=typeof SharedWorkerGlobalScope<"u"&&globalThis instanceof SharedWorkerGlobalScope,UC=typeof ServiceWorkerGlobalScope<"u"&&globalThis instanceof ServiceWorkerGlobalScope,cs=globalThis.navigator?.userAgentData?.platform,zC=cs==="macOS"||globalThis.navigator?.platform==="MacIntel"||globalThis.navigator?.userAgent?.includes(" Mac ")===!0||globalThis.process?.platform==="darwin",VC=cs==="Windows"||globalThis.navigator?.platform==="Win32"||globalThis.process?.platform==="win32",JC=cs==="Linux"||globalThis.navigator?.platform?.startsWith("Linux")===!0||globalThis.navigator?.userAgent?.includes(" Linux ")===!0||globalThis.process?.platform==="linux",YC=cs==="iOS"||globalThis.navigator?.platform==="MacIntel"&&globalThis.navigator?.maxTouchPoints>1||/iPad|iPhone|iPod/.test(globalThis.navigator?.platform),KC=cs==="Android"||globalThis.navigator?.platform==="Android"||globalThis.navigator?.userAgent?.includes(" Android ")===!0||globalThis.process?.platform==="android";var Fe="\x1B[",fs="\x1B]",An="\x07",ls=";",Ol=!mi&&ra.env.TERM_PROGRAM==="Apple_Terminal",Yg=!mi&&ra.platform==="win32",Kg=mi?()=>{throw new Error("`process.cwd()` only works in Node.js, not the browser.")}:ra.cwd,Xg=(e,t)=>{if(typeof e!="number")throw new TypeError("The `x` argument is required");return typeof t!="number"?Fe+(e+1)+"G":Fe+(t+1)+ls+(e+1)+"H"},Zg=(e,t)=>{if(typeof e!="number")throw new TypeError("The `x` argument is required");let r="";return e<0?r+=Fe+-e+"D":e>0&&(r+=Fe+e+"C"),t<0?r+=Fe+-t+"A":t>0&&(r+=Fe+t+"B"),r},_l=(e=1)=>Fe+e+"A",Qg=(e=1)=>Fe+e+"B",e0=(e=1)=>Fe+e+"C",t0=(e=1)=>Fe+e+"D",Il=Fe+"G",r0=Ol?"\x1B7":Fe+"s",n0=Ol?"\x1B8":Fe+"u",s0=Fe+"6n",i0=Fe+"E",o0=Fe+"F",a0=Fe+"?25l",u0=Fe+"?25h",c0=e=>{let t="";for(let r=0;r<e;r++)t+=jl+(r<e-1?_l():"");return e&&(t+=Il),t},l0=Fe+"K",f0=Fe+"1K",jl=Fe+"2K",p0=Fe+"J",m0=Fe+"1J",ta=Fe+"2J",d0=Fe+"S",h0=Fe+"T",g0="\x1Bc",y0=Yg?`${ta}${Fe}0f`:`${ta}${Fe}3J${Fe}H`,D0=Fe+"?1049h",b0=Fe+"?1049l",w0=An,x0=(e,t)=>[fs,"8",ls,ls,t,An,e,fs,"8",ls,ls,An].join(""),S0=(e,t={})=>{let r=`${fs}1337;File=inline=1`;return t.width&&(r+=`;width=${t.width}`),t.height&&(r+=`;height=${t.height}`),t.preserveAspectRatio===!1&&(r+=";preserveAspectRatio=0"),r+":"+Buffer.from(e).toString("base64")+An},F0={setCwd:(e=Kg())=>`${fs}50;CurrentDir=${e}${An}`,annotation(e,t={}){let r=`${fs}1337;`,n=t.x!==void 0,s=t.y!==void 0;if((n||s)&&!(n&&s&&t.length!==void 0))throw new Error("`x`, `y` and `length` must be defined when `x` or `y` is defined");return e=e.replaceAll("|",""),r+=t.isHidden?"AddHiddenAnnotation=":"AddAnnotation=",t.length>0?r+=(n?[e,t.length,t.x,t.y]:[t.length,e]).join("|"):r+=e,r+An}};l();import Ul from"node:process";l();import yi from"node:process";l();l();var v0=(e,t,r,n)=>{if(r==="length"||r==="prototype"||r==="arguments"||r==="caller")return;let s=Object.getOwnPropertyDescriptor(e,r),o=Object.getOwnPropertyDescriptor(t,r);!C0(s,o)&&n||Object.defineProperty(e,r,o)},C0=function(e,t){return e===void 0||e.configurable||e.writable===t.writable&&e.enumerable===t.enumerable&&e.configurable===t.configurable&&(e.writable||e.value===t.value)},E0=(e,t)=>{let r=Object.getPrototypeOf(t);r!==Object.getPrototypeOf(e)&&Object.setPrototypeOf(e,r)},$0=(e,t)=>`/* Wrapped ${e}*/
${t}`,A0=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),T0=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name"),L0=(e,t,r)=>{let n=r===""?"":`with ${r.trim()}() `,s=$0.bind(null,n,t.toString());Object.defineProperty(s,"name",T0);let{writable:o,enumerable:a,configurable:u}=A0;Object.defineProperty(e,"toString",{value:s,writable:o,enumerable:a,configurable:u})};function na(e,t,{ignoreNonConfigurable:r=!1}={}){let{name:n}=e;for(let s of Reflect.ownKeys(t))v0(e,t,s,r);return E0(e,t),L0(e,t,n),e}var di=new WeakMap,Ml=(e,t={})=>{if(typeof e!="function")throw new TypeError("Expected a function");let r,n=0,s=e.displayName||e.name||"<anonymous>",o=function(...a){if(di.set(o,++n),n===1)r=e.apply(this,a),e=void 0;else if(t.throw===!0)throw new Error(`Function \`${s}\` can only be called once`);return r};return na(o,e),di.set(o,n),o};Ml.callCount=e=>{if(!di.has(e))throw new Error(`The given function \`${e.name}\` is not wrapped by the \`onetime\` package`);return di.get(e)};var Wl=Ml;l();l();var sn=[];sn.push("SIGHUP","SIGINT","SIGTERM");process.platform!=="win32"&&sn.push("SIGALRM","SIGABRT","SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT");process.platform==="linux"&&sn.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT");var hi=e=>!!e&&typeof e=="object"&&typeof e.removeListener=="function"&&typeof e.emit=="function"&&typeof e.reallyExit=="function"&&typeof e.listeners=="function"&&typeof e.kill=="function"&&typeof e.pid=="number"&&typeof e.on=="function",sa=Symbol.for("signal-exit emitter"),ia=globalThis,B0=Object.defineProperty.bind(Object),oa=class{emitted={afterExit:!1,exit:!1};listeners={afterExit:[],exit:[]};count=0;id=Math.random();constructor(){if(ia[sa])return ia[sa];B0(ia,sa,{value:this,writable:!1,enumerable:!1,configurable:!1})}on(t,r){this.listeners[t].push(r)}removeListener(t,r){let n=this.listeners[t],s=n.indexOf(r);s!==-1&&(s===0&&n.length===1?n.length=0:n.splice(s,1))}emit(t,r,n){if(this.emitted[t])return!1;this.emitted[t]=!0;let s=!1;for(let o of this.listeners[t])s=o(r,n)===!0||s;return t==="exit"&&(s=this.emit("afterExit",r,n)||s),s}},gi=class{},R0=e=>({onExit(t,r){return e.onExit(t,r)},load(){return e.load()},unload(){return e.unload()}}),aa=class extends gi{onExit(){return()=>{}}load(){}unload(){}},ua=class extends gi{#n=ca.platform==="win32"?"SIGINT":"SIGHUP";#t=new oa;#e;#a;#o;#i={};#r=!1;constructor(t){super(),this.#e=t,this.#i={};for(let r of sn)this.#i[r]=()=>{let n=this.#e.listeners(r),{count:s}=this.#t,o=t;if(typeof o.__signal_exit_emitter__=="object"&&typeof o.__signal_exit_emitter__.count=="number"&&(s+=o.__signal_exit_emitter__.count),n.length===s){this.unload();let a=this.#t.emit("exit",null,r),u=r==="SIGHUP"?this.#n:r;a||t.kill(t.pid,u)}};this.#o=t.reallyExit,this.#a=t.emit}onExit(t,r){if(!hi(this.#e))return()=>{};this.#r===!1&&this.load();let n=r?.alwaysLast?"afterExit":"exit";return this.#t.on(n,t),()=>{this.#t.removeListener(n,t),this.#t.listeners.exit.length===0&&this.#t.listeners.afterExit.length===0&&this.unload()}}load(){if(!this.#r){this.#r=!0,this.#t.count+=1;for(let t of sn)try{let r=this.#i[t];r&&this.#e.on(t,r)}catch{}this.#e.emit=(t,...r)=>this.#s(t,...r),this.#e.reallyExit=t=>this.#c(t)}}unload(){this.#r&&(this.#r=!1,sn.forEach(t=>{let r=this.#i[t];if(!r)throw new Error("Listener not defined for signal: "+t);try{this.#e.removeListener(t,r)}catch{}}),this.#e.emit=this.#a,this.#e.reallyExit=this.#o,this.#t.count-=1)}#c(t){return hi(this.#e)?(this.#e.exitCode=t||0,this.#t.emit("exit",this.#e.exitCode,null),this.#o.call(this.#e,this.#e.exitCode)):0}#s(t,...r){let n=this.#a;if(t==="exit"&&hi(this.#e)){typeof r[0]=="number"&&(this.#e.exitCode=r[0]);let s=n.call(this.#e,t,...r);return this.#t.emit("exit",this.#e.exitCode,null),s}else return n.call(this.#e,t,...r)}},ca=globalThis.process,{onExit:ql,load:mE,unload:dE}=R0(hi(ca)?new ua(ca):new aa);var Hl=yi.stderr.isTTY?yi.stderr:yi.stdout.isTTY?yi.stdout:void 0,P0=Hl?Wl(()=>{ql(()=>{Hl.write("\x1B[?25h")},{alwaysLast:!0})}):()=>{},Gl=P0;var Di=!1,Tn={};Tn.show=(e=Ul.stderr)=>{e.isTTY&&(Di=!1,e.write("\x1B[?25h"))};Tn.hide=(e=Ul.stderr)=>{e.isTTY&&(Gl(),Di=!0,e.write("\x1B[?25l"))};Tn.toggle=(e,t)=>{e!==void 0&&(Di=e),Di?Tn.show(t):Tn.hide(t)};var la=Tn;l();l();function fa(e){return Number.isInteger(e)?si(e)===2:!1}var k0=new Set([27,155]),N0="0".codePointAt(0),O0="9".codePointAt(0),ma=new Set,pa=new Map;for(let[e,t]of Yt.codes)ma.add(Yt.color.ansi(t)),pa.set(Yt.color.ansi(e),Yt.color.ansi(t));function _0(e){if(ma.has(e))return e;if(pa.has(e))return pa.get(e);e=e.slice(2),e.includes(";")&&(e=e[0]+"0");let t=Yt.codes.get(Number.parseInt(e,10));return t?Yt.color.ansi(t):Yt.reset.open}function I0(e){for(let t=0;t<e.length;t++){let r=e.codePointAt(t);if(r>=N0&&r<=O0)return t}return-1}function j0(e,t){e=e.slice(t,t+19);let r=I0(e);if(r!==-1){let n=e.indexOf("m",r);return n===-1&&(n=e.length),e.slice(0,n+1)}}function M0(e,t=Number.POSITIVE_INFINITY){let r=[],n=0,s=0;for(;n<e.length;){let o=e.codePointAt(n);if(k0.has(o)){let c=j0(e,n);if(c){r.push({type:"ansi",code:c,endCode:_0(c)}),n+=c.length;continue}}let a=fa(o),u=String.fromCodePoint(o);if(r.push({type:"character",value:u,isFullWidth:a}),n+=u.length,s+=a?2:u.length,s>=t)break}return r}function zl(e){let t=[];for(let r of e)r.code===Yt.reset.open?t=[]:ma.has(r.code)?t=t.filter(n=>n.endCode!==r.code):(t=t.filter(n=>n.endCode!==r.endCode),t.push(r));return t}function W0(e){return zl(e).map(({endCode:n})=>n).reverse().join("")}function da(e,t,r){let n=M0(e,r),s=[],o=0,a="",u=!1;for(let c of n){if(r!==void 0&&o>=r)break;c.type==="ansi"?(s.push(c),u&&(a+=c.code)):(!u&&o>=t&&(u=!0,s=zl(s),a=s.map(({code:f})=>f).join("")),u&&(a+=c.value),o+=c.isFullWidth?2:c.value.length)}return a+=W0(s),a}var q0=24,ha=({columns:e=80})=>e,H0=(e,t)=>{let r=e.rows??q0,n=t.split(`
`),s=Math.max(0,n.length-r);return s?da(t,Zr(n.slice(0,s).join(`
`)).length+1):t};function Jl(e,{showCursor:t=!1}={}){let r=0,n=ha(e),s="",o=()=>{s="",n=ha(e),r=0},a=(...u)=>{t||la.hide();let c=H0(e,u.join(" ")+`
`),f=ha(e);c===s&&n===f||(s=c,n=f,c=Ar(c,f,{trim:!1,hard:!0,wordWrap:!1}),e.write(ps.eraseLines(r)+c),r=c.split(`
`).length)};return a.clear=()=>{e.write(ps.eraseLines(r)),o()},a.done=()=>{o(),t||la.show()},a}var G0=Jl(Vl.stdout),nt=G0,jE=Jl(Vl.stderr);function Yl(){let e,t=!1,r="",n=!0,s=U({arrows:U({interval:120,frames:["\u25B9\u25B9\u25B9\u25B9","\u25B8\u25B9\u25B9\u25B9","\u25B9\u25B8\u25B9\u25B9","\u25B9\u25B9\u25B8\u25B9","\u25B9\u25B9\u25B9\u25B8"]}),brielle:U({interval:50,frames:["\u280B","\u2819","\u2839","\u2838","\u283C","\u2834","\u2826","\u2827","\u2807","\u280F"]}),spinning:U({interval:60,frames:["\u25D0","\u25D3","\u25D1","\u25D2"]})}),o=U({label:"",line:!0,color:null,style:"brielle",action:null}),a=function(c,f){let p=U(o);I(c)?p=ne(p,c):G(c)&&(p.label=c,I(f)&&(p=ne(p,f))),t=!0,n=p.line;let d,g=0,w,b=0;p.action!==null?(p.style="arrows",d=x("color",p.action)?p.action.color:Ee,w=s.arrows.frames,b=w.length):(d=Ze(p.color)?p.color:jt,r=p.label,w=s[p.style].frames,b=w.length),nt.done(),e=setInterval(()=>{if(!t)return;let C;if(p.action!==null){let q=fe(h(p.action.before),w[g=++g%b],p.action.after);C=d(r!==""?P(r,q):q)}else C=d(fe(w[g=++g%b],r));nt(p.line?ar(C):C)},s[p.style].interval)};return a.update=function(u){r=u},a.stop=function(u){t!==!1&&(t=!1,u?(nt(n?ar(u):u),nt.done()):nt.clear(),clearInterval(e),e=void 0,r="")},ft(a,"active",{get(){return t}}),a}l();l();var Kl=e=>xe(e.replace(/('[{}_\w\s.-]*?'|"[\w\s.-]*?")/g,dt("$1")).replace(/({{2}-?[a-zA-Z0-9_\-.'"[\]]+-?}{2})/g,Ur("$1")).replace(/((?:www|http:|https:)+[^\s]+[\w])/g,sr("$1")).replace(/(\/)(.*?)(\/)/g,Ur("$1")+ye("$2")+Ur("$3")).replace(/(\\)(\W)/g,m("$1")+ye("$2")).replace(/(:)(?= )/g,m("$1")).replace(/(?<=Filename\s)([\w._-]+)(?=\salready)/,ye.bold("$1"))),Xl=e=>e.replace(/({%|{%-}|-%}|%}|{{|{{-|}}|-}}|<\/?|>|:|,)/g,ye("$1")).replace(/(['"].*?['"])/g,m("$1")),U0=e=>{let t="",r=e.indexOf("- Valid syntax:");return r>-1?(t=`
`+e.slice(r).slice(1).replace(/(Valid syntax)(:)(.*)/,xe("$1")+m("$2")+Ur("$3")),e.slice(0,r)+t):e},Zl=(e,t)=>{let r=[],n=/\(line \d+\):/,s=/'(.*?)'/,o="  ",a=i.terminal.cols-10,u=NaN,c=NaN,f=0;G(e);let p=[];for(let d=0,g=e.length;d<g;d++){let w=e[d];if(n.test(w)){let b=w.indexOf("):"),C=w.indexOf("(line");if(b>-1&&C>-1&&(r.unshift(pe(E.red,ae.bold(w.slice(0,b+2)),`
`,E.redTrim)),u=Number(w.slice(C+6,b)),f=Te(u).length+3,w=U0(w.slice(b+2)),r.push(pe(Kl(ts(w,{line:E.red,color:xe})),`
`,E.redTrim,`
`,E.redTrim)),t.length>1)){let q=pe(E.redTrim," ".repeat(f-Te(u-1).length),N(`${u-1}`)," ",E.trim),M=pe(E.redTrim," ",ae.bold(">")," ",N(`${u}`)," ",E.trim),te="",H=t[u-1].replace(/\t/g,"  ").trimEnd(),Z=H.match(/^\s*/)[0];s.test(w)&&(te=w.match(s)[1],c=t[u-1].indexOf(te),c<0&&(c=NaN));let Q=t[u-2].replace(/\t/g,"  ").trimEnd(),qe=Q.match(/^\s*/)[0].length;Z.length===qe?(Q="  "+Q.trimStart(),o="  "):Z.length<qe?(Q="    "+Q.trimStart(),o="  "):(Q="  "+Q.trimStart(),o="    "),Q.length>a&&(Q=Q.slice(0,a-3)+"..."),p.push(q+m(Q)),H=o+H.trimStart(),H.length>a&&(H=H.slice(0,a-3)+"..."),isNaN(c)?p.push(pe(M,A(Xl(H)),`
`,E.redTrim)):p.push(M+A(Xl(H)),pe(E.redTrim," ".repeat(f-1),vr," ",E.redTrim," ".repeat(H.indexOf(te)),xe("^".repeat(te.length)),`
`+E.redTrim))}}else r.push(Kl(ts(w,{line:E.red,color:xe})))}return{line:u,column:c,output:r.join(`
`)+`
`+p.join(`
`)}};function Ql(e){let t=e.split(`
`).reduce((s,o)=>{let a=Nc(o),u="",c="";if(a!==!1)if(a.length>2){let p=Ic(a,a.length/2);u=pe(p[0]),c=pe(p[1]||"")}else u=a[0],c=a[1]||"";let f=o.trim().replace(new RegExp(i.cwd,"g"),"");if(f.length===0)s.push([E.trim]);else{let p=[],d=Ar(f,i.terminal.wrap,{hard:!0}).split(`
`);for(;d.length!==0;){let g=d.shift();d.length!==0&&d[0].length===1&&(g=g+d.shift()),p.push(E.line+u+g+c)}s.push(p)}return s},[]),r=[],n=!1;for(;t.length!==0;){let s=t.shift();t.length!==0&&s.length>1?(r.length>0&&r[r.length-1]!==E.trim&&r.push(E.trim),r.push(s.join(`
`))):s===E.trim?n?n=!1:(n=!0,r.push(s[0])):r.push(s[0])}nt(r.join(`
`))}function mt(e,t,r){let s=ne({log:!0,store:!1},r);s.store===!0&&(s.data=U());let o=qt("error.asset",t.data)?t.data.error.asset:qt("errors.asset",t.data)?t.data.errors.asset:null;if(t.status===422){let{value:f}=JSON.parse(t.config.data).asset,{output:p,line:d,column:g}=Zl(o,f.split(`
`)),w=U({stack:!1,entries:U({column:g,line:d,file:ie+e,details:t.statusText,status:A(Te(t.status)),processor:mn("SHOPIFY API")})}),b=X({type:"error"}).NL.Insert(p,m).NL.Context(w).toString();return s.store&&(s.data.message=p,s.data.rawMessage=gc(p),s.data.context=w),s.log&&Se(b),s.store?s.data:b}if(t.status in Lo){let f=X({type:"error"}).NL.Wrap(Lo[t.status]).toLine(),p=U({stack:!1,entries:U({status:t.status,message:t.statusText,source:`${e}`})});s.store&&(s.data.message=f,s.data.context=p);let d=pe(E.red,`
`,f,$n(p));return s.log&&Se(d),s.store?s.data:d}let a=ae("Unknown error has occured"),u={stack:!1,entries:{status:t.status,message:t.statusText,source:`${e}`}};s.store&&(s.data.message=a,s.data.context=u);let c=pe(E.red,`
`,a,$n({stack:!1,entries:U({status:t.status,message:t.statusText,source:`${e}`})}));return s.log&&Se(c),s.store?s.data:c}function Ht(e,t){let r={stack:!1,entries:{...t}},n=e instanceof Error?x("message",e)?e.message:e.toString():e;x("stack",e)&&(r.stack=e.stack),x("code",e)&&(r.entries.code=e.code),x("name",e)&&(r.entries.name=e.name),r.stack===!1?(Se(pe(pi(n,{type:"error"}),$n(r))),process.exit(0)):i.errors.add(pe(pi(n,{type:"error"}),$n(r)))}var Ue=(e,t)=>r=>{Se(pe(pi(r.message,{type:"error"}),$n({stack:r.stack,entries:{...t,code:r.code,name:r.name,details:e}})))};function on(e,t){e.fileName=t.base;let r=U(),n,s=X({type:"error"}).NL.Wrap(e.message.split(`
`)[0],ae.bold).NL;if(x("codeFrame",e)){s.Newline();let u=e.codeFrame.split(`
`),c=e.rawCodeFrame.split(`
`),f=0;for(;u.length!==0;){if(x("line",r)===!1){let p=c[f].trimStart();if(p[0]===">"){let d=p.slice(1).trimStart().match(/^\d+/);d!==null&&(n=Number(d[0]))}}s.Line(u.shift()),f=f+1}s.Newline()}let o=[],a=e.stack.split(`
`);for(;a.length!==0;)o.push(E.red+a.shift());i.errors.add(o.join(`
`)),Se(s.NL.Context({stack:!0,entries:{line:n,name:e.name,file:ie+t.relative,processor:mn("JSON")}}).toString())}function ef(e,t){let r=X({type:"error"}).NL.Wrap(t.sassMessage,ae.bold).Newline();if(x("span",t)){let{span:n}=t,s=x("context",n)?n.context:n.text;if(s.length===0)return"";r.Newline();let{start:o,end:a}=n,u=Te(a.line+1).length;if(o.line===a.line){let c=u-Te(a.line).length;o.line>1&&r.Line(`${" ".repeat(c)+N(`${a.line}`)} ${E.trim}`),c=u-Te(a.line+1).length,r.Line(`${" ".repeat(c)+N(`${a.line+1}`)} ${E.trim} ${s.trimEnd()}`),r.Line(`${" ".repeat(u-1)+vr} ${E.redTrim} ${" ".repeat(a.column)+h("^")}`)}else{let f=s.slice(n.start.offset,n.end.offset).split(`
`),p=n.start.line+1;for(let d of f){let g=Te(p++),w=u-g.length,b=w===0?"":" ".repeat(w);r.Line(`${b+N(g)} ${E.trim} ${d}`)}}}Se(r.NL.Context({stack:t.sassStack,entries:{line:t.span.start.line,name:t.name,input:e.input,cause:t.cause,processor:mn("SASS Dart")}}).toString())}function tf(e){let t=X({type:"error"}).NL.Wrap(e.text,ae.bold).Newline(),r=e.location,n=Te(r.line).length,s=n-Te(e.location.line).length;r.line>1&&t.Line(`${" ".repeat(s)+N(`${r.line-1}`)} ${E.trim}`),s=n-Te(r.line).length,Se(t.Line(`${" ".repeat(s)+N(`${r.line}`)} ${E.trim} ${r.lineText}`).Line(`${" ".repeat(n-1)+vr} ${E.redTrim} ${" ".repeat(r.column)+h("^")}`).NL.NL.Context({stack:!1,entries:{suggest:_(r.suggestion),line:e.location.line,column:e.location.column,plugin:e.pluginName,namespace:r.namespace,file:ie+e.location.file,processor:mn("ESBuild")}}).toString())}function rf(e,t){let r=[],n=es(t.stack,{pretty:!0,basePath:i.cwd}).split(`
`);for(;n.length!==0;)r.push(E.red+n.shift());i.errors.add(r.join(`
`)),Se(X({type:"error"}).NL.Wrap(`${t.name}${k} ${t.reason}`,ae.bold).Newline().Multiline(t.showSourceCode(!0)).NL.NL.Context({stack:!0,entries:{line:t.line,column:t.column,source:e.input,file:e.input===t.file?void 0:t.file,plugin:N(t.plugin),processor:mn("PostCSS")}}).toString())}l();import{relative as V0}from"node:path";var Bt=function(e){if(ms(),e.log.config.silent)return;e.env.tree=!0;let t=X().BR.Top("Syncify").NL.Line(`v${e.version}`,h.whiteBright);e.terminal.cols<80&&t.Newline("red").Error("TERMINAL WIDTH WARNING",h).Newline("red").Error(`Your terminal width is below ${h("100")} columns (currently ${h(`${e.terminal.cols}`)})`).Error("This is not recommended for usage with Syncify (size matters).").Error("Expand your terminal wider for an optimal logging experience."),L(t.toLine())};Bt.time=function(){L(ar(J(`Started in ${T.stop("runtime")}`)))};Bt.modes=function(e){let t=X(),r=e.env.prod?"--prod":"--dev";if(e.mode.themes)return L(t.Wrap("Select theme target/s to be inserted into your package.json file.","You will be given a code example after selecting where you will define","a custom target name. If you would like to create a new theme, then run",`the ${ge("publish")} resource`,m).toLine());if(e.mode.cache&&(r!==""?r+=` ${ie} cache`:r+="cache"),e.mode.clean&&(r!==""?r+=` ${ie} clean`:r+="clean"),e.spawn.invoked&&(r!==""?r+=` ${ie} build`:r+="build"),e.mode.build&&(r!==""?r+=` ${ie} build`:r+="build"),e.mode.export&&(r!==""?r+=` ${ie} export`:r+="export"),e.mode.publish&&(r!==""?r+=` ${ie} publish`:r+="publish"),e.mode.import&&(r!==""?r+=` ${ie} import`:r+="import"),e.mode.watch&&(r!==""?r+=` ${ie} watch`:r+="watch",e.mode.hot&&(r+=` ${ie} hot`)),r!==""&&(t.Line(r,m),r=""),!Xr(e.filters)){t.NL.Line(`Filters${k}`,A.bold);let n=kt(e.filters);for(let s in e.filters){let o=A(e.filters[s].map(a=>V0(e.cwd,a)).join(", "));t.Line(` ${ie} ${s}${k}${n(s)}${o}`,ye)}}L(t.toLine())};Bt.spawns=function(e){if(e.mode.build||e.mode.watch){let t=X().Line(`Spawned${k}`,A.bold),r=kt(e.spawn.commands);for(let n in e.spawn.commands){let s=r(n),o=e.spawn.commands[n].pid;t.Line(` ${ie} ${ye(n)}${k}${s}PID ${j} #${jt(`${o}`)}`,m)}L(t.toLine())}};Bt.stores=function(e){let t=X(),r=e.sync.themes.length;$r(e.mode.upload,e.mode.import,e.mode.build,e.mode.clean)&&r>0&&(t.Line(`Editors${k}`,h.white),nf(t,e.sync.themes,"editor")),qc(e.mode.upload,e.mode.import,e.mode.watch)&&r>0&&(e.mode.upload||e.mode.import?t.NL.Line(`Targets${k}`,h.white):t.NL.Line(`Previews${k}`,h.white),nf(t,e.sync.themes,"preview")),L(t.toLine())};Bt.warnings=function(t){if(!t.log.config.warnings)return;let r=Mt(Lr),n=r.reduce((o,a)=>(o=o+Lr[a].length,o),0);if(n===0)return;let s=X({type:"warning"}).Line(`${n} ${Tt("Warning",n)}`,h);for(let o of r){let a=Lr[o];if(a.length>0){a.length===n?s.Newline().Line(`${o} ${Tt("Warning",a.length)}`,h).Newline():s.Newline().Line(`${a.length} ${o} ${Tt("Warning",a.length)}`,h);for(let u of a)s.Line(`${zr} ${u}`,re)}}dn(s.toString())};function nf(e,t,r){let n=t.reduce((s,{target:o,store:a})=>{let u=a.indexOf(".");return u>s.store&&(s.store=u),o.length>s.theme&&(s.theme=o.length),s},{store:0,theme:0});for(let{target:s,store:o,id:a}of t){let u=o.slice(0,o.indexOf(".")),c=r==="editor"?`https://${o}/admin/themes/${a}/editor`:`https://${o}?preview_theme_id=${a}`;e.Line(fe(" ",ie,jt(u)," ".repeat(n.store-u.length),j," ",jt.bold(s)," ".repeat(n.theme-s.length),j," ",m.underline(c)))}}var Gt=Yl(),ya=[],bi=e=>{L(ml(e.width,e.newlines))},at=(e,{color:t,type:r=null,prefix:n=null,suffix:s=null}={})=>{r==="error"?n===null?Se(fe(ns(t?t(e):xe(e)),_e(s))):Se(ns((t||xe)(P(n,fe(e,_e(s)))))):r==="warning"?n===null?L(Tr(fe(t?t(e):re(e),_e(s)))):L(Tr((t||re)(P(n,fe(e,_e(s)))))):n===null?L(we(fe(t?t(e):_(e),_e(s)))):L(we((t||_)(P(n,fe(e,_e(s))))))};var Ie=e=>{e===""?L(`
`):e==="red"?L(E.red):e==="yellow"?L(E.yellow):L(E.line)};var ms=(e=!1)=>{if(e===!1&&i.log.config.clear===!1)return;let t=ga.rows-2;L(t>0?`
`.repeat(t):""),J0(ga,0,0),Y0(ga)},xt=e=>{i.log.config.silent||i.env.tree===!1||(L(ss(i.log.group)),i.log.config.clear&&e!==!1&&ms(),G(e)&&(i.log.group=e,L(`
`+rs(i.log.group))))},sf=e=>{i.log.config.silent||i.env.tree===!1||(G(e)?L(Ho(m(e)+" "+_e(yn()))):(ms(),L(E.line+`
`+Ho(fe(m(i.log.group),_e(yn()))))))},Ut=(e,...t)=>{i.mode.export||i.mode.build||i.log.config.silent||(t.length===2?L(we(_(P("process",fe(h(e),Dr,t[0],_e(t[1])))))):L(we(_(P("process",fe(h(e),_e(t[0])))))))},wi=e=>{if(i.log.config.silent===!0||i.mode.watch===!1)return;T.start();let t=fe(e.kind,Dr,Er(e.namespace)),r=x(e.relative,i.log.changes)?i.log.changes[e.relative]+1:1;i.log.changes[e.relative]=r,i.log.group!==t?(Ie(),xt(t),i.log.title!==e.namespace&&(i.log.title=e.namespace)):i.log.config.clear&&(Ie(),xt(t)),i.log.uri!==e.relative&&(i.log.uri=e.input),L(dl(ye(P("changed",fe(e.relative,_e(`${r} change${r>1?"s":""}`)))))),ya.length>0&&L(ya.shift())},Nt=(...e)=>{i.mode.export||i.mode.build||i.log.config.silent||(e.length===1?L(we(_(P("minified",h(e[0]))))):e.length===4?L(we(_(P("minified",fe(h(e[0]),j,e[1],Kn,e[2],ie,"saved",e[3]))))):L(we(_(P("minified",fe(h(e[0]),Kn,e[1],ie,"saved",e[2],_e(T.now())))))))},ze=(e,{hot:t=!1}={})=>{i.mode.export||i.mode.build||i.log.config.silent||(i.warnings.has(e)&&L(Tr(re(P("warning",fe(Te(i.warnings.get(e).size),Tt("warning",i.warnings[e].size),en.warning))))),L(we(Us(P("syncing",e)))),se.pending>(t?0:2)&&L(we(dt(P("queued",fe(e,ie,h(ei(se.pending)),"in queue"))))))},ds=(e,t)=>(L(we(dt(P("prompt",e))),ss(i.log.group)),I(t)&&Da.notify(t).notify(),()=>L(rs(i.log.group))),ba=(e,t)=>{if(i.mode.watch){if(i.log.queue.add([e,t.domain,T.stop()]),i.log.idle)return;i.log.idle=!0,se.onIdle().then(()=>{for(let[r,n,s]of i.log.queue)L(we(Ee(P("uploaded",fe(h(r),j,n,_e(s))))));i.log.queue.clear(),i.log.idle=!1})}else L(we(Ee(P("uploaded",fe(h(e),j,t.domain,_e(T.stop()))))))},of=e=>{if(!i.log.config.silent)if(i.mode.watch){if(i.log.queue.add([e.target,e.store,T.stop()]),i.log.idle)return;i.log.idle=!0,se.onIdle().then(()=>{for(let[t,r,n]of i.log.queue)L(we(Ee(P("uploaded",h(t),r,n))));i.log.queue.clear(),i.log.idle=!1})}else L(we(Ee(P("uploaded",h(e.target),e.store,T.stop()))))},cr=(e,t)=>{L(ns(ae(P("invalid",e)))),Da.notify({title:"Syncify Error",sound:"Pop",open:e,subtitle:e,message:"Invalid error"}).notify(),t&&Se(Nl(t,{type:"error",color:ae.bold}))},He=(e,{suffix:t=null,notify:r=null}={})=>{Se(ns(ae(P("error",t?e+" "+_e(t):e)))),r!==null&&Da.notify(r).notify()},wa=e=>function(...t){i.spawn.invoked||(i.spawn.invoked=!0),i.log.group!=="Spawn"&&(L(ss(i.log.group)),i.log.group!=="Syncify"&&ms(),L(rs("Spawn")),i.log.group="Spawn"),i.log.title!==e&&(L(hl(ye(e))),i.log.title=e),Ql.call(this,t.toString())},st=(e,t)=>{t?L(Tr(re(P("warning",e)+_e(t)))):L(Tr(re(P("warning",e))))},xa=(e,t)=>{L(we(dt(P("retrying",e,t.target,t.store))))},af=(e,t)=>{L(we(hc(P("deleted",e,t.target,t.store))))};var et=(e,...t)=>{i.mode.build||(t.length>0?L(we(_(P("transform",fe(h(e),j,t[0],t.length===2?fe(j,t[1]):t.length===3?fe(j,t[1],_e(t[2])):""))))):L(we(_(P("transform",h(e))))))},Sa=(e,t)=>{L(we(_(P("zipped",fe(h("ZIP"),e,_e(t))))))},Kt=(e,t)=>{i.mode.export||i.mode.build||L(we(P("skipped",fe(G(e)?e:e.key,_e(t)))))};var xi=e=>{L(ar(_.bold(e)))},Fa=(e,t)=>{ya.push(we(_(P("renamed",fe(h(e),Kn,h(t))))))},Si=e=>{L(we(zs(P("reloaded",fe(h("HOT RELOAD"),_e(T.now(e)))))))},uf=(e,t)=>{i.mode.build||L(we(Ur(P("exported",fe(h(e),j,h(t))))))};var Fi=(e,t)=>{L(we(_(P("version",fe(e.number,Kn,e.update.number,_e(t))))))};async function cf(e,t){let r=be(i.sync.stores[t.sidx].client,{method:"get",url:t.url,params:{"asset[key]":e}});return Cn(r).then(({data:n})=>n.asset.value).catch(()=>!1)}async function va(e,t){let r=be(t,{method:"get",url:e.url});try{let{data:n}=await Cn(r);return n}catch(n){if(n.response&&(n.response.status===429||n.response.status===500))t.params["asset[key]"]&&(xa(t.params["asset[key]"],e),se.add(()=>va(e,t)));else{if(i.mode.upload)throw n.response;t.params["asset[key]"]&&(He(t.params["asset[key]"]),mt(t.params["asset[key]"],n.response))}}}var hs;async function gs(e,t,r){return se.isPaused?void 0:(se.concurrency>2?(hs>=20&&se.concurrency--,hs>=32&&se.concurrency--,hs>=39&&await pt(500)):se.concurrency<3&&hs<30&&se.concurrency++,i.mode.upload===!1&&i.mode.import===!1&&T.start(),await Cn(r).then(({headers:s,data:o})=>{if(i.mode.import===!1&&r.method==="get")return o;r.method==="delete"?af(t.relative,e):i.mode.watch?(i.mode.hot===!0&&t.type!==10&&t.type!==9&&Si(),of(e)):i.mode.upload?At.emit("upload",{status:0,get theme(){return e},get file(){return t}}):i.mode.import&&At.emit("import",{status:0,get theme(){return e},get file(){return t},get data(){return o}}),hs=parseInt(s["x-shopify-shop-api-call-limit"].slice(0,2),10)}).catch(s=>{if(s.response&&(s.response.status===429||s.response.status===500))i.mode.upload===!1&&i.mode.import===!1&&xa(t.key,e),se.add(()=>gs(e,t,r)),i.mode.upload?At.emit("upload",{status:1,get theme(){return e},get file(){return t}}):i.mode.import&&At.emit("import",{status:1,get theme(){return e},get file(){return t}});else{if(i.mode.upload)return At.emit("upload",{status:2,error:s.response,get theme(){return e},get file(){return t}});if(i.mode.import)if(s.response===void 0)At.emit("import",{status:3,get theme(){return e},get file(){return t}});else return At.emit("import",{status:2,error:s.response,get theme(){return e},get file(){return t}});else He(t.key,{suffix:"shopify rejected the request",notify:{title:"Request Error",message:`Failed to sync ${t.key}`}}),s.isAxiosError&&mt(t.relative,s.response)}return li}))}l();import $a from"axios";import{stat as e3,writeJson as t3,mkdir as r3,pathExists as n3}from"fs-extra";async function ff(e,t){if(arguments.length===1)return r=>ff(e,r);if($r(Ke("namespace",t),Ke("key",t))){cr("invalid fields");return}return $a.get("metafields.json",e.client).then(({data:r})=>r.metafields.find(n=>t.namespace===n.namespace&&t.key===n.key)).catch(r=>{console.log(r)})}async function Ca(e,t){return arguments.length===1?r=>Ca(e,r):(t.type="json",t.namespace="email",t.value_type="json_string",t.key="eng",$a.post("metafields.json",{metafield:t},e.client).then(({data:r})=>(console.log("created",r),r.metafield)).catch(r=>{if(console.log(r),!e.queue)return mt(t.namespace,r.response);if(nn(r.response.status)){se.add(()=>Ca(e,t));return}else return mt(e.store,r.response)}))}async function Ea(e,t,r){return is(arguments.length,1)?(n,s)=>Ea(e,n,s):$a.put(`metafields/${t}.json`,{metafield:r},e.client).then(n=>(console.log("created"),n.data.metafield)).catch(n=>{if(!e.queue)return mt(r.namespace,n.response);if(nn(n.response.status))se.add(()=>Ea(e,t,r));else return mt(e.store,n.response)})}async function vi(e,t){if(is(arguments.length,1))return n=>vi(e,n);let r=await ff(e,t);return r?Ea(e,r.id,ne(t,{id:r.id,type:"json"})).catch(n=>{if(!e.queue)return mt(t.namespace,n.response);if(nn(n.response.status))se.add(()=>vi(e,t));else return mt(e.store,n.response)}):Ca(e,t)}function Ci({stores:e,themes:t}){return{assets:async(r,n,s)=>{let o=le(s)?{method:r,params:{"asset[key]":n.key}}:{method:r,data:{asset:{key:n.key,value:s}}};await se.add(()=>ur(t,async a=>{i.mode.upload&&T.start(n.uuid),await gs(a,n,ne({url:a.url},e[a.sidx].client,o))}))},pages:async(r,n,s)=>{await se.add(()=>ur(e,async o=>{i.mode.upload&&T.start(),console.log(s)}))},metafields:r=>se.add(function(){return Jc(async function(n){await vi(n,r)},e)})}}l();import{join as Bi,parse as Ya,relative as Yf,basename as eD}from"node:path";l();import{join as Sr,dirname as zf,basename as Qy}from"node:path";l();var Ha=Ct(Rr());import{basename as an,extname as Yy}from"node:path";import Hf from"fast-glob";import{pathExists as Ky}from"fs-extra";l();import{pathToFileURL as Mf}from"node:url";import{readFile as ky,unlink as Ny,existsSync as bs,readFileSync as Oy,writeFileSync as _y}from"fs-extra";import{isAbsolute as ja,dirname as Ma,extname as Wa,join as qa,parse as Iy,resolve as jy}from"node:path";import{build as My}from"esbuild";function Wf(e,t,r=Iy(t).root){let n=t;for(;n!==r;){let s=qa(n,e);if(bs(s))return s;if(Wa(s)!==".json"){let o=s+".json";if(bs(o))return o}n=Ma(n)}return null}function Wy(e,t){return bs(qa(e,t))?ja(t)?bs(t)?t:null:Wf(t,e):null}function qy(e,t){return ja(t)?bs(t)?t:null:t.startsWith(".")?Wf(t,e):Pe.resolve(t,{paths:[e]})}function qf(e=process.cwd(),t="tsconfig.json",r=!1){e=jy(e);let n=r?qy(e,t):Wy(e,t);if(!n)return null;let s=Qs(Oy(n,"utf-8")),o=Ma(n);Ke("baseURL",s.compilerOptions)&&(s.compilerOptions.baseUrl=qa(o,s.compilerOptions.baseUrl));let a=[];if(s.extends){let u=R(s.extends)?s.extends:[s.extends],c={};for(let f of u){let p=qf(o,f,!0);p&&(ne(c,{...p?.data,compilerOptions:{...c.compilerOptions,...p?.data?.compilerOptions}}),a.push(...p.files))}ne(s,{...c,...s,compilerOptions:{...c.compilerOptions,...s.compilerOptions}})}return delete s.extends,{path:n,data:s,files:[...a,n]}}function Hy(e,t){return qf(e,t)}function Gy(e,t){return e.replace(Zs,`.bundled_${Jt()}.${t==="esm"?"mjs":"cjs"}`)}function Uy(e){if(typeof jest>"u")return"cjs";let t=Wa(e);return t===".js"?i.pkg.type==="module"?"esm":"cjs":t===".ts"||t===".mjs"?"esm":"cjs"}function zy(e){return e===null?null:Mt(e||{}).map(t=>new RegExp(`^${t.replace(/\*/,".*")}$`))}function jf(e,t){return t?t.some(r=>ti(r)?r.test(e):e===r||e.startsWith(r+"/")):!1}function Vy({external:e,notExternal:t}={}){return{name:"bundle-require:external",setup({onResolve:r}){r({filter:/.*/},async n=>{if(!(n.path.charCodeAt(0)===46||ja(n.path))){if(jf(n.path,e))return{external:!0};if(!jf(n.path,t))return{external:!0}}})}}}function Jy(){return{name:"bundle-require:inject-file-scope",setup(e){e.initialOptions.define={...e.initialOptions.define,__dirname:"__injected_dirname__",__filename:"__injected_filename__","import.meta.url":"__injected_import_meta_url__"},e.onLoad({filter:Zs},async t=>{let r=await ky(t.path,"utf-8"),n=[`const __injected_filename__ = ${JSON.stringify(t.path)};`,`const __injected_dirname__ = ${JSON.stringify(Ma(t.path))};`,`const __injected_import_meta_url__ = ${JSON.stringify(Mf(t.path).href)};`];return{contents:pe(n)+r,loader:_c(Wa(t.path))}})}}}async function Li(e){if(!Zs.test(e.filepath))throw new Error(`${e.filepath} is not a valid JS file`);let t=e.preserveTemporaryFile??!!process.env.BUNDLE_REQUIRE_PRESERVE,r=e.cwd||i.cwd,n=e.format??Uy(e.filepath),s=e.tsconfig===null?null:Hy(r,e.tsconfig),o=zy(s?.data.compilerOptions?.paths||{});async function a(f){if(!f.outputFiles)throw new Error("[bundle-require] no output files");let{text:p}=f.outputFiles[0],g=(e.getOutputFile||Gy)(e.filepath,n);_y(g,p,"utf8");let w,b=e.require||Oc;try{w=await b(n==="esm"?Mf(g).href:g,{format:n})}finally{t||await Ny(g)}return{mod:w,dependencies:f.metafile?Mt(f.metafile.inputs):[]}}let u=await My({...e.esbuildOptions,entryPoints:[e.filepath],absWorkingDir:r,outfile:"out.js",format:n,write:!1,platform:"node",sourcemap:"inline",bundle:!0,metafile:!0,plugins:[...Ke("plugins",e.esbuildOptions)?e.esbuildOptions.plugins:[],Vy({external:e.external,notExternal:o}),Jy()]});return await a(u)}function Gf(){let e=[],t=new Set,r=n=>{let s=`${n}_password`,o=s.toUpperCase();return s in i.env.vars?i.env.vars[s]:o in i.env.vars?i.env.vars[o]:null};for(let n in i.env.vars){let s=n.toLowerCase();if(s.endsWith("_api_token")){let o=s.slice(0,s.indexOf("_api_token")),a=r(o);e.push({domain:o,password:a,themes:{}})}else if(s.endsWith("_api_key")){let o=`${s.slice(0,s.indexOf("_api_key"))}`;if(!t.has(o)){let a=r(o);e.push({domain:o,password:a,themes:{}}),t.add(o)}}else if(s.endsWith("_api_secret")){let o=`${s.slice(0,s.indexOf("_api_secret"))}`;if(!t.has(o)){let a=r(o);e.push({domain:o,password:a,themes:{}}),t.add(o)}}}if(e.length>0)return e;ai(i.cwd)}function Uf(e){let t=e+"_api_token";if(x(t,i.env.vars)||(t=t.toUpperCase()),x(t,i.env.vars))return{baseURL:`https://${e}.myshopify.com/admin`,headers:{"X-Shopify-Access-Token":i.env.vars[t]}};let r=e+"_api_key",n=e+"_api_secret";if(x(r,i.env.vars)||(r=r.toUpperCase()),x(n,i.env.vars)||(n=n.toUpperCase()),x(r,i.env.vars)&&x(n,i.env.vars))return{baseURL:`https://${e}.myshopify.com/admin`,auth:{username:i.env.vars[r],password:i.env.vars[n]}};Qe(`Invalid or missing ${ge(e+".myshopify.com")} credentials`,[`Your shop credentials in the ${ge.bold(an(i.env.file))} file could`,"not be read correctly or are missing. Please check your environment file and ensure","you have provided valid authorization."])}function Pt(e,t){let{cwd:r}=i,n=Ze(t)?[]:!1,s=ot("Path Resolver"),o=xn(i.dirs.input,i.cwd);if(R(e)){let a=[];for(let u of e){let c=o(u),f=Hf.sync(c,{cwd:r,absolute:!0});if(n!==!1){let p=t(c);G(p)?n.push(p):R(p)&&n.push(...p)}f.length===0?s("No files can be resolved in",u):a.push(...f)}return n===!1?a:{paths:a,match:(0,Ha.default)(n)}}if(G(e)){let a=o(e),u=Hf.sync(a,{cwd:r});if(u.length===0&&s("No files can be resolved in",e),n!==!1){let c=t(a);G(c)?n.push(c):R(c)&&n.push(...c)}return n===!1?u:{paths:u,match:(0,Ha.default)(n)}}ee({option:"uri",name:"uri/path",provided:e,expects:"string | string[]"})}function Bn(e,t){if(x("assertSnippet",t)||(t.assertSnippet=!0),G(e)){let{paths:r,match:n}=Pt(e,s=>(t.addWatch&&i.watch.add(s),Br(s)));if(r)return t.flatten?r.map(s=>t.assertSnippet?{input:s,rename:an(s),snippet:!1}:{input:s,rename:an(s)}):t.assertSnippet?{input:r,rename:"[name].[ext]",snippet:!1,match:n}:{input:r,rename:"[name].[ext]",match:n}}else if(R(e)){if(e.every(G)){let{paths:r,match:n}=Pt(e,s=>(t.addWatch&&i.watch.add(s),Br(s)));return t.flatten?r.map(s=>t.assertSnippet?{input:s,rename:an(s),snippet:!1}:{input:s,rename:an(s)}):t.assertSnippet?{input:r,rename:"[name].[ext]",snippet:!1,match:n}:{input:r,rename:"[name].[ext]",match:n}}else if(e.every(I))return e.map(r=>{x("input",r)||rt({option:"tranform",name:"input",value:r,expects:"{ input: string | string[] }"});let{paths:n,match:s}=Pt(r.input,o=>(t.addWatch&&i.watch.add(o),Br(o)));return r.match=s,r.input=n[0],t.assertSnippet&&!x("snippet",r)&&(r.snippet=!1),x("rename",r)||(r.rename=r.snippet?"[name].liquid":"[name].[ext]"),r})}else if(I(e)){let r=[];if(x("input",e)){let n=be(e),{paths:s,match:o}=Pt(n.input,a=>(t.addWatch&&i.watch.add(a),Br(a)));if(t.assertSnippet&&!x("snippet",n)&&(n.snippet=!1),x("rename",n)||(n.rename=n.snippet?"[name].liquid":"[name].[ext]"),t.flatten)for(let a of s)r.push(ne({},n,{input:a}));else n.input=s,n.match=o,r.push(n)}else for(let n in e){let s={snippet:n.startsWith("snippets/")},o=n.startsWith("assets/"),a=e[n],u=o||s.snippet;if(G(a)){u&&(s.rename=o?n.slice(7):n.slice(9));let{paths:c,match:f}=Pt(a,p=>(t.addWatch&&i.watch.add(p),Br(p)));if(c)if(t.flatten)for(let p of c)r.push(ne({},s,{input:p}));else r.push(ne({},s,{input:c,match:f}))}else if(I(a)){x("input",a)||rt({option:"transform",name:n,value:a,expects:"{ input: string | string[] }"});let{paths:c,match:f}=Pt(a.input,p=>(t.addWatch&&i.watch.add(p),Br(p)));if(c.length>0){let p=u?ne({},a,s,{rename:o?n.slice(7):n.slice(9)}):ne({},s,a);if(t.flatten)for(let d of c)r.push(ne({},p,{input:d}));else r.push(ne(p,{input:c,match:f}))}}else if(R(a))if(a.every(G)){let{paths:c,match:f}=Pt(a,p=>(t.addWatch&&i.watch.add(p),Br(p)));if(Zy(n)&&(s.rename=an(n)),c)if(t.flatten)for(let p of c)r.push(ne({},s,{input:p}));else r.push(ne({},s,{input:c,match:f}))}else ee({option:"transform",name:n,provided:a,expects:"string[]"})}return r}}function Ga(e,t){return!!(x("devDependencies",e)&&x(t,e.devDependencies)||x("dependencies",e)&&x(t,e.dependencies)||x("peerDependencies",e)&&x(t,e.peerDependencies)||x("optionalDependencies",e)&&x(t,e.peerDependencies))}async function Xy(e){for(let t of Tc){let r=`${e}.${t}`;if(await Ky(r))return r}return null}async function Ua(e,t){try{let r=await Xy(e);if(r!==null){let n=await Li({cwd:i.cwd,filepath:r,...t||{}});return{path:r,config:n.mod.syncify||n.mod.default||n.mod}}return null}catch{return null}}function Zy(e){return/\[(?:file|name|dir|ext)\]/.test(e)}function Pr(e,t){let r=t,n=tn(e),s=Yy(e),o=an(e,s);if(le(t))return{dir:n,ext:s,file:o,name:o,base:o+s};/(\[dir\])/.test(r)&&(r=r.replace("[dir]",n)),/(\[name\])/.test(r)&&(r=r.replace("[name]",o)),/(\[file\])/.test(r)&&(r=r.replace("[file]",o)),/(\.?\[ext\])/.test(r)&&(r=r.replace(/\.?\[ext\]/,s));let a=t.replace(t,r);return{ext:s,file:o,dir:n,name:a,base:a+s}}function Vf(e){let t=i.svg.filter(r=>r.input.has(e.input)?!0:r.match(e.input)?(r.input.add(e.input),!0):!1);return le(t)||ft(e,"data",{get(){return t}}),e}function ws(e){let t=i.style.find(r=>r.watch(e.input));return le(t)?(e.type=14,e):(ft(e,"data",{get(){return t}}),t.snippet?(e.namespace="snippets",e.key=Sr("snippets",t.rename)):e.key=Sr("assets",t.rename),e.output?e.data.rename!==Qy(e.output)&&(t.snippet?e.output=Sr(i.dirs.output,e.key):e.output=Sr(Vo(e.output),e.data.rename)):e.output=Sr(i.dirs.output,e.key),e)}function xs(e){let t=i.script.filter(r=>r.watch.has(e.input));return t.length===0||ft(e,"data",{get(){return t}}),e}function Va(e,t){return ft(t,"data",{get(){return e}}),t}function Ja(e){if(e.base.endsWith("-group.json"))return e;if(i.paths.sections.rename.length>0){let t=i.paths.sections.rename.find(([s])=>s(e.input));if(le(t))return e;let r=e.base,n=Pr(e.input,t[1]);e.name=n.name,e.ext=n.ext,e.base=n.base,e.key=Sr(e.namespace,n.base),e.output=Sr(zf(e.output),n.base),Fa(r,e.base)}return e}function Jf(e){if(i.paths.snippets.rename.length>0){let t=i.paths.snippets.rename.find(([s])=>s(e.input));if(le(t))return e;let r=e.base,n=Pr(e.input,t[1]);e.name=n.name,e.ext=n.ext,e.base=n.base,e.key=Sr(e.namespace,n.base),e.output=Sr(zf(e.output),n.base),Fa(r,e.base)}return e}function tD(e){switch(e){case".liquid":return"Liquid";case".json":return"JSON";case".html":return"HTML";case".md":return"Markdown";case".js":case".mjs":return"JavaScript";case".jsx":return"JSX";case".ts":return"TypeScript";case".tsx":return"TSX";case".svg":return"SVG";case".css":return"CSS";case".scss":return"SCSS";case".sass":return"SASS";case".mov":case".mp4":case".webm":case".ogg":return"Video";case".ico":case".jpg":case".png":case".gif":case".pjpg":case".webp":return"Image";case".eot":case".ttf":case".woff":case".woff2":return"Font";case".pdf":return"PDF";case".yaml":case".yml":return"YAML"}return"Unknown"}function Fs({name:e,dir:t,ext:r,namespace:n},s){let o=s;return/\[dir\]/.test(o)&&(o=o.replace(/\[dir\]/g,t)),/\[name\]/.test(o)&&(o=o.replace(/\[name\]/g,e)),/\[file\]/.test(o)&&(o=o.replace(/\[file\]/g,e)),/\[ext\]/.test(o)&&(o=o.replace(/\[ext\]/g,r)),n==="snippets"&&s.endsWith(".liquid")===!1?o+".liquid":!s.endsWith(".[ext]")||!s.endsWith(r)?/\.[a-z]+$/.test(s)?o:o+r:o}function Kf(e,t,r){return e.size=NaN,function(n,s,o){let a;return s===15||s===16?(a=Bi(tn(e.dir),e.base),r=null):(a=Bi(n,e.base),r=Bi(r,a)),o===-1&&(t=i.cache.paths[t]),e.uuid=Jt(),e.type=s,e.key=a,e.namespace=n,e.kind=o,e.input=t,e.output=r,e.relative=Yf(i.cwd,t),e}}function rD(e,t){let r=e;return(n,s)=>ne({},r,{uuid:Jt(),key:n,namespace:s,output:t,kind:tD(r.ext),relative:Yf(i.cwd,t)})}function Xf(e){return vs(i.paths,i.dirs.output)(e)}function vs(e,t){return function r(n){let s=new En(Ya(n)),o=Kf(s,n,t);if(s.ext===".liquid"){if(e.sections.match(n))return Ja(o("sections",4,"Liquid"));if(e.snippets.match(n))return Jf(o("snippets",3,"Liquid"));if(e.layout.match(n))return o("layout",2,"Liquid");if(e.templates.match(n))return o("templates",1,"Liquid");if(e.customers.match(n))return o("templates/customers",1,"Liquid");if(e.metaobject.match(n))return o("templates/metaobject",1,"Liquid");if(e.transforms.get(n)===9)return ws(o("snippets",9,"CSS"))}else{if(s.ext===".schema"&&e.schema.match(n))return Va(r,o("schema",5,"JSON"));if(s.ext===".json"){if(e.metafields.match(n))return o("metafields",15,"JSON");if(e.sections.match(n))return Ja(o("sections",4,"JSON"));if(e.templates.match(n))return o("templates",1,"JSON");if(e.config.match(n))return o("config",7,"JSON");if(e.locales.match(n))return o("locales",8,"JSON");if(e.customers.match(n))return o("templates/customers",1,"JSON");if(e.metaobject.match(n))return o("templates/metaobject",1,"JSON");if(e.schema.match(n))return Va(r,o("schema",5,"JSON"))}}switch(s.ext){case".js":case".mjs":return xs(o("assets",10,"JavaScript"));case".ts":return xs(o("assets",10,"TypeScript"));case".tsx":return xs(o("assets",10,"TSX"));case".jsx":return xs(o("assets",10,"JSX"));case".svg":return Vf(o("assets",11,"SVG"));case".css":return ws(o("assets",9,"CSS"));case".scss":return ws(o("assets",9,"SCSS"));case".sass":return ws(o("assets",9,"SASS"));case".md":return o("pages",16,"Markdown");case".html":return o("pages",16,"HTML")}if(e.assets.match(n)){if(i.spawn.invoked)return o("assets",17);switch(s.ext){case".json":return o("assets",14,"JSON");case".svg":return o("assets",14,"SVG");case".css":return o("assets",14,"CSS");case".ico":case".jpg":case".png":case".gif":case".webp":case".pjpg":return o("assets",14,"Image");case".mov":case".mp4":case".webm":case".ogg":return o("assets",14,"Video");case".pdf":return o("assets",14,"PDF");case".eot":case".ttf":case".woff":case".woff2":return o("assets",14,"Font")}}}}function Zf(e,t){let r=Bi(t,e),n=new En(Ya(r)),s=rD(n,r);if(e.startsWith("sections/"))return s(e,"sections");if(e.startsWith("snippets/"))return s(e,"snippets");if(e.startsWith("layout/"))return s(e,"layout");if(e.startsWith("customers/",10))return s(e,"templates/customers");if(e.startsWith("metaobject/",10))return s(e,"templates/metaobject");if(e.startsWith("templates/"))return s(e,"templates");if(e.startsWith("config/"))return s(e,"config");if(e.startsWith("locales/"))return s(e,"locales");if(e.startsWith("assets/"))return s(e,"assets")}var Qf=e=>t=>{let r=new En(Ya(t)),n=Kf(r,t,e);switch(eD(r.dir)){case"sections":return n("sections",4,-1);case"snippets":return n("snippets",3,-1);case"layout":return n("layout",2);case"templates":return n("templates",1,-1);case"customers":return n("templates/customers",1,-1);case"metaobject":return n("templates/metaobject",1,-1);case"config":return n("config",7,-1);case"locales":return n("locales",8,-1);case"assets":return n("assets",14,-1)}};l();import nD from"node:zlib";var ep=["b","kb","mb","gb","tb"];function Xt(e){return Lt(e)?pr(e):pr(ut(e))}function ut(e){return G(e)?gn(e).toString().length:e.toString().length}function pr(e){if(e===0)return`${h("0")}b`;let t=parseInt(String(Math.floor(Math.log(e)/Math.log(1024))),10);return t===0?`${h(`${e}`)}${ep[t]}`:`${h((e/1024**t).toFixed(1))}${ep[t]}`}function _t(e,t){let r=ut(e);return{isSmaller:r>t||r===t,gzip:pr(nD.gzipSync(e).length),before:pr(t),after:pr(r),saved:pr(t-r)}}l();async function tp(e,t,r,n){return le(r)||r===!1?n("put",e,t):G(r)?n("put",e,r):bt(r)?n("put",e,r.toString()):n("put",e,t)}function uD(e){e===0&&Qe("Empty output directory",[`There are no files within ${ye(oD(i.cwd,i.dirs.output)+"/**")}`,`You may need to run the ${ye.bold("syncify build")} command and try again.`]);let t=new Map,r=0;for(let n of i.sync.themes){n.target.length>r&&(r=n.target.length);let s=`${n.store}:${n.target}`;t.has(s)||t.set(s,{active:t.size===0,log:null,size:e,processed:"",failed:0,success:0,retry:0,progress:Xn(e),get theme(){return n},errors:{remote:new Map,retry:new Set}})}return t}async function rp(e){xt("Upload"),Gt("Preparing",{style:"spinning"}),T.start("upload");let t=Ci(i.sync),r=Ze(e),n=Qf(i.dirs.output),s=iD.sync(`${i.dirs.output}/**`).sort(),o=uD(s.length),a=null;await pt(500);function u(p){let d=p.toRaw();a!==null&&(clearInterval(a),a=null),nt(p.toString()),a=setInterval(()=>{d[3]=we(m(P("Elapsed",_.bold(T.now("upload")))))+`
`,nt(pe(d))},100)}function c(p){Gt.stop();let{file:d,theme:g}=p,w=`${g.store}:${g.target}`,b=o.get(w),C=X().NL.Line(Er(d.namespace),h.whiteBright).NL.Line(P("Elapsed",_.bold(T.now("upload"))),m).Line(P("Duration",_(T.stop(d.uuid))),m).Line(P("Size",_(Xt(d.size))),m).Newline();p.status===0?(b.errors.retry.has(d.input)&&(b.retry-=1,b.errors.retry.delete(d.input)),b.success+=1,b.progress.increment(1),b.processed=ye(d.key)):p.status===1?(b.errors.retry.has(d.input)||(b.retry+=1,b.errors.retry.add(d.input)),b.processed=dt(d.key)):p.status===2&&(b.errors.retry.has(d.output)&&(b.retry-=1,b.errors.retry.delete(d.output)),b.errors.remote.has(d.output)||(b.failed+=1,b.progress.increment(1),b.errors.remote.set(d.output,p),b.processed=xe(d.key)));for(let[q,{success:M,size:te,failed:H,retry:Z,progress:Q,processed:qe}]of o){let[ke,K]=q.split(":"),de=`${h(`${M}`)} ${A("of")} ${h(`${te}`)}`,Ne=h(`${Z}`),v=h(`${H}`);C.Line(`${h(K.toUpperCase())}  ${j}  ${ke}`,_).NL.Line(qe).NL.Line(P("uploaded",de),_).Line(P("retrying",Ne),Z>0?dt:_).Line(P("failures",v),H>0?xe:_).NL.Insert(Q.render()).Newline()}u(C)}At.on("upload",c),await pt(500);for(let p of s){let d=n(p),g;try{if(g=(await aD(d.output)).toString(),d.size=ut(g),!r)await t.assets("put",d,g);else{let b=e.apply({...d},g);await tp(d,g,b,t.assets)}}catch(w){Ue("Error reading output file",{file:d.key,source:d.relative})(w)}}await se.onIdle(),clearInterval(a),nt.clear(),xt("Errors");let f=!1;for(let{errors:p,theme:d,failed:g,success:w,size:b}of o.values())if(p.remote.size>0){let C=h(`${d.target.toUpperCase()} THEME`),q=h(`${g}`),M=`${h(`${w}`)} ${A("of")} ${h(`${b}`)}`;L(X().Line(`${C}  ${j}  ${d.store}`).NL.Line(P("uploaded",M),Ee).Line(P("failures",q),xe).NL.toString());let te=1;for(let H of p.remote.values()){let Z=`${(te<10?"0":"")+te++}`;Ie(),at(xe.bold(`ERROR ${Z}`)),mt(H.file.input,H.error)}bi(),f=!0}await pt(500),f||L(ar(m("No errors!"))),nt(ar("Uploaded Completed")),process.exit(0)}l();var Mm=Ct(Rr());import ib from"fast-glob";l();import{readFile as cD,writeFile as lD}from"fs-extra";import{basename as np}from"node:path";function fD(e,t){let{type:r,relative:n,kind:s,key:o,output:a}=e;return async u=>{r!==17&&(i.mode.watch&&i.watch.unwatch(a),await lD(a,u).catch(Ue("Error writing asset to output directory",{file:n,source:n}))),i.mode.hot&&(ze(o,{hot:!0}),s==="JavaScript"?i.wss.script(e.uuid,np(o)):s==="CSS"&&i.wss.stylesheet(e.uuid,np(o))),i.env.sync!==0&&i.mode.build===!1&&await t("put",e,u)}}async function Ri(e,t,r){let n=fD(e,t),s=await cD(e.input).catch(Ue("Error reading asset file",{file:e.relative,source:e.relative}));if(s){let o=s.toString();if(Wc(o))return i.mode.watch&&Kt(e,"empty file"),null;if(!Ze(r))return n(o);let a=r.apply({...e},o);if(le(a)||a===!1)return n(o);if(wn(a))return n(a);if(bt(a))return n(a.toString());await n(o)}return null}l();import{minify as x1}from"html-minifier-terser";import{relative as bm}from"node:path";import{readFile as S1,writeFile as Du}from"fs-extra";l();import{readFile as pm}from"fs-extra";l();var um=Ct(im(),1);l();var om=(e,t,r)=>r<0?-1:e.lastIndexOf(t,r);function u1(e,t){let r=om(e,`
`,t-1),n=t-r-1,s=0;for(let o=r;o>=0;o=om(e,`
`,o-1))s++;return{line:s,column:n}}function qi(e,t,{oneBased:r=!1}={}){if(t<0||t>=e.length&&e.length>0)throw new RangeError("Index out of bounds");let n=u1(e,t);return r?{line:n.line+1,column:n.column+1}:n}var c1=e=>`\\u{${e.codePointAt(0).toString(16)}}`,dr=class e extends Error{name="JSONError";fileName;codeFrame;rawCodeFrame;#n;constructor(t){super(),this.#n=t,Error.captureStackTrace?.(this,e)}get message(){let{fileName:t,codeFrame:r}=this;return`${this.#n}${t?` in ${t}`:""}${r?`

${r}
`:""}`}set message(t){this.#n=t}},am=(e,t,r=!0)=>(0,um.codeFrameColumns)(e,{start:t},{highlightCode:r}),l1=(e,t)=>{let r=t.match(/in JSON at position (?<index>\d+)(?: \(line (?<line>\d+) column (?<column>\d+)\))?$/);if(!r)return;let{index:n,line:s,column:o}=r.groups;if(s&&o)return{line:Number(s),column:Number(o)};if(n=Number(n),n===e.length){let{line:a,column:u}=qi(e,e.length-1,{oneBased:!0});return{line:a,column:u+1}}return qi(e,n,{oneBased:!0})},f1=e=>e.replace(/(?<=^Unexpected token )(?<quote>')?(.)\k<quote>/,(t,r,n)=>`"${n}"(${c1(n)})`);function kr(e,t,r){typeof t=="string"&&(r=t,t=void 0);let n;try{return JSON.parse(e,t)}catch(a){n=a.message}let s;e?(s=l1(e,n),n=f1(n)):n+=" while parsing empty string";let o=new dr(n);throw o.fileName=r,s&&(o.codeFrame=am(e,s),o.rawCodeFrame=am(e,s,!1)),o}l();function fu(e,t){if(i.warnings.has(t)){let r=i.warnings.get(t);return r.has(e)?r.get(e):r.set(e,new Set).get(e)}return i.warnings.set(t,new Map([[e,new Set]])).get(t).get(e)}function ln(e,t){let r=fu("Shared Schema",e.input),n=X({type:"warning"}).NL.Wrap(t.message,re).NL.Context({stack:!1,type:"warning",entries:{reference:t.$ref,schema:t.schema,section:e.relative,shared:t.shared}});r.add(n.toString())}var cm=e=>(t,r)=>{let n=fu("sass",e.input),s=X({type:"warning"}).NL.Wrap(t,re);if(x("span",r)){if(le(r.span))return;let{span:a}=r,f=(x("context",a)?a.context:a.text).slice(a.start.offset,a.end.offset).split(`
`);if(f.length<15){let p=Te(a.end.line).length,d=a.start.line+1;for(let g of f){let w=Te(d++),b=p-w.length,C=b===0?"":" ".repeat(b);s.Trim(`   ${C+N(w)} ${E.trim} ${g}`)}}}let o=s.NL.Wrap(r.stack,re).NL.Context({stack:!1,entries:{source:e.relative,deprecated:r.deprecation?"Yes":"No"}}).toString();n.has(o)||n.add(o),i.mode.build||L(Tr(re(P("warning",fe(Te(n.size),Tt("warning",n.size)))+en.warning)))};function lm(e,t){let r=fu("postcss",e.input),n=pe(kl(t.node.toString(),{line:"yellow",span:Lt(t.endLine)?{start:t.line,end:t.endLine}:{start:t.line,end:t.endLine}}),Go({stack:!1,entries:{column:t.column,file:e.relative,plugin:t.plugin}}));r.has(n)||(r.add(n),dn(n))}l();function fm(e){return i.liquid.terse.liquid.minifySchema===!1?i.json.useTab?JSON.stringify(e,null,"	".repeat(i.json.indent)):JSON.stringify(e,null,i.json.indent):JSON.stringify(e,null,0)}async function p1(e){let r=(await pm(e.input)).toString(),n=r.search(/{%-?\s*schema/);if(n<0)return[r,null,null];let s=r.indexOf("%}",n+2)+2,o=r.slice(s),a=s+o.search(/{%-?\s*endschema/);if(a<0)return He("Missing {% endschema %} tag in file.",{suffix:e.relative,notify:{title:"Invalid Syntax",message:"Missing {% endschema %} tag in file."}}),null;try{let u=kr(r.slice(s,a));return[r.slice(0,s),u,r.slice(a)]}catch(u){return He(e.relative,{notify:{title:"JSON Error",message:`Error when parsing ${e.base} in ExtractSchema`}}),u instanceof dr&&on(u,e),null}}function m1(e,t){let r=[];for(let n=0,s=t.length;n<s;n++){if(!x("$ref",t[n])){r.push(t[n]);continue}let[o,a]=t[n].$ref.split(".");if(i.section.shared.has(o)){let u=i.section.shared.get(o);x(a,u.schema)?R(u.schema[a])?r.push(...u.schema[a]):I(u.schema[a])&&(x("settings",u.schema[a])?r.push(...u.schema[a].settings):r.push(u.schema[a])):i.mode.build?ln(e,{shared:u.uri,$ref:t[n].$ref,schema:"settings",message:[`An unknown Shared Schema reference key of ${h(t[n].$ref)} was provided.`,`There is no such key ${h(a)} within the shared schema.`]}):st(`undefined $ref ${h(a)} in ${h(o)} `,e.base)}else i.mode.build?ln(e,{shared:a,$ref:t[n].$ref,schema:"settings",message:[`An unknown Shared Schema file reference ${h(t[n].$ref)} was provided`,`to ${h("settings")} within section file ${h(e.base)}. There is no known shared`,"schema file using that name."]}):st(`unknown $ref ${h(t[n].$ref)} `,e.base)}return r}function d1(e,t){let r=[];for(let n=0,s=t.length;n<s;n++)if(x("$ref",t[n])){let[o,a]=t[n].$ref.split(".");if(i.section.shared.has(o)){let u=i.section.shared.get(o);x(a,u.schema)?R(u.schema[a])?r.push(...u.schema[a]):r.push(u.schema[a]):i.mode.build?ln(e,{shared:a,$ref:t[n].$ref,schema:"blocks",message:[`An unknown Shared Schema key reference of ${h(t[n].$ref)} was provided`,`to the ${h("blocks")} within section file ${h(e.base)}. The shared schema`,`file exists, but the key ${h(a)} does not.`]}):st(`undefined $ref ${h(a)} in ${h(o)} `,e.base)}else i.mode.build?ln(e,{shared:a,$ref:t[n].$ref,schema:"blocks",message:[`An unknown Shared Schema file reference ${h(t[n].$ref)} was provided`,`to ${h("blocks")} within section file ${h(e.base)}. There is no known shared`,"schema file using that name."]}):st(`unknown $ref ${h(t[n].$ref)} `,e.base)}else{let o={};for(let a in t[n])a!=="settings"&&(o[a]=t[n][a]);if(o.type==="@app"){r.push(o);continue}if(o.settings=[],x("settings",t[n]))for(let a of t[n].settings)if(x("$ref",a)){let[u,c]=a.$ref.split(".");if(i.section.shared.has(u)){let f=i.section.shared.get(u);x(c,f.schema)?R(f.schema[c])?o.settings.push(...f.schema[c]):I(f.schema[c])&&(x("settings",f.schema[c])?o.settings.push(...f.schema[c].settings):o.settings.push(f.schema[c])):i.mode.build?ln(e,{shared:c,$ref:t[n].$ref,schema:`blocks ${j} settings`,message:[`An unknown Shared Schema key reference of ${h(t[n].$ref)} was provided`,`to the ${h("blocks")} schema id ${h(a.id)} within section file`,`${h(e.base)}. The shared schema file exists, but the key ${h(c)} does not.`]}):st(`undefined $ref ${h(c)} in ${h(u)} `,e.base)}else i.mode.build?ln(e,{shared:c,$ref:t[n].$ref,schema:`blocks ${j} settings`,message:[`An unknown Shared Schema file reference ${h(t[n].$ref)} was provided`,`to ${h("blocks")} schema id ${h(a.id)} within section file ${h(e.base)}.`,"There is no known shared schema file using that name."]}):st(`unknown $ref ${h(a.$ref)} `,e.base)}else o.settings.push(a);r.push(o)}return r}async function h1(e){try{let t=await pm(e.input),r=ir(t);if(x(e.input,i.cache.schema)&&i.cache.checksum[e.input]===r&&i.section.shared.has(e.name))return i.section.shared.get(e.name);i.cache.checksum[e.input]=r;let n=t.toString();if(n.trim().length===0)return st("empty file","no shared schema defined"),null;let s=kr(n.toString());x("$schema",s)&&delete s.$schema,x("$description",s)&&delete s.$description;for(let o in s)if(I(s[o]))x("$description",s[o])&&delete s[o].$description;else if(R(s[o]))for(let a of s[o])x("$description",a)&&delete a.$description;return i.section.shared.set(e.name,{uri:e.input,schema:s}).get(e.name)}catch(t){return He(e.relative,{notify:{title:"JSON Error",message:`Error when parsing ${e.base}`}}),t instanceof dr&&on(t,e),null}}async function mu(e){let t=await p1(e);if(t===null)return null;let[r,n,s]=t;if(n===null)return r;let o=Ge(n);return o("settings")&&(n.settings=m1(e,n.settings)),o("blocks")&&(n.blocks=d1(e,n.blocks)),pe(r.trimEnd(),`
`,fm(n),`
`,s.trimStart())}async function mm(e,t,r){let n=await h1(e);if(n===null)return null;let s=Cr(i.cache.schema[n.uri]),o=await ur(s,a=>ft(e.data(a),"data",{get(){return i.cache.sections[a]}}));Ut("Shared Schema",`${o.length} ${Tt("section",o.length)}`);for(let a of o){let u=await mu(a);ze(a.key),await t("put",a,u),i.mode.hot&&(e.type===4?i.wss.section(a.name):a.type!==10&&a.type!==9&&await se.onIdle().then(()=>i.wss.replace()))}}l();import{basename as g1,join as y1,relative as dm}from"node:path";import{readFile as D1,writeFile as hm}from"fs-extra";import gm from"postcss";var du=null,hu=null;async function yu(e){if(e==="sass")return du=Pe("sass"),Oe(du)===!1;if(e==="tailwind")return hu=Pe("tailwindcss"),Oe(hu)===!1}function ym(e,t,r){let n=Ze(r)?{...e}:!1;return async s=>{if(Oe(s))return null;let o;if(n!==!1){let u=r.apply({...e},gn(s));le(u)||u===!1?o=s:(G(u)||bt(u))&&(o=Te(u))}else o=s;i.cache.checksum[e.input]=ir(o),hm(e.output,o).catch(Ue("Error writing stylesheet to output",{input:e.relative,output:dm(i.cwd,e.output)}));let a=_t(s,e.size);if(a.isSmaller?e.kind==="SCSS"||e.kind==="SASS"||e.kind==="Tailwind"?et(e.kind,h("CSS"),a.before,T.stop(e.uuid)):et("CSS",a.before,`gzip ${a.gzip}`):e.kind==="Tailwind"?Nt("Tailwind",a.before,a.after,a.saved):Nt("CSS",a.before,a.after,a.saved),i.mode.hot&&i.wss.stylesheet(e.uuid,g1(e.key)),e.kind!=="Tailwind"&&ze(e.key),t===null)return o;await t("put",e,o)}}async function b1(e){if(le(e.data)||Ae(e.data.sass)&&e.data.sass===!1)return Hi(e);let t=I(e.data.sass)?be(i.processor.sass.config,e.data.sass):i.processor.sass.config;if(e.ext===".scss"||e.ext===".sass"){i.mode.watch&&T.start();try{let{css:r,sourceMap:n}=du.compile(e.data.input,{loadPaths:t.include,sourceMapIncludeSources:e.data.postcss,sourceMap:t.sourcemap,style:t.style,alertColor:!1,alertAscii:!1,quietDeps:t.quietDeps,charset:e.data.snippet===!1,logger:{debug:s=>console.log("DEBUG",s),warn:cm(e)}});if(t.sourcemap){let s=y1(i.dirs.sourcemaps.styles,e.base+".map");hm(s,JSON.stringify(n)).catch(Ue("Error writing SASS Source Map file to the cache directory",{file:dm(i.cwd,s),source:e.relative}))}return Ut("SASS Dart",T.stop()),e.size=ut(r),{css:r,map:n}}catch(r){return i.mode.watch&&(T.clear(),He(e.relative,{notify:{title:"SCSS Transform Error",message:`SASS Dart failed to process ${e.base}`}}),ef(e,r)),null}}return Hi(e)}async function Gi(e,t){for(let r in i.processor.tailwind.map)if(i.processor.tailwind.map[r].has(e.input)){let n=Xf(i.style[r].input);if(le(n))continue;T.start(n.uuid),n.kind="Tailwind";let s=await w1(n);G(s)&&t.push([n,s])}return t}async function w1(e){i.mode.hot&&T.start(e.uuid);let t=ym(e,null,null),r=await Hi(e),n=await Dm(e,r.css,r.map);return n===null?null:e.data.snippet?t(gu(n,e.data.attrs)):t(n)}async function Hi(e){try{let t=await D1(e.input);return e.size=ut(t),{css:t.toString(),map:null}}catch(t){return T.clear(),He(e.relative,{notify:{title:"Read Error",message:`File ${e.base} could not be read`}}),Ht(t,{source:e.relative,transform:"style"}),null}}async function Dm(e,t,r){let{data:n}=e,o=Ae(n.tailwind)===!1&&n.tailwind?[hu(n.tailwind)].concat(n.postcss):n.postcss;try{i.mode.watch&&e.kind!=="Tailwind"&&T.start();let a=await gm(o).process(t,{from:n.rename,to:n.rename,map:r?{prev:r,inline:!1,absolute:!0}:null});i.mode.watch&&e.kind!=="Tailwind"&&Ut("PostCSS",T.stop());let u=a.warnings();if(u.length>0)for(let c of u)lm(e,c);return a.css.toString()}catch(a){return i.mode.watch&&(T.clear(),He(e.relative,{notify:{title:"PostCSS Transform Error",message:`PostCSS failed to process ${e.base}`}}),rf(e,a)),null}}function gu(e,t){return t.length>0?`<style ${t.join(" ")}>${e}</style>`:`<style>${e}</style>`}async function Ui(e,t,r){i.mode.watch&&T.start(),i.mode.hot&&T.start(e.uuid);let n=ym(e,t,r);try{if(le(e.data)||Ae(e.data.sass)&&e.data.sass===!1)return Hi(e);let s=await b1(e);if(s===null)return null;if(Oe(gm)||le(e.data)||!e.data.postcss&&!e.data.snippet)return n(s.css);if(e.data.postcss){let o=await Dm(e,s.css,s.map);return o===null?null:e.data.snippet?n(gu(o,e.data.attrs)):n(o)}return e.data.snippet?n(gu(s.css,e.data.attrs)):n(s.css)}catch(s){return console.log(s),null}}var F1=/{%-?\s*#[\s\S]+?%}/g,v1=/{%-?\s*comment\s*-?%}[\s\S]+?{%-?\s*endcomment\s*-?%}/g,C1=/{%-?\s*liquid[\s\S]+?%}/g,E1=/[^,:'"a-zA-Z0-9=] +[^'"a-zA-Z0-9=}{]/g;function zi(e){return i.liquid.terse.markup.removeComments?e.replace(v1,"").replace(F1,""):e}function $1(e){return e.replace(C1,t=>`
`+t.replace(/#.*?$/gm,"")+`
`)}function A1(e,t){if(!i.liquid.terse.liquid.minifySchema)return zi(t);let r=t.search(/{%-?\s*schema/);if(r>-1){let n=t.indexOf("%}",r+2)+2,s=t.slice(n),o=n+s.search(/{%-?\s*endschema/);if(o>-1){let a=JSON.parse(t.slice(n,o)),u=JSON.stringify(a,null,0),c=t.slice(0,n)+u+t.slice(o);return zi(c)}cr(e.relative)}return zi(t)}function T1(e){return i.liquid.terse.liquid.stripTrims,e}async function L1(e,t){try{return await x1(t,i.liquid.terse.markup)}catch(r){return cr(e.relative),console.error(r),null}}var B1=e=>async t=>{if(!i.mode.terse)return Du(e.output,t).catch(Ue("Error writing liquid file to output",{input:e.relative,output:bm(i.cwd,e.output)})),et(e.kind,Er(e.namespace),pr(e.size),T.now()),t;let r;if(e.base.endsWith(".js.liquid"))r=t.replace(E1,"").replace(/(?<=[:,]) +(?=['"{[])/g,"").replace(/{{%/g,"{ {%").replace(/%}}/g,"%} }").replace(/(?<=[%}]})\s+(?=[\]}])/g," ").replace(/>\s+(?=[{[])/,">").replace(/(?<=[}\]])\s<\//g,"</");else if(e.base.endsWith(".json.liquid"))r=JSON.stringify(JSON.parse(t),null,0);else{let o=e.type===4?A1(e,t):zi(t),a=await L1(e,o);r=$1(a)}if(Ut("HTML Terser",T.now()),Oe(r))return Du(e.output,t).catch(Ue("Error writing liquid file to output",{input:e.relative,output:bm(i.cwd,e.output)})),t;let n=T1(r).replace(/^\s+/gm,"");Du(e.output,n);let s=_t(t,e.size);return s.isSmaller?et(`${e.namespace} ${s.before} \u2192 gzip ${s.gzip}`):Nt("Liquid",s.before,s.after,s.saved),n};async function Nr(e,t,r){i.mode.watch&&T.start();let s=(await S1(e.input)).toString();if(e.type===4){let u=await mu(e);if(u===null)return null;s=u}e.size=ut(s);let o=B1(e),a;if(Ze(r)){let u=r.apply({...e},s);le(u)||u===!1?a=await o(s):G(u)?a=await o(u):bt(u)&&(a=await o(u.toString()))}else a=await o(s);if(i.cache.checksum[e.input]=ir(a),i.processor.tailwind.map!==null&&e.type!==9){let u=await Gi(e,[[e,a]]);for(let c of u)ze(c[0].key),await t("put",c[0],c[1])}else ze(e.key),await t("put",e,a);i.mode.hot&&(e.type===4?i.wss.section(e.name):await se.onIdle().then(()=>i.wss.replace()))}l();import{readFile as R1,writeFile as P1}from"fs-extra";function bu(e,t){try{return kr(t)}catch(r){return He(e.relative,{notify:{title:"JSON Error",message:`Error when parsing ${e.base}`}}),r instanceof dr&&on(r,e),null}}function k1(e,t=0){try{return JSON.stringify(e,null,t)}catch(r){return console.log(r),null}}async function Ls(e,t,r=0){let n=k1(t,r);if(Xc(n))return i.mode.watch&&T.stop(),t;if(r===0){let s=_t(n,e.size);Nt("JSON",s.before,s.after,s.saved)}else et("JSON",e.namespace,pr(e.size),T.now());return e.type===15||P1(e.output,n).catch(Ue("Error writing JSON",{file:e.relative})),n}async function Or(e,t,r){i.mode.watch&&T.start();let n=await R1(e.input).catch(Ue("Error reading JSON file",{file:e.relative}));if(bt(n)){let s=n.toString();if(e.size=ut(s),s.trim().length===0)return Kt(e,"empty file"),null;if(e.type===7&&e.name==="settings_data")for(let c of i.sync.themes){let f=await cf("config/settings_data.json",c)}let o=bu(e,s);if(o===null)return null;if(De(o))return Kt(e,"empty file"),null;let a=i.json.indent;if(i.json.terse.enabled)switch(e.type){case 4:i.json.terse.options.groups&&(a=0);break;case 14:i.json.terse.options.assets&&(a=0);break;case 8:i.json.terse.options.locales&&(a=0);break;case 1:i.json.terse.options.templates&&(a=0);break;case 7:i.json.terse.options.config&&(a=0);break;case 15:i.json.terse.options.metafields&&(a=0);break;case 6:i.json.terse.options.metaobject&&(a=0);break}let u;if(Ze(r)){let c=r.apply({...e},o);le(c)?u=await Ls(e,o,a):R(c)||I(c)?u=await Ls(e,Te(c),a):G(c)?u=await Ls(e,bu(e,c),a):bt(c)&&(u=await Ls(e,bu(e,c.toString()),a))}else u=await Ls(e,o,a);if(i.cache.checksum[e.input]=ir(u),e.type!==9&&i.processor.tailwind.map!==null){let c=await Gi(e,[[e,u]]);for(let f of c)await t("put",f[0],f[1]),ze(f[0].key)}else ze(e.key),await t("put",e,u);i.mode.hot&&await se.onIdle().then(()=>i.wss.replace())}}l();import{writeFile as wu}from"fs-extra";import xm from"esbuild";import{basename as N1,join as Sm,relative as wm}from"node:path";async function Fm(e){e.watch.clear();let t=await xm.build(e.esbuild);i.mode.terse&&i.mode.build&&(e.size=ut(t.outputFiles[0].text)),i.mode.watch?await vm(e,t.metafile.inputs):(e.watch.has(e.input)||e.watch.add(e.input),i.watch.has(e.input)||i.watch.add(e.input))}async function vm(e,t){let r=[],{cwd:n,watch:s,mode:o}=i;for(let a in t){if(a.indexOf("/node_modules/")>-1)continue;let u=Sm(n,a);e.watch.has(u)||e.watch.add(u),s.has(u)||s.add(u),o.watch&&r.push(u)}o.watch&&await jc().then(()=>{for(let a of e.watch)a.indexOf("/node_modules/")>-1||e.watchCustom!==null&&e.watchCustom(a)||x(a.slice(n.length+1),t)||(e.watch.delete(a),s.unwatch(a))})}function O1(e,t){return t.length>0?`<script ${t.join(" ")}>${e}</script>`:`<script>${e}</script>`}function _1(e){return wn("Function",e)?function(t,r){let n=e.apply({...t},r);return n===!1?(at("cancelled"),null):wn("String",n)?(at("augment"),n):bt(n)?(at("augment"),n.toString()):r}:!1}async function Vi(e,t,r){if(!e.data)return;i.mode.watch&&T.start(),i.mode.hot&&T.start(e.uuid);let n=_1(r),s=e.data.length;for(let o of e.data){let{key:a,input:u,output:c,snippet:f,attrs:p,esbuild:{format:d}}=o;try{let{metafile:g,outputFiles:w,warnings:b}=await xm.build(o.esbuild);s>1&&(Ie(),at(wm(i.cwd,u))),i.mode.watch&&await vm(o,g.inputs),b.length>0&&void 0;for(let{text:C,path:q}of w)if(q.endsWith(".map")){let M=Sm(i.dirs.sourcemaps.scripts,`${e.base}.map`);wu(M,C).catch(Ue("Error writing JavaScript Source Map to cache",{file:wm(i.cwd,M),source:e.relative}))}else{if(i.mode.terse)if(isNaN(o.size))et(e.kind,`${h(d.toUpperCase())} bundle`),Nt(Xt(C));else{let{before:te,after:H,saved:Z}=_t(C,o.size);et(`${h(d.toUpperCase())} bundle \u2192 ${h(Xt(C))}`),Nt(null,te,H,Z)}else et(`${h(d.toUpperCase())} bundle \u2192 ${h(Xt(C))}`);let M;if(f){if(M=O1(C,p),n&&(M=n(e,M),M===null))continue;await wu(c,M).catch(Ue("Error writing inline <script> snippet",{file:e.relative})),uf("script","snippet")}else{if(M=C,n&&(M=n(e,M),M===null))continue;await wu(c,M).catch(Ue("Error writing JavaScript asset",{file:e.relative}))}i.mode.hot?(ze(a,{hot:!0}),i.wss.script(e.uuid,N1(a)),t("put",o,M)):i.mode.build||(ze(a),await t("put",o,M))}}catch(g){x("errors",g)&&(T.clear(),He(e.relative,{notify:{title:"JavaScript Error",message:`Transform failed for ${e.base}`}}),i.errors.add(u),g.errors.forEach(tf))}}s>1&&Ie()}l();import I1 from"svgo";import j1 from"svg-sprite";import{join as _r,relative as M1}from"node:path";import{readFile as Cm,writeFile as Em}from"fs-extra";async function W1(e){let t=await Cm(e);return[e,t.toString(),ut(t)]}function q1(e){return new Promise(function(t,r){e.compile((n,s)=>{if(n)return r(n);for(let o in s)for(let a in s[o])t(s[o][a].contents.toString())})})}function H1(e,t,r){async function n(s){let o=ne({},e);i.mode.watch&&T.start(),o.kind="Sprite",s.snippet?(o.namespace="snippets",o.key=_r("snippets",Fs(o,s.rename)),o.output=_r(i.dirs.output,o.key)):(o.key=_r("assets",Fs(o,s.rename)),o.output=_r(i.dirs.output,o.key));let a=s.sprite===!0?i.processor.sprite:s.sprite,u=new j1(a),c=await ur(Cr(s.input),W1).catch(Ue("Error reading an SVG file",{file:o.base,source:o.relative}));if(c){let f=c.filter(([w,b])=>$m(b)?(Kt(M1(i.cwd,w),"Liquid Detected"),!1):!0);o.size=0;for(let[w,b,C]of f)u.add(w,null,b),o.size=o.size+C;let p=await q1(u),d=f.length;Ut("SVG Sprite",`${d} ${Tt("SVG",d)}`,T.stop()),await Em(o.output,p).catch(Ue("Error writing SVG Sprite",{file:o.key,caller:e.relative}));let g=_t(p,o.size);g.isSmaller?et(`${o.kind} ${g.before}`,`gzip ${g.gzip}`):Nt(o.kind,g.before,g.after,g.saved),t&&(ze(o.key),await t("put",o,p))}}return n}function $m(e){return/^(?:{{[\s\S]+?}}|{%[\s\S]+?%})|[^"'](?:{{[\s\S]+?}}|{%[\s\S]+?%})[^'"]/m.test(e)}function G1(e){if(/<path[^>]*[a-zA-Z"'\s](>)(?!\s*<\/path>)/g.test(e)){let r=`${m(`<${A("path")}>`)}`,n=`${Ee(`<${A("path")} />`)}`;return et("SVG",r,n,"patched solidus"),e.replace(/(<path[^>]*[a-zA-Z"'\s])(>)(?!\s*<\/path>)/g,"$1 /$2")}return e}function U1(e,t,r){let n=ne({},e);async function s(o){i.mode.watch&&T.start(),o.snippet?(n.namespace="snippets",n.key=_r("snippets",Fs(n,o.rename)),n.output=_r(i.dirs.output,n.key)):(n.key=_r("assets",Fs(n,o.rename)),n.output=_r(i.dirs.output,n.key));let a=o.svgo===!0?i.processor.svgo:o.svgo,c=(await Cm(n.input)).toString();if($m(c))return Kt(n,"Liquid Detected"),null;let f=G1(c);n.size=ut(f);let p;try{p=I1.optimize(f,a)}catch(w){return He(n.relative,{notify:{title:"Transform Error",message:`SVGO failed to optimize ${n.key}`}}),Ht(w,{source:n.relative,output:n.key,processor:"SVGO"}),null}Ut("SVGO",T.stop());let{data:d}=p,g=_t(d,n.size);g.isSmaller?et(`${n.kind} ${g.before} \u2192 gzip ${g.gzip}`):Nt(n.kind,g.before,g.after,g.saved),await Em(n.output,d).catch(Ue("Error writing SVG",{file:n.key,caller:e.relative})),t&&(ze(n.key),await t("put",n,d))}return s}async function Ji(e,t,r){i.mode.watch&&T.start();let n=H1(e,t,r),s=U1(e,t,r),o=e.data.length;for(let a=0;a<o;a++){let u=e.data[a];a>0&&i.mode.watch&&wi(e),u.format==="sprite"?await n(u):u.format==="file"&&await s(u)}}l();import{join as Lu}from"node:path";import{existsSync as Bu,mkdirSync as Pm,readFileSync as rb}from"fs-extra";var Om=Ct(Rm());import km from"node:zlib";import Nm from"cbor";var Qt=new rn;function nb(e){let t=rb(e),r=km.gunzipSync(t);return Nm.decode(r)}function jr(e,t){return async()=>{let r=await Nm.encodeAsync(t,{omitUndefinedProperties:!0,canonical:!0}),n=km.gzipSync(r);return n[9]=3,(0,Om.default)(e,n)}}async function _m(){i.cache.uri=Yr(null);let e=Lu(i.cwd,"node_modules",".cache");Bu(e)||Pm(e);let t=Lu(e,"syncify");Bu(t)||Pm(t);for(let r of Xs)i.cache.uri[r]=Lu(t,`${r}.bin`),Bu(i.cache.uri[r])?i.cache[r]=nb(i.cache.uri[r]):(i.cache[r]={},Qt.add(jr(i.cache.uri[r],i.cache[r])));if(i.cmd.cache)return sb()}function sb(e=null){if(e===null){for(let t of Xs)Xr(i.cache[t])||(i.cache[t]=U(),Qt.add(jr(i.cache.uri[t],i.cache[t])));return Qt.onIdle()}return i.cache[e]={},Qt.add(jr(i.cache.uri[e],i.cache[e]))}function Im(){return Qt.onIdle()}function On(e=null){if(e===null){for(let t of Xs)Xr(i.cache[t])||Qt.add(jr(i.cache.uri[t],i.cache[t]));return Qt.onIdle()}else return Qt.add(jr(i.cache.uri[e],i.cache[e]))}function jm(e,t=NaN){let r=e.endsWith(".myshopify.com")?e.slice(0,e.indexOf(".myshopify.com")).toLowerCase():e.toLowerCase();return isNaN(t)===!1?qt(`${r}.${t}`,i.cache.pages)?i.cache.pages[r][t]:(x(r,i.cache.pages)?i.cache.pages[r][t]={}:i.cache.pages[r]={[t]:{}},Qt.add(jr(i.cache.uri.pages,i.cache.pages)),i.cache.pages[r][t]):(x(r,i.cache.pages)||(i.cache.pages[r]={},Qt.add(jr(i.cache.uri.pages,i.cache.pages))),i.cache.pages[r])}function Rs(e,t){let r=e.endsWith(".myshopify.com")?e.slice(0,e.indexOf(".myshopify.com")).toLowerCase():e.toLowerCase();return x(r,i.cache.pages)?i.cache.pages[r][t.id]=t:i.cache.pages[r]={[t.id]:t},Qt.add(jr(i.cache.uri.pages,i.cache.pages)),i.cache.pages[r][t.id]}function ob(){let e={stats:{total:0,errors:0,skipped:0,bundled:0}};for(let t of Ac)e[t]={group:t,time:"",size:0,files:[],report:null};return e}async function eo(e){T.start("build"),i.mode.export||(Ie(),sf("Build"),Ie());let t=new Set,r=X({type:"error"}),n=X().Newline(),s=ob(),o=De(i.filters)===!1,a=vs(i.paths,i.dirs.output),u=(0,Mm.default)(Cr(i.watch.values())),c=await ib("**",{absolute:!0,cwd:i.dirs.input}),f=i.cache.paths;for(let g of c.filter(u)){let w=a(g);if(!le(w))switch(w.type){case 9:s.styles.files.push(w);break;case 10:s.scripts.files.push(w);break;case 4:s.sections.files.push(w);break;case 2:s.layouts.files.push(w);break;case 3:s.snippets.files.push(w);break;case 8:s.locales.files.push(w);break;case 7:s.configs.files.push(w);break;case 1:s.templates.files.push(w);break;case 16:s.pages.files.push(w);break;case 14:s.assets.files.push(w);break;case 15:s.metafields.files.push(w);break;case 11:for(let{uuid:b,format:C,input:q}of w.data)if(!t.has(b))if(t.add(b),C==="sprite")s.svgs.files.push(w);else for(let M of q)s.svgs.files.push(a(M));break}}function p(g,w){return T.start(g.group),async function(b){T.start(b.uuid),s.stats.total+=1;try{f[b.output]=b.input;let C=b.ext===".json"?await Or(b,e):await w(b,e);return C===null||isNaN(b.size)?(s.stats.skipped+=1,{name:b.base,input:b.relative,time:T.stop(b.uuid),output:b.key,error:"Skipped File"}):(s.stats.bundled+=1,{name:b.base,input:b.relative,output:b.key,error:null,time:T.stop(b.uuid),size:_t(C,b.size)})}catch(C){return s.stats.errors+=1,r.Line(C.message),{name:b.base,input:b.relative,output:b.key,time:T.stop(b.uuid),error:C.message}}}}async function d(g,w){let b=o&&x(g,i.filters)?i.filters[g]:null;if(b&&b.includes(g)===!1)return 0;let C=s[g];C.size=C.files.length,C.report=await ur(C.files,p(C,w),{stopOnError:!0}),C.time=T.stop(g);let q=C.report.length,M=h(q<10?` ${q}`:`${q}`),te=q===1?"  ":" ";n.Line(P(g,`${M} ${Tt("file",q)}${te}${_e(C.time)}`))}if(await d("svgs",Ji),await d("layouts",Nr),await d("templates",Nr),await d("sections",Nr),await d("snippets",Nr),await d("locales",Or),await d("configs",Or),await d("assets",Ri),await d("styles",Ui),await d("scripts",Vi),await On(),i.mode.export===!1&&i.mode.publish===!1){if(n.NL.Dash("Completed",m).NL.Line(P("version",`${i.vc.number}`)).Line(P("processed",`${h(`${s.stats.total}`)} files`)).Line(P("bundled",`${h(`${s.stats.bundled}`)} files`)).Line(P("skipped",`${h(`${s.stats.skipped}`)} files`)).Line(P("duration",T.now("build"))).Line(P("warnings",h(`${i.warnings.size}`))).Line(P("errors",h(`${s.stats.errors}`))),i.warnings.size>0){n.NL.Dash("Warnings",m).Newline();let g,w=0;for(let b of i.warnings.keys())for(let[C,q]of i.warnings.get(b)){g!==C?(w=1,g=C):(w=w+1,n.Ruler()),n.Warn(`${h("WARNING")} ${yc}${h(`${w}`)}`,re).Newline("yellow").Warn(g,re);for(let M of q)n.Insert(M)}L(n.NL.End(i.log.group).BR.toString(_))}else L(n.NL.End(i.log.group).BR.toString(_));process.exit(0)}}l();l();import{readFile as cb,writeFile as lb}from"fs-extra";import fb,{stringify as pb}from"gray-matter";import mb from"markdown-it";import{Turndown as db,GithubFlavor as hb}from"@syncify/turndown";l();function ab(e){return e==="boolean"||e==="color"||e==="date"||e==="date_time"||e==="dimension"||e==="json"||e==="money"||e==="multi_line_text_field"||e==="number_decimal"||e==="number_integer"||e==="rating"||e==="rich_text_field"||e==="single_line_text_field"||e==="url"||e==="volume"||e==="weight"}function Wm(e,t){for(let r of t)for(let n of["key","type","value","namespace","description"]){if(n!=="description"&&!Ke(n,r))return cr(e.relative,[`Missing ${N.bold(n)} property key value in a ${re.bold("metafields")}`,"value in frontmatter. Frontmatter metafields require you provide the following keys:","",`${m("-")} ${A("key")}`,`${m("-")} ${A("type")}`,`${m("-")} ${A("value")}`,`${m("-")} ${A("namespace")}`,"",`${m("Update the metafield entry to include")} ${A(n)}`]),!1;if(n==="type"){let s=r[n];if(!ab(s))return cr(e.relative,[`Invalid type ${N.bold(s)} provided in frontmatter ${re.bold("metafields")}`,`value. Frontmatter metafields ${h("must")} be one of following types:`,"",`${m("-")} ${A("boolean")}`,`${m("-")} ${A("color")}`,`${m("-")} ${A("date")}`,`${m("-")} ${A("date_time")}`,`${m("-")} ${A("dimension")}`,`${m("-")} ${A("json")}`,`${m("-")} ${A("money")}`,`${m("-")} ${A("multi_line_text_field")}`,`${m("-")} ${A("number_decimal")}`,`${m("-")} ${A("number_integer")}`,`${m("-")} ${A("rating")}`,`${m("-")} ${A("rich_text_field")}`,`${m("-")} ${A("single_line_text_field")}`,`${m("-")} ${A("url")}`,`${m("-")} ${A("volume")}`,`${m("-")} ${A("weigh")}`,"",`${m("Update the metafield entry to an accepted")} ${A("type")}`]),!1}}return!0}l();import to from"axios";async function qm(e){return to.get("pages.json",e.client).then(({data:t})=>t.pages).catch(t=>mt(e.store,t.response))}async function Hm(e,t){if($r(Ke("handle",t),Ke("title",t))){console.log("invalid fields");return}return to.get("pages.json",e.client).then(({data:r})=>Ke("handle",t)&&Ke("title",t)?r.pages.find(n=>t.title===n.title&&t.handle===n.handle):Ke("handle",t)?r.pages.find(n=>t.handle===n.handle):Ke("title",t)?r.pages.find(n=>t.title===n.title):void 0).catch(r=>{console.log(r)})}async function ro(e,t){i.mode.upload||T.start();let r=await to.post("/pages.json",{page:t},e.client).then(({data:n})=>(ba("page",e),n.page)).catch(n=>{nn(n.response.status)?se.add(()=>ro(e,t)):qt("response.data",n.response)&&mt(t.title,n.response)});if(r)return Rs(e.domain,r),r}async function Ru(e,t,r){let{mode:n}=i;n.upload||T.start();let s=`pages/${r.id}.json`,o=await to.put(s,{page:r},e.client).then(({data:a})=>(n.watch?ba("page",e):n.upload&&At.emit("upload","uploaded",r,{key:t.key,namespace:t.namespace,fileSize:Xt(r.body_html)}),a.page)).catch(a=>{nn(a.response.status)?se.add(()=>Ru(e,t,r)):console.log(a)});if(o)return o}function gb(e){return new db(i.page.import).use(hb).turndown(e)}async function yb(e){let t=ds("No matching pages, select an option",{title:"No matching pages",message:"Open CLI and select an option"}),r=await prompts({type:"select",name:"action",message:"Page Resources",hint:" ",instructions:!1,choices:[{title:"Create Page",description:`Create a new page on ${e.domain}`,value:1},{title:"Select Page",description:`Select a page to overwrite on ${e.domain}`,value:2},{title:"Cancel",description:"Cancel, and skip this sync operation",value:4}]});return{resume:t,action:r.action}}async function Db(e){let t=await qm(e);if(!t)return;let r=t.map(s=>({title:s.title,description:`https://admin.shopify.com/store/${e.store.toLowerCase()}/pages/${s.id}`,value:s.id}));return r.push({title:tui.hr(20,!1),disabled:!0,selected:!1},{title:"Create New Page",description:`Create a new page on ${e.domain}`,value:1},{title:"Cancel",description:"Cancel, and skip this sync operation",value:4}),(await prompts({type:"select",name:"action",message:"Choose Page",hint:" ",instructions:!1,choices:r})).action}async function bb(e){let t=[{title:"View Source",description:"Prints the page source in the CLI",value:5},{title:"Update Local",description:"Update the local source with remote version",value:3},{title:"Overwrite Remote",description:"Overwrite the remote version with local source",value:6},{title:"Cancel",description:"Cancel, and skip this sync operation",value:4}],r=ds("Remote version is newer than local version",{title:"Remote \u2192 Local",message:"Remote version has changed"}),n=await prompts({type:"select",name:"action",message:"Page Resources",hint:" ",instructions:!1,choices:t});if(n.action===5){Ie(""),L(e.body_html),Ie("");let s=await prompts({type:"select",name:"action",message:"Page Resources",hint:" ",instructions:!1,choices:t.slice(1)});return{resume:r,action:s.action}}else return{resume:r,action:n.action}}function wb(e,t){let r={title:x("title",t)?t.title:Er(e.name.replace(/[._-]/g," "))};if(x("handle",t)){let n,s=t.handle;/^[./]{1,2}/.test(s)&&(n=s,s=s.replace(/^[./]{1,2}/,""),st(`handle ${Dr} ${n} ${j} ${s}`,"fixed start")),/^pages\//.test(s)&&(n=s,s=s.replace(/^pages\//,""),st(`handle ${Dr} ${n} ${j} ${s}`,"fixed sub-path")),/[_/]/.test(t.handle)&&(n=s,s=s.replace(/[_/]/g,"-"),st(`handle ${Dr} ${n} ${j} ${s}`,"fixed invalid characters")),r.handle=s}else x("title",t)?r.handle=Mc(t.title):r.handle=e.name.toLowerCase();if(x("author",t)&&i.page.author!==""){let n,s=t.author;/\//.test(t.author)&&(n=t.author,s=n.replace(/\//g," "),st(`author ${Dr} ${n} ${j} ${s}`,"fixed invalid characters")),r.author=s}else t.author=i.page.author;return x("published",t)?Ae(t.published)?r.published=t.published:(st(`published ${Dr} expected boolean, got ${typeof t.published}`,"defaulted to false"),r.published=!1):r.published=!0,x("template_suffix",t)&&(x("template",t)?(st("duplicate template_suffix references","using template"),delete t.template_suffix):(t.template=t.template_suffix,delete t.template_suffix)),x("template",t)?r.template_suffix=t.template:i.page.suffixDir&&ti(i.page.global)&&i.page.global.test(e.input)!==!1&&(r.template_suffix=tn(e.input)),x("metafield",t)&&(st("use metafields instead of metafield","sync will still process"),t.metafields=t.metafield,delete t.metafield),x("metafields",t)?I(t.metafields)&&(r.metafields=[t.metafields]):r.metafields=void 0,r}async function Gm(e,t){if(i.sync.stores.length>1)return Kt(e,"pages do not support multistore sync"),null;let r=await cb(e.input);if(Xr(r.toString()))return i.mode.watch&&Kt(e,"empty file"),null;let n=fb(r),{data:s,content:o}=be(n),a=wb(e,s);if(R(a.metafields)&&!Wm(e,a.metafields))return null;e.kind==="Markdown"?(T.start(),a.body_html=mb(i.page.export).render(o),et(`${h("Markdown")} ${j} ${h("HTML")} ${ie} ${T.stop()}`)):(et("HTML"),a.body_html=o);let u=i.sync.stores[0],c=u.store.toLowerCase(),f=await Hm(u,{handle:a.handle});if(R(f))return cr(e.relative,[`Multiple pages returned when matching on handle ${N.bold(a.handle)}`,"Syncify is unsure on how to handle this request and has cancelled the sync. Please","check the provided handle in your webshop."]),null;let p=jm(c);if(I(f)&&(a.id=f.id,p=Rs(c,f)),le(f)&&i.page.safeSync){let g=await yb(u);if(g.action===2){let w=await Db(u);if(w===4)return g.resume();if(w===1)return g.resume(),ze(`/pages/${a.handle} ${j} ${a.title} ${m(`${ie} ${e.relative}`)}`),ro(u,a);a.id=w,g.resume()}else return g.action===1?(g.resume(),ze(`/pages/${a.handle} ${j} ${a.title} ${m(`${ie} ${e.relative}`)}`),ro(u,a)):g.resume()}if(I(f)){let g=new Date(f.updated_at).getTime(),w=new Date(p.updated_at).getTime();if(g>w&&f.body_html!==a.body_html){let b=await bb(f);if(b.action===3){b.resume();let C=f.body_html;if(i.page.language==="markdown"){let q=gb(C);et(`${e.name}.html ${j} ${e.base}`),C=pb(`
`+q,n.data)}i.watch.unwatch(e.input),await lb(e.input,C),Rs(u.domain,f),i.watch.add(e.input)}else{if(b.action===4)return b.resume();b.action===6&&b.resume()}}}if(i.mode.build)return a.body_html;ze(`/pages/${a.handle} ${j} ${a.title} ${m(`${ie} ${e.relative}`)}`),await Ru(u,e,a)&&await On("pages")}function Um(e){let t=Ci(i.sync),r=vs(i.paths,i.dirs.output);i.mode.hot&&i.wss.connected(),i.watch.on("all",n);function n(o,a){let u=r(a);if(!le(u)&&u.base!==i.file.base){if(u.type!==17&&wi(u),o==="change"||o==="add")s(u);else if(o==="unlink")return u.type===16?t.pages("delete",u):t.assets("delete",u)}}async function s(o){try{switch(o.type){case 10:return Vi(o,t.assets,e);case 16:return Gm(o,e);case 11:return Ji(o,t.assets,e);case 14:case 17:return Ri(o,t.assets,e);case 5:return mm(o,t.assets,e);case 9:return Ui(o,t.assets,e);case 2:case 3:return Nr(o,t.assets,e);case 6:case 1:case 4:return o.kind==="JSON"?Or(o,t.assets,e):Nr(o,t.assets,e);case 7:case 8:return Or(o,t.assets,e);case 15:return Or(o,t.metafields,e)}}catch(a){console.error(a),He(a)}}}l();l();import xb from"axios";async function no(e){return xb.get("themes.json",e.client).then(({data:t})=>t.themes).catch(t=>mt(e.store,t.response))}import{prompt as so}from"enquirer";var _n={pointer(e,t){let r=this.state.index===t?J("\u251C "):J("\u2502 ");return t===0?J("\u2502 ")+`
`+r:r},prefix:J("\u2502 "),styles:{primary:Ee,success:Ee,danger:ae.bold,warning:re,muted:m,disabled:m,typing:m},symbols:{ellipsisLarge:"",ellipsisSmall:"",prefix:{pending:"",submitted:"\u2713",cancelled:"\u{10102}"},separator:{pending:"",submitted:" \u2192 ",cancelled:" \u{10102} "}}};async function zm(e){let t=0,n=(await no(e)).filter(({role:w})=>w!=="demo"),s=kt(n,"name"),o=n.map(w=>(w.name.length>t&&(t=w.name.length),{name:w.name,message:w.name,hint:`${s(w.name)} ${ie} ${m(w.role)}`,value:w}));o.push({role:"separator",message:J("\u2500".repeat(t))},{name:"create",message:"Create Theme"},{name:"create",message:"Remove Theme"}),i.sync.stores.length>1&&o.push({role:"separator",message:J("\u2500".repeat(t))},{name:"store",message:"Select Stores",hint:`${s("Select Stores")} ${ie} ${m("go back and choose store")}`});let{targets:a}=await so({name:"targets",type:"select",multiple:!0,message:"Select Themes",hint:"Press spacebar to select",theme:_n,choices:o,result(w){return hn(this.map(w))},format(w){if(R(w)&&w.length>0)return ye(`${w.join(_(", "))}`)}}),u={domain:e.store.toLowerCase(),themes:{}},c=[];for(let w of a)u.themes["${"+w.name+"}"]=w.id,c.push({name:w.name,message:w.name,validate(b,C,q){if(q&&q.name===w.name){if(/[A-Z]/.test(b))return`
`+Et.redBright("  Target name must be lowercase");if(/[0-9]/.test(b))return`
`+Et.redBright("  Target name cannot contain numbers");if(/[ ]/.test(b))return`
`+Et.redBright("  Target name cannot contain spaces");if(/-/.test(b))return`
`+Et.redBright("  Target name cannot contain dashes")}return!0}});_n.styles.primary=ye.italic,_n.styles.typing=Ee;let f=JSON.stringify(u,null,2),p=await so({name:"stores",type:"snippet",required:a.map(({name:w})=>w),message:"Theme Targets",newline:`
`,format(){return this.state.submitted===!0&&this.state.completed!==100?Ee(`${this.state.completed}% completed`):` ${j}  ${dt(`${this.state.completed}% completed`)}`},theme:_n,fields:c,template:f}),d={syncify:JSON.parse(p.stores.result)},g=await so({name:"save",type:"confirm",message:"Save Settings",theme:_n,initial:!0,newline:`
`,format(){return/^[ty1]/i.test(this.input)?"Yes":"No"},footer:E.line+["",m("The following store and theme references will be saved"),m("to your package.json file on the syncify key property."),"",JSON.stringify(d.syncify,null,2).split(`
`).join(`
`+E.line),""].join(`
`+E.line)});console.log(g)}async function Sb(){let e=kt(i.sync.stores,"store"),t=i.sync.stores.map(n=>({name:n.domain,message:n.store,hint:`${e(n.store)} ${ie} ${m(`https://${n.domain}`)}`,value:n})),{store:r}=await so({name:"store",type:"select",message:"Select Stores",choices:t,theme:_n,result(){return this.focused.value},format(n){return Ee(n)}});return zm(r)}async function Vm(){return i.sync.stores.length>1?Sb():zm(i.sync.stores[0])}l();import{join as Fb,relative as vb}from"node:path";import{writeFileSync as Jm}from"fs-extra";async function Cb(){let e=new Map,t=0;for(let r of i.sync.themes){r.target.length>t&&(t=r.target.length);let n=i.sync.stores[r.sidx],s=`${r.store}:${r.target}`,{assets:o}=await va(r,n.client);e.has(s)||e.set(s,{active:e.size===0,log:null,number:e.size+1,size:o.length,transfers:0,warning:0,failed:0,success:0,retry:0,progress:Xn(o.length),get files(){return o},get theme(){return r},errors:{local:new Map,remote:new Map,retry:new Set}})}return e}function Eb(e,t,r){let n=`${h(`${e.success}`)} ${A("of")} ${h(`${e.size}`)}`,s=h(`${e.failed}`),o=h(`${e.theme.target.toUpperCase()}`);return X().Line(P(o,j),ye).NL.Line(`completed in ${m(r)}`).NL.Line(P("synced",n),_).Line(P("errors",s),e.failed>0?xe:_).Line(P("location",m.underline(t))).NL.Insert(e.progress.render()).Line.toString()}function $b(e){return X().Line(`${h(e.theme.target.toUpperCase())}  ${j}  ${e.theme.store}`,m.dim).NL.Line(`${h(ei(e.number))} in queue`,To).NL.Line(P("synced",`${h("0")} ${A("of")} ${h(`${e.size}`)}`),m.dim).Line(P("retry",h("0")),m.dim).Line(P("errors",h("0")),m.dim).NL.Insert(e.progress.render(m.dim)).NL.toString()}async function Ym(e){let t=0,r=0;T.start("import"),xt("Import"),Gt("Preparing",{style:"spinning"});let n=await Cb();await pt(500);function s(o){Gt.stop();let{theme:a,file:u}=o,c=`${a.store}:${a.target}`,f=n.get(c),p=`https://${a.store}?preview_theme_id=${a.id}`,d=X().NL.Line(P("Duration",_(T.now("import"))),m).Line(P("Transfers",_(`${r++}`)),m).Line(P("Syncing",jt(`${h(a.target)}  ${j}  ${a.store}`)),m).Line(P("Preview",sr(p)),m).Ruler(),g="";if(o.status===3)Jm(u.output,""),f.warning+=1,f.transfers+=1,f.progress.increment(1),g=re(u.key);else if(o.status===0){f.errors.retry.has(u.output)&&(f.retry-=1,f.errors.retry.delete(u.output)),f.success+=1,f.transfers+=1,f.progress.increment(1);let Z=Buffer.from(o.data.value||null,"utf8");Jm(u.output,Z),g=Ee(u.key)}else o.status===1?(f.errors.retry.has(u.output)||(f.retry+=1,f.errors.retry.add(u.output)),g=dt(u.key)):o.status===2&&(f.errors.retry.has(u.output)&&(f.retry-=1,f.errors.retry.delete(u.output)),f.errors.remote.has(u.output)||(f.failed+=1,f.transfers+=1,f.progress.increment(1),f.errors.remote.set(u.output,o)),g=xe(u.key));let w=`${h(`${f.success}`)} ${A("of")} ${h(`${f.size}`)}`,b=h(`${f.retry}`),C=h(`${f.failed}`),q=h(`${f.warning}`),M=X().NL.Line(`${h(f.theme.target.toUpperCase())}  ${j}  ${f.theme.store}`,ye).NL.Line(g).NL.Line(P("synced",w),_).Line(P("retry",b),f.retry>0?dt:_).Line(P("warning",q),f.warning>0?re:_).Line(P("failed",C),f.failed>0?xe:_).NL.Insert(f.progress.render()).NL.Ruler(),te=[d.toString()],H=0;for(let Z of n.values())Z.active?te.push(M.toString()):Z.log===null?(H=H+1,Z.number=H,te.push($b(Z))):te.push(Z.log);nt(pe(te))}At.on("import",s),t=n.size-1;for(let[o,a]of n){let[u,c]=o.split(":"),f=Fb(i.dirs.import,u,c);T.start(o),a.active=!0;for(let{key:p}of a.files){let d=Zf(p,f),g=ne({url:a.theme.url,method:"get",params:{"asset[key]":d.key}},i.sync.stores[a.theme.sidx].client);await se.add(()=>gs(a.theme,d,g))}await se.onIdle(),t=t-1,a.active=!1,a.log=Eb(n.get(o),vb(i.cwd,f),T.stop(o))}for(let{errors:o}of n.values())o.remote.size>0}l();import{mkdir as ku,pathExists as ao,statSync as Pb}from"fs-extra";import{basename as kb,join as Nb,relative as od}from"node:path";import{glob as Ob}from"fast-glob";import _b from"adm-zip";l();import{join as io,parse as Km,relative as Ab}from"node:path";import{glob as Tb}from"fast-glob";async function Xm(e){let t=await Tb("templates/*",{cwd:e,absolute:!0}),r=new Set,n=new Set;for(let a of t){let{name:u}=Km(a);t.filter(f=>Km(f).name===u).length>1&&!n.has(u)&&n.add(u)}if(n.size===0)return 1;n.size>1?at(`${h(`${n.size}`)} mismatch template files`,{suffix:"error",type:"error"}):at(`${h(`${n.size}`)} mismatch template file`,{suffix:"error",type:"error"});let s=ds(`select ${h(".json")} or ${h(".liquid")} template`,{title:"Export Error",message:"Multiple templates detected"}),{action:o}=await prompts([{name:"action",type:"select",message:"Select an Option",hint:" ",instructions:!1,choices:[{title:"Select Templates",description:"Choose which templates to export",value:"select"},{title:"Export .json Templates",description:"Exports the .json templates",value:"json"},{title:"Export .liquid Templates",description:"Exports the .liquid templates",value:"liquid"},{title:"Cancel Export",value:"cancel"}]}]);if(o==="select"){let a=[];for(let u of n)a.push({name:"choice",type:"toggle",message:"templates",hint:" ",active:`${u}.json`,inactive:`${u}.liquid`,onState:({value:c})=>{c?r.add(io(e,"templates",`${u}.liquid`)):r.add(io(e,"templates",`${u}.json`))}});return await prompts(a).then(()=>s()),r}else if(o==="json"){for(let a of n)r.add(io(e,"templates",`${a}.json`));return s(),r}else if(o==="liquid"){for(let a of n)r.add(io(e,"templates",`${a}.liquid`));return s(),r}else o==="cancel"&&s();return 2}function Zm(e){e.assets===0&&e.config===0&&e.templates===0&&e.layout===0&&e.snippets===0&&e.sections===0&&Qe("Empty output directory",[`There are no files within ${ye(Ab(i.cwd,i.dirs.output)+"/**")}`,`You may need to run the ${ye.bold("syncify build")} command and try again.`])}l();import Lb from"dotenv";import{join as Ps,relative as Qm,basename as ed,extname as Bb}from"node:path";import{pathExists as oo,readFile as td,readJson as rd,writeFile as Rb}from"fs-extra";async function nd(){let e=null;for(let t of Cc){if(e=Ps(i.cwd,t),await oo(e))break;e=null}if(e===null)return null;try{if(Bb(e)===".json"){i.file.path=e,i.file.relative=Qm(i.cwd,e),i.file.base=ed(e);let t=await td(e);return Qs(t.toString())}else{i.file.path=e,i.file.relative=Qm(i.cwd,e),i.file.base=ed(e);let t=await Li({cwd:i.cwd,filepath:e});return t.mod.syncify||t.mod.default||t.mod}}catch{let r=Ps(i.cwd,"syncify.config.json");return await oo(r)?rd(r):null}}async function Pu(){let e=Ps(i.cwd,"package.json");if(!await oo(e))throw new Error('Missing "package.json" file');try{i.pkg=await rd(e),qt("syncify.stores",i.pkg)?R(i.pkg.syncify.stores)?i.stores=i.pkg.syncify.stores:I(i.pkg.syncify.stores)&&De(i.pkg.syncify.stores)===!1&&(i.stores=[i.pkg.syncify.stores]):i.cmd.strap||Dl(i.cwd)}catch(r){throw new Error(r)}}async function sd(e,t){let r=Ps(i.cwd,"package.json");try{let s=(await td(r)).toString(),o=s.indexOf('"version"'),a=s.indexOf('"',o+10)+1,u=s.indexOf('"',a+1);return s.slice(a,u)===e?(await Rb(r,`${s.slice(0,a)}${t}${s.slice(u)}`),await Pu(),!0):!1}catch(n){throw new Error(n)}}async function id(){let e=Ps(i.cwd,".env");if(await oo(e)){let t=Lb.config({path:e});if(t.error)return Ht(t.error,{path:e}),null;i.env.file=e,i.env.vars=t.parsed}else i.cmd.setup===!1&&!i.cmd.strap&&ai(i.cwd)}async function uo(e){let{themeVersion:t}=i.cache.build;T.start("export"),i.mode.build?(xt("Build"),await eo(e)):Zm(i.stats);let r=await Xm(i.dirs.output);if(r===2)return;r===1&&i.mode.build&&T.stop("build"),i.mode.publish?xi("Exporting"):xt("Export"),Ie(),await ao(i.dirs.export)||await ku(i.dirs.export);let n=new _b;for(let o of Jr){let a=Nb(i.dirs.output,o);if(await ao(a)){let c=await Ob("*",{cwd:a,absolute:!0});for(let f of c){let p=`${o}/${kb(f)}`;Pb(f).size===0?(n.addFile(p,gn(" ")),st(p,"empty file")):(r===1||r.has(f)===!1)&&n.addLocalFile(f,o)}}}let s=ut(n.toBuffer());if(i.vc.update!==null){await ao(i.vc.update.dir)||await ku(i.vc.update.dir),Fi(i.vc,"bump"),Sa(Xt(s),od(i.cwd,i.vc.update.zip));try{await n.writeZipPromise(i.vc.update.zip),t=i.vc.update.number}catch(o){return Ht(o,{file:i.vc.zip,details:"Failed to write zip file"})}}else{await ao(i.vc.dir)?Fi(i.vc,"overwrite"):(await ku(i.vc.dir),Fi(i.vc,"created")),Sa(Xt(s),od(i.cwd,i.vc.zip));try{await n.writeZipPromise(i.vc.zip)}catch(o){return Ht(o,{file:i.vc.zip,details:"Failed to write zip file"})}}i.pkg.version!==t&&(await sd(i.pkg.version,t)?(Ut("package.json","version bumped"),i.cache.build.themeVersion=t,await On("build")):st("package.json version failed to bump","manual increment required")),T.stop("export"),i.mode.publish===!1&&(xt(),Ie(""),process.exit(0))}l();import Ib from"uWebSockets.js";import{existsSync as jb,readFileSync as Mb}from"fs-extra";async function ad(e){await uo(e),T.start("publish"),xi("Publishing");let t=Ib.App().get("/*",(n,s)=>{n.writeHeader("Access-Control-Allow-Origin","*"),n.writeHeader("Cache-Control","public, max-age=0");let o=i.vc.dir+s.getUrl();jb(o)?n.end(Mb(o)):n.endWithoutBody()}).listen(i.publish.tunnelPort,n=>{n||console.log("Failed to listen to port "+i.publish.tunnelPort)});await pt(500),T.start("ngrok");let r=`${i.vc.number}.zip`;at(m(r),{prefix:"server"});for(let n of i.sync.stores)T.start(n.domain),at(n.domain,{prefix:"webshop",color:ye}),at(`${h("role")} ${j} ${i.publish.publishRole}`,{prefix:"publish"}),at(h(`v${i.vc.number}`),{prefix:"version",color:Us}),Ie(),await pt(1e3),Gt("uploading",{style:"spinning",color:Ee}),await pt(2e3),Gt.update("dispatched"),await pt(2e3),Gt.update("extracting"),await pt(2e3),Gt.update("processing"),await pt(1e3),Gt.stop("done"),at(`${h("published")} ${j} ${n.domain}`,{prefix:"status",color:Ee,suffix:T.now(n.domain)});t.close(),Ie(),xt(),Ie(),await prompts([{name:"action",hint:" ",type:"select",message:"Post-Publishing",choices:[{title:"Update Config",value:"config"},{title:"Publish Themes",value:"publish"},{title:"Delete Themes",value:"delete"}]}])}l();function ud(e){let t=e.toString().trim().toLowerCase();if(t==="v"){let r=Mt(i.errors);for(let n=0,s=r.length;n<s;n++){let o=r[n];if(i.errors[o].size!==0){n>0&&bi(),at(h.whiteBright(o));for(let a of i.errors[o].values())G(a)&&a.length>0&&Se(a);i.errors[o].clear()}}i.mode.upload&&(xt(),process.exit(0))}else if(t==="s"){for(let r of i.errors)G(r)&&r.length>0&&Se(r);i.errors.clear()}else if(t==="w"){let r=i.warnings[i.log.uri];for(let n of r.keys()){let s=r.get(n);if(s.size===0)continue;let o=X({type:"warning"}).Newline("yellow").Ruler().Newline("yellow").Line(n.toUpperCase(),h.yellow).Newline("yellow");for(let a of s.values())G(a)&&a.length>0&&o.Line(a);dn(o.toString()),s.clear()}}}l();function cd(e){L(dc);let t=J("-".repeat(80)),r=`
    ${h("SYNCIFY CLI  "+j+_("  v0.0.1-rc.1"))}

    ${_("Please provide a command argument.")}

    ${h("USAGE"+k)}

    $ syncify                    ${m.italic("Show this screen")}
    $ syncify {store} [theme]    ${m.italic("Store and theme targeting")}

    ${h("HELP"+k)}

    -h, --help                   ${m.italic("Print a list of all available commands")}
    -h, --help examples          ${m.italic("Print a list of command examples")}

  `;if(e.help===null)return L(r);let n=`
    ${h("SYNCIFY CLI  "+j+_("  v0.0.1-rc.1"))}

    Below are some usage examples for working with the Syncify CLI.
    The ${m("=")} character is optional and samples are using the ${m("$ sy")} alias.

    ${h("TARGETING"+k)}

    ${m("Target 1 store and 1 theme")}:
    $ sy your-store${m("=")}theme-1

    ${m("Target 1 store and 2 theme")}:
    $ sy your-store${m("=")}theme-1,some-theme,test-theme

    ${m("Target 2 stores and 1 theme")}:
    $ sy --your-store${m("=")}theme-1 --another-store${m("=")}some-theme

    ${m("Target 2 stores and 4 theme")}:
    $ sy --your-store${m("=")}theme-1,theme-2 --another-store${m("=")}some-theme,test-theme

  ${t}

    ${h("BUILDING"+k)}

    ${m("Build theme from source")}:
    $ sy --build

    ${m("Build theme with terse minification")}:
    $ sy --build --terse

    ${m("Build theme and clean")}:
    $ sy --build --clean --terse

  ${t}

    ${h("WATCHING"+k)}

    ${m("Watch 1 store and 1 theme")}:
    $ sy your-store${m("=")}theme-1 --watch

    ${m("Watch 1 store and 2 themes with hot reloading")}:
    $ sy your-store${m("=")}theme-1,theme-2 --watch --hot

    ${m("Watch 2 stores and 1 theme")}:
    $ sy --your-store${m("=")}theme-1 --another-store${m("=")}some-theme --watch

    ${m("Watch 2 stores and 2 themes")}:
    $ sy --your-store${m("=")}theme-1,theme-2 --another-store${m("=")}some-theme,test-theme --watch

    ${m("Watch 1 store with 2 themes and clean mode with hot live reloads")}:
    $ sy your-store${m("=")}theme-1,theme-2 --watch --clean --hot

    ${m("Watch 1 store with 2 themes in production mode")}:
    $ sy your-store${m("=")}theme-1,theme-2 --prod --watch

  `,s=`
    ${h("SYNCIFY CLI  "+j+_("  v0.0.1-rc.1"))}

    Welcome to the Syncify CLI. The command line utility assumes that you have
    defined stores, themes and setup credentials within a ${m(".env")} file.

    ${h("ALIASES"+k)}

      $ sy                         ${m.italic("Shorthand for syncify")}

    ${h("COMMANDS"+k)}

      $ syncify                    ${m.italic("Show this screen")}
      $ syncify {store} [theme]    ${m.italic("Store and theme targeting")}

    ${h("THEMES"+k)}

        --{store} [theme]          ${m.italic("A store reference command (run examples)")}
      -t, --theme [theme]          ${m.italic("A comma seprated list of themes")}

    ${h("PATHS"+k)}

      -c, --config    <path>       ${m.italic("Set config directory path")}
      -i, --input     <path>       ${m.italic("Set input directory path")}
      -o, --output    <path>       ${m.italic("Set output directory path")}

    ${h("MODES"+k)}

      -w, --watch                  ${m.italic("Run watch mode")}
      -b, --build                  ${m.italic("Run build mode from input")}
      -u, --upload                 ${m.italic("Run upload mode theme to stores")}
      -d, --import                 ${m.italic("Run download mode from theme and stores")}
      -e, --export                 ${m.italic("Run export mode and generate theme zip")}
      -p, --publish                ${m.italic("Run publish and create a release")}
      -r, --resource               ${m.italic("Run resource mode, resource name expected")}

    ${h("RESOURCES"+k)}

      -r, --resource themes        ${m.italic("Run the themes resource")}
      -r, --resource assets        ${m.italic("Run the theme assets resource")}
      -r, --resource pages         ${m.italic("Run the pages resource")}
      -r, --resource metafields    ${m.italic("Run the metafields resource")}
      -r, --resource redirects     ${m.italic("Run the redirects resource")}
      -r, --resource files         ${m.italic("Run the files resource")}

    ${h("ENVIRONMENT"+k)}

      --dev                       ${m.italic("Build in development mode (default)")}
      --prod                      ${m.italic("Build in production mode")}
      --hot                       ${m.italic("Run watch with hot-reloads")}

    ${h("OPERATIONS"+k)}

      --clean                     ${m.italic("Clean the output, use with modes")}
      --silent                    ${m.italic("Silent logging, only errors will print")}
      --cache                     ${m.italic("Purges the local .cache references")}

    ${h("TRIGGERS"+k)}

      --spawn  [list]             ${m.italic("Invoke a defined spawn child process/s")}
      --delete [list]             ${m.italic("Delete a remote and local file")}
      --terse  [list]             ${m.italic("invoke minify mode, accepts resource/s")}

    ${h("TRANSFORMS"+k)}

      --script                    ${m.italic("Run the script transform in isolation")}
      --style                     ${m.italic("Run the style transform in isolation")}
      --svg                       ${m.italic("Run the svg transform in isolation")}
      --image                     ${m.italic("Run the image transform in isolation")}

    ${h("UTILITY"+k)}

      -f, --filter <path>         ${m.italic("Filter operation to be used with modes")}

    ${h("VERSIONING"+k)}

      --bump patch                ${m.italic("Apply a patch version bump, use in export mode")}
      --bump minor                ${m.italic("Apply a minor version bump, use in export mode")}
      --bump major                ${m.italic("Apply a major version bump, use in export mode")}

    ${h("STRAPS"+k)}

      --strap dusk                ${m.italic("Import and generate a dusk strap")}
      --strap dawn                ${m.italic("Import and generate a dawn strap")}
      --strap silk                ${m.italic("Import and generate a silk strap")}

    ${h("HELP"+k)}

      -h, --help                  ${m.italic("Print this screen")}
      -h, --help examples         ${m.italic("Print a list of command examples")}

    ${t}

    ${m("BY \u039D\u0399\u039A\u039F\u039B\u0391\u03A3 \u03A3\u0391\u0392\u0392\u0399\u0394\u0397\u03A3")}

    ${m.underline("https://github.com/panoply")}
    ${m.underline("https://x.com/niksavvidis")}

  `;L(e.help==="examples"?n:s)}l();import{FSWatcher as a2}from"chokidar";l();var Nu=Ct(Rr());function ld(){if(!x("transform",i.config)||!x("json",i.config.transform))return;let{json:e}=i.config.transform;if(Oe(e)||(I(e)||ee({option:"processors",name:"json",expects:"{}",provided:typeof e}),De(e)))return;let t=ot("liquid configuration");for(let r in e){if(r==="indent")if(Lt(e[r])){i.json[r]=e[r];continue}else ee({option:"json",name:r,provided:e[r],expects:"number"});if(r==="comments")if(Ae(e[r])){i.json[r]=e[r];continue}else ee({option:"json",name:r,provided:e[r],expects:"boolean"});if(r==="useTab")if(Ae(e[r])){i.json[r]=e[r];continue}else ee({option:"json",name:r,provided:e[r],expects:"boolean"});if(r==="exclude"){let n=G(e[r])?[e[r]]:e[r];if(R(n)){i.json[r]=(0,Nu.default)(Pt(e[r]));continue}else ee({option:"json",name:r,provided:n[r],expects:"string | string[]"})}if(r==="terse"&&i.mode.terse===!0){if(De(e.terse))i.json.terse.enabled=!1,t("Terse option is empty, minification will not apply");else if(Ae(e.terse)&&e.terse===!0)i.json.terse.enabled=!0;else if(I(e.terse)){i.json.terse.enabled=!0;for(let n in e.terse)if(n!=="exclude"&&x(n,i.json.terse))if(Ae(e.terse[r])){i.json.terse[n]=e.terse[n];continue}else ee({option:`json ${j} terse`,name:n,provided:e.terse[n],expects:"boolean"});else n==="exclude"&&(i.json.terse.exclude=(0,Nu.default)(Pt(e.terse[r])))}}}}l();import{basename as Ou,extname as Wb,relative as co}from"node:path";import{readFile as fd}from"fs-extra";async function pd(){i.paths.schema.input!==null&&i.paths.schema.input.size>0&&(await qb(),await Hb(),ft(i.section,"schema",{get(){return i.cache.schema}}))}async function qb(){for(let e of i.paths.schema.input){let t=Wb(e),r=Ou(e,t);i.section.shared.has(r)&&Qe(`Duplicated shared schema file name ${h.yellow(r+t)} detected.`,["Shared Schema JSON file names must be unique across the workspace.","Update the file name and try again."]);try{let s=(await fd(e)).toString();if(s.trim().length===0)continue;let o=kr(s.toString());x("$schema",o)&&delete o.$schema,x("$description",o)&&delete o.$description;for(let a in o)if(I(o[a]))x("$description",o[a])&&delete o[a].$description;else if(R(o[a]))for(let u of o[a])x("$description",u)&&delete u.$description;i.cache.schema[e]=new Set,i.section.shared.set(r,{uri:e,schema:o})}catch(n){return He(co(i.cwd,e),{notify:{title:"JSON Error (setSharedSchema)",message:`Error when parsing ${Ou(e)}`}}),n instanceof dr&&on(n,{relative:co(i.cwd,e),base:Ou(e)}),null}}}async function Hb(){let{shared:e}=i.section,t=ot("Section Schema");for(let r of i.paths.sections.input){let n=await fd(r),s=ir(n);if(x(r,i.cache.schema)&&i.cache.checksum[r]===s)continue;i.cache.checksum[r]=s;let o=n.toString(),a=o.search(/{%-?\s*schema/);if(a<0)continue;let u=o.indexOf("%}",a+2)+2,c=o.slice(u),f=u+c.search(/{%-?\s*endschema/);if(f<0){t("Liquid Parse Error",co(i.cwd,r));continue}try{let p=JSON.parse(o.slice(u,f)),d=Ge(p);if(d("settings")){for(let g of p.settings)if(x("$ref",g)){let w=g.$ref.split(".")[0];e.has(w)&&i.cache.schema[e.get(w).uri].add(r)}}if(d("blocks"))for(let g of p.blocks){let w=Ge(g);if(w("$ref")){let b=g.$ref.split(".")[0];e.has(b)&&i.cache.schema[e.get(b).uri].add(r)}if(w("settings")){for(let b of g.settings)if(x("$ref",b)){let C=b.$ref.split(".")[0];e.has(C)&&i.cache.schema[e.get(C).uri].add(r)}}}}catch{x(r,i.cache.sections)&&delete i.cache.sections[r],t("JSON Parse Error",co(i.cwd,r))}}}l();l();import{prompt as _u}from"enquirer";var ks={prefix:J("\u2502 "),styles:{primary:Ee,success:Ee,danger:ae.bold,warning:re,muted:m,disabled:m,typing:m},symbols:{ellipsisLarge:"",ellipsisSmall:"",prefix:{pending:"",submitted:"\u2713",cancelled:"\u{10102}"},separator:{pending:"",submitted:" \u2192 ",cancelled:" \u{10102} "}},pointer(e,t){let r=this.state.index===t?E.stub.trimEnd()+" ":E.trim+" ";return t===0?E.trim+`
`+r:r}};async function md(e){let t=0,r={...ks},s=(await no(e)).filter(({role:b})=>b!=="demo"),o=kt(s,"name"),a=s.map(b=>(b.name.length>t&&(t=b.name.length),{name:b.name,message:b.name,hint:`${o(b.name)} ${ie} ${m(b.role)}`,value:b}));a.push({role:"separator",message:J("\u2500".repeat(t))},{name:"create",message:"Create Theme",value:"create"});let{targets:u}=await _u({name:"targets",type:"select",multiple:!0,message:"Select Themes",hint:"Press spacebar to select",theme:r,choices:a,result(b){return hn(this.map(b))},format(b){if(R(b)&&b.length>0)return ye(`${b.join(_(", "))}`)}}),c={domain:e.store.toLowerCase(),themes:{}},f=[];for(let b of u)c.themes["${"+b.name+"}"]=b.id,f.push({name:b.name,message:b.name,validate(C,q,M){if(M&&M.name===b.name){if(/[A-Z]/.test(C))return`
`+Et.redBright("  Target name must be lowercase");if(/[0-9]/.test(C))return`
`+Et.redBright("  Target name cannot contain numbers");if(/[ ]/.test(C))return`
`+Et.redBright("  Target name cannot contain spaces");if(/-/.test(C))return`
`+Et.redBright("  Target name cannot contain dashes")}return!0}});r.styles.primary=ye.italic,r.styles.typing=Ee;let p=JSON.stringify(c,null,2),d=await _u({name:"stores",type:"snippet",required:u.map(({name:b})=>b),message:"Theme Targets",newline:`
`,theme:r,fields:f,template:p,format(){return this.state.submitted===!0&&this.state.completed!==100?Ee(`${this.state.completed}% completed`):` ${j}  ${dt(`${this.state.completed}% completed`)}`}}),g={syncify:JSON.parse(d.stores.result)},w=await _u({name:"save",type:"confirm",message:"Save Settings",theme:r,initial:!0,newline:`
`,format(){return/^[ty1]/i.test(this.input)?"Yes":"No"},footer:E.line+["",m("The following store and theme references will be saved"),m("to your package.json file on the syncify key property."),"",JSON.stringify(g.syncify,null,2).split(`
`).join(`
`+E.line),""].join(`
`+E.line)});console.log(w)}async function dd(e){let t=i.mode.metafields||i.mode.pages||i.mode.redirects||i.mode.release||i.mode.publish||i.mode.themes,r=i.mode.watch||i.mode.upload||i.mode.import,n,s=[],o=!1;t&&i.cmd.stores.length===0&&i.mode.themes===!1&&br({expected:"syncify <store>",message:["You have not provided a store to target, which is required when","there are multiple stores defined in your setup. Because you are","executing syncify in a mode which will transfers files to a remote","source, it is unable to determine which store to target."],fix:["Provide the store target name as the first command argument","followed by theme target/s and other flags."]}),i.mode.themes&&i.stores.length>0?s=Gf():(n=i.cmd.stores.length===0?i.stores.map(({domain:a})=>a):i.cmd.stores,s=i.stores.filter(({domain:a})=>No(a,n)),o=s.length>1);for(let a of s){let u=`${a.domain}.myshopify.com`.toLowerCase(),c=Uf(a.domain),f=i.sync.stores.push({store:a.domain,password:a.password,domain:u,client:c,queue:o})-1;if(i.mode.themes)continue;if(i.mode.metafields||i.mode.pages)return;let p=[];x("theme",e)?p=e.theme.split(","):x(a.domain,e)?p=e[a.domain].split(","):x("themes",a)&&(p=Mt(a.themes)),p.length===0&&await md(i.sync.stores[f]);for(let d of p)x(d,a.themes)||gl({type:"theme",expected:Mt(a.themes).join(","),provided:d,message:[`Unknown theme target (${N(d)}) provided to ${N(a.domain)} store`,`Your ${N("package.json")} file contains no such theme using this name.`],fix:[`Provide an ${N("expected")} theme target or update/add an existing target.`,`You have ${N(`${p.length}`)} theme targets defined for ${N(a.domain)}:`,`

`,`${zr} ${p.join(`
${zr} `)}`,`

`]}),i.sync.themes.push({target:d,sidx:f,store:u,id:a.themes[d],url:`/themes/${a.themes[d]}/assets.json`})}r&&i.sync.themes.length===0&&br({expected:"-t <theme>",message:["You have not provided a theme to target, which is required","when running syncify in this resource mode."],fix:[`Provide a theme name to target following a ${N("-t")} or ${N("--theme")} flag.`,"Theme targets should be passed as the 2nd argument, the 1st argument should be store name/s."]}),i.sync.stores.length===0&&Qe("Unknown, missing or invalid store/theme targets",["Check your store config"]),i.env.sync=i.sync.stores.length===1&&i.sync.themes.length===1?1:2}l();var lo=Ct(Rr());import Gb from"fast-glob";async function hd(){let e=xn(i.dirs.input),t=ot("paths"),r=(s,o,a)=>{if(Oe(o))return[e(a)];if(R(o))return o.map(e);if(G(o))return[e(o)];ee({option:"paths",expects:"string | string[]",provided:o,name:s})},n=(s,o)=>{let a=i.config.paths[s];if(I(a)){if(De(a))return t(`Undefined path/s on "${s}", using fallback`,"{}"),[e(o)];let u=0;"*"in a&&"[name]"in a&&(t("Multiple fallback rename keys, paths will be merged",'"*" and "[name]"'),R(a["*"])?(R(a["[name]"])?a["*"]=[...a["*"],...a["[name]"]]:G(a["[name]"])&&a["*"].push(a["[name]"]),delete a["[name]"]):R(a["[name]"])&&(R(a["*"])?a["[name]"]=[...a["[name]"],...a["*"]]:G(a["*"])&&a["[name]"].push(a["*"]),delete a["*"]));let c=[],f=[];for(let p in a)if(R(a[p])){let d=[p,a[p].map(g=>{let w=e(g);return i.watch.add(w),w})];u===0&&(u=d[1].length),p==="*"||p==="[name]"?c.push(...d):f.push(d)}else if(G(a)){let d=[p,[e(a[p])]];u===0&&(u=d[1].length),i.watch.add(d[1]),p==="*"||p==="[name]"?c.push(...d):f.push(d)}else Oe(a[p])&&ee({option:`paths ${j} ${s}`,expects:"string | string[]",provided:a[p],name:p});if(u===0)return t(`Unresolved path/s in "${s}"`,"{}"),[e(o)];i.paths[s].rename=[[(0,lo.default)(c[1]),c[0]]];for(let[p,d]of f)i.paths[s].rename.push([(0,lo.default)([...c[1].map(g=>g[0]!=="!"?`!${g}`:g),...d]),p]);return c[1].concat(f.flatMap(p=>p[1]))}else return r(s,a,o)};for(let s of Vr){let o=[];s==="snippets"||s==="sections"?o=n(s,`${s}/*`):s==="customers"||s==="metaobject"?o=r(s,i.config.paths[s],`templates/${s}/*`):o=r(s,i.config.paths[s],`${s}/*`),i.paths[s].match=(0,lo.default)(o),s!=="metafields"&&s!=="redirects"&&(await Gb(o,{cwd:i.cwd})).forEach(a=>{i.paths[s].input.add(a),i.watch.add(a)})}}l();import{join as Mr}from"node:path";function Iu(e){let t=e.match(/^(\d{1,2})\.(\d{1,2})\.(\d{1,2})$/);if(!t)throw new Error("Unable to parse: "+e);return{patch:parseInt(t[3],10),minor:parseInt(t[2],10),major:parseInt(t[1],10)}}function gd(e){let t=Ge(i.cache.build);if(t("syncifyVersion")||(i.cache.build.syncifyVersion=i.version),t("themeVersion")||(i.cache.build.themeVersion=i.pkg.version),i.cache.build.themeVersion!==i.pkg.number){i.vc.update=Iu(i.pkg.version),i.vc.update.number=i.pkg.version,i.vc.update.dir=Mr(i.dirs.export,`v${i.vc.major}`),i.vc.update.zip=Mr(i.vc.update.dir,`${i.vc.number}.zip`);let r=Iu(i.cache.build.themeVersion);i.vc.number=i.cache.build.themeVersion,i.vc.patch=r.patch,i.vc.minor=r.minor,i.vc.major=r.major,i.vc.dir=Mr(i.dirs.export,`v${i.vc.major}`),i.vc.zip=Mr(i.vc.dir,`${i.vc.number}.zip`)}else{let r=Iu(i.pkg.version);i.vc.number=i.pkg.version,i.vc.patch=r.patch,i.vc.minor=r.minor,i.vc.major=r.major,i.vc.dir=Mr(i.dirs.export,`v${i.vc.major}`),i.vc.zip=Mr(i.vc.dir,`${i.vc.number}.zip`)}e.release!==null&&(i.vc.update=U(i.vc),e.release==="patch"?(i.vc.update.patch=i.vc.patch+1,i.vc.update.bump="patch"):e.release==="minor"?(i.vc.update.minor=i.vc.minor+1,i.vc.update.bump="minor"):e.release==="major"&&(i.vc.update.major=i.vc.major+1,i.vc.update.bump="major",i.vc.update.dir=Mr(i.dirs.export,`v${i.vc.update.major}`)),i.vc.update.number=`${i.vc.update.major}.${i.vc.update.minor}.${i.vc.update.patch}`,i.vc.update.zip=Mr(i.vc.update.dir,`${i.vc.update.number}.zip`))}l();var Cd=Ct(Sd());l();import{spawn as zb}from"node:child_process";function Mu(e,t,r){let n=zb(t.cmd,t.args,{stdio:"pipe"});t.pid=n.pid,async function s(){if(i.env.ready===!1)return await pt(100),s();n.stdio[0].on("data",r.bind({name:e,type:"stdin"})),n.stdio[0].on("data",r.bind({name:e,type:"stdout"})),n.stdio[2].on("data",r.bind({name:e,type:"stderr"})),i.spawn.streams.set(e,n)}()}l();var Fd=!1,vd=!1,Wu=new Set;function fo(e,t){if(!Fd){Fd=!0;for(let r of Wu)r();e&&process.exit(128+t)}}function po(e){return Wu.add(e),vd||(vd=!0,process.once("exit",fo),process.once("SIGINT",fo.bind(void 0,!0,2)),process.once("SIGTERM",fo.bind(void 0,!0,15)),process.on("message",t=>{t==="shutdown"&&fo(!0,-128)})),()=>Wu.delete(e)}function Ed(){let{mode:e,spawn:t,config:r}=i;if(!x("spawn",r)||Oe(r.spawn))return;I(r.spawn)||ee({option:"config",name:"spawn",provided:r.spawn,expects:"{ build: {}, watch: {} }"});let n=Ge(r.spawn),s=null;if(e.build&&n("build")&&(s="build"),e.watch&&n("watch")&&(s="watch"),!(Oe(e)||Oe(r.spawn[s]))&&(I(r.spawn[s])||ee({option:"spawn",name:s,provided:r.spawn[s],expects:"{ build: {}, watch: {} }"}),!De(r.spawn[s]))){for(let o in r.spawn[s]){let a=r.spawn[s][o];if(G(a)){i.spawn.commands[o]=U();let u=a.trimStart().indexOf(" ")>-1?a.trimStart().split(" "):[a];i.spawn.commands[o].cmd=u.shift().trim(),i.spawn.commands[o].args=u,i.spawn.commands[o].pid=NaN,Mu(o,i.spawn.commands[o],wa(o))}else if(R(a)){let u=a.shift().trim();i.spawn.commands[o]=U({cmd:u,args:a,pid:NaN}),Mu(o,i.spawn.commands[o],wa(o))}else ee({option:"spawn",name:s,provided:r.spawn[s],expects:"string | string[]"})}Bt.spawns(i),po(()=>{se.pause(),se.clear(),Ie(""),t.streams.forEach((o,a)=>{L(`- ${m(`pid: #${o.pid} (${a}) process exited`)}`),(0,Cd.default)(o.pid)}),Ie(""),t.streams.clear(),process.exit(0)})}}l();var Ad=Ct(Rr());import{join as $d}from"node:path";async function Td(){if(!x("script",i.config.transform)||!i.config.transform.script||De(i.config.transform.script))return;let e=ot("Script Transform");x("entryPoints",i.processor.esbuild)&&(e("processor option is not allowed and was omitted","entryPoints"),delete i.processor.esbuild.entryPoints);let t=Bn(i.config.transform.script,{addWatch:!1,flatten:!0}),r=Oo(["input","watch","rename","snippet"]);x("absWorkingDir",i.processor.esbuild)||(i.processor.esbuild.absWorkingDir=i.cwd);for(let n of t){let s=n.snippet?"snippets":"assets",{name:o}=Pr(n.input,n.rename),a;!o.endsWith(".js")&&!o.endsWith(".mjs")?a=o+".js":o.endsWith(".cjs")?rt({option:"transform.script",name:"rename",value:o,expects:".js | .mjs",reason:["You cannot use cjs extensions in Shopify themes.","The .cjs extension is for Node, themes are a web environment. "]}):a=o;let u=Ge(n),c=U();if(n.snippet){if(a.endsWith(".liquid")||(a=a+".liquid"),c.attrs=[],c.snippet=!0,c.namespace="snippets",c.type=3,u("attrs")&&De(n.attrs)===!1)if(R(n.attrs))for(let f=0;f<n.attrs.length;f++){let p=n.attrs[f];R(p)?c.attrs.push(p.join("")):ee({option:"transform.script",name:`attrs[${f}]`,provided:p,expects:"string[]"})}else ee({option:"transform.script",name:"attrs",provided:n.attrs,expects:"[ [ name: string, value: string ] ]"})}else c.attrs=[],c.snippet=!1,c.namespace="assets",c.type=10;if(c.uuid=Jt(),c.snippet=n.snippet,c.input=n.input,c.output=$d(i.dirs.output,s,a),c.key=$d(s,a),c.size=NaN,c.watch=null,c.watchCustom=null,c.esbuild=null,i.processor.esbuild.outfile=c.output,i.mode.watch&&i.watch.unwatch(c.output),u("esbuild"))if(Ae(n.esbuild)||Oe(n.esbuild))c.esbuild=De(r)?be(i.processor.esbuild):be(i.processor.esbuild,r);else if(I(n.esbuild)){let f=Ge(n.esbuild);for(let p in["entryPoints","outdir","watch","absWorkingDir","watch","write","logLevel","incremental"])p==="entryPoints"&&f(p)?e('Option is not allowed, use Syncify "input" instead',p):p==="outdir"&&f(p)?e("Option is not allowed, Syncify will handle output location",p):p==="watch"&&f(p)?e("Option is not allowed, declare watch paths using Syncify",p):f(p)&&e("Option is not allowed and will be ignored",p);f("plugins")&&x("plugins",i.processor.esbuild)&&n.esbuild.plugins.unshift(...i.processor.esbuild.plugins),c.esbuild=De(r)?be(i.processor.esbuild,n.esbuild):be(i.processor.esbuild,n.esbuild,r)}else ee({option:"script",name:"esbuild",provided:typeof n.esbuild,expects:"boolean | null | {}"});else c.esbuild=De(r)?be(i.processor.esbuild):be(i.processor.esbuild,r);if(c.esbuild.entryPoints=[c.input],i.mode.watch)if(!u("watch"))c.watch=new Set;else{R(n.watch)||ee({option:"script",name:"watch",provided:n.watch,expects:"string[]"});let f=Pt(n.watch);c.watchCustom=(0,Ad.default)(f),c.watch=new Set(f)}else c.watch=new Set;try{await Fm(c)}catch(f){wl(f,{message:["Syncify has failed to initialize due to a script transform prebuild error.","Script transforms execute runtime builds but the compile process did not complete.","This is typically due to invalid JavaScript syntax but may also be caused due to invalid","transform options being passed."],solution:["You will need to correct the error encountered. Alternatively you can skip Syncify","from applying the transform by excluding the file."],entries:{processor:"ESBuild"}})}i.mode.terse&&(c.esbuild=be(c.esbuild,{exclude:void 0})),i.script.push(c)}}l();var qu=Ct(Rr());import Ld from"fast-glob";import{join as pn,extname as Vb}from"node:path";import{exists as Bd}from"fs-extra";async function Jb(){let e=await Ua("postcss.config",{tsconfig:null});if(e!==null&&(i.processor.postcss.file=e.path,i.processor.postcss.config=e.config,i.watch.add(e.path)),i.processor.tailwind.installed=Ga(i.pkg,"tailwindcss"),i.processor.tailwind.installed){await yu("tailwind")||Qe("Unable to dynamically import TailwindCSS",["Ensure you have installed tailwindcss"]);let r=await Ua("tailwind.config",{tsconfig:null});r!==null&&(i.processor.tailwind.file=r.path,i.processor.tailwind.config=r.config,i.watch.add(r.path))}i.processor.sass.installed=Ga(i.pkg,"sass"),i.processor.sass.installed&&(await yu("sass")||Qe("Unable to dynamically import SASS",["Ensure you have installed sass"]))}async function Rd(){if(!x("style",i.config.transform)||!i.config.transform.style||De(i.config.transform.style))return;await Jb();let e=ot("Style Transform"),t=Bn(i.config.transform.style,{addWatch:!1,flatten:!0}),r=xn(i.config.input);for(let n=0;n<t.length;n++){let s=t[n],o=Ge(s),a=U();if(a.uuid=Jt(),a.input=s.input,a.watch=null,a.attrs=[],a.postcss=null,a.sass=!1,a.tailwind=null,o("postcss")?R(s.postcss)&&s.postcss.length>0?ft(a,"postcss",{get(){return s.postcss}}):Ae(s.postcss)&&s.postcss!==!1&&Oe(s.postcss)===!1?ft(a,"postcss",{get(){return be(i.processor.postcss.config)}}):ee({option:"style",name:"postcss",provided:a.postcss,expects:"boolean | []"}):ft(a,"postcss",{get(){return be(i.processor.postcss.config)}}),o("tailwind")){i.processor.tailwind.installed||zo("tailwindcss");let f=I(s.tailwind);if(f||Ae(s.tailwind)&&s.tailwind!==!1&&Oe(s.tailwind)===!1){let p=be(f?s.tailwind:i.processor.tailwind.config);if(R(p.content)&&De(p.content)&&(p.content=[pn(i.dirs.input,"**","*.{js,ts,jsx,tsx,vue,svelte,liquid,json,schema}")]),ft(a,"tailwind",{get(){return p}}),i.mode.watch&&R(a.tailwind.content)){let d=await Ld(a.tailwind.content);i.processor.tailwind.map===null&&(i.processor.tailwind.map=U()),i.processor.tailwind.map[n]=new Set(d)}}else ee({option:"style",name:"tailwind",provided:a.tailwind,expects:"boolean | {}"})}if(o("sass")&&s.sass!==!1&&i.processor.sass.installed===!0){let f=I(s.sass);if((Ae(s.sass)||f)&&Oe(s.sass)===!1)if(i.processor.sass.installed||zo("sass"),f===!1)ft(a,"sass",{get(){return s.sass}});else{a.sass=be(i.processor.sass.config,s.sass);for(let p in s.sass)if(p==="sourcemap"||p==="warnings"||p==="quietDeps")Ae(s.sass[p])?a.sass[p]=s.sass[p]:ee({option:"sass",name:p,provided:s.sass[p],expects:"boolean"});else if(p==="style")G(s.sass[p])===!1&&ee({option:"sass",name:p,provided:s.sass[p],expects:"string"}),s.sass[p]==="expanded"||s.sass[p]==="compressed"?a.sass[p]=s.sass[p]:rt({option:"sass",name:p,value:s.sass[p],expects:"expanded | compressed"});else if(p==="includePaths")if(R(s.sass[p])){let d=[];for(let g of s.sass[p]){let w=pn(i.cwd,g);await Bd(w)?d.push(w):e("Cannot resolve sass includePath entry",g)}a.sass[p]=d}else ee({option:"sass",name:p,provided:s.sass[p],expects:"string[]"})}else ee({option:"style",name:"sass",provided:s.sass,expects:"boolean | {}"});s.snippet===!1&&!/\.s[ac]ss/.test(Vb(a.input))&&e("Input is not a sass file",a.input)}let u=Pr(s.rename);o("rename")&&Oe(s)===!1&&(G(s.rename)===!1&&ee({option:"styles",name:"rename",provided:s.rename,expects:"string"}),u=Pr(a.input,s.rename),/[a-zA-Z0-9_.-]+/.test(u.name)===!1&&ee({option:"sass",name:"rename",provided:u,expects:"Characters: [a-zA-Z0-9_.-]"}),u.name.endsWith(".css")?a.rename=u.name:u.name.endsWith(".scss")?u.name=u.name.replace(".scss",".css"):u.name.endsWith(".sass")?u.name=u.name.replace(".sass",".css"):u.name.endsWith(".liquid")||(u.name=u.name+".css"));let c=[];if(i.mode.watch&&o("watch")){R(s.watch)||ee({option:"styles",name:"watch",provided:s.watch,expects:"string[]"});for(let f of s.watch){let p=await Ld(pn(i.cwd,r(f)));p.length===0&&f[0]!=="!"&&e("Cannot resolve watch glob/path uri",f);for(let d of p)await Bd(d)?c.push(d):e("No file exists in path",d)}c.push(a.input);for(let f of c)i.watch.add(f);a.watch=(0,qu.default)(c)}else a.watch=(0,qu.default)([a.input]),i.watch.add(a.input);if(I(a.sass)&&(a.sass.include.unshift(i.cwd,pn(i.cwd,u.dir)),qt("sass.include",s)&&(a.sass.include=s.sass.include.map(f=>pn(i.cwd,f)))),o("snippet")&&(Ae(s.snippet)||ee({option:"styles",name:"snippet",provided:s.snippet,expects:"boolean"}),a.snippet=s.snippet,a.snippet===!0&&o("attrs")&&De(s.attrs)===!1))if(R(s.attrs))for(let f=0;f<s.attrs.length;f++){let p=s.attrs[f];R(p)?a.attrs.push(p.join("")):ee({option:"style",name:`attrs[${f}]`,provided:p,expects:"string[]"})}else ee({option:"style",name:"attrs",provided:s.attrs,expects:"[ string[] ]"});a.snippet?(x("rename",a)||(a.rename=u.name),(u.name.endsWith(".liquid")===!1||a.rename.endsWith(".liquid")===!1)&&(a.rename=u.name+".liquid"),i.paths.transforms.set(a.input,9),i.mode.watch&&i.watch.unwatch(pn(i.dirs.output,"snippets",a.rename))):(a.rename=u.name,i.mode.watch&&i.watch.unwatch(pn(i.dirs.output,"assets",u.name))),i.style.push(a)}}l();var Pd=Ct(Rr());var Yb=["minifySchema"],Kb=["minifyCSS","minifyJS","collapseWhitespace","removeComments"];function kd(){let{mode:e}=i;if(!x("liquid",i.config.transform)||De(i.config.transform.liquid))return;I(i.config.transform.liquid)||ee({option:"transform",name:"liquid",expects:"{}",provided:typeof i.config.transform.liquid});let t=ot("liquid configuration");if(x("terse",i.config.transform.liquid)&&e.terse===!0){if(De(i.config.transform.liquid.terse))i.liquid.terse.enabled=!1,t("Terse option is empty, minification will not apply");else if(Ae(i.config.transform.liquid)&&i.config.transform.liquid===!0)i.liquid.terse.enabled=!0;else if(I(i.config.transform.liquid.terse)){i.liquid.terse.enabled=!0;let{terse:r}=i.config.transform.liquid;for(let n of Yb)x(n,r)&&(i.liquid.terse.liquid[n]=r[n]);for(let n in Kb)x(n,r)&&(i.liquid.terse.markup[n]=r[n]);x("exclude",r)&&(i.liquid.terse.exclude=(0,Pd.default)(Pt(r.exclude)))}}}l();import{extname as Xb,relative as Zb}from"node:path";async function Nd(){if(!x("svg",i.config.transform)||!i.config.transform.svg||De(i.config.transform.svg))return;let e=ot("SVG Transform"),t=Bn(i.config.transform.svg,{addWatch:!0,flatten:!1});for(let r of t){let n=r.input.filter(a=>Xb(a)===".svg"?!0:(e("Excluded file which is not an SVG type",Zb(i.cwd,a)),!1));if(n.length===0){e("No SVG file paths were resolved");continue}let s=Ge(r),o=U();o.uuid=Jt(),o.input=new Set(n),o.format=null,o.match=r.match,o.rename=r.rename,o.snippet=r.snippet,s("svgo")&&s("sprite")&&rt({option:"transform",name:"svg",value:"svgo AND sprite",expects:"svgo OR sprite"}),s("format")?r.format==="file"||r.format==="sprite"?(o.format=r.format,r.format==="file"?o.svgo=!0:o.sprite=!0):rt({option:"transform > svg",name:"format",value:r.format,expects:'"sprite" | "file"'}):s("svgo")?(o.format="file",o.svgo=I(r.svgo)?be(i.processor.svgo,r.svgo):!0):s("sprite")?(o.format="sprite",o.sprite=I(r.sprite)?be(i.processor.sprite,r.sprite):!0):yl({option:"transform.svg",key:"format",expects:"sprite | file",reason:[`SVG transforms require you to define ${ge("format")} Syncify needs to knows how`,"it should handle the input and which processor to use for the transform."]}),i.svg.push(o)}}l();import{join as iw}from"node:path";l();import Id from"uWebSockets.js";l();import Qb from"uWebSockets.js";import{readFileSync as ew,existsSync as tw,ensureFile as rw,readFile as nw}from"fs-extra";import{join as Od,extname as sw}from"node:path";var Hu={enable:!0,output:[]};async function _d(){if(!Hu.enable)return Hu.output.push(E.red,E.red+xe("Change the socket port address or kill the session occupying it."),E.red+xe("This error typically occurs when multiple Syncify instances are active.")),He(xe(`${h("ERROR")} on ${h(`${i.hot.method==="hot"?"HOT":"LIVE"} Reload:`)}`)),L(Hu.output.join(`
`)),null;L(we(h(`${i.hot.method==="hot"?"HOT Reload":"LIVE Reload"}${k}`))),nt(we("configuring HOT Reload"));let e=Od(i.dirs.output,"assets"),t=Qb.App(),r=await nw(i.hot.source);return t.get("/*",(n,s)=>{let o=s.getUrl();if(o==="/")n.endWithoutBody();else{let a=sw(o),u=Od(e,o);n.writeHeader("Access-Control-Allow-Origin","*"),n.writeHeader("Cache-Control","public, max-age=0"),a===".js"||a===".mjs"?n.writeHeader("Content-Type","application/javascript"):a===".css"?n.writeHeader("Content-Type","text/css"):a===".json"&&n.writeHeader("Content-Type","application/json"),tw(u)&&rw(u)?n.end(ew(u)):o.endsWith("hot.min.js")?n.end(r):n.endWithoutBody()}}),t.listen(i.hot.server,n=>{n?nt(we(`${ye("server")}  ${j}  ${m("PORT")}  ${j} ${jt(`${i.hot.server}`)}`)):console.log("Failed to listen to port "+i.hot.server)}),t}async function jd(){let e,r=(await _d()).ws("/ws",{compression:Id.SHARED_COMPRESSOR,maxPayloadLength:16*1024*1024,idleTimeout:32,open:n=>{vc.forEach(s=>n.subscribe(s))},message:(n,s,o)=>{Si(Buffer.from(s).toString(o?"binary":"utf8"))}}).listen(i.hot.socket,n=>{e=n,n?(L(we(`${ye("socket")}  ${j}  ${m("PORT")}  ${j} ${jt(`${i.hot.socket}`)}`)),Ie()):console.log("Failed to listen on websocket")});return po(()=>{r.close(),Id.us_listen_socket_close(e)}),{get http(){return r},script:(n,s)=>r.publish("script",`script,${s},${n}`),stylesheet:(n,s)=>r.publish("stylesheet",`stylesheet,${s},${n}`),section:n=>r.publish("section",`section,${n}`),svg:n=>r.publish("svg",`svg,${n}`),assets:()=>r.publish("assets","assets"),reload:()=>r.publish("reload","reload"),replace:()=>r.publish("replace","replace"),connected:()=>r.publish("connected","connected"),disconnect:()=>r.publish("disconnect","disconnect")}}async function Md(){if(i.mode.watch!==!0||i.mode.hot===!1&&i.config.hot===!1)return;i.hot.source=iw(i.cwd,"node_modules","@syncify/cli","hot.min.js");let e=ot("HOT Reloads");if(i.env.sync>1){e("HOT Reloads can only be used on 1 store");return}else if(i.sync.themes.length>1){e("HOT Reloads can only be used on 1 theme");return}if($r(I(i.config.hot),Ae(i.config.hot),Oe(i.config.hot))&&ee({option:"config",name:"hot",provided:i.config.hot,expects:"boolean | {}"}),I(i.config.hot)&&De(i.config.hot)===!1){let t=Ge(i.hot);for(let r in i.config.hot)t(r)||ui(`hot.${r}`,i.config.hot[r]),r==="label"?i.config.hot[r]==="visible"||i.config.hot[r]==="hidden"?i.hot[r]=i.config.hot[r]:rt({option:"hot",name:r,value:i.config.hot[r],expects:"visible | hidden"}):r==="strategy"?i.config.hot[r]==="hydrate"||i.config.hot[r]==="replace"?i.hot[r]=i.config.hot[r]:rt({option:"hot",name:r,value:i.config.hot[r],expects:"hydrate | replace"}):r==="method"?i.config.hot[r]==="hot"||i.config.hot[r]==="refresh"?i.hot[r]=i.config.hot[r]:rt({option:"hot",name:r,value:i.config.hot[r],expects:"hot | refresh"}):r==="scroll"?i.config.hot[r]==="preserved"||i.config.hot[r]==="top"?i.hot[r]=i.config.hot[r]:rt({option:"hot",name:r,value:i.config.hot[r],expects:"preserved | top"}):typeof i.hot[r]==typeof i.config.hot[r]?i.hot[r]=i.config.hot[r]:ee({option:"hot",name:r,provided:i.config.hot[r],expects:typeof i.hot[r]})}i.wss=await jd()}l();import{join as ow}from"node:path";function Gu(e,t){let r=[],n=U();i.mode.upload?(n.base="output",n.from="output",n.dirs=Jr.map(s=>`${A("-")} ${N(s)}`),n.fix=[`The ${N("--filter")} (or ${N("-f")}) flag command argument expects you`,"provide a theme output directory as the starting point. Filtering begins with","a Shopify output directory name, for example:","",`${A("$")} ${A(`syncify --filter ${N("sections/file.liquid")}`)}`,`${A("$")} ${A(`syncify --filter ${N("snippets/*")}`)}`,`${A("$")} ${A(`syncify --filter ${N("templates/*.json")}`)}`,`${A("$")} ${A(`syncify --filter ${N("!assets/some-file.ext")}`)}`,"",`Syncify will automatically resolve files from within your defined ${h(n.base)} directory`,"based on the starting point directory name. You can pass glob star matches following the",`directory namespace or starting point ignores (${N("!")}) as long the directory can match.`]):(n.base="input",n.from="paths",n.dirs=Vr.map(s=>`${A("-")} ${N(s)}`),n.fix=[`The ${N("--filter")} (or ${N("-f")}) flag command argument expects you`,`provide a ${nr.bold("paths")} key name as the starting point. Filtering begins with`,"a Shopify output directory name, for example:","",`${A("$")} ${A(`syncify --filter ${N("sections/file.liquid")}`)}`,`${A("$")} ${A(`syncify --filter ${N("snippets/*")}`)}`,`${A("$")} ${A(`syncify --filter ${N("templates/*.json")}`)}`,`${A("$")} ${A(`syncify --filter ${N("!assets/some-file.ext")}`)}`,"",`Syncify will automatically resolve files from within your defined ${h(n.base)} directory`,`based on the starting point ${h("paths")} name. You can pass glob star matches following the`,`starting point or ignores (${N("!")}) as long the reference can match.`]),e==="pattern"?(r.push(`Invalid ${N("--filter")} pattern provided. You cannot pass starting point`),t[0]==="*"?r.push(`glob (${N("*")}) stars as filters, Syncify does not support this.`):t[0]==="/"?r.push(`path (${N("/")}) roots as filters, Syncify does not support this.`):t[0]==="."&&r.push(`dot paths (${N(".")})  as filters, Syncify does not support this.`),r.push(`Use a starting point reference name based on the ${N(n.from)} key property`,`in your ${N(i.file.base)} file.`)):r.push(`Invalid directory provided. The ${N("--filter")} pattern expects the starting point`,"directory path be one of the following:","",...n.dirs,""),br({message:r,expected:"--filter <dir>",fix:n.fix})}function Wd(e,t,r){if((t[0]==="*"||t[0]==="/"||t[0]===".")&&Gu("pattern",t),t[0]==="!"){r.test(t.slice(1))||Gu("dir",t);return}r.test(t)||Gu("dir",t);let n=t.slice(0,t.indexOf("/"));R(i.filters[n])||(i.filters[n]=[]),i.filters[n].push(ow(e,t))}function qd(e){if(!x("filter",e))return;let t=i.mode.upload?i.dirs.output:i.dirs.input,r=e.filter.replace(/\s+/g," ").trim(),n=i.mode.upload?new RegExp(`^(${Jr.join("|")})`):new RegExp(`^(${Vr.join("|")})`);if(r.indexOf(",")>-1){let s=r.split(",").filter(Boolean).map(o=>o.trim());for(let o of s)Wd(t,o,n)}else Wd(t,r,n)}l();async function Hd(){if(I(i.config.publish)&&De(i.config.publish)===!1)for(let e in i.config.publish)x(e,i.publish)||ui(`publish.${e}`,i.config.publish[e]),e==="tunnelPort"?Lt(i.config.publish[e])&&isNaN(i.config.publish[e])===!1?i.publish[e]=i.config.publish[e]:rt({option:"publish",name:e,value:i.config.hot[e],expects:"visible | hidden"}):e==="publishRole"?i.config.publish[e]==="main"||i.config.publish[e]==="unpublished"||i.config.publish[e]==="development"?i.publish[e]=i.config.publish[e]:rt({option:"publish",name:e,value:i.config.hot[e],expects:"main | unpublished | development"}):e==="bindVersion"?Ae(i.config.publish[e])?i.publish[e]=i.config.publish[e]:ee({option:"bindVersion",name:e,provided:i.config.publish[e],expects:typeof i.publish[e]}):e==="themeLimit"&&(Lt(i.config.publish[e])?i.config.publish[e]>5?rt({option:"publish",name:e,value:i.config.hot[e],expects:"1 - 5",reason:["Syncify requries a theme limit between 1 and 5."]}):i.publish[e]=i.config.publish[e]:ee({option:"themeLimit",name:e,provided:i.config.publish[e],expects:typeof i.publish[e]}));(i.mode.publish===!0||i.mode.release===!0)&&(x("ngrok_auth_token",i.env.vars)||Qe("Missing ngrok auth token",["Theme publishing requires an ngrok authorisation token",`This is easy to obtain, visit ${sr("https://ngrok.com")}`,`and create a ${h("free")} account to get a token.`,"",`Once you have obtained an auth token, provide it in your ${m(".env")}`,"file, use the following environment variable name:","",`${_('ngrok_auth_token = ""')}`]))}l();l();l();import*as Yw from"fs";import*as Eh from"net";var Co={};lc(Co,{darwin:()=>wh,darwinFast:()=>nc,linux:()=>Gw,win32:()=>xh,wsl:()=>Uw});l();var Hn=Ct(Ud(),1);import qw from"fs";import tr from"path";import{homedir as bh}from"os";import{execSync as tc,execFileSync as Hw}from"child_process";l();var qr=Ct(rh(),1);import Ws from"process";import{EventEmitter as Lw}from"events";l();var lt=typeof performance<"u"&&performance,oh;nh=process.hrtime,Yu=function(){var e=nh();return e[0]*1e9+e[1]},sh=Yu(),oh=function(){return(Yu()-sh)/1e6};var nh,Yu,sh,ih=lt&&lt.now?function(){return lt.now()}:oh;function ho(e){if(!e)throw new Error("name must be non-empty")}function Aw(e,t){for(var r=0,n=e.length,s;r<n;)s=r+n>>>1,e[s].startTime<t.startTime?r=s+1:n=s;e.splice(r,0,t)}var Do,bo,Ms,wo;lt&&lt.mark&&lt.measure&&lt.getEntriesByName&&lt.getEntriesByType&&lt.clearMarks&&lt.clearMeasures&&lt.clearResourceTimings?(Do=function(e){ho(e),lt.mark("start "+e)},bo=function(e){ho(e),lt.mark("end "+e);var t=lt.measure(e,"start "+e,"end "+e);if(t)return t;var r=lt.getEntriesByName(e);return r[r.length-1]},Ms=function(){return lt.getEntriesByType("measure")},wo=function(){lt.clearMarks(),lt.clearMeasures()}):(go={},yo=[],Do=function(e){ho(e);var t=ih();go["$"+e]=t},bo=function(e){ho(e);var t=ih(),r=go["$"+e];if(!r)throw new Error("no known mark: "+e);var n={startTime:r,name:e,duration:t-r,entryType:"measure"};return Aw(yo,n),n},Ms=function(){return yo},wo=function(){go={},yo=[]});var go,yo;var Wr=Ws.platform==="win32",jn=Ws.browser,Mn={red:jn?"crimson":1,yellow:jn?"gold":3,cyan:jn?"darkturquoise":6,green:jn?"forestgreen":2,blue:jn?"steelblue":4,magenta:jn?"palevioletred":5};qr.default.colors=[Mn.cyan,Mn.green,Mn.blue,Mn.magenta];var Ku=class extends Lw{issueStatus(t,r){(t==="status"||t==="statusEnd")&&this.emit(t,[t,...r])}issueWarning(t,r){this.emit("warning",[t,...r])}},ah={},Bw=25,uh,Wn=class e{static _logToStdErr(t,r){e.loggerfn(t)(...r)}static loggerfn(t){t=`LH:${t}`;let r=ah[t];return r||(r=(0,qr.default)(t),ah[t]=r,t.endsWith("error")?r.color=Mn.red:t.endsWith("warn")&&(r.color=Mn.yellow)),r}static setLevel(t){switch(uh=t,t){case"silent":qr.default.enable("-LH:*");break;case"verbose":qr.default.enable("LH:*");break;case"warn":qr.default.enable("-LH:*, LH:*:warn, LH:*:error");break;case"error":qr.default.enable("-LH:*, LH:*:error");break;default:qr.default.enable("LH:*, -LH:*:verbose")}}static formatProtocol(t,r,n){let s=!Ws||Ws.browser?1/0:Ws.stdout.columns,o=r.method||"?????",a=s-o.length-t.length-Bw,u=r.params&&o!=="IO.read"?JSON.stringify(r.params).substr(0,a):"";e._logToStdErr(`${t}:${n||""}`,[o,u])}static isVerbose(){return uh==="verbose"}static time({msg:t,id:r,args:n=[]},s="log"){Do(r),e[s]("status",t,...n)}static timeEnd({msg:t,id:r,args:n=[]},s="verbose"){e[s]("statusEnd",t,...n),bo(r)}static log(t,...r){return e.events.issueStatus(t,r),e._logToStdErr(t,r)}static warn(t,...r){return e.events.issueWarning(t,r),e._logToStdErr(`${t}:warn`,r)}static error(t,...r){return e._logToStdErr(`${t}:error`,r)}static verbose(t,...r){return e.events.issueStatus(t,r),e._logToStdErr(`${t}:verbose`,r)}static greenify(t){return`${e.green}${t}${e.reset}`}static redify(t){return`${e.red}${t}${e.reset}`}static get green(){return"\x1B[32m"}static get red(){return"\x1B[31m"}static get yellow(){return"\x1B[33m"}static get purple(){return"\x1B[95m"}static get reset(){return"\x1B[0m"}static get bold(){return"\x1B[1m"}static get dim(){return"\x1B[2m"}static get tick(){return Wr?"\u221A":"\u2713"}static get cross(){return Wr?"\xD7":"\u2718"}static get whiteSmallSquare(){return Wr?"\u0387":"\u25AB"}static get heavyHorizontal(){return Wr?"\u2500":"\u2501"}static get heavyVertical(){return Wr?"\u2502 ":"\u2503 "}static get heavyUpAndRight(){return Wr?"\u2514":"\u2517"}static get heavyVerticalAndRight(){return Wr?"\u251C":"\u2523"}static get heavyDownAndHorizontal(){return Wr?"\u252C":"\u2533"}static get doubleLightHorizontal(){return"\u2500\u2500"}};Wn.events=new Ku;Wn.takeTimeEntries=()=>{let e=Ms();return wo(),e};Wn.getTimeEntries=()=>Ms();var Ve=Wn;l();var hh=Ct(dh(),1);import{join as Ow}from"path";import Qu from"child_process";import{mkdirSync as _w}from"fs";function er(e,t){return typeof e>"u"?t:e}async function gh(e){return new Promise(t=>setTimeout(t,e))}var qn=class extends Error{constructor(t="Unexpected error",r){return super(),this.message=t,this.code=r,this.stack=new Error().stack,this}},xo=class extends qn{constructor(){super(...arguments),this.message="The CHROME_PATH environment variable must be set to a Chrome/Chromium executable no older than Chrome stable.",this.code="ERR_LAUNCHER_PATH_NOT_SET"}},So=class extends qn{constructor(){super(...arguments),this.message="userDataDir must be false or a path.",this.code="ERR_LAUNCHER_INVALID_USER_DATA_DIRECTORY"}},qs=class extends qn{constructor(){super(...arguments),this.message=`Platform ${gr()} is not supported.`,this.code="ERR_LAUNCHER_UNSUPPORTED_PLATFORM"}},Fo=class extends qn{constructor(){super(...arguments),this.message="No Chrome installations found.",this.code="ERR_LAUNCHER_NOT_INSTALLED"}};function gr(){return hh.default?"wsl":process.platform}function yh(){switch(gr()){case"darwin":case"linux":return Mw();case"wsl":process.env.TEMP=ec(`${process.env.PATH}`);case"win32":return Ww();default:throw new qs}}function Iw(e=""){let t=/\/mnt\/([a-z])\//.exec(e);if(!t)return e;let r=t[1];return e.replace(`/mnt/${r}/`,`${r.toUpperCase()}:\\`).replace(/\//g,"\\")}function Dh(e=""){if(/[a-z]:\\/iu.test(e))return e;try{return Qu.execFileSync("wslpath",["-w",e]).toString().trim()}catch{return Iw(e)}}function vo(e,t){try{return Qu.execFileSync("wslpath",["-u",e]).toString().trim()}catch{return t}}function jw(e){let r=/\/mnt\/([a-z])\/Users\/([^\/:]+)\/AppData\//.exec(e)||[];return`/mnt/${r[1]}/Users/${r[2]}/AppData/Local`}function ec(e){let r=/\/([a-z])\/Users\/([^\/:]+)\/AppData\//.exec(e)||[];return vo(`${r[1]}:\\Users\\${r[2]}\\AppData\\Local`,jw(e))}function Mw(){return Qu.execSync("mktemp -d -t lighthouse.XXXXXXX").toString().trim()}function Ww(){let e=process.env.TEMP||process.env.TMP||(process.env.SystemRoot||process.env.windir)+"\\temp",t=Math.floor(Math.random()*9e7+1e7),r=Ow(e,"lighthouse."+t);return _w(r,{recursive:!0}),r}var rc=/\r?\n/;function nc(){let e=[process.env.CHROME_PATH,process.env.LIGHTHOUSE_CHROMIUM_PATH,"/Applications/Google Chrome Canary.app/Contents/MacOS/Google Chrome Canary","/Applications/Google Chrome.app/Contents/MacOS/Google Chrome"];for(let t of e)if(t&&Hr(t))return t;return wh()[0]}function wh(){let e=["/Contents/MacOS/Google Chrome Canary","/Contents/MacOS/Google Chrome"],t="/System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/LaunchServices.framework/Versions/A/Support/lsregister",r=[],n=sc();n&&r.push(n),tc(`${t} -dump | grep -i 'google chrome\\( canary\\)\\?\\.app' | awk '{$1=""; print $0}'`).toString().split(rc).forEach(a=>{e.forEach(u=>{let c=tr.join(a.substring(0,a.indexOf(".app")+4).trim(),u);Hr(c)&&r.indexOf(c)===-1&&r.push(c)})});let s=(0,Hn.default)(process.env.HOME||bh()),o=[{regex:new RegExp(`^${s}/Applications/.*Chrome\\.app`),weight:50},{regex:new RegExp(`^${s}/Applications/.*Chrome Canary\\.app`),weight:51},{regex:/^\/Applications\/.*Chrome.app/,weight:100},{regex:/^\/Applications\/.*Chrome Canary.app/,weight:101},{regex:/^\/Volumes\/.*Chrome.app/,weight:-2},{regex:/^\/Volumes\/.*Chrome Canary.app/,weight:-1}];return process.env.LIGHTHOUSE_CHROMIUM_PATH&&o.unshift({regex:new RegExp((0,Hn.default)(process.env.LIGHTHOUSE_CHROMIUM_PATH)),weight:150}),process.env.CHROME_PATH&&o.unshift({regex:new RegExp((0,Hn.default)(process.env.CHROME_PATH)),weight:151}),Sh(r,o)}function sc(){if(Hr(process.env.CHROME_PATH))return process.env.CHROME_PATH;if(Hr(process.env.LIGHTHOUSE_CHROMIUM_PATH))return Ve.warn("ChromeLauncher","LIGHTHOUSE_CHROMIUM_PATH is deprecated, use CHROME_PATH env variable instead."),process.env.LIGHTHOUSE_CHROMIUM_PATH}function Gw(){let e=[],t=sc();if(t&&e.push(t),[tr.join(bh(),".local/share/applications/"),"/usr/share/applications/"].forEach(o=>{e=e.concat(Vw(o))}),["google-chrome-stable","google-chrome","chromium-browser","chromium"].forEach(o=>{try{let a=Hw("which",[o],{stdio:"pipe"}).toString().split(rc)[0];Hr(a)&&e.push(a)}catch{}}),!e.length)throw new xo;let s=[{regex:/chrome-wrapper$/,weight:51},{regex:/google-chrome-stable$/,weight:50},{regex:/google-chrome$/,weight:49},{regex:/chromium-browser$/,weight:48},{regex:/chromium$/,weight:47}];return process.env.LIGHTHOUSE_CHROMIUM_PATH&&s.unshift({regex:new RegExp((0,Hn.default)(process.env.LIGHTHOUSE_CHROMIUM_PATH)),weight:100}),process.env.CHROME_PATH&&s.unshift({regex:new RegExp((0,Hn.default)(process.env.CHROME_PATH)),weight:101}),Sh(zw(e.filter(Boolean)),s)}function Uw(){return process.env.LOCALAPPDATA=ec(`${process.env.PATH}`),process.env.PROGRAMFILES=vo("C:/Program Files","/mnt/c/Program Files"),process.env["PROGRAMFILES(X86)"]=vo("C:/Program Files (x86)","/mnt/c/Program Files (x86)"),xh()}function xh(){let e=[],t=[`${tr.sep}Google${tr.sep}Chrome SxS${tr.sep}Application${tr.sep}chrome.exe`,`${tr.sep}Google${tr.sep}Chrome${tr.sep}Application${tr.sep}chrome.exe`],r=[process.env.LOCALAPPDATA,process.env.PROGRAMFILES,process.env["PROGRAMFILES(X86)"]].filter(Boolean),n=sc();return n&&e.push(n),r.forEach(s=>t.forEach(o=>{let a=tr.join(s,o);Hr(a)&&e.push(a)})),e}function Sh(e,t){return e.map(n=>{for(let s of t)if(s.regex.test(n))return{path:n,weight:s.weight};return{path:n,weight:10}}).sort((n,s)=>s.weight-n.weight).map(n=>n.path)}function Hr(e){if(!e)return!1;try{return qw.accessSync(e),!0}catch{return!1}}function zw(e){return Array.from(new Set(e))}function Vw(e){let t=/(^[^ ]+).*/,r="^Exec=/.*/(google-chrome|chrome|chromium)-.*",n=[];if(Hr(e)){let s;try{s=tc(`grep -ER "${r}" ${e} | awk -F '=' '{print $2}'`,{stdio:"pipe"})}catch{s=tc(`grep -Er "${r}" ${e} | awk -F '=' '{print $2}'`,{stdio:"pipe"})}s=s.toString().split(rc).map(o=>o.replace(t,"$1")),s.forEach(o=>Hr(o)&&n.push(o))}return n}l();import{createServer as Jw}from"http";function Fh(){return new Promise((e,t)=>{let r=Jw();r.listen(0),r.once("listening",()=>{let{port:n}=r.address();r.close(()=>e(n))}),r.once("error",t)})}l();var ic=["--disable-features="+["Translate","OptimizationHints","MediaRouter","DialMediaRouteProvider","CalculateNativeWinOcclusion","InterestFeedContentSuggestions","CertificateTransparencyComponentUpdater","AutofillServerCommunication","PrivacySandboxSettings4"].join(","),"--disable-extensions","--disable-component-extensions-with-background-pages","--disable-background-networking","--disable-component-update","--disable-client-side-phishing-detection","--disable-sync","--metrics-recording-only","--disable-default-apps","--mute-audio","--no-default-browser-check","--no-first-run","--disable-backgrounding-occluded-windows","--disable-renderer-backgrounding","--disable-background-timer-throttling","--disable-ipc-flooding-protection","--password-store=basic","--use-mock-keychain","--force-fieldtrials=*BackgroundTracing/default/","--disable-hang-monitor","--disable-prompt-on-repost","--disable-domain-reliability","--propagate-iph-for-testing"];import{spawn as Kw,spawnSync as Xw}from"child_process";var Zw=gr()==="wsl",Qw=gr()==="win32",vh="SIGINT",e2=130,t2=new Set(["darwin","linux","win32","wsl"]),Gn=new Set,Ch=()=>{r2(),process.exit(e2)};async function $h(e={}){e.handleSIGINT=er(e.handleSIGINT,!0);let t=new oc(e);e.handleSIGINT&&Gn.size===0&&process.on(vh,Ch),Gn.add(t),await t.launch();let r=()=>{Gn.delete(t),Gn.size===0&&process.removeListener(vh,Ch),t.kill()};return{pid:t.pid,port:t.port,kill:r,process:t.chromeProcess}}function r2(){let e=[];for(let t of Gn)try{t.kill(),Gn.delete(t)}catch(r){e.push(r)}return e}var oc=class e{constructor(t={},r={}){if(this.opts=t,this.tmpDirandPidFileReady=!1,this.fs=r.fs||Yw,this.spawn=r.spawn||Kw,Ve.setLevel(er(this.opts.logLevel,"silent")),this.startingUrl=er(this.opts.startingUrl,"about:blank"),this.chromeFlags=er(this.opts.chromeFlags,[]),this.prefs=er(this.opts.prefs,{}),this.requestedPort=er(this.opts.port,0),this.portStrictMode=t.portStrictMode,this.chromePath=this.opts.chromePath,this.ignoreDefaultFlags=er(this.opts.ignoreDefaultFlags,!1),this.connectionPollInterval=er(this.opts.connectionPollInterval,500),this.maxConnectionRetries=er(this.opts.maxConnectionRetries,50),this.envVars=er(t.envVars,Object.assign({},process.env)),typeof this.opts.userDataDir=="boolean")if(!this.opts.userDataDir)this.useDefaultProfile=!0,this.userDataDir=void 0;else throw new So;else this.useDefaultProfile=!1,this.userDataDir=this.opts.userDataDir}get flags(){let t=this.ignoreDefaultFlags?[]:ic.slice();return t.push(`--remote-debugging-port=${this.port}`),!this.ignoreDefaultFlags&&gr()==="linux"&&t.push("--disable-setuid-sandbox"),this.useDefaultProfile||t.push(`--user-data-dir=${Zw?Dh(this.userDataDir):this.userDataDir}`),process.env.HEADLESS&&t.push("--headless"),t.push(...this.chromeFlags),t.push(this.startingUrl),t}static defaultFlags(){return ic.slice()}static getFirstInstallation(){return gr()==="darwin"?nc():Co[gr()]()[0]}static getInstallations(){return Co[gr()]()}makeTmpDir(){return yh()}prepare(){let t=gr();if(!t2.has(t))throw new qs;this.userDataDir=this.userDataDir||this.makeTmpDir(),this.outFile=this.fs.openSync(`${this.userDataDir}/chrome-out.log`,"a"),this.errFile=this.fs.openSync(`${this.userDataDir}/chrome-err.log`,"a"),this.setBrowserPrefs(),this.pidFile=`${this.userDataDir}/chrome.pid`,Ve.verbose("ChromeLauncher",`created ${this.userDataDir}`),this.tmpDirandPidFileReady=!0}setBrowserPrefs(){if(Object.keys(this.prefs).length===0)return;let t=`${this.userDataDir}/Default`;this.fs.existsSync(t)||this.fs.mkdirSync(t,{recursive:!0});let r=`${t}/Preferences`;try{if(this.fs.existsSync(r)){let n=this.fs.readFileSync(r,"utf-8"),s=JSON.parse(n);this.fs.writeFileSync(r,JSON.stringify({...s,...this.prefs}),"utf-8")}else this.fs.writeFileSync(r,JSON.stringify({...this.prefs}),"utf-8")}catch(n){Ve.log("ChromeLauncher",`Failed to set browser prefs: ${n.message}`)}}async launch(){if(this.requestedPort!==0){this.port=this.requestedPort;try{await this.isDebuggerReady(),Ve.log("ChromeLauncher",`Found existing Chrome already running using port ${this.port}, using that.`);return}catch{if(this.portStrictMode)throw new Error(`found no Chrome at port ${this.requestedPort}`);Ve.log("ChromeLauncher",`No debugging port found on port ${this.port}, launching a new Chrome.`)}}if(this.chromePath===void 0){let t=e.getFirstInstallation();if(!t)throw new Fo;this.chromePath=t}return this.tmpDirandPidFileReady||this.prepare(),this.pid=await this.spawnProcess(this.chromePath),Promise.resolve()}async spawnProcess(t){let n=await(async()=>this.chromeProcess?(Ve.log("ChromeLauncher",`Chrome already running with pid ${this.chromeProcess.pid}.`),this.chromeProcess.pid):(this.requestedPort===0&&(this.port=await Fh()),Ve.verbose("ChromeLauncher",`Launching with command:
"${t}" ${this.flags.join(" ")}`),this.chromeProcess=this.spawn(t,this.flags,{detached:process.platform!=="win32",stdio:["ignore",this.outFile,this.errFile],env:this.envVars}),this.chromeProcess.pid&&this.fs.writeFileSync(this.pidFile,this.chromeProcess.pid.toString()),Ve.verbose("ChromeLauncher",`Chrome running with pid ${this.chromeProcess.pid} on port ${this.port}.`),this.chromeProcess.pid))();return await this.waitUntilReady(),n}cleanup(t){t&&(t.removeAllListeners(),t.end(),t.destroy(),t.unref())}isDebuggerReady(){return new Promise((t,r)=>{let n=Eh.createConnection(this.port,"127.0.0.1");n.once("error",s=>{this.cleanup(n),r(s)}),n.once("connect",()=>{this.cleanup(n),t()})})}waitUntilReady(){let t=this;return new Promise((r,n)=>{let s=0,o="Waiting for browser.",a=()=>{s===0&&Ve.log("ChromeLauncher",o),s++,o+="..",Ve.log("ChromeLauncher",o),t.isDebuggerReady().then(()=>{Ve.log("ChromeLauncher",o+`${Ve.greenify(Ve.tick)}`),r()}).catch(u=>{if(s>t.maxConnectionRetries){Ve.error("ChromeLauncher",u.message);let c=this.fs.readFileSync(`${this.userDataDir}/chrome-err.log`,{encoding:"utf-8"});return Ve.error("ChromeLauncher",`Logging contents of ${this.userDataDir}/chrome-err.log`),Ve.error("ChromeLauncher",c),n(u)}gh(t.connectionPollInterval).then(a)})};a()})}kill(){if(this.chromeProcess){this.chromeProcess.on("close",()=>{delete this.chromeProcess,this.destroyTmp()}),Ve.log("ChromeLauncher",`Killing Chrome instance ${this.chromeProcess.pid}`);try{if(Qw){let t=Xw(`taskkill /pid ${this.chromeProcess.pid} /T /F`,{shell:!0,encoding:"utf-8"}),{stderr:r}=t;r&&Ve.error("ChromeLauncher","taskkill stderr",r)}else this.chromeProcess.pid&&process.kill(-this.chromeProcess.pid,"SIGKILL")}catch(t){let r=`Chrome could not be killed ${t.message}`;Ve.warn("ChromeLauncher",r)}this.destroyTmp()}}destroyTmp(){if(this.outFile&&(this.fs.closeSync(this.outFile),delete this.outFile),this.userDataDir===void 0||this.opts.userDataDir!==void 0)return;this.errFile&&(this.fs.closeSync(this.errFile),delete this.errFile),(this.fs.rmSync||this.fs.rmdirSync)(this.userDataDir,{recursive:!0,force:!0,maxRetries:10})}};import s2 from"chrome-remote-interface";var i2=()=>i.hot.previewBar?"":`
  const preview = document.getElementById("preview-bar-iframe");
  if (preview) preview.style.display = "none";
`,o2=()=>`

  const injection = new Promise((resolve, reject) => {

    try {

      const inject = document.getElementById('syncify-hot-injection');

      if (inject) {
        console.log('Script already injected.');
        return resolve();
      }

      const script = document.createElement('script');
      script.setAttribute('spx-eval', 'false');
      script.setAttribute('id', 'syncify-hot-injection');
      script.setAttribute('src', 'http://localhost:${i.hot.server}/hot.min.js');

      script.onload = () => {

        // console.log('Script loaded successfully.');

        window.syncify.connect({
          server: ${i.hot.server},
          socket: ${i.hot.socket},
          strategy: "${i.hot.strategy}",
          method: "${i.hot.method}"
        });

        resolve();

      };

      script.onerror = (e) => {
        console.error('Failed to load script:', e);
        reject(new Error('Script load error'));
      };

      document.head.appendChild(script);
      // console.log('Script appended to the document.');

    } catch (err) {

      // console.error('Error during script injection:', err);
      reject(err);

    }
  });

  injection.then(() => {

    ${i.hot.loadEventJS}

  });
`,Ah=async()=>{try{let e=await $h({port:9222,chromeFlags:i.hot.chromeFlags,ignoreDefaultFlags:!0,userDataDir:i.dirs.chrome}),t=await s2({port:e.port}),{Page:r,Runtime:n}=t;await n.enable(),await r.enable(),await r.navigate({url:`https://${i.sync.themes[0].store}?preview_theme_id=${i.sync.themes[0].id}`}),await r.loadEventFired(async()=>{await n.evaluate({returnByValue:!0,awaitPromise:!0,expression:`
            ${i2()}
            ${i.mode.hot?o2():""}
          `})}),i.mode.hot&&r.navigatedWithinDocument(async s=>{await n.evaluate({returnByValue:!0,awaitPromise:!0,expression:`
            window.syncify.sections.load();
          `})}),process.on("exit",()=>e.kill())}catch(e){console.error("An error occurred:",e)}};async function Th(e,t){if(T.start("runtime"),Bt(i),await id(),await Pu(),await f2(),await _m(),i.mode.setup||i.mode.strap||i.mode.themes||(process.env.SYNCIFY_ENV=i.env.dev?"dev":"prod",process.env.SYNCIFY_WATCH=String(i.mode.watch),gd(e),qd(e),Bt.modes(i),await dd(e),i.mode.themes)||(u2(),c2(),Hd(),Ed(),await Promise.all([vl(),Cl(),Jo(),$l(),hd()]).catch(n=>{Ht(n,{details:"Directory and path generation error"})}),i.mode.themes))return;ld(),kd(),l2(),i.mode.build||Bt.stores(i),await pd(),await Td(),await Nd(),await Rd();let r=await Promise.all([Md(),Im()]).catch(n=>{Ht(n,{details:"Runtime error"})});return Bt.warnings(i),i.mode.build||Bt.time(),await Ah().catch(n=>{console.error(n),process.exit(1)}),r}function u2(){(i.cmd.watch||i.cmd.upload)&&(i.watch=new a2({persistent:!0,ignoreInitial:!0,usePolling:!0,interval:75,binaryInterval:100,ignored:["*.map"],ignorePermissionErrors:!0}),i.watch=kc(i.watch,{has:{value(e,t=i.cwd){return i.watch._watched.has(t)?i.watch._watched.get(t).items.has(e):!1}},paths:{get(){return Cr(this._closers.keys())}},watching:{get(){return i.watch._watched}}}))}function c2(){if(x("processors",i.config)&&I(process.config))for(let e in i.config.processors)De(i.config.processors[e])||(R(i.config.processors[e])?i.processor[e].config=i.config.processors[e]:I(i.config.processors[e])&&(e==="esbuild"?i.processor[e]=be(i.processor[e],i.config.processors[e]):i.processor[e].config=be(i.processor[e].config,i.config.processors[e])))}function l2(){if(x("plugins",i.config)&&R(i.config.plugins))for(let e of i.config.plugins)x("onInit",e)&&e.onInit.call({...i},i.config),x("onChange",e)&&i.plugins.onChange.push([e.name,e.onChange]),x("onTransform",e)&&i.plugins.onTransform.push([e.name,e.onTransform]),i.mode.watch&&(x("onWatch",e)&&i.plugins.onWatch.push([e.name,e.onWatch]),x("onReload",e)&&i.plugins.onReload.push([e.name,e.onReload])),i.mode.build&&x("onBuild",e)&&i.plugins.onBuild.push([e.name,e.onBuild])}async function f2(){let e=await nd();e!==null?i.config=e:x("syncify",i.pkg)&&(x("config",i.pkg.syncify)?i.config=i.pkg.syncify.config:!x("stores",i.pkg.syncify)&&i.cmd.setup===!1&&!i.cmd.strap&&bl(i.cwd))}l();import{prompt as ac}from"enquirer";l();async function Lh(e){return Cn.get("/oauth/access_scopes.json",e).then(({data:t})=>t).catch(t=>!1)}async function Bh(){let e=X({type:"info"}),t={store:null,domain:null,token:null,ngrok:null,version:null,scopes:{read_content:!1,read_files:!1,read_online_store_pages:!1,read_themes:!1,write_content:!1,write_files:!1,write_online_store_pages:!1,write_themes:!1}},r=ne({},ks,{pointer(f,p){return this.state.index===p?E.stub.trimEnd()+" ":E.trim+" "}}),n=[`Existing Setup${k}  `,`Shopify Domain${k}  `,`Admin API Token${k} `,`Ngrok API Token${k} `];if(i.env.file!==null)return L(e.Line("Environment references exist, setup can only be used for new installations.").NL.End(i.log.group).BR.toString());let{domain:s}=await ac({type:"input",name:"domain",message:n[1],required:!0,format(f){return f+".myshopify.com"},validate(f){return this.state.symbols.pointer="  ",f===".myshopify.com"||f.length===0?"Enter myshopify.com domain name":!0},theme:r}),{token:o}=await ac({type:"input",name:"token",required:!0,message:n[2],theme:r,validate(f){return this.state.symbols.pointer="  ",!f||f.length<10?"Invalid Admin API Token":!0}}),{ngrok:a}=await ac({type:"input",name:"ngrok",required:!0,message:n[3],theme:r,validate(f){return this.state.symbols.pointer="  ",!f||f.length<10?"Invalid Ngrok API Token":!0}}),u=await Lh({baseURL:`https://${s}.myshopify.com/admin`,headers:{"X-Shopify-Access-Token":o.trim()}});if(Ae(u))return L(e.NL.Wrap(`Connection failed on ${ge(`${s}.myshopify.com`)}. Please check the API Access Token`,"is correct and you have set the right access scopes, then try again.",ae).NL.End(i.log.group).BR.toString());if(u.access_scopes.length>0){e.Newline();for(let{handle:f}of u.access_scopes)f in t.scopes&&(t.scopes[f]=!0,e.Line(`${Dc} ${f}`))}let c=0;for(let f in t.scopes)t.scopes[f]===!1&&(e.Line(`${vr} ${f}`,ae),c=c+1);if(c>0)return L(e.NL.Wrap("Syncify requires read and write access to all the above resources.","Provide access to all scopes listed in red (above) and try again.",ae).NL.End(i.log.group).BR.toString());L(e.toLine()),t.store=s,t.domain=`${s}.myshopify.com`,t.token=o.trim(),t.ngrok=a.trim()}l();import{prompt as m2}from"enquirer";import{copy as d2}from"fs-extra";import{join as Eo}from"node:path";async function Rh(){let e=Eo(i.cwd,"node_modules","@syncify/cli","straps"),t={dawn:Eo(e,"dawn"),dusk:Eo(e,"dusk"),silk:Eo(e,"silk")},r=ne({},ks,{pointer(s,o){return this.state.index===o?E.stub.trimEnd()+" ":E.trim+" "}}),{template:n}=await m2({type:"select",name:"template",message:`Choose Strap${k}    `,required:!0,theme:r,choices:[{name:"dusk",message:"Dusk  ",hint:"Stripped theme"},{name:"dawn",message:"Dawn  ",hint:"Shopify Slop"},{name:"silk",message:"Silk  ",hint:"Custom theme"}]});d2(t[n],i.cwd)}l();async function uc(e,t,r){if(e.help)return cd(e);if(await Th(e,t),i.mode.themes)return Vm();if(i.mode.setup)return Bh();if(i.mode.strap)return Rh();h2.stdin.on("data",ud);try{if(i.env.ready=!0,i.mode.build&&i.mode.export===!1)return eo(r);if(i.mode.watch)return Um(r);if(i.mode.upload)return rp(r);if(i.mode.import)return Ym(r);if(i.mode.export&&i.mode.publish===!1)return uo(r);if(i.mode.publish)return ad(r);if(i.mode.interactive)return console.log("TODO: --interactive is not yet supported");if(i.mode.metafields)return console.log("TODO: --metafields is not yet supported")}catch(n){console.log(n)}}uc(Tl(g2,{config:{type:"string",short:"c"},input:{type:"string",short:"i"},output:{type:"string",short:"o"},theme:{type:"string",short:"t"},spawn:{type:"string",short:"s"},delete:{type:"string",short:"d"},filter:{type:"string",short:"f"},help:{type:"boolean",short:"h",default:!1},publish:{type:"boolean",default:!1},release:{type:"string"},bump:{type:"string"},setup:{type:"boolean",default:!1},dev:{type:"boolean",default:!0},prod:{type:"boolean",default:!1},import:{type:"boolean",default:!1},export:{type:"boolean",default:!1},build:{type:"boolean",short:"b",default:!1},watch:{type:"boolean",short:"w",default:!1},upload:{type:"boolean",short:"u",default:!1},terse:{type:"boolean",default:!1},hot:{type:"boolean",default:!1},interactive:{type:"boolean",default:!1},script:{type:"boolean",default:!1},style:{type:"boolean",default:!1},svg:{type:"boolean",default:!1},image:{type:"boolean",default:!1},metafields:{type:"boolean",default:!1},pages:{type:"boolean",default:!1},redirects:{type:"boolean",default:!1},doctor:{type:"boolean",default:!1},clean:{type:"boolean",default:!1},silent:{type:"boolean",default:!1},force:{type:"boolean",default:!1},cache:{type:"boolean",default:!1}})).catch(console.error);
/*! Bundled license information:

normalize-path/index.js:
  (*!
   * normalize-path <https://github.com/jonschlinkert/normalize-path>
   *
   * Copyright (c) 2014-2018, Jon Schlinkert.
   * Released under the MIT License.
   *)

imurmurhash/imurmurhash.js:
  (**
   * @preserve
   * JS Implementation of incremental MurmurHash3 (r150) (as of May 10, 2013)
   *
   * @author <a href="mailto:jensyt@gmail.com">Jens Taylor</a>
   * @see http://github.com/homebrewing/brauhaus-diff
   * @author <a href="mailto:gary.court@gmail.com">Gary Court</a>
   * @see http://github.com/garycourt/murmurhash-js
   * @author <a href="mailto:aappleby@gmail.com">Austin Appleby</a>
   * @see http://sites.google.com/site/murmurhash/
   *)

lighthouse-logger/index.js:
  (**
   * @license Copyright 2016 The Lighthouse Authors. All Rights Reserved.
   * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0
   * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.
   *)

chrome-launcher/dist/utils.js:
  (**
   * @license Copyright 2017 Google Inc. All Rights Reserved.
   * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0
   * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.
   *)

chrome-launcher/dist/chrome-finder.js:
  (**
   * @license Copyright 2016 Google Inc. All Rights Reserved.
   * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0
   * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.
   *)

chrome-launcher/dist/random-port.js:
  (**
   * @license Copyright 2016 Google Inc. All Rights Reserved.
   * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0
   * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.
   *)

chrome-launcher/dist/flags.js:
  (**
   * @license Copyright 2017 Google Inc. All Rights Reserved.
   * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0
   * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.
   *)

chrome-launcher/dist/chrome-launcher.js:
  (**
   * @license Copyright 2016 Google Inc. All Rights Reserved.
   * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0
   * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.
   *)
*/
