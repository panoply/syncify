var Md=Object.create;var ao=Object.defineProperty;var qd=Object.getOwnPropertyDescriptor;var Gd=Object.getOwnPropertyNames;var Hd=Object.getPrototypeOf,zd=Object.prototype.hasOwnProperty;var Xe=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,r)=>(typeof require<"u"?require:t)[r]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')});var Ud=(e,t)=>()=>(e&&(t=e(e=0)),t);var ge=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Vd=(e,t)=>{for(var r in t)ao(e,r,{get:t[r],enumerable:!0})},Jd=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of Gd(t))!zd.call(e,s)&&s!==r&&ao(e,s,{get:()=>t[s],enumerable:!(n=qd(t,s))||n.enumerable});return e};var Bt=(e,t,r)=>(r=e!=null?Md(Hd(e)):{},Jd(t||!e||!e.__esModule?ao(r,"default",{value:e,enumerable:!0}):r,e));import{fileURLToPath as Yd}from"url";var Kd,b,l=Ud(()=>{Kd=()=>Yd(import.meta.url),b=Kd()});var ku=ge((Cb,Pu)=>{"use strict";l();function Xd(e,t){var r=e;t.slice(0,-1).forEach(function(s){r=r[s]||{}});var n=t[t.length-1];return n in r}function Ru(e){return typeof e=="number"||/^0x[0-9a-f]+$/i.test(e)?!0:/^[-+]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(e)}function Nu(e,t){return t==="constructor"&&typeof e[t]=="function"||t==="__proto__"}Pu.exports=function(e,t){t||(t={});var r={bools:{},strings:{},unknownFn:null};typeof t.unknown=="function"&&(r.unknownFn=t.unknown),typeof t.boolean=="boolean"&&t.boolean?r.allBools=!0:[].concat(t.boolean).filter(Boolean).forEach(function(B){r.bools[B]=!0});var n={};function s(B){return n[B].some(function(G){return r.bools[G]})}Object.keys(t.alias||{}).forEach(function(B){n[B]=[].concat(t.alias[B]),n[B].forEach(function(G){n[G]=[B].concat(n[B].filter(function(ye){return G!==ye}))})}),[].concat(t.string).filter(Boolean).forEach(function(B){r.strings[B]=!0,n[B]&&[].concat(n[B]).forEach(function(G){r.strings[G]=!0})});var o=t.default||{},a={_:[]};function u(B,G){return r.allBools&&/^--[^=]+$/.test(G)||r.strings[B]||r.bools[B]||n[B]}function c(B,G,ye){for(var X=B,J=0;J<G.length-1;J++){var re=G[J];if(Nu(X,re))return;X[re]===void 0&&(X[re]={}),(X[re]===Object.prototype||X[re]===Number.prototype||X[re]===String.prototype)&&(X[re]={}),X[re]===Array.prototype&&(X[re]=[]),X=X[re]}var ve=G[G.length-1];Nu(X,ve)||((X===Object.prototype||X===Number.prototype||X===String.prototype)&&(X={}),X===Array.prototype&&(X=[]),X[ve]===void 0||r.bools[ve]||typeof X[ve]=="boolean"?X[ve]=ye:Array.isArray(X[ve])?X[ve].push(ye):X[ve]=[X[ve],ye])}function f(B,G,ye){if(!(ye&&r.unknownFn&&!u(B,ye)&&r.unknownFn(ye)===!1)){var X=!r.strings[B]&&Ru(G)?Number(G):G;c(a,B.split("."),X),(n[B]||[]).forEach(function(J){c(a,J.split("."),X)})}}Object.keys(r.bools).forEach(function(B){f(B,o[B]===void 0?!1:o[B])});var p=[];e.indexOf("--")!==-1&&(p=e.slice(e.indexOf("--")+1),e=e.slice(0,e.indexOf("--")));for(var d=0;d<e.length;d++){var y=e[d],D,g;if(/^--.+=/.test(y)){var F=y.match(/^--([^=]+)=([\s\S]*)$/);D=F[1];var q=F[2];r.bools[D]&&(q=q!=="false"),f(D,q,y)}else if(/^--no-.+/.test(y))D=y.match(/^--no-(.+)/)[1],f(D,!1,y);else if(/^--.+/.test(y))D=y.match(/^--(.+)/)[1],g=e[d+1],g!==void 0&&!/^(-|--)[^-]/.test(g)&&!r.bools[D]&&!r.allBools&&(!n[D]||!s(D))?(f(D,g,y),d+=1):/^(true|false)$/.test(g)?(f(D,g==="true",y),d+=1):f(D,r.strings[D]?"":!0,y);else if(/^-[^-]+/.test(y)){for(var O=y.slice(1,-1).split(""),K=!1,P=0;P<O.length;P++){if(g=y.slice(P+2),g==="-"){f(O[P],g,y);continue}if(/[A-Za-z]/.test(O[P])&&g[0]==="="){f(O[P],g.slice(1),y),K=!0;break}if(/[A-Za-z]/.test(O[P])&&/-?\d+(\.\d*)?(e-?\d+)?$/.test(g)){f(O[P],g,y),K=!0;break}if(O[P+1]&&O[P+1].match(/\W/)){f(O[P],y.slice(P+2),y),K=!0;break}else f(O[P],r.strings[O[P]]?"":!0,y)}D=y.slice(-1)[0],!K&&D!=="-"&&(e[d+1]&&!/^(-|--)[^-]/.test(e[d+1])&&!r.bools[D]&&(!n[D]||!s(D))?(f(D,e[d+1],y),d+=1):e[d+1]&&/^(true|false)$/.test(e[d+1])?(f(D,e[d+1]==="true",y),d+=1):f(D,r.strings[D]?"":!0,y))}else if((!r.unknownFn||r.unknownFn(y)!==!1)&&a._.push(r.strings._||!Ru(y)?y:Number(y)),t.stopEarly){a._.push.apply(a._,e.slice(d+1));break}}return Object.keys(o).forEach(function(B){Xd(a,B.split("."))||(c(a,B.split("."),o[B]),(n[B]||[]).forEach(function(G){c(a,G.split("."),o[B])}))}),t["--"]?a["--"]=p.slice():p.forEach(function(B){a._.push(B)}),a}});var Vu=ge((z2,mo)=>{"use strict";l();var ng=Object.prototype.hasOwnProperty,ct="~";function Ln(){}Object.create&&(Ln.prototype=Object.create(null),new Ln().__proto__||(ct=!1));function sg(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function Uu(e,t,r,n,s){if(typeof r!="function")throw new TypeError("The listener must be a function");var o=new sg(r,n||e,s),a=ct?ct+t:t;return e._events[a]?e._events[a].fn?e._events[a]=[e._events[a],o]:e._events[a].push(o):(e._events[a]=o,e._eventsCount++),e}function Ns(e,t){--e._eventsCount===0?e._events=new Ln:delete e._events[t]}function nt(){this._events=new Ln,this._eventsCount=0}nt.prototype.eventNames=function(){var t=[],r,n;if(this._eventsCount===0)return t;for(n in r=this._events)ng.call(r,n)&&t.push(ct?n.slice(1):n);return Object.getOwnPropertySymbols?t.concat(Object.getOwnPropertySymbols(r)):t};nt.prototype.listeners=function(t){var r=ct?ct+t:t,n=this._events[r];if(!n)return[];if(n.fn)return[n.fn];for(var s=0,o=n.length,a=new Array(o);s<o;s++)a[s]=n[s].fn;return a};nt.prototype.listenerCount=function(t){var r=ct?ct+t:t,n=this._events[r];return n?n.fn?1:n.length:0};nt.prototype.emit=function(t,r,n,s,o,a){var u=ct?ct+t:t;if(!this._events[u])return!1;var c=this._events[u],f=arguments.length,p,d;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),f){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,r),!0;case 3:return c.fn.call(c.context,r,n),!0;case 4:return c.fn.call(c.context,r,n,s),!0;case 5:return c.fn.call(c.context,r,n,s,o),!0;case 6:return c.fn.call(c.context,r,n,s,o,a),!0}for(d=1,p=new Array(f-1);d<f;d++)p[d-1]=arguments[d];c.fn.apply(c.context,p)}else{var y=c.length,D;for(d=0;d<y;d++)switch(c[d].once&&this.removeListener(t,c[d].fn,void 0,!0),f){case 1:c[d].fn.call(c[d].context);break;case 2:c[d].fn.call(c[d].context,r);break;case 3:c[d].fn.call(c[d].context,r,n);break;case 4:c[d].fn.call(c[d].context,r,n,s);break;default:if(!p)for(D=1,p=new Array(f-1);D<f;D++)p[D-1]=arguments[D];c[d].fn.apply(c[d].context,p)}}return!0};nt.prototype.on=function(t,r,n){return Uu(this,t,r,n,!1)};nt.prototype.once=function(t,r,n){return Uu(this,t,r,n,!0)};nt.prototype.removeListener=function(t,r,n,s){var o=ct?ct+t:t;if(!this._events[o])return this;if(!r)return Ns(this,o),this;var a=this._events[o];if(a.fn)a.fn===r&&(!s||a.once)&&(!n||a.context===n)&&Ns(this,o);else{for(var u=0,c=[],f=a.length;u<f;u++)(a[u].fn!==r||s&&!a[u].once||n&&a[u].context!==n)&&c.push(a[u]);c.length?this._events[o]=c.length===1?c[0]:c:Ns(this,o)}return this};nt.prototype.removeAllListeners=function(t){var r;return t?(r=ct?ct+t:t,this._events[r]&&Ns(this,r)):(this._events=new Ln,this._eventsCount=0),this};nt.prototype.off=nt.prototype.removeListener;nt.prototype.addListener=nt.prototype.on;nt.prefixed=ct;nt.EventEmitter=nt;typeof mo<"u"&&(mo.exports=nt)});var fc=ge((lc,$o)=>{"use strict";l();Object.defineProperty(lc,"__esModule",{value:!0});var{round:Wr,floor:Xu,max:dg}=Math,sc=e=>{let[,t]=/([a-f\d]{3,6})/i.exec(e)||[],r=t?t.length:0;if(r===3)t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2];else if(r!==6)return[0,0,0];let n=parseInt(t,16);return[n>>16&255,n>>8&255,255&n]},ic=(e,t,r)=>e===t&&t===r?e<8?16:e>248?231:Wr((e-8)/247*24)+232:16+36*Wr(e/51)+6*Wr(t/51)+Wr(r/51),So=e=>{let t,r,n,s,o,a;return e<8?30+e:e<16?e-8+90:(e>=232?t=r=n=(10*(e-232)+8)/255:(a=(e-=16)%36,t=Xu(e/36)/5,r=Xu(a/6)/5,n=a%6/5),s=2*dg(t,r,n),s===0?30:(o=30+(Wr(n)<<2|Wr(r)<<1|Wr(t)),s===2?o+60:o))},Zu=(e,t,r)=>So(ic(e,t,r)),Fo=(e=>{let t=K=>!!c.find(P=>K.test(P)),r=globalThis,n=r.Deno,s=n!=null,o=r.process||n||{},a=o.stdout,u=(s?n.build.os:o.platform)==="win32",c=o.argv||o.args||[],f=o.env||{},p=-1;if(s)try{f=f.toObject()}catch{p=0}let d="FORCE_COLOR",y=f[d],D=parseInt(y),g=y==="false"?0:isNaN(D)?3:D,F="NO_COLOR"in f||g===0||t(/^-{1,2}(no-color|color=(false|never))$/),q=d in f&&g||t(/^-{1,2}color=?(true|always)?$/),O=(f.NEXT_RUNTIME||"").indexOf("edge")>-1||"PM2_HOME"in f&&"pm_id"in f||(s?n.isatty(1):a&&"isTTY"in a);return F?0:(p<0&&(p=((K,P,B)=>{let{TERM:G,COLORTERM:ye}=K;return"TF_BUILD"in K?1:"TEAMCITY_VERSION"in K?2:"CI"in K?["GITHUB_ACTIONS","GITEA_ACTIONS"].some(X=>X in K)?3:1:!P||/-mono|dumb/i.test(G)?0:B||ye==="truecolor"||ye==="24bit"||G==="xterm-kitty"?3:/-256(colou?r)?$/i.test(G)?2:/^screen|^tmux|^xterm|^vt[1-5][0-9]([0-9])?|^ansi|color|cygwin|linux|mintty|rxvt/i.test(G)?1:3})(f,O,u)),q&&p===0?3:p)})(),oc=Fo>0,ac={open:"",close:""},Be=oc?(e,t)=>({open:`\x1B[${e}m`,close:`\x1B[${t}m`}):()=>ac,yr=39,Dr=49,Qu=e=>(t,r,n)=>e(ic(t,r,n)),ec=e=>t=>{let[r,n,s]=sc(t);return e(r,n,s)},Ps=e=>Be(`38;5;${e}`,yr),ks=e=>Be(`48;5;${e}`,Dr),In=(e,t,r)=>Be(`38;2;${e};${t};${r}`,yr),Os=(e,t,r)=>Be(`48;2;${e};${t};${r}`,Dr);Fo===1?(Ps=e=>Be(So(e),yr),ks=e=>Be(So(e)+10,Dr),In=(e,t,r)=>Be(Zu(e,t,r),yr),Os=(e,t,r)=>Be(Zu(e,t,r)+10,Dr)):Fo===2&&(In=Qu(Ps),Os=Qu(ks));var kn,xo,_n={ansi256:Ps,bgAnsi256:ks,fg:Ps,bg:ks,rgb:In,bgRgb:Os,hex:ec(In),bgHex:ec(Os),visible:ac,reset:Be(0,0),inverse:Be(7,27),hidden:Be(8,28),bold:Be(1,22),dim:Be(2,22),italic:Be(3,23),underline:Be(4,24),strikethrough:Be(9,29),strike:Be(9,29),grey:Be(90,yr),gray:Be(90,yr),bgGrey:Be(100,Dr),bgGray:Be(100,Dr)},gg=["black","red","green","yellow","blue","magenta","cyan","white"],tc="Bright",On=30;for(kn of gg)xo="bg"+kn[0].toUpperCase()+kn.slice(1),_n[kn]=Be(On,yr),_n[kn+tc]=Be(On+60,yr),_n[xo]=Be(On+10,Dr),_n[xo+tc]=Be(On+70,Dr),On++;var{defineProperty:hg,defineProperties:yg,setPrototypeOf:uc}=Object,Dg=/[Â›][[()#;?]*(?:[0-9]{1,4}(?:;[0-9]{0,4})*)?[0-9A-ORZcf-nqry=><]/g,bg=/(\r?\n)/g,rc={},nc=({_p:e},{open:t,close:r})=>{let n=(a,...u)=>{if(!a)return"";let c=n._p,{_a:f,_b:p}=c,d=a.raw!=null?String.raw(a,...u):""+a;if(d.includes("\x1B"))for(;c!=null;){let y=c.close,D=y.length;if(D){let g,F=0,q="";for(;~(g=d.indexOf(y,F));)q+=d.slice(F,g)+c.open,F=g+D;F&&(d=q+d.slice(F))}c=c._p}return d.includes(`
`)&&(d=d.replace(bg,p+"$1"+f)),f+d+p},s=t,o=r;return e!=null&&(s=e._a+t,o=r+e._b),uc(n,vo),n._p={open:t,close:r,_a:s,_b:o,_p:e},n.open=s,n.close=o,n},cc=function(){let e=t=>""+t;return e.isSupported=()=>oc,e.strip=t=>t.replace(Dg,""),e.extend=t=>{for(let r in t){let n=t[r],s=typeof n,o=s==="string"?In(...sc(n)):n;rc[r]=s==="function"?{get(){return(...a)=>nc(this,n(...a))}}:{get(){let a=nc(this,o);return hg(this,r,{value:a}),a}}}vo=yg({},rc),uc(e,vo)},e.extend(_n),e},vo,wg=new cc;$o.exports=wg,$o.exports.Ansis=cc});var fs=ge((MC,of)=>{"use strict";l();var c0=Xe("path"),rr="\\\\/",tf=`[^${rr}]`,fr="\\.",l0="\\+",f0="\\?",yi="\\/",p0="(?=.)",rf="[^/]",Da=`(?:${yi}|$)`,nf=`(?:^|${yi})`,ba=`${fr}{1,2}${Da}`,m0=`(?!${fr})`,d0=`(?!${nf}${ba})`,g0=`(?!${fr}{0,1}${Da})`,h0=`(?!${ba})`,y0=`[^.${yi}]`,D0=`${rf}*?`,sf={DOT_LITERAL:fr,PLUS_LITERAL:l0,QMARK_LITERAL:f0,SLASH_LITERAL:yi,ONE_CHAR:p0,QMARK:rf,END_ANCHOR:Da,DOTS_SLASH:ba,NO_DOT:m0,NO_DOTS:d0,NO_DOT_SLASH:g0,NO_DOTS_SLASH:h0,QMARK_NO_DOT:y0,STAR:D0,START_ANCHOR:nf},b0={...sf,SLASH_LITERAL:`[${rr}]`,QMARK:tf,STAR:`${tf}*?`,DOTS_SLASH:`${fr}{1,2}(?:[${rr}]|$)`,NO_DOT:`(?!${fr})`,NO_DOTS:`(?!(?:^|[${rr}])${fr}{1,2}(?:[${rr}]|$))`,NO_DOT_SLASH:`(?!${fr}{0,1}(?:[${rr}]|$))`,NO_DOTS_SLASH:`(?!${fr}{1,2}(?:[${rr}]|$))`,QMARK_NO_DOT:`[^.${rr}]`,START_ANCHOR:`(?:^|[${rr}])`,END_ANCHOR:`(?:[${rr}]|$)`},w0={alnum:"a-zA-Z0-9",alpha:"a-zA-Z",ascii:"\\x00-\\x7F",blank:" \\t",cntrl:"\\x00-\\x1F\\x7F",digit:"0-9",graph:"\\x21-\\x7E",lower:"a-z",print:"\\x20-\\x7E ",punct:"\\-!\"#$%&'()\\*+,./:;<=>?@[\\]^_`{|}~",space:" \\t\\r\\n\\v\\f",upper:"A-Z",word:"A-Za-z0-9_",xdigit:"A-Fa-f0-9"};of.exports={MAX_LENGTH:1024*64,POSIX_REGEX_SOURCE:w0,REGEX_BACKSLASH:/\\(?![*+?^${}(|)[\]])/g,REGEX_NON_SPECIAL_CHARS:/^[^@![\].,$*+?^{}()|\\/]+/,REGEX_SPECIAL_CHARS:/[-*+?.^${}(|)[\]]/,REGEX_SPECIAL_CHARS_BACKREF:/(\\?)((\W)(\3*))/g,REGEX_SPECIAL_CHARS_GLOBAL:/([-*+?.^${}(|)[\]])/g,REGEX_REMOVE_BACKSLASH:/(?:\[.*?[^\\]\]|\\(?=.))/g,REPLACEMENTS:{"***":"*","**/**":"**","**/**/**":"**"},CHAR_0:48,CHAR_9:57,CHAR_UPPERCASE_A:65,CHAR_LOWERCASE_A:97,CHAR_UPPERCASE_Z:90,CHAR_LOWERCASE_Z:122,CHAR_LEFT_PARENTHESES:40,CHAR_RIGHT_PARENTHESES:41,CHAR_ASTERISK:42,CHAR_AMPERSAND:38,CHAR_AT:64,CHAR_BACKWARD_SLASH:92,CHAR_CARRIAGE_RETURN:13,CHAR_CIRCUMFLEX_ACCENT:94,CHAR_COLON:58,CHAR_COMMA:44,CHAR_DOT:46,CHAR_DOUBLE_QUOTE:34,CHAR_EQUAL:61,CHAR_EXCLAMATION_MARK:33,CHAR_FORM_FEED:12,CHAR_FORWARD_SLASH:47,CHAR_GRAVE_ACCENT:96,CHAR_HASH:35,CHAR_HYPHEN_MINUS:45,CHAR_LEFT_ANGLE_BRACKET:60,CHAR_LEFT_CURLY_BRACE:123,CHAR_LEFT_SQUARE_BRACKET:91,CHAR_LINE_FEED:10,CHAR_NO_BREAK_SPACE:160,CHAR_PERCENT:37,CHAR_PLUS:43,CHAR_QUESTION_MARK:63,CHAR_RIGHT_ANGLE_BRACKET:62,CHAR_RIGHT_CURLY_BRACE:125,CHAR_RIGHT_SQUARE_BRACKET:93,CHAR_SEMICOLON:59,CHAR_SINGLE_QUOTE:39,CHAR_SPACE:32,CHAR_TAB:9,CHAR_UNDERSCORE:95,CHAR_VERTICAL_LINE:124,CHAR_ZERO_WIDTH_NOBREAK_SPACE:65279,SEP:c0.sep,extglobChars(e){return{"!":{type:"negate",open:"(?:(?!(?:",close:`))${e.STAR})`},"?":{type:"qmark",open:"(?:",close:")?"},"+":{type:"plus",open:"(?:",close:")+"},"*":{type:"star",open:"(?:",close:")*"},"@":{type:"at",open:"(?:",close:")"}}},globChars(e){return e===!0?b0:sf}}});var Di=ge(Ft=>{"use strict";l();var x0=Xe("path"),S0=process.platform==="win32",{REGEX_BACKSLASH:F0,REGEX_REMOVE_BACKSLASH:v0,REGEX_SPECIAL_CHARS:$0,REGEX_SPECIAL_CHARS_GLOBAL:E0}=fs();Ft.isObject=e=>e!==null&&typeof e=="object"&&!Array.isArray(e);Ft.hasRegexChars=e=>$0.test(e);Ft.isRegexChar=e=>e.length===1&&Ft.hasRegexChars(e);Ft.escapeRegex=e=>e.replace(E0,"\\$1");Ft.toPosixSlashes=e=>e.replace(F0,"/");Ft.removeBackslashes=e=>e.replace(v0,t=>t==="\\"?"":t);Ft.supportsLookbehinds=()=>{let e=process.version.slice(1).split(".").map(Number);return e.length===3&&e[0]>=9||e[0]===8&&e[1]>=10};Ft.isWindows=e=>e&&typeof e.windows=="boolean"?e.windows:S0===!0||x0.sep==="\\";Ft.escapeLast=(e,t,r)=>{let n=e.lastIndexOf(t,r);return n===-1?e:e[n-1]==="\\"?Ft.escapeLast(e,t,n-1):`${e.slice(0,n)}\\${e.slice(n)}`};Ft.removePrefix=(e,t={})=>{let r=e;return r.startsWith("./")&&(r=r.slice(2),t.prefix="./"),r};Ft.wrapOutput=(e,t={},r={})=>{let n=r.contains?"":"^",s=r.contains?"":"$",o=`${n}(?:${e})${s}`;return t.negated===!0&&(o=`(?:^(?!${o}).*$)`),o}});var df=ge((zC,mf)=>{"use strict";l();var af=Di(),{CHAR_ASTERISK:wa,CHAR_AT:C0,CHAR_BACKWARD_SLASH:ps,CHAR_COMMA:A0,CHAR_DOT:xa,CHAR_EXCLAMATION_MARK:Sa,CHAR_FORWARD_SLASH:pf,CHAR_LEFT_CURLY_BRACE:Fa,CHAR_LEFT_PARENTHESES:va,CHAR_LEFT_SQUARE_BRACKET:T0,CHAR_PLUS:B0,CHAR_QUESTION_MARK:uf,CHAR_RIGHT_CURLY_BRACE:L0,CHAR_RIGHT_PARENTHESES:cf,CHAR_RIGHT_SQUARE_BRACKET:R0}=fs(),lf=e=>e===pf||e===ps,ff=e=>{e.isPrefix!==!0&&(e.depth=e.isGlobstar?1/0:1)},N0=(e,t)=>{let r=t||{},n=e.length-1,s=r.parts===!0||r.scanToEnd===!0,o=[],a=[],u=[],c=e,f=-1,p=0,d=0,y=!1,D=!1,g=!1,F=!1,q=!1,O=!1,K=!1,P=!1,B=!1,G=!1,ye=0,X,J,re={value:"",depth:0,isGlob:!1},ve=()=>f>=n,E=()=>c.charCodeAt(f+1),Pe=()=>(X=J,c.charCodeAt(++f));for(;f<n;){J=Pe();let at;if(J===ps){K=re.backslashes=!0,J=Pe(),J===Fa&&(O=!0);continue}if(O===!0||J===Fa){for(ye++;ve()!==!0&&(J=Pe());){if(J===ps){K=re.backslashes=!0,Pe();continue}if(J===Fa){ye++;continue}if(O!==!0&&J===xa&&(J=Pe())===xa){if(y=re.isBrace=!0,g=re.isGlob=!0,G=!0,s===!0)continue;break}if(O!==!0&&J===A0){if(y=re.isBrace=!0,g=re.isGlob=!0,G=!0,s===!0)continue;break}if(J===L0&&(ye--,ye===0)){O=!1,y=re.isBrace=!0,G=!0;break}}if(s===!0)continue;break}if(J===pf){if(o.push(f),a.push(re),re={value:"",depth:0,isGlob:!1},G===!0)continue;if(X===xa&&f===p+1){p+=2;continue}d=f+1;continue}if(r.noext!==!0&&(J===B0||J===C0||J===wa||J===uf||J===Sa)===!0&&E()===va){if(g=re.isGlob=!0,F=re.isExtglob=!0,G=!0,J===Sa&&f===p&&(B=!0),s===!0){for(;ve()!==!0&&(J=Pe());){if(J===ps){K=re.backslashes=!0,J=Pe();continue}if(J===cf){g=re.isGlob=!0,G=!0;break}}continue}break}if(J===wa){if(X===wa&&(q=re.isGlobstar=!0),g=re.isGlob=!0,G=!0,s===!0)continue;break}if(J===uf){if(g=re.isGlob=!0,G=!0,s===!0)continue;break}if(J===T0){for(;ve()!==!0&&(at=Pe());){if(at===ps){K=re.backslashes=!0,Pe();continue}if(at===R0){D=re.isBracket=!0,g=re.isGlob=!0,G=!0;break}}if(s===!0)continue;break}if(r.nonegate!==!0&&J===Sa&&f===p){P=re.negated=!0,p++;continue}if(r.noparen!==!0&&J===va){if(g=re.isGlob=!0,s===!0){for(;ve()!==!0&&(J=Pe());){if(J===va){K=re.backslashes=!0,J=Pe();continue}if(J===cf){G=!0;break}}continue}break}if(g===!0){if(G=!0,s===!0)continue;break}}r.noext===!0&&(F=!1,g=!1);let Ae=c,dr="",S="";p>0&&(dr=c.slice(0,p),c=c.slice(p),d-=p),Ae&&g===!0&&d>0?(Ae=c.slice(0,d),S=c.slice(d)):g===!0?(Ae="",S=c):Ae=c,Ae&&Ae!==""&&Ae!=="/"&&Ae!==c&&lf(Ae.charCodeAt(Ae.length-1))&&(Ae=Ae.slice(0,-1)),r.unescape===!0&&(S&&(S=af.removeBackslashes(S)),Ae&&K===!0&&(Ae=af.removeBackslashes(Ae)));let v={prefix:dr,input:e,start:p,base:Ae,glob:S,isBrace:y,isBracket:D,isGlob:g,isExtglob:F,isGlobstar:q,negated:P,negatedExtglob:B};if(r.tokens===!0&&(v.maxDepth=0,lf(J)||a.push(re),v.tokens=a),r.parts===!0||r.tokens===!0){let at;for(let De=0;De<o.length;De++){let zt=at?at+1:p,Ut=o[De],vt=e.slice(zt,Ut);r.tokens&&(De===0&&p!==0?(a[De].isPrefix=!0,a[De].value=dr):a[De].value=vt,ff(a[De]),v.maxDepth+=a[De].depth),(De!==0||vt!=="")&&u.push(vt),at=Ut}if(at&&at+1<e.length){let De=e.slice(at+1);u.push(De),r.tokens&&(a[a.length-1].value=De,ff(a[a.length-1]),v.maxDepth+=a[a.length-1].depth)}v.slashes=o,v.parts=u}return v};mf.exports=N0});var yf=ge((VC,hf)=>{"use strict";l();var bi=fs(),Tt=Di(),{MAX_LENGTH:wi,POSIX_REGEX_SOURCE:P0,REGEX_NON_SPECIAL_CHARS:k0,REGEX_SPECIAL_CHARS_BACKREF:O0,REPLACEMENTS:gf}=bi,_0=(e,t)=>{if(typeof t.expandRange=="function")return t.expandRange(...e,t);e.sort();let r=`[${e.join("-")}]`;try{new RegExp(r)}catch{return e.map(s=>Tt.escapeRegex(s)).join("..")}return r},wn=(e,t)=>`Missing ${e}: "${t}" - use "\\\\${t}" to match literal characters`,$a=(e,t)=>{if(typeof e!="string")throw new TypeError("Expected a string");e=gf[e]||e;let r={...t},n=typeof r.maxLength=="number"?Math.min(wi,r.maxLength):wi,s=e.length;if(s>n)throw new SyntaxError(`Input length: ${s}, exceeds maximum allowed length: ${n}`);let o={type:"bos",value:"",output:r.prepend||""},a=[o],u=r.capture?"":"?:",c=Tt.isWindows(t),f=bi.globChars(c),p=bi.extglobChars(f),{DOT_LITERAL:d,PLUS_LITERAL:y,SLASH_LITERAL:D,ONE_CHAR:g,DOTS_SLASH:F,NO_DOT:q,NO_DOT_SLASH:O,NO_DOTS_SLASH:K,QMARK:P,QMARK_NO_DOT:B,STAR:G,START_ANCHOR:ye}=f,X=j=>`(${u}(?:(?!${ye}${j.dot?F:d}).)*?)`,J=r.dot?"":q,re=r.dot?P:B,ve=r.bash===!0?X(r):G;r.capture&&(ve=`(${ve})`),typeof r.noext=="boolean"&&(r.noextglob=r.noext);let E={input:e,index:-1,start:0,dot:r.dot===!0,consumed:"",output:"",prefix:"",backtrack:!1,negated:!1,brackets:0,braces:0,parens:0,quotes:0,globstar:!1,tokens:a};e=Tt.removePrefix(e,E),s=e.length;let Pe=[],Ae=[],dr=[],S=o,v,at=()=>E.index===s-1,De=E.peek=(j=1)=>e[E.index+j],zt=E.advance=()=>e[++E.index]||"",Ut=()=>e.slice(E.index+1),vt=(j="",Te=0)=>{E.consumed+=j,E.index+=Te},$s=j=>{E.output+=j.output!=null?j.output:j.value,vt(j.value)},jd=()=>{let j=1;for(;De()==="!"&&(De(2)!=="("||De(3)==="?");)zt(),E.start++,j++;return j%2===0?!1:(E.negated=!0,E.start++,!0)},Es=j=>{E[j]++,dr.push(j)},Nr=j=>{E[j]--,dr.pop()},ce=j=>{if(S.type==="globstar"){let Te=E.braces>0&&(j.type==="comma"||j.type==="brace"),L=j.extglob===!0||Pe.length&&(j.type==="pipe"||j.type==="paren");j.type!=="slash"&&j.type!=="paren"&&!Te&&!L&&(E.output=E.output.slice(0,-S.output.length),S.type="star",S.value="*",S.output=ve,E.output+=S.output)}if(Pe.length&&j.type!=="paren"&&(Pe[Pe.length-1].inner+=j.value),(j.value||j.output)&&$s(j),S&&S.type==="text"&&j.type==="text"){S.value+=j.value,S.output=(S.output||"")+j.value;return}j.prev=S,a.push(j),S=j},Cs=(j,Te)=>{let L={...p[Te],conditions:1,inner:""};L.prev=S,L.parens=E.parens,L.output=E.output;let oe=(r.capture?"(":"")+L.open;Es("parens"),ce({type:j,value:Te,output:E.output?"":g}),ce({type:"paren",extglob:!0,value:zt(),output:oe}),Pe.push(L)},Wd=j=>{let Te=j.close+(r.capture?")":""),L;if(j.type==="negate"){let oe=ve;if(j.inner&&j.inner.length>1&&j.inner.includes("/")&&(oe=X(r)),(oe!==ve||at()||/^\)+$/.test(Ut()))&&(Te=j.close=`)$))${oe}`),j.inner.includes("*")&&(L=Ut())&&/^\.[^\\/.]+$/.test(L)){let je=$a(L,{...t,fastpaths:!1}).output;Te=j.close=`)${je})${oe})`}j.prev.type==="bos"&&(E.negatedExtglob=!0)}ce({type:"paren",extglob:!0,value:v,output:Te}),Nr("parens")};if(r.fastpaths!==!1&&!/(^[*!]|[/()[\]{}"])/.test(e)){let j=!1,Te=e.replace(O0,(L,oe,je,ut,Ke,oo)=>ut==="\\"?(j=!0,L):ut==="?"?oe?oe+ut+(Ke?P.repeat(Ke.length):""):oo===0?re+(Ke?P.repeat(Ke.length):""):P.repeat(je.length):ut==="."?d.repeat(je.length):ut==="*"?oe?oe+ut+(Ke?ve:""):ve:oe?L:`\\${L}`);return j===!0&&(r.unescape===!0?Te=Te.replace(/\\/g,""):Te=Te.replace(/\\+/g,L=>L.length%2===0?"\\\\":L?"\\":"")),Te===e&&r.contains===!0?(E.output=e,E):(E.output=Tt.wrapOutput(Te,E,t),E)}for(;!at();){if(v=zt(),v==="\0")continue;if(v==="\\"){let L=De();if(L==="/"&&r.bash!==!0||L==="."||L===";")continue;if(!L){v+="\\",ce({type:"text",value:v});continue}let oe=/^\\+/.exec(Ut()),je=0;if(oe&&oe[0].length>2&&(je=oe[0].length,E.index+=je,je%2!==0&&(v+="\\")),r.unescape===!0?v=zt():v+=zt(),E.brackets===0){ce({type:"text",value:v});continue}}if(E.brackets>0&&(v!=="]"||S.value==="["||S.value==="[^")){if(r.posix!==!1&&v===":"){let L=S.value.slice(1);if(L.includes("[")&&(S.posix=!0,L.includes(":"))){let oe=S.value.lastIndexOf("["),je=S.value.slice(0,oe),ut=S.value.slice(oe+2),Ke=P0[ut];if(Ke){S.value=je+Ke,E.backtrack=!0,zt(),!o.output&&a.indexOf(S)===1&&(o.output=g);continue}}}(v==="["&&De()!==":"||v==="-"&&De()==="]")&&(v=`\\${v}`),v==="]"&&(S.value==="["||S.value==="[^")&&(v=`\\${v}`),r.posix===!0&&v==="!"&&S.value==="["&&(v="^"),S.value+=v,$s({value:v});continue}if(E.quotes===1&&v!=='"'){v=Tt.escapeRegex(v),S.value+=v,$s({value:v});continue}if(v==='"'){E.quotes=E.quotes===1?0:1,r.keepQuotes===!0&&ce({type:"text",value:v});continue}if(v==="("){Es("parens"),ce({type:"paren",value:v});continue}if(v===")"){if(E.parens===0&&r.strictBrackets===!0)throw new SyntaxError(wn("opening","("));let L=Pe[Pe.length-1];if(L&&E.parens===L.parens+1){Wd(Pe.pop());continue}ce({type:"paren",value:v,output:E.parens?")":"\\)"}),Nr("parens");continue}if(v==="["){if(r.nobracket===!0||!Ut().includes("]")){if(r.nobracket!==!0&&r.strictBrackets===!0)throw new SyntaxError(wn("closing","]"));v=`\\${v}`}else Es("brackets");ce({type:"bracket",value:v});continue}if(v==="]"){if(r.nobracket===!0||S&&S.type==="bracket"&&S.value.length===1){ce({type:"text",value:v,output:`\\${v}`});continue}if(E.brackets===0){if(r.strictBrackets===!0)throw new SyntaxError(wn("opening","["));ce({type:"text",value:v,output:`\\${v}`});continue}Nr("brackets");let L=S.value.slice(1);if(S.posix!==!0&&L[0]==="^"&&!L.includes("/")&&(v=`/${v}`),S.value+=v,$s({value:v}),r.literalBrackets===!1||Tt.hasRegexChars(L))continue;let oe=Tt.escapeRegex(S.value);if(E.output=E.output.slice(0,-S.value.length),r.literalBrackets===!0){E.output+=oe,S.value=oe;continue}S.value=`(${u}${oe}|${S.value})`,E.output+=S.value;continue}if(v==="{"&&r.nobrace!==!0){Es("braces");let L={type:"brace",value:v,output:"(",outputIndex:E.output.length,tokensIndex:E.tokens.length};Ae.push(L),ce(L);continue}if(v==="}"){let L=Ae[Ae.length-1];if(r.nobrace===!0||!L){ce({type:"text",value:v,output:v});continue}let oe=")";if(L.dots===!0){let je=a.slice(),ut=[];for(let Ke=je.length-1;Ke>=0&&(a.pop(),je[Ke].type!=="brace");Ke--)je[Ke].type!=="dots"&&ut.unshift(je[Ke].value);oe=_0(ut,r),E.backtrack=!0}if(L.comma!==!0&&L.dots!==!0){let je=E.output.slice(0,L.outputIndex),ut=E.tokens.slice(L.tokensIndex);L.value=L.output="\\{",v=oe="\\}",E.output=je;for(let Ke of ut)E.output+=Ke.output||Ke.value}ce({type:"brace",value:v,output:oe}),Nr("braces"),Ae.pop();continue}if(v==="|"){Pe.length>0&&Pe[Pe.length-1].conditions++,ce({type:"text",value:v});continue}if(v===","){let L=v,oe=Ae[Ae.length-1];oe&&dr[dr.length-1]==="braces"&&(oe.comma=!0,L="|"),ce({type:"comma",value:v,output:L});continue}if(v==="/"){if(S.type==="dot"&&E.index===E.start+1){E.start=E.index+1,E.consumed="",E.output="",a.pop(),S=o;continue}ce({type:"slash",value:v,output:D});continue}if(v==="."){if(E.braces>0&&S.type==="dot"){S.value==="."&&(S.output=d);let L=Ae[Ae.length-1];S.type="dots",S.output+=v,S.value+=v,L.dots=!0;continue}if(E.braces+E.parens===0&&S.type!=="bos"&&S.type!=="slash"){ce({type:"text",value:v,output:d});continue}ce({type:"dot",value:v,output:d});continue}if(v==="?"){if(!(S&&S.value==="(")&&r.noextglob!==!0&&De()==="("&&De(2)!=="?"){Cs("qmark",v);continue}if(S&&S.type==="paren"){let oe=De(),je=v;if(oe==="<"&&!Tt.supportsLookbehinds())throw new Error("Node.js v10 or higher is required for regex lookbehinds");(S.value==="("&&!/[!=<:]/.test(oe)||oe==="<"&&!/<([!=]|\w+>)/.test(Ut()))&&(je=`\\${v}`),ce({type:"text",value:v,output:je});continue}if(r.dot!==!0&&(S.type==="slash"||S.type==="bos")){ce({type:"qmark",value:v,output:B});continue}ce({type:"qmark",value:v,output:P});continue}if(v==="!"){if(r.noextglob!==!0&&De()==="("&&(De(2)!=="?"||!/[!=<:]/.test(De(3)))){Cs("negate",v);continue}if(r.nonegate!==!0&&E.index===0){jd();continue}}if(v==="+"){if(r.noextglob!==!0&&De()==="("&&De(2)!=="?"){Cs("plus",v);continue}if(S&&S.value==="("||r.regex===!1){ce({type:"plus",value:v,output:y});continue}if(S&&(S.type==="bracket"||S.type==="paren"||S.type==="brace")||E.parens>0){ce({type:"plus",value:v});continue}ce({type:"plus",value:y});continue}if(v==="@"){if(r.noextglob!==!0&&De()==="("&&De(2)!=="?"){ce({type:"at",extglob:!0,value:v,output:""});continue}ce({type:"text",value:v});continue}if(v!=="*"){(v==="$"||v==="^")&&(v=`\\${v}`);let L=k0.exec(Ut());L&&(v+=L[0],E.index+=L[0].length),ce({type:"text",value:v});continue}if(S&&(S.type==="globstar"||S.star===!0)){S.type="star",S.star=!0,S.value+=v,S.output=ve,E.backtrack=!0,E.globstar=!0,vt(v);continue}let j=Ut();if(r.noextglob!==!0&&/^\([^?]/.test(j)){Cs("star",v);continue}if(S.type==="star"){if(r.noglobstar===!0){vt(v);continue}let L=S.prev,oe=L.prev,je=L.type==="slash"||L.type==="bos",ut=oe&&(oe.type==="star"||oe.type==="globstar");if(r.bash===!0&&(!je||j[0]&&j[0]!=="/")){ce({type:"star",value:v,output:""});continue}let Ke=E.braces>0&&(L.type==="comma"||L.type==="brace"),oo=Pe.length&&(L.type==="pipe"||L.type==="paren");if(!je&&L.type!=="paren"&&!Ke&&!oo){ce({type:"star",value:v,output:""});continue}for(;j.slice(0,3)==="/**";){let As=e[E.index+4];if(As&&As!=="/")break;j=j.slice(3),vt("/**",3)}if(L.type==="bos"&&at()){S.type="globstar",S.value+=v,S.output=X(r),E.output=S.output,E.globstar=!0,vt(v);continue}if(L.type==="slash"&&L.prev.type!=="bos"&&!ut&&at()){E.output=E.output.slice(0,-(L.output+S.output).length),L.output=`(?:${L.output}`,S.type="globstar",S.output=X(r)+(r.strictSlashes?")":"|$)"),S.value+=v,E.globstar=!0,E.output+=L.output+S.output,vt(v);continue}if(L.type==="slash"&&L.prev.type!=="bos"&&j[0]==="/"){let As=j[1]!==void 0?"|$":"";E.output=E.output.slice(0,-(L.output+S.output).length),L.output=`(?:${L.output}`,S.type="globstar",S.output=`${X(r)}${D}|${D}${As})`,S.value+=v,E.output+=L.output+S.output,E.globstar=!0,vt(v+zt()),ce({type:"slash",value:"/",output:""});continue}if(L.type==="bos"&&j[0]==="/"){S.type="globstar",S.value+=v,S.output=`(?:^|${D}|${X(r)}${D})`,E.output=S.output,E.globstar=!0,vt(v+zt()),ce({type:"slash",value:"/",output:""});continue}E.output=E.output.slice(0,-S.output.length),S.type="globstar",S.output=X(r),S.value+=v,E.output+=S.output,E.globstar=!0,vt(v);continue}let Te={type:"star",value:v,output:ve};if(r.bash===!0){Te.output=".*?",(S.type==="bos"||S.type==="slash")&&(Te.output=J+Te.output),ce(Te);continue}if(S&&(S.type==="bracket"||S.type==="paren")&&r.regex===!0){Te.output=v,ce(Te);continue}(E.index===E.start||S.type==="slash"||S.type==="dot")&&(S.type==="dot"?(E.output+=O,S.output+=O):r.dot===!0?(E.output+=K,S.output+=K):(E.output+=J,S.output+=J),De()!=="*"&&(E.output+=g,S.output+=g)),ce(Te)}for(;E.brackets>0;){if(r.strictBrackets===!0)throw new SyntaxError(wn("closing","]"));E.output=Tt.escapeLast(E.output,"["),Nr("brackets")}for(;E.parens>0;){if(r.strictBrackets===!0)throw new SyntaxError(wn("closing",")"));E.output=Tt.escapeLast(E.output,"("),Nr("parens")}for(;E.braces>0;){if(r.strictBrackets===!0)throw new SyntaxError(wn("closing","}"));E.output=Tt.escapeLast(E.output,"{"),Nr("braces")}if(r.strictSlashes!==!0&&(S.type==="star"||S.type==="bracket")&&ce({type:"maybe_slash",value:"",output:`${D}?`}),E.backtrack===!0){E.output="";for(let j of E.tokens)E.output+=j.output!=null?j.output:j.value,j.suffix&&(E.output+=j.suffix)}return E};$a.fastpaths=(e,t)=>{let r={...t},n=typeof r.maxLength=="number"?Math.min(wi,r.maxLength):wi,s=e.length;if(s>n)throw new SyntaxError(`Input length: ${s}, exceeds maximum allowed length: ${n}`);e=gf[e]||e;let o=Tt.isWindows(t),{DOT_LITERAL:a,SLASH_LITERAL:u,ONE_CHAR:c,DOTS_SLASH:f,NO_DOT:p,NO_DOTS:d,NO_DOTS_SLASH:y,STAR:D,START_ANCHOR:g}=bi.globChars(o),F=r.dot?d:p,q=r.dot?y:p,O=r.capture?"":"?:",K={negated:!1,prefix:""},P=r.bash===!0?".*?":D;r.capture&&(P=`(${P})`);let B=J=>J.noglobstar===!0?P:`(${O}(?:(?!${g}${J.dot?f:a}).)*?)`,G=J=>{switch(J){case"*":return`${F}${c}${P}`;case".*":return`${a}${c}${P}`;case"*.*":return`${F}${P}${a}${c}${P}`;case"*/*":return`${F}${P}${u}${c}${q}${P}`;case"**":return F+B(r);case"**/*":return`(?:${F}${B(r)}${u})?${q}${c}${P}`;case"**/*.*":return`(?:${F}${B(r)}${u})?${q}${P}${a}${c}${P}`;case"**/.*":return`(?:${F}${B(r)}${u})?${a}${c}${P}`;default:{let re=/^(.*?)\.(\w+)$/.exec(J);if(!re)return;let ve=G(re[1]);return ve?ve+a+re[2]:void 0}}},ye=Tt.removePrefix(e,K),X=G(ye);return X&&r.strictSlashes!==!0&&(X+=`${u}?`),X};hf.exports=$a});var bf=ge((YC,Df)=>{"use strict";l();var I0=Xe("path"),j0=df(),Ea=yf(),Ca=Di(),W0=fs(),M0=e=>e&&typeof e=="object"&&!Array.isArray(e),ze=(e,t,r=!1)=>{if(Array.isArray(e)){let p=e.map(y=>ze(y,t,r));return y=>{for(let D of p){let g=D(y);if(g)return g}return!1}}let n=M0(e)&&e.tokens&&e.input;if(e===""||typeof e!="string"&&!n)throw new TypeError("Expected pattern to be a non-empty string");let s=t||{},o=Ca.isWindows(t),a=n?ze.compileRe(e,t):ze.makeRe(e,t,!1,!0),u=a.state;delete a.state;let c=()=>!1;if(s.ignore){let p={...t,ignore:null,onMatch:null,onResult:null};c=ze(s.ignore,p,r)}let f=(p,d=!1)=>{let{isMatch:y,match:D,output:g}=ze.test(p,a,t,{glob:e,posix:o}),F={glob:e,state:u,regex:a,posix:o,input:p,output:g,match:D,isMatch:y};return typeof s.onResult=="function"&&s.onResult(F),y===!1?(F.isMatch=!1,d?F:!1):c(p)?(typeof s.onIgnore=="function"&&s.onIgnore(F),F.isMatch=!1,d?F:!1):(typeof s.onMatch=="function"&&s.onMatch(F),d?F:!0)};return r&&(f.state=u),f};ze.test=(e,t,r,{glob:n,posix:s}={})=>{if(typeof e!="string")throw new TypeError("Expected input to be a string");if(e==="")return{isMatch:!1,output:""};let o=r||{},a=o.format||(s?Ca.toPosixSlashes:null),u=e===n,c=u&&a?a(e):e;return u===!1&&(c=a?a(e):e,u=c===n),(u===!1||o.capture===!0)&&(o.matchBase===!0||o.basename===!0?u=ze.matchBase(e,t,r,s):u=t.exec(c)),{isMatch:!!u,match:u,output:c}};ze.matchBase=(e,t,r,n=Ca.isWindows(r))=>(t instanceof RegExp?t:ze.makeRe(t,r)).test(I0.basename(e));ze.isMatch=(e,t,r)=>ze(t,r)(e);ze.parse=(e,t)=>Array.isArray(e)?e.map(r=>ze.parse(r,t)):Ea(e,{...t,fastpaths:!1});ze.scan=(e,t)=>j0(e,t);ze.compileRe=(e,t,r=!1,n=!1)=>{if(r===!0)return e.output;let s=t||{},o=s.contains?"":"^",a=s.contains?"":"$",u=`${o}(?:${e.output})${a}`;e&&e.negated===!0&&(u=`^(?!${u}).*$`);let c=ze.toRegex(u,t);return n===!0&&(c.state=e),c};ze.makeRe=(e,t={},r=!1,n=!1)=>{if(!e||typeof e!="string")throw new TypeError("Expected a non-empty string");let s={negated:!1,fastpaths:!0};return t.fastpaths!==!1&&(e[0]==="."||e[0]==="*")&&(s.output=Ea.fastpaths(e,t)),s.output||(s=Ea(e,t)),ze.compileRe(s,t,r,n)};ze.toRegex=(e,t)=>{try{let r=t||{};return new RegExp(e,r.flags||(r.nocase?"i":""))}catch(r){if(t&&t.debug===!0)throw r;return/$^/}};ze.constants=W0;Df.exports=ze});var xf=ge((XC,wf)=>{"use strict";l();wf.exports=bf()});var Ff=ge((QC,Sf)=>{l();Sf.exports=function(e,t){if(typeof e!="string")throw new TypeError("expected path to be a string");if(e==="\\"||e==="/")return"/";var r=e.length;if(r<=1)return e;var n="";if(r>4&&e[3]==="\\"){var s=e[2];(s==="?"||s===".")&&e.slice(0,2)==="\\\\"&&(e=e.slice(2),n="//")}var o=e.split(/[/\\]+/);return t!==!1&&o[o.length-1]===""&&o.pop(),n+o.join("/")}});var Kr=ge((Cf,Af)=>{"use strict";l();Object.defineProperty(Cf,"__esModule",{value:!0});var Ef=xf(),q0=Ff(),vf="!",G0={returnIndex:!1},H0=e=>Array.isArray(e)?e:[e],z0=(e,t)=>{if(typeof e=="function")return e;if(typeof e=="string"){let r=Ef(e,t);return n=>e===n||r(n)}return e instanceof RegExp?r=>e.test(r):r=>!1},$f=(e,t,r,n)=>{let s=Array.isArray(r),o=s?r[0]:r;if(!s&&typeof o!="string")throw new TypeError("anymatch: second argument must be a string: got "+Object.prototype.toString.call(o));let a=q0(o,!1);for(let c=0;c<t.length;c++){let f=t[c];if(f(a))return n?-1:!1}let u=s&&[a].concat(r.slice(1));for(let c=0;c<e.length;c++){let f=e[c];if(s?f(...u):f(a))return n?c:!0}return n?-1:!1},Aa=(e,t,r=G0)=>{if(e==null)throw new TypeError("anymatch: specify first argument");let n=typeof r=="boolean"?{returnIndex:r}:r,s=n.returnIndex||!1,o=H0(e),a=o.filter(c=>typeof c=="string"&&c.charAt(0)===vf).map(c=>c.slice(1)).map(c=>Ef(c,n)),u=o.filter(c=>typeof c!="string"||typeof c=="string"&&c.charAt(0)!==vf).map(c=>z0(c,n));return t==null?(c,f=!1)=>$f(u,a,c,typeof f=="boolean"?f:!1):$f(u,a,t,s)};Aa.default=Aa;Af.exports=Aa});var Bf=ge(Si=>{l();Object.defineProperty(Si,"__esModule",{value:!0});Si.default=/((['"])(?:(?!\2|\\).|\\(?:\r\n|[\s\S]))*(\2)?|`(?:[^`\\$]|\\[\s\S]|\$(?!\{)|\$\{(?:[^{}]|\{[^}]*\}?)*\}?)*(`)?)|(\/\/.*)|(\/\*(?:[^*]|\*(?!\/))*(\*\/)?)|(\/(?!\*)(?:\[(?:(?![\]\\]).|\\.)*\]|(?![\/\]\\]).|\\.)+\/(?:(?!\s*(?:\b|[\u0080-\uFFFF$\\'"~({]|[+\-!](?!=)|\.?\d))|[gmiyus]{1,6}\b(?![\u0080-\uFFFF$\\]|\s*(?:[+\-*%&|^<>!=?({]|\/(?![\/*])))))|(0[xX][\da-fA-F]+|0[oO][0-7]+|0[bB][01]+|(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?)|((?!\d)(?:(?!\s)[$\w\u0080-\uFFFF]|\\u[\da-fA-F]{4}|\\u\{[\da-fA-F]+\})+)|(--|\+\+|&&|\|\||=>|\.{3}|(?:[+\-\/%&|^]|\*{1,2}|<{1,2}|>{1,3}|!=?|={1,2})=?|[?~.,:;[\](){}])|(\s+)|(^$|[\s\S])/g;Si.matchToToken=function(e){var t={type:"invalid",value:e[0],closed:void 0};return e[1]?(t.type="string",t.closed=!!(e[3]||e[4])):e[5]?t.type="comment":e[6]?(t.type="comment",t.closed=!!e[7]):e[8]?t.type="regex":e[9]?t.type="number":e[10]?t.type="name":e[11]?t.type="punctuator":e[12]&&(t.type="whitespace"),t}});var kf=ge(ms=>{"use strict";l();Object.defineProperty(ms,"__esModule",{value:!0});ms.isIdentifierChar=Pf;ms.isIdentifierName=Z0;ms.isIdentifierStart=Nf;var Ba="\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC",Lf="\u200C\u200D\xB7\u0300-\u036F\u0387\u0483-\u0487\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u0669\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u06F0-\u06F9\u0711\u0730-\u074A\u07A6-\u07B0\u07C0-\u07C9\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0966-\u096F\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09E6-\u09EF\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A66-\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AE6-\u0AEF\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B66-\u0B6F\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0BE6-\u0BEF\u0C00-\u0C04\u0C3C\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C66-\u0C6F\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0CE6-\u0CEF\u0CF3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D66-\u0D6F\u0D81-\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0E50-\u0E59\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0ED0-\u0ED9\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1040-\u1049\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F-\u109D\u135D-\u135F\u1369-\u1371\u1712-\u1715\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u17E0-\u17E9\u180B-\u180D\u180F-\u1819\u18A9\u1920-\u192B\u1930-\u193B\u1946-\u194F\u19D0-\u19DA\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AB0-\u1ABD\u1ABF-\u1ACE\u1B00-\u1B04\u1B34-\u1B44\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BB0-\u1BB9\u1BE6-\u1BF3\u1C24-\u1C37\u1C40-\u1C49\u1C50-\u1C59\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DFF\u200C\u200D\u203F\u2040\u2054\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\u30FB\uA620-\uA629\uA66F\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA82C\uA880\uA881\uA8B4-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F1\uA8FF-\uA909\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9D0-\uA9D9\uA9E5\uA9F0-\uA9F9\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA50-\uAA59\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uABF0-\uABF9\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFF10-\uFF19\uFF3F\uFF65",Y0=new RegExp("["+Ba+"]"),K0=new RegExp("["+Ba+Lf+"]");Ba=Lf=null;var Rf=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,4026,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,757,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],X0=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,81,2,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,9,5351,0,7,14,13835,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,983,6,110,6,6,9,4759,9,787719,239];function Ta(e,t){let r=65536;for(let n=0,s=t.length;n<s;n+=2){if(r+=t[n],r>e)return!1;if(r+=t[n+1],r>=e)return!0}return!1}function Nf(e){return e<65?e===36:e<=90?!0:e<97?e===95:e<=122?!0:e<=65535?e>=170&&Y0.test(String.fromCharCode(e)):Ta(e,Rf)}function Pf(e){return e<48?e===36:e<58?!0:e<65?!1:e<=90?!0:e<97?e===95:e<=122?!0:e<=65535?e>=170&&K0.test(String.fromCharCode(e)):Ta(e,Rf)||Ta(e,X0)}function Z0(e){let t=!0;for(let r=0;r<e.length;r++){let n=e.charCodeAt(r);if((n&64512)===55296&&r+1<e.length){let s=e.charCodeAt(++r);(s&64512)===56320&&(n=65536+((n&1023)<<10)+(s&1023))}if(t){if(t=!1,!Nf(n))return!1}else if(!Pf(n))return!1}return!t}});var jf=ge(Xr=>{"use strict";l();Object.defineProperty(Xr,"__esModule",{value:!0});Xr.isKeyword=ny;Xr.isReservedWord=Of;Xr.isStrictBindOnlyReservedWord=If;Xr.isStrictBindReservedWord=ry;Xr.isStrictReservedWord=_f;var La={keyword:["break","case","catch","continue","debugger","default","do","else","finally","for","function","if","return","switch","throw","try","var","const","while","with","new","this","super","class","extends","export","import","null","true","false","in","instanceof","typeof","void","delete"],strict:["implements","interface","let","package","private","protected","public","static","yield"],strictBind:["eval","arguments"]},Q0=new Set(La.keyword),ey=new Set(La.strict),ty=new Set(La.strictBind);function Of(e,t){return t&&e==="await"||e==="enum"}function _f(e,t){return Of(e,t)||ey.has(e)}function If(e){return ty.has(e)}function ry(e,t){return _f(e,t)||If(e)}function ny(e){return Q0.has(e)}});var Wf=ge(nr=>{"use strict";l();Object.defineProperty(nr,"__esModule",{value:!0});Object.defineProperty(nr,"isIdentifierChar",{enumerable:!0,get:function(){return Ra.isIdentifierChar}});Object.defineProperty(nr,"isIdentifierName",{enumerable:!0,get:function(){return Ra.isIdentifierName}});Object.defineProperty(nr,"isIdentifierStart",{enumerable:!0,get:function(){return Ra.isIdentifierStart}});Object.defineProperty(nr,"isKeyword",{enumerable:!0,get:function(){return ds.isKeyword}});Object.defineProperty(nr,"isReservedWord",{enumerable:!0,get:function(){return ds.isReservedWord}});Object.defineProperty(nr,"isStrictBindOnlyReservedWord",{enumerable:!0,get:function(){return ds.isStrictBindOnlyReservedWord}});Object.defineProperty(nr,"isStrictBindReservedWord",{enumerable:!0,get:function(){return ds.isStrictBindReservedWord}});Object.defineProperty(nr,"isStrictReservedWord",{enumerable:!0,get:function(){return ds.isStrictReservedWord}});var Ra=kf(),ds=jf()});var Pa=ge((b3,Na)=>{l();var Mf=process.argv||[],Fi=process.env,sy=!("NO_COLOR"in Fi||Mf.includes("--no-color"))&&("FORCE_COLOR"in Fi||Mf.includes("--color")||process.platform==="win32"||Xe!=null&&Xe("tty").isatty(1)&&Fi.TERM!=="dumb"||"CI"in Fi),iy=(e,t,r=e)=>n=>{let s=""+n,o=s.indexOf(t,e.length);return~o?e+oy(s,t,r,o)+t:e+s+t},oy=(e,t,r,n)=>{let s="",o=0;do s+=e.substring(o,n)+r,o=n+t.length,n=e.indexOf(t,o);while(~n);return s+e.substring(o)},qf=(e=sy)=>{let t=e?iy:()=>String;return{isColorSupported:e,reset:t("\x1B[0m","\x1B[0m"),bold:t("\x1B[1m","\x1B[22m","\x1B[22m\x1B[1m"),dim:t("\x1B[2m","\x1B[22m","\x1B[22m\x1B[2m"),italic:t("\x1B[3m","\x1B[23m"),underline:t("\x1B[4m","\x1B[24m"),inverse:t("\x1B[7m","\x1B[27m"),hidden:t("\x1B[8m","\x1B[28m"),strikethrough:t("\x1B[9m","\x1B[29m"),black:t("\x1B[30m","\x1B[39m"),red:t("\x1B[31m","\x1B[39m"),green:t("\x1B[32m","\x1B[39m"),yellow:t("\x1B[33m","\x1B[39m"),blue:t("\x1B[34m","\x1B[39m"),magenta:t("\x1B[35m","\x1B[39m"),cyan:t("\x1B[36m","\x1B[39m"),white:t("\x1B[37m","\x1B[39m"),gray:t("\x1B[90m","\x1B[39m"),bgBlack:t("\x1B[40m","\x1B[49m"),bgRed:t("\x1B[41m","\x1B[49m"),bgGreen:t("\x1B[42m","\x1B[49m"),bgYellow:t("\x1B[43m","\x1B[49m"),bgBlue:t("\x1B[44m","\x1B[49m"),bgMagenta:t("\x1B[45m","\x1B[49m"),bgCyan:t("\x1B[46m","\x1B[49m"),bgWhite:t("\x1B[47m","\x1B[49m")}};Na.exports=qf();Na.exports.createColors=qf});var Hf=ge((S3,Gf)=>{"use strict";l();var ay=/[|\\{}()[\]^$+*?.]/g;Gf.exports=function(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(ay,"\\$&")}});var Uf=ge((v3,zf)=>{"use strict";l();zf.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}});var ka=ge((E3,Kf)=>{l();var Zr=Uf(),Yf={};for(vi in Zr)Zr.hasOwnProperty(vi)&&(Yf[Zr[vi]]=vi);var vi,z=Kf.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(mt in z)if(z.hasOwnProperty(mt)){if(!("channels"in z[mt]))throw new Error("missing channels property: "+mt);if(!("labels"in z[mt]))throw new Error("missing channel labels property: "+mt);if(z[mt].labels.length!==z[mt].channels)throw new Error("channel and label counts mismatch: "+mt);Vf=z[mt].channels,Jf=z[mt].labels,delete z[mt].channels,delete z[mt].labels,Object.defineProperty(z[mt],"channels",{value:Vf}),Object.defineProperty(z[mt],"labels",{value:Jf})}var Vf,Jf,mt;z.rgb.hsl=function(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,s=Math.min(t,r,n),o=Math.max(t,r,n),a=o-s,u,c,f;return o===s?u=0:t===o?u=(r-n)/a:r===o?u=2+(n-t)/a:n===o&&(u=4+(t-r)/a),u=Math.min(u*60,360),u<0&&(u+=360),f=(s+o)/2,o===s?c=0:f<=.5?c=a/(o+s):c=a/(2-o-s),[u,c*100,f*100]};z.rgb.hsv=function(e){var t,r,n,s,o,a=e[0]/255,u=e[1]/255,c=e[2]/255,f=Math.max(a,u,c),p=f-Math.min(a,u,c),d=function(y){return(f-y)/6/p+1/2};return p===0?s=o=0:(o=p/f,t=d(a),r=d(u),n=d(c),a===f?s=n-r:u===f?s=1/3+t-n:c===f&&(s=2/3+r-t),s<0?s+=1:s>1&&(s-=1)),[s*360,o*100,f*100]};z.rgb.hwb=function(e){var t=e[0],r=e[1],n=e[2],s=z.rgb.hsl(e)[0],o=1/255*Math.min(t,Math.min(r,n));return n=1-1/255*Math.max(t,Math.max(r,n)),[s,o*100,n*100]};z.rgb.cmyk=function(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,s,o,a,u;return u=Math.min(1-t,1-r,1-n),s=(1-t-u)/(1-u)||0,o=(1-r-u)/(1-u)||0,a=(1-n-u)/(1-u)||0,[s*100,o*100,a*100,u*100]};function uy(e,t){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)+Math.pow(e[2]-t[2],2)}z.rgb.keyword=function(e){var t=Yf[e];if(t)return t;var r=1/0,n;for(var s in Zr)if(Zr.hasOwnProperty(s)){var o=Zr[s],a=uy(e,o);a<r&&(r=a,n=s)}return n};z.keyword.rgb=function(e){return Zr[e]};z.rgb.xyz=function(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255;t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92,r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92,n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92;var s=t*.4124+r*.3576+n*.1805,o=t*.2126+r*.7152+n*.0722,a=t*.0193+r*.1192+n*.9505;return[s*100,o*100,a*100]};z.rgb.lab=function(e){var t=z.rgb.xyz(e),r=t[0],n=t[1],s=t[2],o,a,u;return r/=95.047,n/=100,s/=108.883,r=r>.008856?Math.pow(r,1/3):7.787*r+16/116,n=n>.008856?Math.pow(n,1/3):7.787*n+16/116,s=s>.008856?Math.pow(s,1/3):7.787*s+16/116,o=116*n-16,a=500*(r-n),u=200*(n-s),[o,a,u]};z.hsl.rgb=function(e){var t=e[0]/360,r=e[1]/100,n=e[2]/100,s,o,a,u,c;if(r===0)return c=n*255,[c,c,c];n<.5?o=n*(1+r):o=n+r-n*r,s=2*n-o,u=[0,0,0];for(var f=0;f<3;f++)a=t+1/3*-(f-1),a<0&&a++,a>1&&a--,6*a<1?c=s+(o-s)*6*a:2*a<1?c=o:3*a<2?c=s+(o-s)*(2/3-a)*6:c=s,u[f]=c*255;return u};z.hsl.hsv=function(e){var t=e[0],r=e[1]/100,n=e[2]/100,s=r,o=Math.max(n,.01),a,u;return n*=2,r*=n<=1?n:2-n,s*=o<=1?o:2-o,u=(n+r)/2,a=n===0?2*s/(o+s):2*r/(n+r),[t,a*100,u*100]};z.hsv.rgb=function(e){var t=e[0]/60,r=e[1]/100,n=e[2]/100,s=Math.floor(t)%6,o=t-Math.floor(t),a=255*n*(1-r),u=255*n*(1-r*o),c=255*n*(1-r*(1-o));switch(n*=255,s){case 0:return[n,c,a];case 1:return[u,n,a];case 2:return[a,n,c];case 3:return[a,u,n];case 4:return[c,a,n];case 5:return[n,a,u]}};z.hsv.hsl=function(e){var t=e[0],r=e[1]/100,n=e[2]/100,s=Math.max(n,.01),o,a,u;return u=(2-r)*n,o=(2-r)*s,a=r*s,a/=o<=1?o:2-o,a=a||0,u/=2,[t,a*100,u*100]};z.hwb.rgb=function(e){var t=e[0]/360,r=e[1]/100,n=e[2]/100,s=r+n,o,a,u,c;s>1&&(r/=s,n/=s),o=Math.floor(6*t),a=1-n,u=6*t-o,o&1&&(u=1-u),c=r+u*(a-r);var f,p,d;switch(o){default:case 6:case 0:f=a,p=c,d=r;break;case 1:f=c,p=a,d=r;break;case 2:f=r,p=a,d=c;break;case 3:f=r,p=c,d=a;break;case 4:f=c,p=r,d=a;break;case 5:f=a,p=r,d=c;break}return[f*255,p*255,d*255]};z.cmyk.rgb=function(e){var t=e[0]/100,r=e[1]/100,n=e[2]/100,s=e[3]/100,o,a,u;return o=1-Math.min(1,t*(1-s)+s),a=1-Math.min(1,r*(1-s)+s),u=1-Math.min(1,n*(1-s)+s),[o*255,a*255,u*255]};z.xyz.rgb=function(e){var t=e[0]/100,r=e[1]/100,n=e[2]/100,s,o,a;return s=t*3.2406+r*-1.5372+n*-.4986,o=t*-.9689+r*1.8758+n*.0415,a=t*.0557+r*-.204+n*1.057,s=s>.0031308?1.055*Math.pow(s,1/2.4)-.055:s*12.92,o=o>.0031308?1.055*Math.pow(o,1/2.4)-.055:o*12.92,a=a>.0031308?1.055*Math.pow(a,1/2.4)-.055:a*12.92,s=Math.min(Math.max(0,s),1),o=Math.min(Math.max(0,o),1),a=Math.min(Math.max(0,a),1),[s*255,o*255,a*255]};z.xyz.lab=function(e){var t=e[0],r=e[1],n=e[2],s,o,a;return t/=95.047,r/=100,n/=108.883,t=t>.008856?Math.pow(t,1/3):7.787*t+16/116,r=r>.008856?Math.pow(r,1/3):7.787*r+16/116,n=n>.008856?Math.pow(n,1/3):7.787*n+16/116,s=116*r-16,o=500*(t-r),a=200*(r-n),[s,o,a]};z.lab.xyz=function(e){var t=e[0],r=e[1],n=e[2],s,o,a;o=(t+16)/116,s=r/500+o,a=o-n/200;var u=Math.pow(o,3),c=Math.pow(s,3),f=Math.pow(a,3);return o=u>.008856?u:(o-16/116)/7.787,s=c>.008856?c:(s-16/116)/7.787,a=f>.008856?f:(a-16/116)/7.787,s*=95.047,o*=100,a*=108.883,[s,o,a]};z.lab.lch=function(e){var t=e[0],r=e[1],n=e[2],s,o,a;return s=Math.atan2(n,r),o=s*360/2/Math.PI,o<0&&(o+=360),a=Math.sqrt(r*r+n*n),[t,a,o]};z.lch.lab=function(e){var t=e[0],r=e[1],n=e[2],s,o,a;return a=n/360*2*Math.PI,s=r*Math.cos(a),o=r*Math.sin(a),[t,s,o]};z.rgb.ansi16=function(e){var t=e[0],r=e[1],n=e[2],s=1 in arguments?arguments[1]:z.rgb.hsv(e)[2];if(s=Math.round(s/50),s===0)return 30;var o=30+(Math.round(n/255)<<2|Math.round(r/255)<<1|Math.round(t/255));return s===2&&(o+=60),o};z.hsv.ansi16=function(e){return z.rgb.ansi16(z.hsv.rgb(e),e[2])};z.rgb.ansi256=function(e){var t=e[0],r=e[1],n=e[2];if(t===r&&r===n)return t<8?16:t>248?231:Math.round((t-8)/247*24)+232;var s=16+36*Math.round(t/255*5)+6*Math.round(r/255*5)+Math.round(n/255*5);return s};z.ansi16.rgb=function(e){var t=e%10;if(t===0||t===7)return e>50&&(t+=3.5),t=t/10.5*255,[t,t,t];var r=(~~(e>50)+1)*.5,n=(t&1)*r*255,s=(t>>1&1)*r*255,o=(t>>2&1)*r*255;return[n,s,o]};z.ansi256.rgb=function(e){if(e>=232){var t=(e-232)*10+8;return[t,t,t]}e-=16;var r,n=Math.floor(e/36)/5*255,s=Math.floor((r=e%36)/6)/5*255,o=r%6/5*255;return[n,s,o]};z.rgb.hex=function(e){var t=((Math.round(e[0])&255)<<16)+((Math.round(e[1])&255)<<8)+(Math.round(e[2])&255),r=t.toString(16).toUpperCase();return"000000".substring(r.length)+r};z.hex.rgb=function(e){var t=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!t)return[0,0,0];var r=t[0];t[0].length===3&&(r=r.split("").map(function(u){return u+u}).join(""));var n=parseInt(r,16),s=n>>16&255,o=n>>8&255,a=n&255;return[s,o,a]};z.rgb.hcg=function(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,s=Math.max(Math.max(t,r),n),o=Math.min(Math.min(t,r),n),a=s-o,u,c;return a<1?u=o/(1-a):u=0,a<=0?c=0:s===t?c=(r-n)/a%6:s===r?c=2+(n-t)/a:c=4+(t-r)/a+4,c/=6,c%=1,[c*360,a*100,u*100]};z.hsl.hcg=function(e){var t=e[1]/100,r=e[2]/100,n=1,s=0;return r<.5?n=2*t*r:n=2*t*(1-r),n<1&&(s=(r-.5*n)/(1-n)),[e[0],n*100,s*100]};z.hsv.hcg=function(e){var t=e[1]/100,r=e[2]/100,n=t*r,s=0;return n<1&&(s=(r-n)/(1-n)),[e[0],n*100,s*100]};z.hcg.rgb=function(e){var t=e[0]/360,r=e[1]/100,n=e[2]/100;if(r===0)return[n*255,n*255,n*255];var s=[0,0,0],o=t%1*6,a=o%1,u=1-a,c=0;switch(Math.floor(o)){case 0:s[0]=1,s[1]=a,s[2]=0;break;case 1:s[0]=u,s[1]=1,s[2]=0;break;case 2:s[0]=0,s[1]=1,s[2]=a;break;case 3:s[0]=0,s[1]=u,s[2]=1;break;case 4:s[0]=a,s[1]=0,s[2]=1;break;default:s[0]=1,s[1]=0,s[2]=u}return c=(1-r)*n,[(r*s[0]+c)*255,(r*s[1]+c)*255,(r*s[2]+c)*255]};z.hcg.hsv=function(e){var t=e[1]/100,r=e[2]/100,n=t+r*(1-t),s=0;return n>0&&(s=t/n),[e[0],s*100,n*100]};z.hcg.hsl=function(e){var t=e[1]/100,r=e[2]/100,n=r*(1-t)+.5*t,s=0;return n>0&&n<.5?s=t/(2*n):n>=.5&&n<1&&(s=t/(2*(1-n))),[e[0],s*100,n*100]};z.hcg.hwb=function(e){var t=e[1]/100,r=e[2]/100,n=t+r*(1-t);return[e[0],(n-t)*100,(1-n)*100]};z.hwb.hcg=function(e){var t=e[1]/100,r=e[2]/100,n=1-r,s=n-t,o=0;return s<1&&(o=(n-s)/(1-s)),[e[0],s*100,o*100]};z.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]};z.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]};z.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]};z.gray.hsl=z.gray.hsv=function(e){return[0,0,e[0]]};z.gray.hwb=function(e){return[0,100,e[0]]};z.gray.cmyk=function(e){return[0,0,0,e[0]]};z.gray.lab=function(e){return[e[0],0,0]};z.gray.hex=function(e){var t=Math.round(e[0]/100*255)&255,r=(t<<16)+(t<<8)+t,n=r.toString(16).toUpperCase();return"000000".substring(n.length)+n};z.rgb.gray=function(e){var t=(e[0]+e[1]+e[2])/3;return[t/255*100]}});var Zf=ge((A3,Xf)=>{l();var $i=ka();function cy(){for(var e={},t=Object.keys($i),r=t.length,n=0;n<r;n++)e[t[n]]={distance:-1,parent:null};return e}function ly(e){var t=cy(),r=[e];for(t[e].distance=0;r.length;)for(var n=r.pop(),s=Object.keys($i[n]),o=s.length,a=0;a<o;a++){var u=s[a],c=t[u];c.distance===-1&&(c.distance=t[n].distance+1,c.parent=n,r.unshift(u))}return t}function fy(e,t){return function(r){return t(e(r))}}function py(e,t){for(var r=[t[e].parent,e],n=$i[t[e].parent][e],s=t[e].parent;t[s].parent;)r.unshift(t[s].parent),n=fy($i[t[s].parent][s],n),s=t[s].parent;return n.conversion=r,n}Xf.exports=function(e){for(var t=ly(e),r={},n=Object.keys(t),s=n.length,o=0;o<s;o++){var a=n[o],u=t[a];u.parent!==null&&(r[a]=py(a,t))}return r}});var ep=ge((B3,Qf)=>{l();var Oa=ka(),my=Zf(),xn={},dy=Object.keys(Oa);function gy(e){var t=function(r){return r==null?r:(arguments.length>1&&(r=Array.prototype.slice.call(arguments)),e(r))};return"conversion"in e&&(t.conversion=e.conversion),t}function hy(e){var t=function(r){if(r==null)return r;arguments.length>1&&(r=Array.prototype.slice.call(arguments));var n=e(r);if(typeof n=="object")for(var s=n.length,o=0;o<s;o++)n[o]=Math.round(n[o]);return n};return"conversion"in e&&(t.conversion=e.conversion),t}dy.forEach(function(e){xn[e]={},Object.defineProperty(xn[e],"channels",{value:Oa[e].channels}),Object.defineProperty(xn[e],"labels",{value:Oa[e].labels});var t=my(e),r=Object.keys(t);r.forEach(function(n){var s=t[n];xn[e][n]=hy(s),xn[e][n].raw=gy(s)})});Qf.exports=xn});var rp=ge((R3,tp)=>{"use strict";l();var Sn=ep(),Ei=(e,t)=>function(){return`\x1B[${e.apply(Sn,arguments)+t}m`},Ci=(e,t)=>function(){let r=e.apply(Sn,arguments);return`\x1B[${38+t};5;${r}m`},Ai=(e,t)=>function(){let r=e.apply(Sn,arguments);return`\x1B[${38+t};2;${r[0]};${r[1]};${r[2]}m`};function yy(){let e=new Map,t={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],gray:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};t.color.grey=t.color.gray;for(let s of Object.keys(t)){let o=t[s];for(let a of Object.keys(o)){let u=o[a];t[a]={open:`\x1B[${u[0]}m`,close:`\x1B[${u[1]}m`},o[a]=t[a],e.set(u[0],u[1])}Object.defineProperty(t,s,{value:o,enumerable:!1}),Object.defineProperty(t,"codes",{value:e,enumerable:!1})}let r=s=>s,n=(s,o,a)=>[s,o,a];t.color.close="\x1B[39m",t.bgColor.close="\x1B[49m",t.color.ansi={ansi:Ei(r,0)},t.color.ansi256={ansi256:Ci(r,0)},t.color.ansi16m={rgb:Ai(n,0)},t.bgColor.ansi={ansi:Ei(r,10)},t.bgColor.ansi256={ansi256:Ci(r,10)},t.bgColor.ansi16m={rgb:Ai(n,10)};for(let s of Object.keys(Sn)){if(typeof Sn[s]!="object")continue;let o=Sn[s];s==="ansi16"&&(s="ansi"),"ansi16"in o&&(t.color.ansi[s]=Ei(o.ansi16,0),t.bgColor.ansi[s]=Ei(o.ansi16,10)),"ansi256"in o&&(t.color.ansi256[s]=Ci(o.ansi256,0),t.bgColor.ansi256[s]=Ci(o.ansi256,10)),"rgb"in o&&(t.color.ansi16m[s]=Ai(o.rgb,0),t.bgColor.ansi16m[s]=Ai(o.rgb,10))}return t}Object.defineProperty(tp,"exports",{enumerable:!0,get:yy})});var sp=ge((P3,np)=>{"use strict";l();np.exports=(e,t)=>{t=t||process.argv;let r=e.startsWith("-")?"":e.length===1?"-":"--",n=t.indexOf(r+e),s=t.indexOf("--");return n!==-1&&(s===-1?!0:n<s)}});var op=ge((O3,ip)=>{"use strict";l();var Dy=Xe("os"),qt=sp(),ot=process.env,Fn;qt("no-color")||qt("no-colors")||qt("color=false")?Fn=!1:(qt("color")||qt("colors")||qt("color=true")||qt("color=always"))&&(Fn=!0);"FORCE_COLOR"in ot&&(Fn=ot.FORCE_COLOR.length===0||parseInt(ot.FORCE_COLOR,10)!==0);function by(e){return e===0?!1:{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}function wy(e){if(Fn===!1)return 0;if(qt("color=16m")||qt("color=full")||qt("color=truecolor"))return 3;if(qt("color=256"))return 2;if(e&&!e.isTTY&&Fn!==!0)return 0;let t=Fn?1:0;if(process.platform==="win32"){let r=Dy.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(r[0])>=10&&Number(r[2])>=10586?Number(r[2])>=14931?3:2:1}if("CI"in ot)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(r=>r in ot)||ot.CI_NAME==="codeship"?1:t;if("TEAMCITY_VERSION"in ot)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(ot.TEAMCITY_VERSION)?1:0;if(ot.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in ot){let r=parseInt((ot.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(ot.TERM_PROGRAM){case"iTerm.app":return r>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(ot.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(ot.TERM)||"COLORTERM"in ot?1:(ot.TERM==="dumb",t)}function _a(e){let t=wy(e);return by(t)}ip.exports={supportsColor:_a,stdout:_a(process.stdout),stderr:_a(process.stderr)}});var fp=ge((I3,lp)=>{"use strict";l();var xy=/(?:\\(u[a-f\d]{4}|x[a-f\d]{2}|.))|(?:\{(~)?(\w+(?:\([^)]*\))?(?:\.\w+(?:\([^)]*\))?)*)(?:[ \t]|(?=\r?\n)))|(\})|((?:.|[\r\n\f])+?)/gi,ap=/(?:^|\.)(\w+)(?:\(([^)]*)\))?/g,Sy=/^(['"])((?:\\.|(?!\1)[^\\])*)\1$/,Fy=/\\(u[a-f\d]{4}|x[a-f\d]{2}|.)|([^\\])/gi,vy=new Map([["n",`
`],["r","\r"],["t","	"],["b","\b"],["f","\f"],["v","\v"],["0","\0"],["\\","\\"],["e","\x1B"],["a","\x07"]]);function cp(e){return e[0]==="u"&&e.length===5||e[0]==="x"&&e.length===3?String.fromCharCode(parseInt(e.slice(1),16)):vy.get(e)||e}function $y(e,t){let r=[],n=t.trim().split(/\s*,\s*/g),s;for(let o of n)if(!isNaN(o))r.push(Number(o));else if(s=o.match(Sy))r.push(s[2].replace(Fy,(a,u,c)=>u?cp(u):c));else throw new Error(`Invalid Chalk template style argument: ${o} (in style '${e}')`);return r}function Ey(e){ap.lastIndex=0;let t=[],r;for(;(r=ap.exec(e))!==null;){let n=r[1];if(r[2]){let s=$y(n,r[2]);t.push([n].concat(s))}else t.push([n])}return t}function up(e,t){let r={};for(let s of t)for(let o of s.styles)r[o[0]]=s.inverse?null:o.slice(1);let n=e;for(let s of Object.keys(r))if(Array.isArray(r[s])){if(!(s in n))throw new Error(`Unknown Chalk style: ${s}`);r[s].length>0?n=n[s].apply(n,r[s]):n=n[s]}return n}lp.exports=(e,t)=>{let r=[],n=[],s=[];if(t.replace(xy,(o,a,u,c,f,p)=>{if(a)s.push(cp(a));else if(c){let d=s.join("");s=[],n.push(r.length===0?d:up(e,r)(d)),r.push({inverse:u,styles:Ey(c)})}else if(f){if(r.length===0)throw new Error("Found extraneous } in Chalk template literal");n.push(up(e,r)(s.join(""))),s=[],r.pop()}else s.push(p)}),n.push(s.join("")),r.length>0){let o=`Chalk template literal is missing ${r.length} closing bracket${r.length===1?"":"s"} (\`}\`)`;throw new Error(o)}return n.join("")}});var hp=ge((W3,hs)=>{"use strict";l();var ja=Hf(),Ye=rp(),Ia=op().stdout,Cy=fp(),mp=process.platform==="win32"&&!(process.env.TERM||"").toLowerCase().startsWith("xterm"),dp=["ansi","ansi","ansi256","ansi16m"],gp=new Set(["gray"]),vn=Object.create(null);function pp(e,t){t=t||{};let r=Ia?Ia.level:0;e.level=t.level===void 0?r:t.level,e.enabled="enabled"in t?t.enabled:e.level>0}function gs(e){if(!this||!(this instanceof gs)||this.template){let t={};return pp(t,e),t.template=function(){let r=[].slice.call(arguments);return By.apply(null,[t.template].concat(r))},Object.setPrototypeOf(t,gs.prototype),Object.setPrototypeOf(t.template,t),t.template.constructor=gs,t.template}pp(this,e)}mp&&(Ye.blue.open="\x1B[94m");for(let e of Object.keys(Ye))Ye[e].closeRe=new RegExp(ja(Ye[e].close),"g"),vn[e]={get(){let t=Ye[e];return Ti.call(this,this._styles?this._styles.concat(t):[t],this._empty,e)}};vn.visible={get(){return Ti.call(this,this._styles||[],!0,"visible")}};Ye.color.closeRe=new RegExp(ja(Ye.color.close),"g");for(let e of Object.keys(Ye.color.ansi))gp.has(e)||(vn[e]={get(){let t=this.level;return function(){let n={open:Ye.color[dp[t]][e].apply(null,arguments),close:Ye.color.close,closeRe:Ye.color.closeRe};return Ti.call(this,this._styles?this._styles.concat(n):[n],this._empty,e)}}});Ye.bgColor.closeRe=new RegExp(ja(Ye.bgColor.close),"g");for(let e of Object.keys(Ye.bgColor.ansi)){if(gp.has(e))continue;let t="bg"+e[0].toUpperCase()+e.slice(1);vn[t]={get(){let r=this.level;return function(){let s={open:Ye.bgColor[dp[r]][e].apply(null,arguments),close:Ye.bgColor.close,closeRe:Ye.bgColor.closeRe};return Ti.call(this,this._styles?this._styles.concat(s):[s],this._empty,e)}}}}var Ay=Object.defineProperties(()=>{},vn);function Ti(e,t,r){let n=function(){return Ty.apply(n,arguments)};n._styles=e,n._empty=t;let s=this;return Object.defineProperty(n,"level",{enumerable:!0,get(){return s.level},set(o){s.level=o}}),Object.defineProperty(n,"enabled",{enumerable:!0,get(){return s.enabled},set(o){s.enabled=o}}),n.hasGrey=this.hasGrey||r==="gray"||r==="grey",n.__proto__=Ay,n}function Ty(){let e=arguments,t=e.length,r=String(arguments[0]);if(t===0)return"";if(t>1)for(let s=1;s<t;s++)r+=" "+e[s];if(!this.enabled||this.level<=0||!r)return this._empty?"":r;let n=Ye.dim.open;mp&&this.hasGrey&&(Ye.dim.open="");for(let s of this._styles.slice().reverse())r=s.open+r.replace(s.closeRe,s.open)+s.close,r=r.replace(/\r?\n/g,`${s.close}$&${s.open}`);return Ye.dim.open=n,r}function By(e,t){if(!Array.isArray(t))return[].slice.call(arguments,1).join(" ");let r=[].slice.call(arguments,2),n=[t.raw[0]];for(let s=1;s<t.length;s++)n.push(String(r[s-1]).replace(/[{}\\]/g,"\\$&")),n.push(String(t.raw[s]));return Cy(e,n.join(""))}Object.defineProperties(gs.prototype,vn);hs.exports=gs();hs.exports.supportsColor=Ia;hs.exports.default=hs.exports});var vp=ge(ys=>{"use strict";l();Object.defineProperty(ys,"__esModule",{value:!0});ys.default=Iy;ys.shouldHighlight=Fp;var yp=Bf(),Dp=Wf(),Ma=Ly(Pa(),!0);function wp(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,r=new WeakMap;return(wp=function(n){return n?r:t})(e)}function Ly(e,t){if(!t&&e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var r=wp(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(o!=="default"&&{}.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}var xp=typeof process=="object"&&(process.env.FORCE_COLOR==="0"||process.env.FORCE_COLOR==="false")?(0,Ma.createColors)(!1):Ma.default,bp=(e,t)=>r=>e(t(r)),Ry=new Set(["as","async","from","get","of","set"]);function Ny(e){return{keyword:e.cyan,capitalized:e.yellow,jsxIdentifier:e.yellow,punctuator:e.yellow,number:e.magenta,string:e.green,regex:e.magenta,comment:e.gray,invalid:bp(bp(e.white,e.bgRed),e.bold)}}var Py=/\r\n|[\n\r\u2028\u2029]/,ky=/^[()[\]{}]$/,Sp;{let e=/^[a-z][\w-]*$/i,t=function(r,n,s){if(r.type==="name"){if((0,Dp.isKeyword)(r.value)||(0,Dp.isStrictReservedWord)(r.value,!0)||Ry.has(r.value))return"keyword";if(e.test(r.value)&&(s[n-1]==="<"||s.slice(n-2,n)==="</"))return"jsxIdentifier";if(r.value[0]!==r.value[0].toLowerCase())return"capitalized"}return r.type==="punctuator"&&ky.test(r.value)?"bracket":r.type==="invalid"&&(r.value==="@"||r.value==="#")?"punctuator":r.type};Sp=function*(r){let n;for(;n=yp.default.exec(r);){let s=yp.matchToToken(n);yield{type:t(s,n.index,r),value:s.value}}}}function Oy(e,t){let r="";for(let{type:n,value:s}of Sp(t)){let o=e[n];o?r+=s.split(Py).map(a=>o(a)).join(`
`):r+=s}return r}function Fp(e){return xp.isColorSupported||e.forceColor}var Wa;function _y(e){if(e){var t;return(t=Wa)!=null||(Wa=(0,Ma.createColors)(!0)),Wa}return xp}function Iy(e,t={}){if(e!==""&&Fp(t)){let r=Ny(_y(t.forceColor));return Oy(r,e)}else return e}{let e,t;ys.getChalk=({forceColor:r})=>{var n;if((n=e)!=null||(e=hp()),r){var s;return(s=t)!=null||(t=new e.constructor({enabled:!0,level:1})),t}return e}}});var Lp=ge(Bi=>{"use strict";l();Object.defineProperty(Bi,"__esModule",{value:!0});Bi.codeFrameColumns=Bp;Bi.default=Hy;var $p=vp(),Ga=jy(Pa(),!0);function Tp(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,r=new WeakMap;return(Tp=function(n){return n?r:t})(e)}function jy(e,t){if(!t&&e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var r=Tp(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(o!=="default"&&{}.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}var Wy=typeof process=="object"&&(process.env.FORCE_COLOR==="0"||process.env.FORCE_COLOR==="false")?(0,Ga.createColors)(!1):Ga.default,Ep=(e,t)=>r=>e(t(r)),qa;function My(e){if(e){var t;return(t=qa)!=null||(qa=(0,Ga.createColors)(!0)),qa}return Wy}var Cp=!1;function qy(e){return{gutter:e.gray,marker:Ep(e.red,e.bold),message:Ep(e.red,e.bold)}}var Ap=/\r\n|[\n\r\u2028\u2029]/;function Gy(e,t,r){let n=Object.assign({column:0,line:-1},e.start),s=Object.assign({},n,e.end),{linesAbove:o=2,linesBelow:a=3}=r||{},u=n.line,c=n.column,f=s.line,p=s.column,d=Math.max(u-(o+1),0),y=Math.min(t.length,f+a);u===-1&&(d=0),f===-1&&(y=t.length);let D=f-u,g={};if(D)for(let F=0;F<=D;F++){let q=F+u;if(!c)g[q]=!0;else if(F===0){let O=t[q-1].length;g[q]=[c,O-c+1]}else if(F===D)g[q]=[0,p];else{let O=t[q-F].length;g[q]=[0,O]}}else c===p?c?g[u]=[c,0]:g[u]=!0:g[u]=[c,p-c];return{start:d,end:y,markerLines:g}}function Bp(e,t,r={}){let n=(r.highlightCode||r.forceColor)&&(0,$p.shouldHighlight)(r),s=My(r.forceColor),o=qy(s),a=(F,q)=>n?F(q):q,u=e.split(Ap),{start:c,end:f,markerLines:p}=Gy(t,u,r),d=t.start&&typeof t.start.column=="number",y=String(f).length,g=(n?(0,$p.default)(e,r):e).split(Ap,f).slice(c,f).map((F,q)=>{let O=c+1+q,P=` ${` ${O}`.slice(-y)} |`,B=p[O],G=!p[O+1];if(B){let ye="";if(Array.isArray(B)){let X=F.slice(0,Math.max(B[0]-1,0)).replace(/[^\t]/g," "),J=B[1]||1;ye=[`
 `,a(o.gutter,P.replace(/\d/g," "))," ",X,a(o.marker,"^").repeat(J)].join(""),G&&r.message&&(ye+=" "+a(o.message,r.message))}return[a(o.marker,">"),a(o.gutter,P),F.length>0?` ${F}`:"",ye].join("")}else return` ${a(o.gutter,P)}${F.length>0?` ${F}`:""}`}).join(`
`);return r.message&&!d&&(g=`${" ".repeat(y+1)}${r.message}
${g}`),n?s.reset(g):g}function Hy(e,t,r,n={}){if(!Cp){Cp=!0;let o="Passing lineNumber and colNumber is deprecated to @babel/code-frame. Please use `codeFrameColumns`.";if(process.emitWarning)process.emitWarning(o,"DeprecationWarning");else{let a=new Error(o);a.name="DeprecationWarning",console.warn(new Error(o))}}return r=Math.max(r,0),Bp(e,{start:{column:r,line:t}},n)}});var em=ge((_6,eu)=>{l();(function(){var e;function t(r,n){var s=this instanceof t?this:e;if(s.reset(n),typeof r=="string"&&r.length>0&&s.hash(r),s!==this)return s}t.prototype.hash=function(r){var n,s,o,a,u;switch(u=r.length,this.len+=u,s=this.k1,o=0,this.rem){case 0:s^=u>o?r.charCodeAt(o++)&65535:0;case 1:s^=u>o?(r.charCodeAt(o++)&65535)<<8:0;case 2:s^=u>o?(r.charCodeAt(o++)&65535)<<16:0;case 3:s^=u>o?(r.charCodeAt(o)&255)<<24:0,s^=u>o?(r.charCodeAt(o++)&65280)>>8:0}if(this.rem=u+this.rem&3,u-=this.rem,u>0){for(n=this.h1;s=s*11601+(s&65535)*3432906752&4294967295,s=s<<15|s>>>17,s=s*13715+(s&65535)*461832192&4294967295,n^=s,n=n<<13|n>>>19,n=n*5+3864292196&4294967295,!(o>=u);)s=r.charCodeAt(o++)&65535^(r.charCodeAt(o++)&65535)<<8^(r.charCodeAt(o++)&65535)<<16,a=r.charCodeAt(o++),s^=(a&255)<<24^(a&65280)>>8;switch(s=0,this.rem){case 3:s^=(r.charCodeAt(o+2)&65535)<<16;case 2:s^=(r.charCodeAt(o+1)&65535)<<8;case 1:s^=r.charCodeAt(o)&65535}this.h1=n}return this.k1=s,this},t.prototype.result=function(){var r,n;return r=this.k1,n=this.h1,r>0&&(r=r*11601+(r&65535)*3432906752&4294967295,r=r<<15|r>>>17,r=r*13715+(r&65535)*461832192&4294967295,n^=r),n^=this.len,n^=n>>>16,n=n*51819+(n&65535)*2246770688&4294967295,n^=n>>>13,n=n*44597+(n&65535)*3266445312&4294967295,n^=n>>>16,n>>>0},t.prototype.reset=function(r){return this.h1=typeof r=="number"?r:0,this.rem=this.k1=this.len=0,this},e=new t,typeof eu<"u"?eu.exports=t:this.MurmurHash3=t})()});var tm=ge(en=>{"use strict";l();Object.defineProperty(en,"__esModule",{value:!0});en.signals=void 0;en.signals=[];en.signals.push("SIGHUP","SIGINT","SIGTERM");process.platform!=="win32"&&en.signals.push("SIGALRM","SIGABRT","SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT");process.platform==="linux"&&en.signals.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT")});var rm=ge(ir=>{"use strict";l();var Ii;Object.defineProperty(ir,"__esModule",{value:!0});ir.unload=ir.load=ir.onExit=ir.signals=void 0;var ji=tm();Object.defineProperty(ir,"signals",{enumerable:!0,get:function(){return ji.signals}});var Wi=e=>!!e&&typeof e=="object"&&typeof e.removeListener=="function"&&typeof e.emit=="function"&&typeof e.reallyExit=="function"&&typeof e.listeners=="function"&&typeof e.kill=="function"&&typeof e.pid=="number"&&typeof e.on=="function",tu=Symbol.for("signal-exit emitter"),ru=globalThis,TD=Object.defineProperty.bind(Object),nu=class{emitted={afterExit:!1,exit:!1};listeners={afterExit:[],exit:[]};count=0;id=Math.random();constructor(){if(ru[tu])return ru[tu];TD(ru,tu,{value:this,writable:!1,enumerable:!1,configurable:!1})}on(t,r){this.listeners[t].push(r)}removeListener(t,r){let n=this.listeners[t],s=n.indexOf(r);s!==-1&&(s===0&&n.length===1?n.length=0:n.splice(s,1))}emit(t,r,n){if(this.emitted[t])return!1;this.emitted[t]=!0;let s=!1;for(let o of this.listeners[t])s=o(r,n)===!0||s;return t==="exit"&&(s=this.emit("afterExit",r,n)||s),s}},Mi=class{},BD=e=>({onExit(t,r){return e.onExit(t,r)},load(){return e.load()},unload(){return e.unload()}}),su=class extends Mi{onExit(){return()=>{}}load(){}unload(){}},iu=class extends Mi{#n=ou.platform==="win32"?"SIGINT":"SIGHUP";#t=new nu;#e;#a;#o;#i={};#r=!1;constructor(t){super(),this.#e=t,this.#i={};for(let r of ji.signals)this.#i[r]=()=>{let n=this.#e.listeners(r),{count:s}=this.#t,o=t;if(typeof o.__signal_exit_emitter__=="object"&&typeof o.__signal_exit_emitter__.count=="number"&&(s+=o.__signal_exit_emitter__.count),n.length===s){this.unload();let a=this.#t.emit("exit",null,r),u=r==="SIGHUP"?this.#n:r;a||t.kill(t.pid,u)}};this.#o=t.reallyExit,this.#a=t.emit}onExit(t,r){if(!Wi(this.#e))return()=>{};this.#r===!1&&this.load();let n=r?.alwaysLast?"afterExit":"exit";return this.#t.on(n,t),()=>{this.#t.removeListener(n,t),this.#t.listeners.exit.length===0&&this.#t.listeners.afterExit.length===0&&this.unload()}}load(){if(!this.#r){this.#r=!0,this.#t.count+=1;for(let t of ji.signals)try{let r=this.#i[t];r&&this.#e.on(t,r)}catch{}this.#e.emit=(t,...r)=>this.#s(t,...r),this.#e.reallyExit=t=>this.#c(t)}}unload(){this.#r&&(this.#r=!1,ji.signals.forEach(t=>{let r=this.#i[t];if(!r)throw new Error("Listener not defined for signal: "+t);try{this.#e.removeListener(t,r)}catch{}}),this.#e.emit=this.#a,this.#e.reallyExit=this.#o,this.#t.count-=1)}#c(t){return Wi(this.#e)?(this.#e.exitCode=t||0,this.#t.emit("exit",this.#e.exitCode,null),this.#o.call(this.#e,this.#e.exitCode)):0}#s(t,...r){let n=this.#a;if(t==="exit"&&Wi(this.#e)){typeof r[0]=="number"&&(this.#e.exitCode=r[0]);let s=n.call(this.#e,t,...r);return this.#t.emit("exit",this.#e.exitCode,null),s}else return n.call(this.#e,t,...r)}},ou=globalThis.process;Ii=BD(Wi(ou)?new iu(ou):new su),ir.onExit=Ii.onExit,ir.load=Ii.load,ir.unload=Ii.unload});var sm=ge((G6,bs)=>{"use strict";l();bs.exports=_D;bs.exports.sync=ID;bs.exports._getTmpname=au;bs.exports._cleanupOnExit=uu;var Ie=Xe("fs"),LD=em(),{onExit:nm}=rm(),RD=Xe("path"),{promisify:kt}=Xe("util"),Br={},ND=function(){try{return Xe("worker_threads").threadId}catch{return 0}}(),PD=0;function au(e){return e+"."+LD(b).hash(String(process.pid)).hash(String(ND)).hash(String(++PD)).result()}function uu(e){return()=>{try{Ie.unlinkSync(typeof e=="function"?e():e)}catch{}}}function kD(e){return new Promise(t=>{Br[e]||(Br[e]=[]),Br[e].push(t),Br[e].length===1&&t()})}function qi(e){return e.code==="ENOSYS"||(!process.getuid||process.getuid()!==0)&&(e.code==="EINVAL"||e.code==="EPERM")}async function OD(e,t,r={}){typeof r=="string"&&(r={encoding:r});let n,s,o=nm(uu(()=>s)),a=RD.resolve(e);try{await kD(a);let u=await kt(Ie.realpath)(e).catch(()=>e);if(s=au(u),!r.mode||!r.chown){let c=await kt(Ie.stat)(u).catch(()=>{});c&&(r.mode==null&&(r.mode=c.mode),r.chown==null&&process.getuid&&(r.chown={uid:c.uid,gid:c.gid}))}n=await kt(Ie.open)(s,"w",r.mode),r.tmpfileCreated&&await r.tmpfileCreated(s),ArrayBuffer.isView(t)?await kt(Ie.write)(n,t,0,t.length,0):t!=null&&await kt(Ie.write)(n,String(t),0,String(r.encoding||"utf8")),r.fsync!==!1&&await kt(Ie.fsync)(n),await kt(Ie.close)(n),n=null,r.chown&&await kt(Ie.chown)(s,r.chown.uid,r.chown.gid).catch(c=>{if(!qi(c))throw c}),r.mode&&await kt(Ie.chmod)(s,r.mode).catch(c=>{if(!qi(c))throw c}),await kt(Ie.rename)(s,u)}finally{n&&await kt(Ie.close)(n).catch(()=>{}),o(),await kt(Ie.unlink)(s).catch(()=>{}),Br[a].shift(),Br[a].length>0?Br[a][0]():delete Br[a]}}async function _D(e,t,r,n){r instanceof Function&&(n=r,r={});let s=OD(e,t,r);if(n)try{let o=await s;return n(o)}catch(o){return n(o)}return s}function ID(e,t,r){typeof r=="string"?r={encoding:r}:r||(r={});try{e=Ie.realpathSync(e)}catch{}let n=au(e);if(!r.mode||!r.chown)try{let c=Ie.statSync(e);r=Object.assign({},r),r.mode||(r.mode=c.mode),!r.chown&&process.getuid&&(r.chown={uid:c.uid,gid:c.gid})}catch{}let s,o=uu(n),a=nm(o),u=!0;try{if(s=Ie.openSync(n,"w",r.mode||438),r.tmpfileCreated&&r.tmpfileCreated(n),ArrayBuffer.isView(t)?Ie.writeSync(s,t,0,t.length,0):t!=null&&Ie.writeSync(s,String(t),0,String(r.encoding||"utf8")),r.fsync!==!1&&Ie.fsyncSync(s),Ie.closeSync(s),s=null,r.chown)try{Ie.chownSync(n,r.chown.uid,r.chown.gid)}catch(c){if(!qi(c))throw c}if(r.mode)try{Ie.chmodSync(n,r.mode)}catch(c){if(!qi(c))throw c}Ie.renameSync(n,e),u=!1}finally{if(s)try{Ie.closeSync(s)}catch{}a(),u&&o()}}});var Dd=ge((iR,yd)=>{"use strict";l();var hd=Xe("child_process"),md=hd.spawn,ob=hd.exec;yd.exports=function(e,t,r){if(typeof t=="function"&&r===void 0&&(r=t,t=void 0),e=parseInt(e),Number.isNaN(e)){if(r)return r(new Error("pid must be a number"));throw new Error("pid must be a number")}var n={},s={};switch(n[e]=[],s[e]=1,process.platform){case"win32":ob("taskkill /pid "+e+" /T /F",r);break;case"darwin":Eu(e,n,s,function(o){return md("pgrep",["-P",o])},function(){dd(n,t,r)});break;default:Eu(e,n,s,function(o){return md("ps",["-o","pid","--no-headers","--ppid",o])},function(){dd(n,t,r)});break}};function dd(e,t,r){var n={};try{Object.keys(e).forEach(function(s){e[s].forEach(function(o){n[o]||(gd(o,t),n[o]=1)}),n[s]||(gd(s,t),n[s]=1)})}catch(s){if(r)return r(s);throw s}if(r)return r()}function gd(e,t){try{process.kill(parseInt(e,10),t)}catch(r){if(r.code!=="ESRCH")throw r}}function Eu(e,t,r,n,s){var o=n(e),a="";o.stdout.on("data",function(f){var f=f.toString("ascii");a+=f});var u=function(c){if(delete r[e],c!=0){Object.keys(r).length==0&&s();return}a.match(/\d+/g).forEach(function(f){f=parseInt(f,10),t[e].push(f),t[f]=[],r[f]=1,Eu(f,t,r,n,s)})};o.on("close",u)}});l();var Id=Bt(ku());import{argv as Fb}from"node:process";l();import{argv as Sb}from"node:process";l();l();l();function He(e){if(e===null)return"Null";if(e===void 0)return"Undefined";if(Number.isNaN(e))return"NaN";let t=Object.prototype.toString.call(e).slice(8,-1);return t==="AsyncFunction"?"Promise":t}l();var{isArray:gr}=Array;function on(e){return gr(e)?e.length>0:He(e)==="Object"?Object.keys(e).length>0:!!e}function Vt(...e){let t=0;for(;t<e.length;){let r=e[t];if(He(r)==="Function"){if(on(r()))return!1}else if(on(r))return!1;t++}return!0}l();l();function uo(e){return gr(e)?e.length===0:He(e)==="Object"?Object.keys(e).length===0:!e}function Ts(...e){let t=0;for(;t<e.length;){let r=e[t];if(He(r)==="Function"){if(uo(r()))return!1}else if(uo(r))return!1;t++}return!0}l();function dt(...e){let t=0;for(;t<e.length;){let r=e[t];if(He(r)==="Function"){if(on(r()))return!0}else if(on(r))return!0;t++}return!1}l();l();function Zd(e){return e<<0===e}var Ou=Number.isInteger||Zd;function Bs(e,t="."){return typeof e=="string"?e.split(t).map(r=>Ou(r)?Number(r):r):e}l();function Qd(e,t){let r=t,n=0,s=Bs(e);for(;n<s.length;){if(r==null||r[s[n]]===null)return;r=r[s[n]],n++}return r}function co(e,t){if(arguments.length===1)return r=>co(e,r);if(t!=null)return Qd(e,t)}l();function lo(e,t){if(!gr(t))throw new Error(`Cannot read property 'indexOf' of ${t}`);let r=He(e);if(!["Array","NaN","Object","RegExp"].includes(r))return t.indexOf(e);let n=-1,s=-1,{length:o}=t;for(;++n<o&&s===-1;)Ls(t[n],e)&&(s=n);return s}function _u(e){let t=[],r;for(;!(r=e.next()).done;)t.push(r.value);return t}function eg(e,t){if(e.size!==t.size)return!1;let r=_u(e.values()),n=_u(t.values());return r.filter(o=>lo(o,n)===-1).length===0}function tg(e,t){return e.message!==t.message||e.toString!==t.toString?!1:e.toString()===t.toString()}function Iu(e){return e.toDateString?[!0,e.getTime()]:[!1]}function ju(e){return e.constructor!==RegExp?[!1]:[!0,e.toString()]}function Ls(e,t){if(arguments.length===1)return u=>Ls(e,u);if(Object.is(e,t))return!0;let r=He(e);if(r!==He(t))return!1;if(r==="Function")return e.name===void 0?!1:e.name===t.name;if(["NaN","Null","Undefined"].includes(r))return!0;if(["BigInt","Number"].includes(r))return Object.is(-0,e)!==Object.is(-0,t)?!1:e.toString()===t.toString();if(["Boolean","String"].includes(r))return e.toString()===t.toString();if(r==="Array"){let u=Array.from(e),c=Array.from(t);if(u.toString()!==c.toString())return!1;let f=!0;return u.forEach((p,d)=>{f&&p!==c[d]&&!Ls(p,c[d])&&(f=!1)}),f}let n=ju(e),s=ju(t);if(n[0])return s[0]?n[1]===s[1]:!1;if(s[0])return!1;let o=Iu(e),a=Iu(t);if(o[0])return a[0]?o[1]===a[1]:!1;if(a[0])return!1;if(e instanceof Error)return t instanceof Error?tg(e,t):!1;if(r==="Set")return eg(e,t);if(r==="Object"){let u=Object.keys(e);if(u.length!==Object.keys(t).length)return!1;let c=!0;return u.forEach(f=>{if(c){let p=e[f],d=t[f];p!==d&&!Ls(p,d)&&(c=!1)}}),c}return!1}l();var rg="RAMBDAX_DELAY";function tt(e){return new Promise(t=>{setTimeout(()=>{t(rg)},e)})}l();function fo(e,t){if(arguments.length===1)return r=>fo(e,r);if(typeof t=="string")return t.includes(e);if(!t)throw new TypeError(`Cannot read property 'indexOf' of ${t}`);return gr(t)?lo(e,t)>-1:!1}l();function an(e,t){return arguments.length===1?r=>an(e,r):He(t)===e}l();async function Wu(e,t){let r=t.map((n,s)=>e(n,s));return Promise.all(r)}function Mu(e,t){return arguments.length===1?async r=>Wu(e,r):new Promise((r,n)=>{Wu(e,t).then(r).catch(n)})}l();l();l();function qu(e,t){return String(e)===String(t)}function Gu(e,t){let r=-1,{length:n}=t;for(;++r<n;)if(qu(t[r],e))return!0;return!1}function po(e,t){if(arguments.length===1)return s=>po(e,s);if(t==null)return;let r=Bs(e,","),n={};for(let s in t)Gu(s,r)||(n[s]=t[s]);return n}l();function We(e,t){return arguments.length===1?r=>We(e,r):t?t.hasOwnProperty(e):!1}l();function Lt(e,t){return arguments.length===1?r=>Lt(e,r):co(e,t)!==void 0}l();function Pr(e){let t=He(e);return["Undefined","NaN","Number","Null"].includes(t)?!1:e?He(e.isEmpty)==="Function"?e.isEmpty():e.isEmpty?!!e.isEmpty:t==="Object"?Object.keys(e).length===0:t==="Array"?e.length===0:!1:!0}l();function Hu(e){return e==null}l();function zu(e){return typeof e=="string"?e[e.length-1]||"":e[e.length-1]}l();import i0 from"fast-glob";import{relative as o0}from"pathe";import{readFile as a0}from"fs-extra";l();l();async function Jt(e,t,{concurrency:r=Number.POSITIVE_INFINITY,stopOnError:n=!0,signal:s}={}){return new Promise((o,a)=>{if(e[Symbol.iterator]===void 0&&e[Symbol.asyncIterator]===void 0)throw new TypeError(`Expected \`input\` to be either an \`Iterable\` or \`AsyncIterable\`, got (${typeof e})`);if(typeof t!="function")throw new TypeError("Mapper function is required");if(!(Number.isSafeInteger(r)&&r>=1||r===Number.POSITIVE_INFINITY))throw new TypeError(`Expected \`concurrency\` to be an integer from 1 and up or \`Infinity\`, got \`${r}\` (${typeof r})`);let u=[],c=[],f=new Map,p=!1,d=!1,y=!1,D=0,g=0,F=e[Symbol.iterator]===void 0?e[Symbol.asyncIterator]():e[Symbol.iterator](),q=K=>{p=!0,d=!0,a(K)};s&&(s.aborted&&q(s.reason),s.addEventListener("abort",()=>{q(s.reason)}));let O=async()=>{if(d)return;let K=await F.next(),P=g;if(g++,K.done){if(y=!0,D===0&&!d){if(!n&&c.length>0){q(new AggregateError(c));return}if(d=!0,f.size===0){o(u);return}let B=[];for(let[G,ye]of u.entries())f.get(G)!==Rs&&B.push(ye);o(B)}return}D++,(async()=>{try{let B=await K.value;if(d)return;let G=await t(B,P);G===Rs&&f.set(P,G),u[P]=G,D--,await O()}catch(B){if(n)q(B);else{c.push(B),D--;try{await O()}catch(G){q(G)}}}})()};(async()=>{for(let K=0;K<r;K++){try{await O()}catch(P){q(P);break}if(y||p)break}})()})}var Rs=Symbol("skip");l();l();l();var go=Bt(Vu(),1);l();var Rn=class extends Error{constructor(t){super(t),this.name="TimeoutError"}},ho=class extends Error{constructor(t){super(),this.name="AbortError",this.message=t}},Ju=e=>globalThis.DOMException===void 0?new ho(e):new DOMException(e),Yu=e=>{let t=e.reason===void 0?Ju("This operation was aborted."):e.reason;return t instanceof Error?t:Ju(t)};function yo(e,t){let{milliseconds:r,fallback:n,message:s,customTimers:o={setTimeout,clearTimeout}}=t,a,c=new Promise((f,p)=>{if(typeof r!="number"||Math.sign(r)!==1)throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${r}\``);if(t.signal){let{signal:y}=t;y.aborted&&p(Yu(y)),y.addEventListener("abort",()=>{p(Yu(y))})}if(r===Number.POSITIVE_INFINITY){e.then(f,p);return}let d=new Rn;a=o.setTimeout.call(void 0,()=>{if(n){try{f(n())}catch(y){p(y)}return}typeof e.cancel=="function"&&e.cancel(),s===!1?f():s instanceof Error?p(s):(d.message=s??`Promise timed out after ${r} milliseconds`,p(d))},r),(async()=>{try{f(await e)}catch(y){p(y)}})()}).finally(()=>{c.clear()});return c.clear=()=>{o.clearTimeout.call(void 0,a),a=void 0},c}l();l();function Do(e,t,r){let n=0,s=e.length;for(;s>0;){let o=Math.trunc(s/2),a=n+o;r(e[a],t)<=0?(n=++a,s-=o+1):s=o}return n}var Nn=class{#n=[];enqueue(t,r){r={priority:0,...r};let n={priority:r.priority,run:t};if(this.size&&this.#n[this.size-1].priority>=r.priority){this.#n.push(n);return}let s=Do(this.#n,n,(o,a)=>a.priority-o.priority);this.#n.splice(s,0,n)}dequeue(){return this.#n.shift()?.run}filter(t){return this.#n.filter(r=>r.priority===t.priority).map(r=>r.run)}get size(){return this.#n.length}};var kr=class extends go.default{#n;#t;#e=0;#a;#o;#i=0;#r;#c;#s;#g;#u=0;#f;#l;#h;timeout;constructor(t){if(super(),t={carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:Nn,...t},!(typeof t.intervalCap=="number"&&t.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${t.intervalCap?.toString()??""}\` (${typeof t.intervalCap})`);if(t.interval===void 0||!(Number.isFinite(t.interval)&&t.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${t.interval?.toString()??""}\` (${typeof t.interval})`);this.#n=t.carryoverConcurrencyCount,this.#t=t.intervalCap===Number.POSITIVE_INFINITY||t.interval===0,this.#a=t.intervalCap,this.#o=t.interval,this.#s=new t.queueClass,this.#g=t.queueClass,this.concurrency=t.concurrency,this.timeout=t.timeout,this.#h=t.throwOnTimeout===!0,this.#l=t.autoStart===!1}get#b(){return this.#t||this.#e<this.#a}get#w(){return this.#u<this.#f}#x(){this.#u--,this.#p(),this.emit("next")}#S(){this.#D(),this.#y(),this.#c=void 0}get#F(){let t=Date.now();if(this.#r===void 0){let r=this.#i-t;if(r<0)this.#e=this.#n?this.#u:0;else return this.#c===void 0&&(this.#c=setTimeout(()=>{this.#S()},r)),!0}return!1}#p(){if(this.#s.size===0)return this.#r&&clearInterval(this.#r),this.#r=void 0,this.emit("empty"),this.#u===0&&this.emit("idle"),!1;if(!this.#l){let t=!this.#F;if(this.#b&&this.#w){let r=this.#s.dequeue();return r?(this.emit("active"),r(),t&&this.#y(),!0):!1}}return!1}#y(){this.#t||this.#r!==void 0||(this.#r=setInterval(()=>{this.#D()},this.#o),this.#i=Date.now()+this.#o)}#D(){this.#e===0&&this.#u===0&&this.#r&&(clearInterval(this.#r),this.#r=void 0),this.#e=this.#n?this.#u:0,this.#m()}#m(){for(;this.#p(););}get concurrency(){return this.#f}set concurrency(t){if(!(typeof t=="number"&&t>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${t}\` (${typeof t})`);this.#f=t,this.#m()}async#v(t){return new Promise((r,n)=>{t.addEventListener("abort",()=>{n(t.reason)},{once:!0})})}async add(t,r={}){return r={timeout:this.timeout,throwOnTimeout:this.#h,...r},new Promise((n,s)=>{this.#s.enqueue(async()=>{this.#u++,this.#e++;try{r.signal?.throwIfAborted();let o=t({signal:r.signal});r.timeout&&(o=yo(Promise.resolve(o),{milliseconds:r.timeout})),r.signal&&(o=Promise.race([o,this.#v(r.signal)]));let a=await o;n(a),this.emit("completed",a)}catch(o){if(o instanceof Rn&&!r.throwOnTimeout){n();return}s(o),this.emit("error",o)}finally{this.#x()}},r),this.emit("add"),this.#p()})}async addAll(t,r){return Promise.all(t.map(async n=>this.add(n,r)))}start(){return this.#l?(this.#l=!1,this.#m(),this):this}pause(){this.#l=!0}clear(){this.#s=new this.#g}async onEmpty(){this.#s.size!==0&&await this.#d("empty")}async onSizeLessThan(t){this.#s.size<t||await this.#d("next",()=>this.#s.size<t)}async onIdle(){this.#u===0&&this.#s.size===0||await this.#d("idle")}async#d(t,r){return new Promise(n=>{let s=()=>{r&&!r()||(this.off(t,s),n())};this.on(t,s)})}get size(){return this.#s.size}sizeBy(t){return this.#s.filter(t).length}get pending(){return this.#u}get isPaused(){return this.#l}};import ig from"axios";var Or=ig.create({responseType:"json",headers:{}}),ne=new kr({interval:500,intervalCap:2});function _r(e){return e===429||e===500?!0:(ne.isPaused||ne.pause(),!1)}l();import{performance as bo}from"node:perf_hooks";l();import{Console as og}from"node:console";import{stdout as ag,stderr as ug}from"node:process";import{EventEmitter as cg}from"node:events";var gt=new cg,{error:xe,log:T,warn:un,clear:dw}=new og(ag,ug),{create:Ir,assign:ee,defineProperty:rt,defineProperties:gw,keys:Rt,values:cn,setPrototypeOf:hw}=Object,hr=Array.from,ln=Buffer.from,{abs:jr}=Math,{toString:yw}=Object.prototype;var A=new class{marks=[];time={};cache={};now(t){return this.stop(t||!0)}sec(t){let r=this.stop(t||!0);return r.slice(0,r.lastIndexOf(" "))}pause(t){t in this.marks&&(this.cache[t]=this.stop(t||!0))}start(t){t?this.time[t]=bo.now():this.marks.push(bo.now())}clear(t){if(t){if(t in this.time){delete this.time[t];return}if(t in this.cache){delete this.cache[t];return}}for(;this.marks.length!==0;)this.marks.pop()}stop(t=!1,r=!1){let n;if(typeof t=="boolean")n=t?this.marks[this.marks.length-1]:this.marks.pop();else if(t){if(t in this.cache){let u=this.cache[t];return delete this.cache[t],u}r?(n=this.time[t],delete this.time[t]):n=this.time[t]}let s=bo.now()-n;if(s<1e3)return`${jr(+s.toFixed(0))}ms`;let o=s/1e3;if(o<60)return`${jr(+o.toFixed(0))}s ${jr(+s.toFixed(0).slice(1,4))}ms`;let a=jr(+(o/60).toFixed(0));return`${a}m ${jr(+(o-60*Number(a)).toFixed(0))}s ${jr(+s.toFixed(0).slice(1,4))}ms`}};l();import{createHash as Sg}from"node:crypto";import{createRequire as Fg}from"node:module";l();var wo=Symbol("singleComment"),Ku=Symbol("multiComment"),fg=()=>"",pg=(e,t,r)=>e.slice(t,r).replace(/\S/g," "),mg=(e,t)=>{let r=t-1,n=0;for(;e[r]==="\\";)r-=1,n+=1;return!!(n%2)};function Pn(e,{whitespace:t=!0,trailingCommas:r=!1}={}){if(typeof e!="string")throw new TypeError(`Expected argument \`jsonString\` to be a \`string\`, got \`${typeof e}\``);let n=t?pg:fg,s=!1,o=!1,a=0,u="",c="",f=-1;for(let p=0;p<e.length;p++){let d=e[p],y=e[p+1];if(!o&&d==='"'&&(mg(e,p)||(s=!s)),!s)if(!o&&d+y==="//")u+=e.slice(a,p),a=p,o=wo,p++;else if(o===wo&&d+y===`\r
`){p++,o=!1,u+=n(e,a,p),a=p;continue}else if(o===wo&&d===`
`)o=!1,u+=n(e,a,p),a=p;else if(!o&&d+y==="/*"){u+=e.slice(a,p),a=p,o=Ku,p++;continue}else if(o===Ku&&d+y==="*/"){p++,o=!1,u+=n(e,a,p+1),a=p+1;continue}else r&&!o&&(f!==-1?d==="}"||d==="]"?(u+=e.slice(a,p),c+=n(u,0,1)+u.slice(1),u="",a=p,f=-1):d!==" "&&d!=="	"&&d!=="\r"&&d!==`
`&&(u+=e.slice(a,p),a=p,f=-1):d===","&&(c+=u+e.slice(a,p),u="",a=p,f=p))}return c+u+(o?n(e.slice(a)):e.slice(a))}l();l();l();var br=Bt(fc(),1);var{ansi256:Cw,fg:Aw,bgAnsi256:Tw,bg:Bw,rgb:Lw,bgRgb:Rw,hex:Nw,bgHex:Pw,reset:kw,inverse:Ow,hidden:_w,visible:Iw,bold:jw,dim:Ww,italic:Mw,underline:qw,strikethrough:Gw,strike:Hw,black:zw,red:Uw,green:Vw,yellow:Jw,blue:Yw,magenta:Kw,cyan:Xw,white:Zw,grey:Qw,gray:ex,blackBright:tx,redBright:rx,greenBright:nx,yellowBright:sx,blueBright:ix,magentaBright:ox,cyanBright:ax,whiteBright:ux,bgBlack:cx,bgRed:lx,bgGreen:fx,bgYellow:px,bgBlue:mx,bgMagenta:dx,bgCyan:gx,bgWhite:hx,bgGrey:yx,bgGray:Dx,bgBlackBright:bx,bgRedBright:wx,bgGreenBright:xx,bgYellowBright:Sx,bgBlueBright:Fx,bgMagentaBright:vx,bgCyanBright:$x,bgWhiteBright:Ex}=br.default;var pc="\x1B[H\x1B[2J";br.default.extend({brown:"#c19a6b",pink:"#ff75d1",teal:"#91EBC2",lightGray:"#2a2a2e",orange:"#FFAB40",lavender:"#8080FF",neonGreen:"#56ef83",neonCyan:"#69d5fd",neonRouge:"#FF8095",neonMagenta:"#7b68ee"});var{cyan:pe,red:se,green:xg,yellow:Ot,magenta:Eo,blue:I,white:C,gray:m,dim:Lx,cyanBright:Rx,redBright:ae,greenBright:Nx,yellowBright:te,magentaBright:_s,blueBright:mc,whiteBright:H,strip:dc,underline:Yt,bold:h,reset:ht,lightGray:Y,pink:_t,brown:Px,teal:Mr,orange:st,lavender:kx,neonGreen:Fe,neonCyan:le,neonRouge:Is,neonMagenta:fn}=br.default;var $=N({open:`${Y.open}\u250C\u2500${Y.close} `,stub:`${Y.open}\u251C${Y.close}  `,dash:`${Y.open}\u251C\u2500${Y.close} `,trim:`${Y.open}\u2502${Y.close}`,line:`${Y.open}\u2502${Y.close}  `,next:`
${Y.open}\u2502${Y.close}`,after:`${Y.open}\u2502${Y.close}`,wrap:`
${Y.open}\u2502${Y.close}
`,base:`${Y.open}\u2514\u2500${Y.close} `,red:`${se.dim.open}\u2502${se.dim.close}  `,redTrim:`${se.dim.open}\u2502${se.dim.close}`,yellow:`${Ot.dim.open}\u2502${Ot.dim.close}  `,yellowTrim:`${Ot.dim.open}\u2502${Ot.dim.close}`,indent:N({edge:`${Y.open}\u251C\u2500\u2500\u252C\u2500${Y.close} `,fall:`${Y.open}\u251C\u2500\u2500\u2510${Y.close} `,line:`${Y.open}\u2502  \u2502${Y.close} `,stub:`${Y.open}\u2502  \u251C${Y.close} `,dash:`${Y.open}\u2502  \u251C\u2500${Y.close} `,base:`${Y.open}\u2502  \u2514\u2500${Y.close} `})}),jx=`${m.open}|${m.close}`,gc=`${m.open}#${m.close}`,Wx=`${m.open}+${m.close}`,Mx=`${m.open}-${m.close}`,qx=`${m.open},${m.close}`,hc=`${Fe.open}\u2713${Fe.close}`,wr=`${ae.open}\u{10102}${ae.close}`,k=`${m.open}:${m.close}`,U=`${m.open}\u2192${m.close}`,or=`${m.open}\u25B8${m.close}`,js=`${m.open}\u2942${m.close}`,Q=`${m.open}~${m.close}`,ar=`${m.open}\u2014${m.close}`,Ws=`${m.open}(${m.close}`,Ms=`${m.open})${m.close}`,yc=`${m.open}{${m.close}`,Dc=`${m.open}}${m.close}`,bc=`${m.open}[${m.close}`,wc=`${m.open}]${m.close}`,qs=`${m.open}<${m.close}`,Gs=`${m.open}>${m.close}`;function ke(e,...t){let r=R(e);return function n(s,o,a){let u=typeof a;if(a&&u==="object")if(R(a))for(let c of a)o=n(s,o,c);else for(let c in a){let f=a[c];Ue(f)?o[c]=f(o[c],ke):f===void 0?s?o.splice(c,1):delete o[c]:f===null||W(f)===!1||R(f)?o[c]=f:typeof o[c]=="object"?o[c]=f===o[c]?f:ke(o[c],f):o[c]=n(!1,{},f)}else u==="function"&&(o=a(o,ke));return o}(r,r?e.slice():ee({},e),t)}function x(e,t){return W(t)?e in t:!1}function Le(e){return t=>t in e}function N(e){return e?ee(Ir(null),e):Ir(null)}function xc(e,{onlyFirst:t=!1}={}){let r=e.match(new RegExp(["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-nq-uy=><~]))"].join("|"),t?void 0:"g"));return r!==null?r:!1}function Hs(e){if(Pn(e).trim()==="")return{};try{return new Function(`return ${Pn(e).trim()}`)()}catch{return{}}}async function Sc(e,{format:t}){return t==="esm"?r=>import(r):vg(e)}function vg(e){return Ue(Xe)?Xe(e):Fg(import.meta.url)(e)}function Fc(e){return e===".mjs"||e===".cjs"?"js":e.slice(1)}function pn(){let e=new Date,t=e.getHours(),r=e.getMinutes(),n=e.getSeconds();return(t<10?`0${t}`:t)+k+(r<10?`0${r}`:r)+k+(n<10?`0${n}`:n)}function vc(e,t=2){return e.reduce((r,n,s)=>{let o=Math.floor(s/t);return r[o]||(r[o]=[]),r[o].push(n),r},[])}function $c(){return new Promise(e=>{Ue(setImmediate)?setImmediate(e):setTimeout(e)})}function Ee(e){return lt(e)?e.toString():W(e)||R(e)?JSON.stringify(e):be(e)||bt(e)?`${e}`:M(e)?e:String(e)}function Kt(e){return Sg("md5").update(e).digest("hex")}function Ec(e){return e.toLowerCase().replace(/[^a-z0-9_:]+/g,"-").replace(/-$/,"").replace(/^-/,"")}function Dt(e,t){return t>=2?e[e.length-1]!=="s"?`${e}s`:e:e[e.length-1]!=="s"?e:e.slice(0,-1)}function xr(e){return e.charAt(0).toUpperCase()+e.slice(1)}function zs(e){let t=e%10,r=e%100;return e+(t===1&&r!==11?"st":t===2&&r!==12?"nd":t===3&&r!==13?"rd":"th")}function me(...e){return e.join(" ")}function fe(...e){return R(e[0])?e[0].join(""):e.join("")}function $t(e,t=null){let r=0;if(R(e))for(let n of e)t?n[t].length>r&&(r=n[t].length):n.length>r&&(r=n.length);else for(let n in e)n.length>r&&(r=n.length);return r=r+1,function(s){let o=M(s)?r-s.length:r-s;return o<1?" ":" ".repeat(o)}}function It(){return Math.random().toString(36).slice(2)}function de(e){return e==null}function Cc(e){return lt(e)?e.toString().trim().length===0:e.trim().length===0}function ue(e){if(W(e)){for(let t in e)return!1;return!0}return R(e)?e.length===0:he(e)||bt(e)||$g(e)||Co(e)?!1:!e}function R(e){return Array.isArray(e)}function W(e){return typeof e=="object"}function M(e){return typeof e=="string"}function ur(e){return Object.prototype.toString.call(e).slice(8,-1)==="RegExp"}function Ue(e){return typeof e=="function"}function be(e){return typeof e=="boolean"}function bt(e){return typeof e=="number"}function Co(e){return Number.isNaN(e)}function $g(e){return Object.prototype.toString.call(e).slice(8,-1)==="Null"}function he(e){return typeof e>"u"}function lt(e){return Buffer.isBuffer(e)}l();import{argv as Lg}from"node:process";l();var Eg=Object.assign||((e,t)=>(t&&Object.keys(t).forEach(r=>e[r]=t[r]),e)),Ao=(e,t,r)=>{let n=typeof r;if(r&&n==="object")if(Array.isArray(r))for(let s of r)t=Ao(e,t,s);else for(let s of Object.keys(r)){let o=r[s];typeof o=="function"?t[s]=o(t[s],Us):o===void 0?e&&!isNaN(s)?t.splice(s,1):delete t[s]:o===null||typeof o!="object"||Array.isArray(o)?t[s]=o:typeof t[s]=="object"?t[s]=o===t[s]?o:Us(t[s],o):t[s]=Ao(!1,{},o)}else n==="function"&&(t=r(t,Us));return t},Us=(e,...t)=>{let r=Array.isArray(e);return Ao(r,r?e.slice():Eg({},e),t)},qr=Us;l();import{stdout as jn,stderr as Wn,env as Mn,platform as Ac}from"node:process";import{execFileSync as Cg}from"node:child_process";import{fileURLToPath as Ag}from"node:url";import{dirname as Tg,join as Bg}from"pathe";function Vs(e,t,r){return Cg(e,t,{encoding:"utf8",shell:r,stdio:["ignore","pipe","ignore"]}).trim()}function Tc(e,t){let r=Tg(Ag(import.meta.url));return Vs(Bg(r,e),[],t).split(/\r?\n/)}function Sr(e,t){let r=Number.parseInt(e,10);return{wrap:r>85?85:r,cols:Number.parseInt(e,10),rows:Number.parseInt(t,10)}}function Bc(){if(jn&&jn.columns&&jn.rows)return Sr(jn.columns,jn.rows);if(Wn&&Wn.columns&&Wn.rows)return Sr(Wn.columns,Wn.rows);if(Mn.COLUMNS&&Mn.LINES)return Sr(Mn.COLUMNS,Mn.LINES);if(Ac==="win32")try{let e=Tc("vendor/windows/term-size.exe",!1);if(e.length===2)return Sr(e[0],e[1])}catch{}else{if(Ac==="darwin")try{let e=Tc("vendor/macos/term-size",!0);if(e.length===2)return Sr(e[0],e[1])}catch{}try{let e=Vs("resize",["-u"]).match(/\d+/g);if(e.length===2)return Sr(e[0],e[1])}catch{}if(Mn.TERM)try{let e=Vs("tput",["cols"]),t=Vs("tput",["lines"]);if(e&&t)return Sr(e,t)}catch{}}return Sr(80,24)}l();var Js=["build","checksum","metafields","pages","paths","schema","sections","settings","templates"],Lc=[["cache","node_modules"],["input","source"],["output","theme"],["export","export"],["import","import"],["config","."]],Gr=["assets","config","layout","customers","locales","sections","schema","snippets","templates","metaobject","metafields","pages","redirects"],Hr=["templates","templates/customers","templates/metaobject","assets","config","layout","locales","sections","snippets"],Rc=["js","cjs","mjs","ts"];var Nc=["You cannot use script minification without esbuild installed","and configured as a processor. Install esbuild and configure Syncify","to apply transforms to leverage script minification."],qn=/([|,])/g,Ys=/\.(mjs|cjs|ts|js|tsx|jsx)$/;var To={404:"The requested resource was not found.",400:"The request was not understood by the server, generally due to bad syntax or because the Content-Type header was not correctly set to application / json. This status is also returned when the request provides an invalid code parameter during the OAuth token exchange process.",303:"The response to the request can be found under a different URL in the Location header and can be retrieved using a GET method on that resource.",401:"The necessary authentication credentials are not present in the request or are incorrect",402:"The requested shop is currently frozen. The shop owner needs to log in to the shop's admin, and pay the outstanding balance to unfreeze the shop.",406:"The requested resource is only capable of generating content not acceptable according to the Accept headers sent in the request.",423:"The requested shop is currently locked. Shops are locked if they repeatedly exceed their API request limit. or if there is an issue with the account, such as a detected compromise or fraud risk.",403:"The server is refusing to respond to the request. This is generally because you have not requested the appropriate scope for this action.",501:"The requested endpoint is not available on that particular shop, e.g. requesting access to a Shopify Plus\u2013only API on a non-Plus shop. This response may also indicate that this endpoint is reserved for future use.",503:"The server is currently unavailable. Check the Shopify status page for reported service outages. See https://www.shopifystatus.com"};l();var Pc=()=>({json:{assets:!0,config:!0,locales:!0,metafields:!0,metaobject:!0,groups:!0,templates:!0,exclude:[]},script:{minifySyntax:!0,minifyIdentifiers:!0,minifyWhitespace:!0,mangleProps:void 0,legalComments:"none",mangleQuoted:!1,keepNames:!1,exclude:[]},liquid:{minifyJavascript:!1,minifyStylesheet:!1,minifyStyle:!0,minifySchema:!0,removeComments:!0,collapseInner:!1,collapseWhitespace:!0,stripDashes:!0,exclude:[]},style:{exclude:[],format:!1,inline:!1,purgeUnusedCSS:!1,obfuscateAlphabet:"abcefghijklmnopqrstuvwxyz0123456789",obfuscateClassNames:!1,obfuscateWhitelist:[]},markup:{caseSensitive:!1,collapseBooleanAttributes:!1,collapseInlineTagWhitespace:!1,conservativeCollapse:!1,keepClosingSlash:!1,noNewlinesBeforeTagClose:!1,preventAttributesEscaping:!1,removeEmptyAttributes:!1,removeEmptyElements:!1,removeOptionalTags:!1,removeRedundantAttributes:!1,removeScriptTypeAttributes:!0,removeStyleLinkTypeAttributes:!0,useShortDoctype:!1,collapseWhitespace:!0,continueOnParseError:!0,removeComments:!0,minifyCSS:!0,minifyJS:!0,trimCustomFragments:!1,ignoreCustomFragments:[/(?<=\bstyle\b=["']\s?)[\s\S]*?(?="[\s\n>]?)/,/<style[\s\S]*?<\/style>/,/<script[\s\S]*?<\/script>/,/{%[\s\S]*?%}/]}});l();var kc=()=>({input:"source",output:"theme",import:"import",export:"export",config:".",hot:!1,stores:null,publish:{bindVersion:!1,publishRole:"unpublished",themeLimit:3,tunnelPort:80},spawn:{build:null,watch:null},log:{clear:!0,silent:!1,stats:!0,warnings:!0},paths:{assets:"assets/*",config:"config/*.json",layout:"layout/*.liquid",locales:"locales/*.json",metafields:"metafields/**/*.json",redirects:"redirects.yaml",schema:"schema/*.{schema,json}",snippets:"snippets/**/*.liquid",metaobject:"templates/metaobject/*",sections:"sections/**/*.{liquid,json}",pages:"pages/*",templates:"templates/*",customers:"templates/customers/*"},views:{sections:{prefixDir:!1,separator:"-",global:[]},snippets:{prefixDir:!1,separator:"-",global:[]},pages:{author:"",safeSync:!0,language:"html",suffixDir:!1,global:[]}},transform:{svg:null,style:null,script:null},terser:{json:!1,markup:!1,liquid:!1,script:!1}});l();var Oc=()=>({json:{indent:2,useTab:!1,crlf:!1,exclude:null},tailwind:{installed:!1,loaded:!1,file:!1,map:null,config:null},sass:{installed:!1,loaded:!1,file:!1,config:{warnings:!0,style:"compressed",sourcemap:!0,quietDeps:!1,include:["node_modules"]}},esbuild:{bundle:!0,format:"esm",globalName:void 0,target:"es2016",metafile:!0,external:[],platform:"browser",splitting:!1,sourcemap:"linked",write:!1,logLevel:"silent",plugins:[]},sharp:{installed:!1,required:!1,loaded:!1,file:!1,config:{}},postcss:{file:!1,config:[]},sprite:{mode:{inline:!0,symbol:{example:!1}},shape:{transform:["svgo"],id:{generator:"svg-%s"}},svg:{xmlDeclaration:!1,doctypeDeclaration:!1,dimensionAttributes:!1,namespaceClassnames:!1,namespaceIDs:!1}},svgo:{multipass:!0,js2svg:{indent:2,pretty:!0},plugins:["preset-default"]}});l();var _c=()=>({onBuild:[],onChange:[],onReload:[],onTransform:[],onWatch:[]});function Rg(){let e=N();for(let t of Gr)e[t]=N({input:null,match:null});return e.transforms=new Map,e}var i=new class ft{static defaults=kc();static plugins=_c();static terser=Pc();static processor=Oc();static package=N();static cache=N();static watch=new Set;process;restart=!1;cli=N();wss=null;stats=N();filters=N();commands=N();version="0.3.0-beta";cwd=null;argv=Lg.slice(2).join(" ");errors=new Set;warnings=new Map;publish=N({ngrok:null,bindVersion:!1,publishRole:"unpublished",themeLimit:3,tunnelPort:80});vc=N({dir:null,number:null,zip:null,patch:0,major:0,minor:0,update:null});env=N({cli:!1,tree:!1,dev:!0,prod:!1,ready:!1,sync:0,file:null,vars:{}});hot=N({inject:!0,server:3e3,socket:8089,history:!1,method:"hot",strategy:"hydrate",scroll:"preserved",layouts:["theme.liquid"],label:"visible",snippet:null,output:null,alive:{},renderer:"{% render 'hot.js'"+["","server: 3000","socket: 8089",'strategy: "hydrate"','scroll: "preserved"','label: "visible"',"history: false",'method: "hot"'].join(", ")+" %}"});log=N({idle:!1,group:"Syncify",title:"",uri:"",listen:null,thrown:null,queue:new Set,changes:N(),config:N({clear:!0,silent:!1,stats:!0,warnings:!0})});mode=N({build:!1,interactive:!1,dev:!0,prod:!1,strap:!1,watch:!1,clean:!1,cache:!1,setup:!1,upload:!1,import:!1,metafields:!1,terse:!1,hot:!1,pages:!1,pull:!1,force:!1,views:!1,script:!1,image:!1,style:!1,svg:!1,redirects:!1,export:!1,release:!1,publish:!1,themes:!1});file=N({base:null,path:null,relative:null});files=new Map;dirs=N();cmd=N({config:null,delete:null,filter:null,input:null,output:null});stores=[];sync=N({themes:[],stores:[]});spawn=N({paths:new Set,streams:new Map,invoked:!1,commands:N()});section=N({prefixDir:!1,separator:"-",global:null,baseDir:new Set,schema:null,shared:new Map});snippet=N({prefixDir:!1,separator:"-",global:null,baseDir:new Set});paths=Rg();page=N({safeSync:!0,author:"",global:null,suffixDir:!1,language:"html",export:N({quotes:"\u201C\u201D\u2018\u2019",html:!0,linkify:!1,typographer:!1,xhtmlOut:!1,breaks:!0,langPrefix:"language-"}),import:N({codeBlockStyle:"fenced",emDelimiter:"_",fence:"```",headingStyle:"atx",hr:"---",linkReferenceStyle:"full",linkStyle:"inlined",strongDelimiter:"**",bulletListMarker:"-"})});script=[];style=[];svg=[];image;terse=N({json:!1,liquid:!1,markup:!1,style:!1,script:!1});get watch(){return ft.watch}set watch(t){ft.watch=t}get cache(){return ft.cache}set cache(t){ft.cache=t}get terser(){return ft.terser}set terser(t){ft.terser=qr(ft.terser,t)}get processor(){return ft.processor}set config(t){ft.defaults=qr(ft.defaults,t)}get config(){return ft.defaults}set pkg(t){ft.package=t}get pkg(){return ft.package}get plugins(){return ft.plugins}get terminal(){return Bc()}};l();l();var mn=class{constructor({base:t,dir:r,ext:n,name:s,root:o}){this.base=t,this.dir=r,this.ext=n,this.name=s,this.root=o}data=void 0;hash;uuid;type;resource;root;dir;name;ext;base;relative;key;namespace;kind;input;output;size};l();import{cursorTo as Yh,clearScreenDown as Kh}from"node:readline";import{stdout as ta}from"node:process";import ra from"node-notifier";l();l();l();l();l();l();l();function Bo({onlyFirst:e=!1}={}){let t=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))"].join("|");return new RegExp(t,e?void 0:"g")}var Ng=Bo();function zr(e){if(typeof e!="string")throw new TypeError(`Expected a \`string\`, got \`${typeof e}\``);return e.replace(Ng,"")}l();l();function Ic(e){return e===161||e===164||e===167||e===168||e===170||e===173||e===174||e>=176&&e<=180||e>=182&&e<=186||e>=188&&e<=191||e===198||e===208||e===215||e===216||e>=222&&e<=225||e===230||e>=232&&e<=234||e===236||e===237||e===240||e===242||e===243||e>=247&&e<=250||e===252||e===254||e===257||e===273||e===275||e===283||e===294||e===295||e===299||e>=305&&e<=307||e===312||e>=319&&e<=322||e===324||e>=328&&e<=331||e===333||e===338||e===339||e===358||e===359||e===363||e===462||e===464||e===466||e===468||e===470||e===472||e===474||e===476||e===593||e===609||e===708||e===711||e>=713&&e<=715||e===717||e===720||e>=728&&e<=731||e===733||e===735||e>=768&&e<=879||e>=913&&e<=929||e>=931&&e<=937||e>=945&&e<=961||e>=963&&e<=969||e===1025||e>=1040&&e<=1103||e===1105||e===8208||e>=8211&&e<=8214||e===8216||e===8217||e===8220||e===8221||e>=8224&&e<=8226||e>=8228&&e<=8231||e===8240||e===8242||e===8243||e===8245||e===8251||e===8254||e===8308||e===8319||e>=8321&&e<=8324||e===8364||e===8451||e===8453||e===8457||e===8467||e===8470||e===8481||e===8482||e===8486||e===8491||e===8531||e===8532||e>=8539&&e<=8542||e>=8544&&e<=8555||e>=8560&&e<=8569||e===8585||e>=8592&&e<=8601||e===8632||e===8633||e===8658||e===8660||e===8679||e===8704||e===8706||e===8707||e===8711||e===8712||e===8715||e===8719||e===8721||e===8725||e===8730||e>=8733&&e<=8736||e===8739||e===8741||e>=8743&&e<=8748||e===8750||e>=8756&&e<=8759||e===8764||e===8765||e===8776||e===8780||e===8786||e===8800||e===8801||e>=8804&&e<=8807||e===8810||e===8811||e===8814||e===8815||e===8834||e===8835||e===8838||e===8839||e===8853||e===8857||e===8869||e===8895||e===8978||e>=9312&&e<=9449||e>=9451&&e<=9547||e>=9552&&e<=9587||e>=9600&&e<=9615||e>=9618&&e<=9621||e===9632||e===9633||e>=9635&&e<=9641||e===9650||e===9651||e===9654||e===9655||e===9660||e===9661||e===9664||e===9665||e>=9670&&e<=9672||e===9675||e>=9678&&e<=9681||e>=9698&&e<=9701||e===9711||e===9733||e===9734||e===9737||e===9742||e===9743||e===9756||e===9758||e===9792||e===9794||e===9824||e===9825||e>=9827&&e<=9829||e>=9831&&e<=9834||e===9836||e===9837||e===9839||e===9886||e===9887||e===9919||e>=9926&&e<=9933||e>=9935&&e<=9939||e>=9941&&e<=9953||e===9955||e===9960||e===9961||e>=9963&&e<=9969||e===9972||e>=9974&&e<=9977||e===9979||e===9980||e===9982||e===9983||e===10045||e>=10102&&e<=10111||e>=11094&&e<=11097||e>=12872&&e<=12879||e>=57344&&e<=63743||e>=65024&&e<=65039||e===65533||e>=127232&&e<=127242||e>=127248&&e<=127277||e>=127280&&e<=127337||e>=127344&&e<=127373||e===127375||e===127376||e>=127387&&e<=127404||e>=917760&&e<=917999||e>=983040&&e<=1048573||e>=1048576&&e<=1114109}function jc(e){return e===12288||e>=65281&&e<=65376||e>=65504&&e<=65510}function Wc(e){return e>=4352&&e<=4447||e===8986||e===8987||e===9001||e===9002||e>=9193&&e<=9196||e===9200||e===9203||e===9725||e===9726||e===9748||e===9749||e>=9800&&e<=9811||e===9855||e===9875||e===9889||e===9898||e===9899||e===9917||e===9918||e===9924||e===9925||e===9934||e===9940||e===9962||e===9970||e===9971||e===9973||e===9978||e===9981||e===9989||e===9994||e===9995||e===10024||e===10060||e===10062||e>=10067&&e<=10069||e===10071||e>=10133&&e<=10135||e===10160||e===10175||e===11035||e===11036||e===11088||e===11093||e>=11904&&e<=11929||e>=11931&&e<=12019||e>=12032&&e<=12245||e>=12272&&e<=12287||e>=12289&&e<=12350||e>=12353&&e<=12438||e>=12441&&e<=12543||e>=12549&&e<=12591||e>=12593&&e<=12686||e>=12688&&e<=12771||e>=12783&&e<=12830||e>=12832&&e<=12871||e>=12880&&e<=19903||e>=19968&&e<=42124||e>=42128&&e<=42182||e>=43360&&e<=43388||e>=44032&&e<=55203||e>=63744&&e<=64255||e>=65040&&e<=65049||e>=65072&&e<=65106||e>=65108&&e<=65126||e>=65128&&e<=65131||e>=94176&&e<=94180||e===94192||e===94193||e>=94208&&e<=100343||e>=100352&&e<=101589||e>=101632&&e<=101640||e>=110576&&e<=110579||e>=110581&&e<=110587||e===110589||e===110590||e>=110592&&e<=110882||e===110898||e>=110928&&e<=110930||e===110933||e>=110948&&e<=110951||e>=110960&&e<=111355||e===126980||e===127183||e===127374||e>=127377&&e<=127386||e>=127488&&e<=127490||e>=127504&&e<=127547||e>=127552&&e<=127560||e===127568||e===127569||e>=127584&&e<=127589||e>=127744&&e<=127776||e>=127789&&e<=127797||e>=127799&&e<=127868||e>=127870&&e<=127891||e>=127904&&e<=127946||e>=127951&&e<=127955||e>=127968&&e<=127984||e===127988||e>=127992&&e<=128062||e===128064||e>=128066&&e<=128252||e>=128255&&e<=128317||e>=128331&&e<=128334||e>=128336&&e<=128359||e===128378||e===128405||e===128406||e===128420||e>=128507&&e<=128591||e>=128640&&e<=128709||e===128716||e>=128720&&e<=128722||e>=128725&&e<=128727||e>=128732&&e<=128735||e===128747||e===128748||e>=128756&&e<=128764||e>=128992&&e<=129003||e===129008||e>=129292&&e<=129338||e>=129340&&e<=129349||e>=129351&&e<=129535||e>=129648&&e<=129660||e>=129664&&e<=129672||e>=129680&&e<=129725||e>=129727&&e<=129733||e>=129742&&e<=129755||e>=129760&&e<=129768||e>=129776&&e<=129784||e>=131072&&e<=196605||e>=196608&&e<=262141}function Pg(e){if(!Number.isSafeInteger(e))throw new TypeError(`Expected a code point, got \`${typeof e}\`.`)}function Ks(e,{ambiguousAsWide:t=!1}={}){return Pg(e),jc(e)||Wc(e)||t&&Ic(e)?2:1}l();var Mc=()=>/[#*0-9]\uFE0F?\u20E3|[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23ED-\u23EF\u23F1\u23F2\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB\u25FC\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692\u2694-\u2697\u2699\u269B\u269C\u26A0\u26A7\u26AA\u26B0\u26B1\u26BD\u26BE\u26C4\u26C8\u26CF\u26D1\u26E9\u26F0-\u26F5\u26F7\u26F8\u26FA\u2702\u2708\u2709\u270F\u2712\u2714\u2716\u271D\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u27A1\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B55\u3030\u303D\u3297\u3299]\uFE0F?|[\u261D\u270C\u270D](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?|[\u270A\u270B](?:\uD83C[\uDFFB-\uDFFF])?|[\u23E9-\u23EC\u23F0\u23F3\u25FD\u2693\u26A1\u26AB\u26C5\u26CE\u26D4\u26EA\u26FD\u2705\u2728\u274C\u274E\u2753-\u2755\u2795-\u2797\u27B0\u27BF\u2B50]|\u26D3\uFE0F?(?:\u200D\uD83D\uDCA5)?|\u26F9(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|\u2764\uFE0F?(?:\u200D(?:\uD83D\uDD25|\uD83E\uDE79))?|\uD83C(?:[\uDC04\uDD70\uDD71\uDD7E\uDD7F\uDE02\uDE37\uDF21\uDF24-\uDF2C\uDF36\uDF7D\uDF96\uDF97\uDF99-\uDF9B\uDF9E\uDF9F\uDFCD\uDFCE\uDFD4-\uDFDF\uDFF5\uDFF7]\uFE0F?|[\uDF85\uDFC2\uDFC7](?:\uD83C[\uDFFB-\uDFFF])?|[\uDFC4\uDFCA](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDFCB\uDFCC](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDCCF\uDD8E\uDD91-\uDD9A\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF43\uDF45-\uDF4A\uDF4C-\uDF7C\uDF7E-\uDF84\uDF86-\uDF93\uDFA0-\uDFC1\uDFC5\uDFC6\uDFC8\uDFC9\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF8-\uDFFF]|\uDDE6\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF]|\uDDE7\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF]|\uDDE8\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF]|\uDDE9\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF]|\uDDEA\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA]|\uDDEB\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7]|\uDDEC\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE]|\uDDED\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA]|\uDDEE\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9]|\uDDEF\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5]|\uDDF0\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF]|\uDDF1\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE]|\uDDF2\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF]|\uDDF3\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF]|\uDDF4\uD83C\uDDF2|\uDDF5\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE]|\uDDF6\uD83C\uDDE6|\uDDF7\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC]|\uDDF8\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF]|\uDDF9\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF]|\uDDFA\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF]|\uDDFB\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA]|\uDDFC\uD83C[\uDDEB\uDDF8]|\uDDFD\uD83C\uDDF0|\uDDFE\uD83C[\uDDEA\uDDF9]|\uDDFF\uD83C[\uDDE6\uDDF2\uDDFC]|\uDF44(?:\u200D\uD83D\uDFEB)?|\uDF4B(?:\u200D\uD83D\uDFE9)?|\uDFC3(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?|\uDFF3\uFE0F?(?:\u200D(?:\u26A7\uFE0F?|\uD83C\uDF08))?|\uDFF4(?:\u200D\u2620\uFE0F?|\uDB40\uDC67\uDB40\uDC62\uDB40(?:\uDC65\uDB40\uDC6E\uDB40\uDC67|\uDC73\uDB40\uDC63\uDB40\uDC74|\uDC77\uDB40\uDC6C\uDB40\uDC73)\uDB40\uDC7F)?)|\uD83D(?:[\uDC3F\uDCFD\uDD49\uDD4A\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA\uDECB\uDECD-\uDECF\uDEE0-\uDEE5\uDEE9\uDEF0\uDEF3]\uFE0F?|[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC](?:\uD83C[\uDFFB-\uDFFF])?|[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4\uDEB5](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD74\uDD90](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?|[\uDC00-\uDC07\uDC09-\uDC14\uDC16-\uDC25\uDC27-\uDC3A\uDC3C-\uDC3E\uDC40\uDC44\uDC45\uDC51-\uDC65\uDC6A\uDC79-\uDC7B\uDC7D-\uDC80\uDC84\uDC88-\uDC8E\uDC90\uDC92-\uDCA9\uDCAB-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDDA4\uDDFB-\uDE2D\uDE2F-\uDE34\uDE37-\uDE41\uDE43\uDE44\uDE48-\uDE4A\uDE80-\uDEA2\uDEA4-\uDEB3\uDEB7-\uDEBF\uDEC1-\uDEC5\uDED0-\uDED2\uDED5-\uDED7\uDEDC-\uDEDF\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB\uDFF0]|\uDC08(?:\u200D\u2B1B)?|\uDC15(?:\u200D\uD83E\uDDBA)?|\uDC26(?:\u200D(?:\u2B1B|\uD83D\uDD25))?|\uDC3B(?:\u200D\u2744\uFE0F?)?|\uDC41\uFE0F?(?:\u200D\uD83D\uDDE8\uFE0F?)?|\uDC68(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDC68\uDC69]\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFE])))?))?|\uDC69(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?[\uDC68\uDC69]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?|\uDC69\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?))|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFE])))?))?|\uDC6F(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDD75(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDE2E(?:\u200D\uD83D\uDCA8)?|\uDE35(?:\u200D\uD83D\uDCAB)?|\uDE36(?:\u200D\uD83C\uDF2B\uFE0F?)?|\uDE42(?:\u200D[\u2194\u2195]\uFE0F?)?|\uDEB6(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?)|\uD83E(?:[\uDD0C\uDD0F\uDD18-\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5\uDEC3-\uDEC5\uDEF0\uDEF2-\uDEF8](?:\uD83C[\uDFFB-\uDFFF])?|[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD\uDDCF\uDDD4\uDDD6-\uDDDD](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDDDE\uDDDF](?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD0D\uDD0E\uDD10-\uDD17\uDD20-\uDD25\uDD27-\uDD2F\uDD3A\uDD3F-\uDD45\uDD47-\uDD76\uDD78-\uDDB4\uDDB7\uDDBA\uDDBC-\uDDCC\uDDD0\uDDE0-\uDDFF\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC2\uDECE-\uDEDB\uDEE0-\uDEE8]|\uDD3C(?:\u200D[\u2640\u2642]\uFE0F?|\uD83C[\uDFFB-\uDFFF])?|\uDDCE(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?|\uDDD1(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1|\uDDD1\u200D\uD83E\uDDD2(?:\u200D\uD83E\uDDD2)?|\uDDD2(?:\u200D\uD83E\uDDD2)?))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFC-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFD-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFD\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFE]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?))?|\uDEF1(?:\uD83C(?:\uDFFB(?:\u200D\uD83E\uDEF2\uD83C[\uDFFC-\uDFFF])?|\uDFFC(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFD-\uDFFF])?|\uDFFD(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])?|\uDFFE(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFD\uDFFF])?|\uDFFF(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFE])?))?)/g;var kg=new Intl.Segmenter,Og=/^\p{Default_Ignorable_Code_Point}$/u;function Ur(e,t={}){if(typeof e!="string"||e.length===0)return 0;let{ambiguousIsNarrow:r=!0,countAnsiEscapeCodes:n=!1}=t;if(n||(e=zr(e)),e.length===0)return 0;let s=0,o={ambiguousAsWide:!r};for(let{segment:a}of kg.segment(e)){let u=a.codePointAt(0);if(!(u<=31||u>=127&&u<=159)&&!(u>=8203&&u<=8207||u===65279)&&!(u>=768&&u<=879||u>=6832&&u<=6911||u>=7616&&u<=7679||u>=8400&&u<=8447||u>=65056&&u<=65071)&&!(u>=55296&&u<=57343)&&!(u>=65024&&u<=65039)&&!Og.test(a)){if(Mc().test(a)){s+=2;continue}s+=Ks(u,o)}}return s}l();var qc=(e=0)=>t=>`\x1B[${t+e}m`,Gc=(e=0)=>t=>`\x1B[${38+e};5;${t}m`,Hc=(e=0)=>(t,r,n)=>`\x1B[${38+e};2;${t};${r};${n}m`,Oe={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],gray:[90,39],grey:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgGray:[100,49],bgGrey:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}},YS=Object.keys(Oe.modifier),_g=Object.keys(Oe.color),Ig=Object.keys(Oe.bgColor),KS=[..._g,...Ig];function jg(){let e=new Map;for(let[t,r]of Object.entries(Oe)){for(let[n,s]of Object.entries(r))Oe[n]={open:`\x1B[${s[0]}m`,close:`\x1B[${s[1]}m`},r[n]=Oe[n],e.set(s[0],s[1]);Object.defineProperty(Oe,t,{value:r,enumerable:!1})}return Object.defineProperty(Oe,"codes",{value:e,enumerable:!1}),Oe.color.close="\x1B[39m",Oe.bgColor.close="\x1B[49m",Oe.color.ansi=qc(),Oe.color.ansi256=Gc(),Oe.color.ansi16m=Hc(),Oe.bgColor.ansi=qc(10),Oe.bgColor.ansi256=Gc(10),Oe.bgColor.ansi16m=Hc(10),Object.defineProperties(Oe,{rgbToAnsi256:{value:(t,r,n)=>t===r&&r===n?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(r/255*5)+Math.round(n/255*5),enumerable:!1},hexToRgb:{value:t=>{let r=/[a-f\d]{6}|[a-f\d]{3}/i.exec(t.toString(16));if(!r)return[0,0,0];let[n]=r;n.length===3&&(n=[...n].map(o=>o+o).join(""));let s=Number.parseInt(n,16);return[s>>16&255,s>>8&255,s&255]},enumerable:!1},hexToAnsi256:{value:t=>Oe.rgbToAnsi256(...Oe.hexToRgb(t)),enumerable:!1},ansi256ToAnsi:{value:t=>{if(t<8)return 30+t;if(t<16)return 90+(t-8);let r,n,s;if(t>=232)r=((t-232)*10+8)/255,n=r,s=r;else{t-=16;let u=t%36;r=Math.floor(t/36)/5,n=Math.floor(u/6)/5,s=u%6/5}let o=Math.max(r,n,s)*2;if(o===0)return 30;let a=30+(Math.round(s)<<2|Math.round(n)<<1|Math.round(r));return o===2&&(a+=60),a},enumerable:!1},rgbToAnsi:{value:(t,r,n)=>Oe.ansi256ToAnsi(Oe.rgbToAnsi256(t,r,n)),enumerable:!1},hexToAnsi:{value:t=>Oe.ansi256ToAnsi(Oe.hexToAnsi256(t)),enumerable:!1}}),Oe}var Wg=jg(),jt=Wg;var Zs=new Set(["\x1B","\x9B"]),Mg=39,Ro="\x07",Vc="[",qg="]",Jc="m",Xs=`${qg}8;;`,zc=e=>`${Zs.values().next().value}${Vc}${e}${Jc}`,Uc=e=>`${Zs.values().next().value}${Xs}${e}${Ro}`,Gg=e=>e.split(" ").map(t=>Ur(t)),Lo=(e,t,r)=>{let n=[...t],s=!1,o=!1,a=Ur(zr(e.at(-1)));for(let[u,c]of n.entries()){let f=Ur(c);if(a+f<=r?e[e.length-1]+=c:(e.push(c),a=0),Zs.has(c)&&(s=!0,o=n.slice(u+1,u+1+Xs.length).join("")===Xs),s){o?c===Ro&&(s=!1,o=!1):c===Jc&&(s=!1);continue}a+=f,a===r&&u<n.length-1&&(e.push(""),a=0)}!a&&e.at(-1).length>0&&e.length>1&&(e[e.length-2]+=e.pop())},Hg=e=>{let t=e.split(" "),r=t.length;for(;r>0&&!(Ur(t[r-1])>0);)r--;return r===t.length?e:t.slice(0,r).join(" ")+t.slice(r).join("")},zg=(e,t,r={})=>{if(r.trim!==!1&&e.trim()==="")return"";let n="",s,o,a=Gg(e),u=[""];for(let[d,y]of e.split(" ").entries()){r.trim!==!1&&(u[u.length-1]=u.at(-1).trimStart());let D=Ur(u.at(-1));if(d!==0&&(D>=t&&(r.wordWrap===!1||r.trim===!1)&&(u.push(""),D=0),(D>0||r.trim===!1)&&(u[u.length-1]+=" ",D++)),r.hard&&a[d]>t){let g=t-D,F=1+Math.floor((a[d]-g-1)/t);Math.floor((a[d]-1)/t)<F&&u.push(""),Lo(u,y,t);continue}if(D+a[d]>t&&D>0&&a[d]>0){if(r.wordWrap===!1&&D<t){Lo(u,y,t);continue}u.push("")}if(D+a[d]>t&&r.wordWrap===!1){Lo(u,y,t);continue}u[u.length-1]+=y}r.trim!==!1&&(u=u.map(d=>Hg(d)));let c=u.join(`
`),f=[...c],p=0;for(let[d,y]of f.entries()){if(n+=y,Zs.has(y)){let{groups:g}=new RegExp(`(?:\\${Vc}(?<code>\\d+)m|\\${Xs}(?<uri>.*)${Ro})`).exec(c.slice(p))||{groups:{}};if(g.code!==void 0){let F=Number.parseFloat(g.code);s=F===Mg?void 0:F}else g.uri!==void 0&&(o=g.uri.length===0?void 0:g.uri)}let D=jt.codes.get(Number(s));f[d+1]===`
`?(o&&(n+=Uc("")),s&&D&&(n+=zc(D))):y===`
`&&(s&&D&&(n+=zc(s)),o&&(n+=Uc(o))),p+=y.length}return n};function Fr(e,t,r){return String(e).normalize().replaceAll(`\r
`,`
`).split(`
`).map(n=>zg(n,t,r)).join(`
`)}l();l();function No(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}l();import Ug from"node:os";var Vg=()=>Ug.homedir().replace(/\\/g,"/"),Yc=Vg;var Kc=/\s+at.*[(\s](.*)\)?/,Xc=/^(?:(?:(?:node|node:[\w/]+|(?:(?:node:)?internal\/[\w/]*|.*node_modules\/(?:babel-polyfill|pirates)\/.*)?\w+)(?:\.js)?:\d+:\d+)|native)/;function Gn(e,{pretty:t=!1,basePath:r,pathFilter:n}={}){let s=r&&new RegExp(`(file://)?${No(r.replace(/\\/g,"/"))}/?`,"g"),o=t?Yc():"";if(typeof e=="string")return e.replace(/\\/g,"/").split(`
`).filter(a=>{let u=a.match(Kc);if(u===null||!u[1])return!0;let c=u[1];return c.includes(".app/Contents/Resources/electron.asar")||c.includes(".app/Contents/Resources/default_app.asar")||c.includes("node_modules/electron/dist/resources/electron.asar")||c.includes("node_modules/electron/dist/resources/default_app.asar")?!1:n?!Xc.test(c)&&n(c):!Xc.test(c)}).filter(a=>a.trim()!=="").map(a=>(s&&(a=a.replace(s,"")),t&&(a=a.replace(Kc,(u,c)=>u.replace(c,c.replace(o,"~")))),a)).join(`
`)}function _(e,...t){let r=e.length>9?"  ":" ".repeat(11-e.length),n=t.length>0?t.length===1?U+"  "+t[0]:t.length===2?U+"  "+t[0]+" "+U+" "+t[1]:U+"  "+t[0]+" "+U+" "+t[1]+" "+Re(t[2]):"";return e+r+n}function Re(e){return e?Q+" "+ht.gray(e):""}function ko(e,t,{spaced:r=!1}={}){let n=r?" ":"";switch(e){case"AN":return qs+n+t+n+Gs;case"CB":return yc+n+t+n+Dc;case"PR":return Ws+n+t+n+Ms;case"SB":return bc+n+t+n+wc}}var Vr=N({warning:Ot(` ${Q} Type ${h("w")} and press ${h("enter")} to view`),error:se(` ${Q} Type ${h("v")} and press ${h("enter")} to view`),stack:m(`Type ${h("s")} and press ${h("enter")} to view stack trace`)});function Zc(e=i.terminal.wrap,t=!0){let r="\u251C"+"\u2500".repeat(e-10);return t?`${Y.open}
${r}
\u2502${Y.close}`:`${Y.open}${r}${Y.close}`}function zn(e){return $.open+ht.gray(`${e} ~ ${pn()}`)}function Hn(...e){let t=N({color:null,line:$.line}),r,n="";for(R(e[0])?(W(e[1])&&ee(t,e[1]),r=Fr(e[0].join(" "),i.terminal.wrap).split(`
`)):(W(e[e.length-1])&&ee(t,e.pop()),r=Fr(e.join(" "),i.terminal.wrap).split(`
`));r.length!==0;){let s=r.shift().trim();s.length>0?n+=t.line+(t.color?t.color(s):s)+`
`:n+=t.line+`
`}return n.trimEnd()}function Zt(e){return $.trim+`
`+$.line+e+`
`+$.trim}function ie(e){return $.line+e}function Un(e){return $.red+e}function vr(e){return $.yellow+e}function Qc(e){return $.trim+`
`+$.line+e}function el(e){return $.line+e+`
`+$.line}function Oo(e){return $.dash+e}function Vn(e){return $.base+ht.gray(`${e} ~ ${pn()}`)+`
`}function _o(e){let t=$t(e.entries),r=Z({type:e.type||"error"});if(M(e.stack)){let n=e.cleanStack?Gn(e.stack,{pretty:!0,basePath:i.cwd}):e.stack;r.Wrap(n.split(`
`),m).NL.Newline()}for(let n in e.entries){if(he(e.entries[n]))continue;let s;if(bt(e.entries[n])){if(Co(e.entries[n]))continue;s=Is(Ee(e.entries[n]))}else s=Ee(e.entries[n]);if(s.length===0)continue;let o=e.type==="warning"?te(n):ae(n);n==="source"||n==="output"||n==="input"||n==="file"?r.Line(o+k+" "+t(n)+Yt(s),m):r.Line(o+k+" "+t(n)+s,m)}return e.stack===!0&&r.NL.Line(Vr.stack),r.toString()}var Po=class{type="info";line;trim;text;constructor(t){if(W(t)){let r=Le(t);this.type=r("type")?t.type:"info",this.text=r("text")?t.text:[],this.type==="error"?(this.line=$.red,this.trim=$.redTrim):this.type==="warning"?(this.line=$.yellow,this.trim=$.yellowTrim):this.type==="nil"?(this.line="",this.trim=""):(this.line=$.line,this.trim=$.trim)}else this.line=$.line,this.trim=$.trim,this.text=[]}toRaw(){return this.text}toLine(t){if(this.text.length===0)return"";this.text[this.text.length-1]=this.text[this.text.length-1].trimEnd();let r;return t?r=t(fe(this.text)):this.type==="info"?r=C(fe(this.text)):this.type==="error"?r=se(fe(this.text)):this.type==="warning"?r=te(fe(this.text)):r=fe(this.text),this.text=[],r+`
`+this.trim}toString(t){if(this.text.length===0)return"";this.text[this.text.length-1]=this.text[this.text.length-1].trimEnd();let r;return t?r=t(fe(this.text)):this.type==="info"?r=C(fe(this.text)):this.type==="error"?r=se(fe(this.text)):this.type==="warning"?r=te(fe(this.text)):r=fe(this.text),this.text=[],r}Get(t=this.text.length-1){return this.text[t]}Remove(t){return this.text.splice(t,1),this}Replace(t,r,n){return this.text[t]&&(this.text[t]=this.line+(n?n(r):r)+`
`),this}Ruler(t=i.terminal.wrap){return this.text.push($.trim+`
`+Y(`\u251C${"\u2500".repeat(t)}`)+`
`+$.trim+`
`),this}get NL(){return this.text.push(this.trim+`
`),this}get BR(){return this.text.push(`
`),this}Pop(){return this.text.pop(),this}Newline(t,r){if(bt(t)){let n=this.trim+`
`;r&&(r==="yellow"?n=$.yellowTrim+`
`:r==="red"?n=$.redTrim+`
`:r===""&&(n=`
`));for(let s=0;s<t;s++)this.text.push(n)}else t===""?this.text.push(`
`):t==="line"?this.text.push($.trim+`
`):t==="yellow"?this.text.push($.yellowTrim+`
`):t==="red"?this.text.push($.redTrim+`
`):this.text.push(this.trim+`
`);return this}Inline(t,r){let n=this.text.length;return n>0?this.text[n-1]=this.text[n-1].trimEnd()+" "+(r?r(t):t)+`
`:this.text.push(this.line+(r?r(t):t)+`
`),this}Trim(t,r){return this.text.push(this.line+(r?r(t):t)+`
`),this}Insert(t,r){return this.text.push((r?r(t):t)+`
`),this}Line(t,r){return this.type==="error"?this.Error(t,r):this.type==="warning"?this.Warn(t,r):(this.text.push(this.line+(r?r(t):t)+`
`),this)}Error(t,r){return this.text.push($.red+(r?r(t):se(t))+`
`),this}Warn(t,r){return this.text.push($.yellow+(r?r(t):Ot(t))+`
`),this}Break(t,r){return this.text.push(this.trim+`
`+this.line+(r?r(t):t)+`
`+this.trim+`
`),this}Top(t){return this.text.push(zn(t)+`
`),this}End(t){return this.text.push(Vn(t)),this}Context(t){return this.text.push(_o(t)+`
`),this}Dash(t,r){return this.text.push($.dash+(r?r(t):t)+`
`),this}Multiline(t){let r=R(t)?t:t.split(`
`);for(;r.length!==0;)this.text.push(this.line+r.shift()+`
`);return this}Wrap(...t){let r=N({line:this.line});return this.type==="error"?r.color=se:this.type==="warning"?r.color=Ot:r.color=H,R(t[0])?(Ue(t[1])&&(r.color=t.pop()),this.text.push(Hn(t[0],r)+`
`)):(Ue(t[t.length-1])&&(r.color=t.pop()),this.text.push(Hn(t,r)+`
`)),this}};function Z(e){return i.env.tree===!1&&(W(e)?e.type="nil":e=N({type:"nil"})),new Po(e)}function Qs(e,{type:t="info"}={}){let r=Z({type:t}),n=R(e)?e:e.split(`
`),s=t==="error"?"red":t==="warn"?"yellow":"line";for(;n.length!==0;){let o=n.shift();o.trim().length>0?r.Line(o.trimEnd()):r.Newline(s)}return r.Newline(s).toString()}function dn(e){let t=$t(e.entries),r=x("message",e);x("warning",e)||(e.warning=!1),r||(e.warning===!1?e.message=Z({type:"error"}).NL:e.message=Z({type:"warn"}).NL);for(let n in e.entries){let s=Ee(e.entries[n]);n==="source"||n==="output"||n==="input"||n==="file"?e.message.Line(C(n)+k+t(n)+Q+Yt(s),m):e.message.Line(C(n)+k+t(n)+s,m)}return M(e.stack)&&(e.warning===!1&&i.errors.add(e.stack),e.message.Break(Vr.stack)),e.message.toLine()}function tl(e,{line:t=$.line,span:r=null}={}){if(t==="red"?t=$.red:t==="yellow"&&(t=$.yellow),r!==null){let n=x("end",r)?r.end:r.start+1;return t+`
`+[t+I(`${r.start-1}`)+k,t+I(`${r.start}`)+k+e,t+I(`${n}`)+k].join(`
`)}return t+`
`+t+e}function rl(e,{type:t="info",color:r=C}={}){let n=t==="error"?"red":t==="warn"?"yellow":"line";return Z({type:t}).Newline(n).Wrap(e,r).toLine()}l();l();import dl from"node:process";l();var Xn={};Vd(Xn,{beep:()=>bh,clearScreen:()=>gh,clearTerminal:()=>hh,cursorBackward:()=>eh,cursorDown:()=>Zg,cursorForward:()=>Qg,cursorGetPosition:()=>nh,cursorHide:()=>oh,cursorLeft:()=>il,cursorMove:()=>Xg,cursorNextLine:()=>sh,cursorPrevLine:()=>ih,cursorRestorePosition:()=>rh,cursorSavePosition:()=>th,cursorShow:()=>ah,cursorTo:()=>Kg,cursorUp:()=>sl,enterAlternativeScreen:()=>yh,eraseDown:()=>fh,eraseEndLine:()=>ch,eraseLine:()=>ol,eraseLines:()=>uh,eraseScreen:()=>jo,eraseStartLine:()=>lh,eraseUp:()=>ph,exitAlternativeScreen:()=>Dh,iTerm:()=>Sh,image:()=>xh,link:()=>wh,scrollDown:()=>dh,scrollUp:()=>mh});l();import Wo from"node:process";l();var ei=globalThis.window?.document!==void 0,CF=globalThis.process?.versions?.node!==void 0,AF=globalThis.process?.versions?.bun!==void 0,TF=globalThis.Deno?.version?.deno!==void 0,BF=globalThis.process?.versions?.electron!==void 0,LF=globalThis.navigator?.userAgent?.includes("jsdom")===!0,RF=typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope,NF=typeof DedicatedWorkerGlobalScope<"u"&&globalThis instanceof DedicatedWorkerGlobalScope,PF=typeof SharedWorkerGlobalScope<"u"&&globalThis instanceof SharedWorkerGlobalScope,kF=typeof ServiceWorkerGlobalScope<"u"&&globalThis instanceof ServiceWorkerGlobalScope,Jn=globalThis.navigator?.userAgentData?.platform,OF=Jn==="macOS"||globalThis.navigator?.platform==="MacIntel"||globalThis.navigator?.userAgent?.includes(" Mac ")===!0||globalThis.process?.platform==="darwin",_F=Jn==="Windows"||globalThis.navigator?.platform==="Win32"||globalThis.process?.platform==="win32",IF=Jn==="Linux"||globalThis.navigator?.platform?.startsWith("Linux")===!0||globalThis.navigator?.userAgent?.includes(" Linux ")===!0||globalThis.process?.platform==="linux",jF=Jn==="iOS"||globalThis.navigator?.platform==="MacIntel"&&globalThis.navigator?.maxTouchPoints>1||/iPad|iPhone|iPod/.test(globalThis.navigator?.platform),WF=Jn==="Android"||globalThis.navigator?.platform==="Android"||globalThis.navigator?.userAgent?.includes(" Android ")===!0||globalThis.process?.platform==="android";var Se="\x1B[",Kn="\x1B]",gn="\x07",Yn=";",nl=!ei&&Wo.env.TERM_PROGRAM==="Apple_Terminal",Jg=!ei&&Wo.platform==="win32",Yg=ei?()=>{throw new Error("`process.cwd()` only works in Node.js, not the browser.")}:Wo.cwd,Kg=(e,t)=>{if(typeof e!="number")throw new TypeError("The `x` argument is required");return typeof t!="number"?Se+(e+1)+"G":Se+(t+1)+Yn+(e+1)+"H"},Xg=(e,t)=>{if(typeof e!="number")throw new TypeError("The `x` argument is required");let r="";return e<0?r+=Se+-e+"D":e>0&&(r+=Se+e+"C"),t<0?r+=Se+-t+"A":t>0&&(r+=Se+t+"B"),r},sl=(e=1)=>Se+e+"A",Zg=(e=1)=>Se+e+"B",Qg=(e=1)=>Se+e+"C",eh=(e=1)=>Se+e+"D",il=Se+"G",th=nl?"\x1B7":Se+"s",rh=nl?"\x1B8":Se+"u",nh=Se+"6n",sh=Se+"E",ih=Se+"F",oh=Se+"?25l",ah=Se+"?25h",uh=e=>{let t="";for(let r=0;r<e;r++)t+=ol+(r<e-1?sl():"");return e&&(t+=il),t},ch=Se+"K",lh=Se+"1K",ol=Se+"2K",fh=Se+"J",ph=Se+"1J",jo=Se+"2J",mh=Se+"S",dh=Se+"T",gh="\x1Bc",hh=Jg?`${jo}${Se}0f`:`${jo}${Se}3J${Se}H`,yh=Se+"?1049h",Dh=Se+"?1049l",bh=gn,wh=(e,t)=>[Kn,"8",Yn,Yn,t,gn,e,Kn,"8",Yn,Yn,gn].join(""),xh=(e,t={})=>{let r=`${Kn}1337;File=inline=1`;return t.width&&(r+=`;width=${t.width}`),t.height&&(r+=`;height=${t.height}`),t.preserveAspectRatio===!1&&(r+=";preserveAspectRatio=0"),r+":"+Buffer.from(e).toString("base64")+gn},Sh={setCwd:(e=Yg())=>`${Kn}50;CurrentDir=${e}${gn}`,annotation(e,t={}){let r=`${Kn}1337;`,n=t.x!==void 0,s=t.y!==void 0;if((n||s)&&!(n&&s&&t.length!==void 0))throw new Error("`x`, `y` and `length` must be defined when `x` or `y` is defined");return e=e.replaceAll("|",""),r+=t.isHidden?"AddHiddenAnnotation=":"AddAnnotation=",t.length>0?r+=(n?[e,t.length,t.x,t.y]:[t.length,e]).join("|"):r+=e,r+gn}};l();import pl from"node:process";l();import si from"node:process";l();l();var Fh=(e,t,r,n)=>{if(r==="length"||r==="prototype"||r==="arguments"||r==="caller")return;let s=Object.getOwnPropertyDescriptor(e,r),o=Object.getOwnPropertyDescriptor(t,r);!vh(s,o)&&n||Object.defineProperty(e,r,o)},vh=function(e,t){return e===void 0||e.configurable||e.writable===t.writable&&e.enumerable===t.enumerable&&e.configurable===t.configurable&&(e.writable||e.value===t.value)},$h=(e,t)=>{let r=Object.getPrototypeOf(t);r!==Object.getPrototypeOf(e)&&Object.setPrototypeOf(e,r)},Eh=(e,t)=>`/* Wrapped ${e}*/
${t}`,Ch=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),Ah=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name"),Th=(e,t,r)=>{let n=r===""?"":`with ${r.trim()}() `,s=Eh.bind(null,n,t.toString());Object.defineProperty(s,"name",Ah);let{writable:o,enumerable:a,configurable:u}=Ch;Object.defineProperty(e,"toString",{value:s,writable:o,enumerable:a,configurable:u})};function Mo(e,t,{ignoreNonConfigurable:r=!1}={}){let{name:n}=e;for(let s of Reflect.ownKeys(t))Fh(e,t,s,r);return $h(e,t),Th(e,t,n),e}var ti=new WeakMap,al=(e,t={})=>{if(typeof e!="function")throw new TypeError("Expected a function");let r,n=0,s=e.displayName||e.name||"<anonymous>",o=function(...a){if(ti.set(o,++n),n===1)r=e.apply(this,a),e=void 0;else if(t.throw===!0)throw new Error(`Function \`${s}\` can only be called once`);return r};return Mo(o,e),ti.set(o,n),o};al.callCount=e=>{if(!ti.has(e))throw new Error(`The given function \`${e.name}\` is not wrapped by the \`onetime\` package`);return ti.get(e)};var ul=al;l();l();var Jr=[];Jr.push("SIGHUP","SIGINT","SIGTERM");process.platform!=="win32"&&Jr.push("SIGALRM","SIGABRT","SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT");process.platform==="linux"&&Jr.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT");var ri=e=>!!e&&typeof e=="object"&&typeof e.removeListener=="function"&&typeof e.emit=="function"&&typeof e.reallyExit=="function"&&typeof e.listeners=="function"&&typeof e.kill=="function"&&typeof e.pid=="number"&&typeof e.on=="function",qo=Symbol.for("signal-exit emitter"),Go=globalThis,Bh=Object.defineProperty.bind(Object),Ho=class{emitted={afterExit:!1,exit:!1};listeners={afterExit:[],exit:[]};count=0;id=Math.random();constructor(){if(Go[qo])return Go[qo];Bh(Go,qo,{value:this,writable:!1,enumerable:!1,configurable:!1})}on(t,r){this.listeners[t].push(r)}removeListener(t,r){let n=this.listeners[t],s=n.indexOf(r);s!==-1&&(s===0&&n.length===1?n.length=0:n.splice(s,1))}emit(t,r,n){if(this.emitted[t])return!1;this.emitted[t]=!0;let s=!1;for(let o of this.listeners[t])s=o(r,n)===!0||s;return t==="exit"&&(s=this.emit("afterExit",r,n)||s),s}},ni=class{},Lh=e=>({onExit(t,r){return e.onExit(t,r)},load(){return e.load()},unload(){return e.unload()}}),zo=class extends ni{onExit(){return()=>{}}load(){}unload(){}},Uo=class extends ni{#n=Vo.platform==="win32"?"SIGINT":"SIGHUP";#t=new Ho;#e;#a;#o;#i={};#r=!1;constructor(t){super(),this.#e=t,this.#i={};for(let r of Jr)this.#i[r]=()=>{let n=this.#e.listeners(r),{count:s}=this.#t,o=t;if(typeof o.__signal_exit_emitter__=="object"&&typeof o.__signal_exit_emitter__.count=="number"&&(s+=o.__signal_exit_emitter__.count),n.length===s){this.unload();let a=this.#t.emit("exit",null,r),u=r==="SIGHUP"?this.#n:r;a||t.kill(t.pid,u)}};this.#o=t.reallyExit,this.#a=t.emit}onExit(t,r){if(!ri(this.#e))return()=>{};this.#r===!1&&this.load();let n=r?.alwaysLast?"afterExit":"exit";return this.#t.on(n,t),()=>{this.#t.removeListener(n,t),this.#t.listeners.exit.length===0&&this.#t.listeners.afterExit.length===0&&this.unload()}}load(){if(!this.#r){this.#r=!0,this.#t.count+=1;for(let t of Jr)try{let r=this.#i[t];r&&this.#e.on(t,r)}catch{}this.#e.emit=(t,...r)=>this.#s(t,...r),this.#e.reallyExit=t=>this.#c(t)}}unload(){this.#r&&(this.#r=!1,Jr.forEach(t=>{let r=this.#i[t];if(!r)throw new Error("Listener not defined for signal: "+t);try{this.#e.removeListener(t,r)}catch{}}),this.#e.emit=this.#a,this.#e.reallyExit=this.#o,this.#t.count-=1)}#c(t){return ri(this.#e)?(this.#e.exitCode=t||0,this.#t.emit("exit",this.#e.exitCode,null),this.#o.call(this.#e,this.#e.exitCode)):0}#s(t,...r){let n=this.#a;if(t==="exit"&&ri(this.#e)){typeof r[0]=="number"&&(this.#e.exitCode=r[0]);let s=n.call(this.#e,t,...r);return this.#t.emit("exit",this.#e.exitCode,null),s}else return n.call(this.#e,t,...r)}},Vo=globalThis.process,{onExit:cl,load:nv,unload:sv}=Lh(ri(Vo)?new Uo(Vo):new zo);var ll=si.stderr.isTTY?si.stderr:si.stdout.isTTY?si.stdout:void 0,Rh=ll?ul(()=>{cl(()=>{ll.write("\x1B[?25h")},{alwaysLast:!0})}):()=>{},fl=Rh;var ii=!1,hn={};hn.show=(e=pl.stderr)=>{e.isTTY&&(ii=!1,e.write("\x1B[?25h"))};hn.hide=(e=pl.stderr)=>{e.isTTY&&(fl(),ii=!0,e.write("\x1B[?25l"))};hn.toggle=(e,t)=>{e!==void 0&&(ii=e),ii?hn.show(t):hn.hide(t)};var Jo=hn;l();l();function Yo(e){return Number.isInteger(e)?Ks(e)===2:!1}var Nh=new Set([27,155]),Ph="0".codePointAt(0),kh="9".codePointAt(0),Xo=new Set,Ko=new Map;for(let[e,t]of jt.codes)Xo.add(jt.color.ansi(t)),Ko.set(jt.color.ansi(e),jt.color.ansi(t));function Oh(e){if(Xo.has(e))return e;if(Ko.has(e))return Ko.get(e);e=e.slice(2),e.includes(";")&&(e=e[0]+"0");let t=jt.codes.get(Number.parseInt(e,10));return t?jt.color.ansi(t):jt.reset.open}function _h(e){for(let t=0;t<e.length;t++){let r=e.codePointAt(t);if(r>=Ph&&r<=kh)return t}return-1}function Ih(e,t){e=e.slice(t,t+19);let r=_h(e);if(r!==-1){let n=e.indexOf("m",r);return n===-1&&(n=e.length),e.slice(0,n+1)}}function jh(e,t=Number.POSITIVE_INFINITY){let r=[],n=0,s=0;for(;n<e.length;){let o=e.codePointAt(n);if(Nh.has(o)){let c=Ih(e,n);if(c){r.push({type:"ansi",code:c,endCode:Oh(c)}),n+=c.length;continue}}let a=Yo(o),u=String.fromCodePoint(o);if(r.push({type:"character",value:u,isFullWidth:a}),n+=u.length,s+=a?2:u.length,s>=t)break}return r}function ml(e){let t=[];for(let r of e)r.code===jt.reset.open?t=[]:Xo.has(r.code)?t=t.filter(n=>n.endCode!==r.code):(t=t.filter(n=>n.endCode!==r.endCode),t.push(r));return t}function Wh(e){return ml(e).map(({endCode:n})=>n).reverse().join("")}function Zo(e,t,r){let n=jh(e,r),s=[],o=0,a="",u=!1;for(let c of n){if(r!==void 0&&o>=r)break;c.type==="ansi"?(s.push(c),u&&(a+=c.code)):(!u&&o>=t&&(u=!0,s=ml(s),a=s.map(({code:f})=>f).join("")),u&&(a+=c.value),o+=c.isFullWidth?2:c.value.length)}return a+=Wh(s),a}var Mh=24,Qo=({columns:e=80})=>e,qh=(e,t)=>{let r=e.rows??Mh,n=t.split(`
`),s=Math.max(0,n.length-r);return s?Zo(t,zr(n.slice(0,s).join(`
`)).length+1):t};function gl(e,{showCursor:t=!1}={}){let r=0,n=Qo(e),s="",o=()=>{s="",n=Qo(e),r=0},a=(...u)=>{t||Jo.hide();let c=qh(e,u.join(" ")+`
`),f=Qo(e);c===s&&n===f||(s=c,n=f,c=Fr(c,f,{trim:!1,hard:!0,wordWrap:!1}),e.write(Xn.eraseLines(r)+c),r=c.split(`
`).length)};return a.clear=()=>{e.write(Xn.eraseLines(r)),o()},a.done=()=>{o(),t||Jo.show()},a}var Gh=gl(dl.stdout),we=Gh,Tv=gl(dl.stderr);function hl(){let e,t=!1,r="",n=!0,s=N({arrows:N({interval:120,frames:["\u25B9\u25B9\u25B9\u25B9","\u25B8\u25B9\u25B9\u25B9","\u25B9\u25B8\u25B9\u25B9","\u25B9\u25B9\u25B8\u25B9","\u25B9\u25B9\u25B9\u25B8"]}),brielle:N({interval:50,frames:["\u280B","\u2819","\u2839","\u2838","\u283C","\u2834","\u2826","\u2827","\u2807","\u280F"]}),spinning:N({interval:60,frames:["\u25D0","\u25D3","\u25D1","\u25D2"]})}),o=N({label:"",line:!0,color:null,style:"brielle",action:null}),a=function(c,f){let p=N(o);W(c)?p=ee(p,c):M(c)&&(p.label=c,W(f)&&(p=ee(p,f))),t=!0,n=p.line;let d,y=0,D,g=0;p.action!==null?(p.style="arrows",d=x("color",p.action)?p.action.color:Fe,D=s.arrows.frames,g=D.length):(d=Ue(p.color)?p.color:_t,r=p.label,D=s[p.style].frames,g=D.length),we.done(),e=setInterval(()=>{if(!t)return;let F;if(p.action!==null){let q=me(h(p.action.before),D[y=++y%g],p.action.after);F=d(r!==""?_(r,q):q)}else F=d(me(D[y=++y%g],r));we(p.line?Zt(F):F)},s[p.style].interval)};return a.update=function(u){r=u},a.stop=function(u){t!==!1&&(t=!1,u?(we(n?Zt(u):u),we.done()):we.clear(),clearInterval(e),e=void 0,r="")},rt(a,"active",{get(){return t}}),a}l();l();function yl(e){return ae(e.replace(/('[{}_\w\s.-]*?'|"[\w\s.-]*?")/g,st("$1")).replace(/({{2}-?[a-zA-Z0-9_\-.'"[\]]+-?}{2})/g,Mr("$1")).replace(/((?:www|http:|https:)+[^\s]+[\w])/g,Yt("$1")).replace(/(\/)(.*?)(\/)/g,Mr("$1")+le("$2")+Mr("$3")).replace(/(\\)(\W)/g,m("$1")+le("$2")).replace(/(:)(?= )/g,m("$1")).replace(/(?<=Filename\s)([\w._-]+)(?=\salready)/,le.bold("$1")))}function Dl(e){return e.replace(/({%|{%-}|-%}|%}|{{|{{-|}}|-}}|<\/?|>|:|,)/g,le("$1")).replace(/(['"].*?['"])/g,m("$1"))}function Hh(e){let t="",r=e.indexOf("- Valid syntax:");return r>-1?(t=`
`+e.slice(r).slice(1).replace(/(Valid syntax)(:)(.*)/,ae("$1")+m("$2")+Mr("$3")),e.slice(0,r)+t):e}function bl(e,t){let r=[],n=/\(line \d+\):/,s=/'(.*?)'/,o="  ",a=i.terminal.cols-10,u=NaN,c=NaN,f=0;M(e);let p=[];for(let d=0,y=e.length;d<y;d++){let D=e[d];if(n.test(D)){let g=D.indexOf("):"),F=D.indexOf("(line");if(g>-1&&F>-1&&(r.unshift(fe($.red,se.bold(D.slice(0,g+2)),`
`,$.redTrim)),u=Number(D.slice(F+6,g)),f=Ee(u).length+3,D=Hh(D.slice(g+2)),r.push(fe(yl(Hn(D,{line:$.red,color:ae})),`
`,$.redTrim,`
`,$.redTrim)),t.length>1)){let q=fe($.redTrim," ".repeat(f-Ee(u-1).length),I(`${u-1}`)," ",$.trim),O=fe($.redTrim," ",se.bold(">")," ",I(`${u}`)," ",$.trim),K="",P=t[u-1].replace(/\t/g,"  ").trimEnd(),B=P.match(/^\s*/)[0];s.test(D)&&(K=D.match(s)[1],c=t[u-1].indexOf(K),c<0&&(c=NaN));let G=t[u-2].replace(/\t/g,"  ").trimEnd(),ye=G.match(/^\s*/)[0].length;B.length===ye?(G="  "+G.trimStart(),o="  "):B.length<ye?(G="    "+G.trimStart(),o="  "):(G="  "+G.trimStart(),o="    "),G.length>a&&(G=G.slice(0,a-3)+"..."),p.push(q+m(G)),P=o+P.trimStart(),P.length>a&&(P=P.slice(0,a-3)+"..."),isNaN(c)?p.push(fe(O,C(Dl(P)),`
`,$.redTrim)):p.push(O+C(Dl(P)),fe($.redTrim," ".repeat(f-1),wr," ",$.redTrim," ".repeat(P.indexOf(K)),ae("^".repeat(K.length)),`
`+$.redTrim))}}else r.push(yl(Hn(D,{line:$.red,color:ae})))}return{line:u,column:c,output:r.join(`
`)+`
`+p.join(`
`)}}function wl(e){let t=e.split(`
`).reduce((s,o)=>{let a=xc(o),u="",c="";if(a!==!1)if(a.length>2){let p=vc(a,a.length/2);u=fe(p[0]),c=fe(p[1]||"")}else u=a[0],c=a[1]||"";let f=o.trim().replace(new RegExp(i.cwd,"g"),"");if(f.length===0)s.push([$.trim]);else{let p=[],d=Fr(f,i.terminal.wrap,{hard:!0}).split(`
`);for(;d.length!==0;){let y=d.shift();d.length!==0&&d[0].length===1&&(y=y+d.shift()),p.push($.line+u+y+c)}s.push(p)}return s},[]),r=[],n=!1;for(;t.length!==0;){let s=t.shift();t.length!==0&&s.length>1?(r.length>0&&r[r.length-1]!==$.trim&&r.push($.trim),r.push(s.join(`
`))):s===$.trim?n?n=!1:(n=!0,r.push(s[0])):r.push(s[0])}we(r.join(`
`))}function Qe(e,t,r){let n=N({log:!0,store:!1}),s=ee(n,r);s.store===!0&&(s.data=N());let o=Lt("error.asset",t.data)?t.data.error.asset:Lt("errors.asset",t.data)?t.data.errors.asset:null;if(t.status===422){let{value:f}=JSON.parse(t.config.data).asset,{output:p,line:d,column:y}=bl(o,f.split(`
`)),D=N({stack:!1,entries:N({column:y,line:d,file:Q+e,details:t.statusText,status:C(Ee(t.status)),processor:fn("SHOPIFY API")})}),g=Z({type:"error"}).NL.Insert(p,m).NL.Context(D).toString();return s.store&&(s.data.message=p,s.data.rawMessage=dc(p),s.data.context=D),s.log&&xe(g),s.store?s.data:g}if(t.status in To){let f=Z({type:"error"}).NL.Wrap(To[t.status]).toLine(),p=N({stack:!1,entries:N({status:t.status,message:t.statusText,source:`${e}`})});s.store&&(s.data.message=f,s.data.context=p);let d=fe($.red,`
`,f,dn(p));return s.log&&xe(d),s.store?s.data:d}let a=se("Unknown error has occured"),u={stack:!1,entries:{status:t.status,message:t.statusText,source:`${e}`}};s.store&&(s.data.message=a,s.data.context=u);let c=fe($.red,`
`,a,dn({stack:!1,entries:N({status:t.status,message:t.statusText,source:`${e}`})}));return s.log&&xe(c),s.store?s.data:c}function Et(e,t){let r={stack:!1,entries:{...t}},n=e instanceof Error?x("message",e)?e.message:e.toString():e;x("stack",e)&&(r.stack=e.stack),x("code",e)&&(r.entries.code=e.code),x("name",e)&&(r.entries.name=e.name),r.stack===!1?(xe(fe(Qs(n,{type:"error"}),dn(r))),process.exit(0)):i.errors.add(fe(Qs(n,{type:"error"}),dn(r)))}var Me=(e,t)=>r=>{xe(fe(Qs(r.message,{type:"error"}),dn({stack:r.stack,entries:{...t,code:r.code,name:r.name,details:e}})))};function Yr(e,t){e.fileName=t.base;let r=N(),n,s=Z({type:"error"}).NL.Wrap(e.message.split(`
`)[0],se.bold).NL;if(x("codeFrame",e)){s.Newline();let u=e.codeFrame.split(`
`),c=e.rawCodeFrame.split(`
`),f=0;for(;u.length!==0;){if(x("line",r)===!1){let p=c[f].trimStart();if(p[0]===">"){let d=p.slice(1).trimStart().match(/^\d+/);d!==null&&(n=Number(d[0]))}}s.Line(u.shift()),f=f+1}s.Newline()}let o=[],a=e.stack.split(`
`);for(;a.length!==0;)o.push($.red+a.shift());i.errors.add(o.join(`
`)),xe(s.NL.Context({stack:!0,entries:{line:n,name:e.name,file:Q+t.relative,processor:fn("JSON")}}).toString())}function xl(e,t){let r=Z({type:"error"}).NL.Wrap(t.sassMessage,se.bold).Newline();if(x("span",t)){let{span:n}=t,s=x("context",n)?n.context:n.text;if(s.length===0)return"";r.Newline();let{start:o,end:a}=n,u=Ee(a.line+1).length;if(o.line===a.line){let c=u-Ee(a.line).length;o.line>1&&r.Line(`${" ".repeat(c)+I(`${a.line}`)} ${$.trim}`),c=u-Ee(a.line+1).length,r.Line(`${" ".repeat(c)+I(`${a.line+1}`)} ${$.trim} ${s.trimEnd()}`),r.Line(`${" ".repeat(u-1)+wr} ${$.redTrim} ${" ".repeat(a.column)+h("^")}`)}else{let f=s.slice(n.start.offset,n.end.offset).split(`
`),p=n.start.line+1;for(let d of f){let y=Ee(p++),D=u-y.length,g=D===0?"":" ".repeat(D);r.Line(`${g+I(y)} ${$.trim} ${d}`)}}}xe(r.NL.Context({stack:t.sassStack,entries:{line:t.span.start.line,name:t.name,input:e.input,cause:t.cause,processor:fn("SASS Dart")}}).toString())}function Sl(e){let t=Z({type:"error"}).NL.Wrap(e.text,se.bold).Newline(),r=e.location,n=Ee(r.line).length,s=n-Ee(e.location.line).length;r.line>1&&t.Line(`${" ".repeat(s)+I(`${r.line-1}`)} ${$.trim}`),s=n-Ee(r.line).length,xe(t.Line(`${" ".repeat(s)+I(`${r.line}`)} ${$.trim} ${r.lineText}`).Line(`${" ".repeat(n-1)+wr} ${$.redTrim} ${" ".repeat(r.column)+h("^")}`).NL.NL.Context({stack:!1,entries:{suggest:H(r.suggestion),line:e.location.line,column:e.location.column,plugin:e.pluginName,namespace:r.namespace,file:Q+e.location.file,processor:fn("ESBuild")}}).toString())}function Fl(e,t){let r=[],n=Gn(t.stack,{pretty:!0,basePath:i.cwd}).split(`
`);for(;n.length!==0;)r.push($.red+n.shift());i.errors.add(r.join(`
`)),xe(Z({type:"error"}).NL.Wrap(`${t.name}${k} ${t.reason}`,se.bold).Newline().Multiline(t.showSourceCode(!0)).NL.NL.Context({stack:!0,entries:{line:t.line,column:t.column,source:e.input,file:e.input===t.file?void 0:t.file,plugin:I(t.plugin),processor:fn("PostCSS")}}).toString())}l();function Zn(e,t={}){let r=ee({showPercentage:!0,barColor:"neonGreen",percentColor:"whiteBright",barSize:40,clearOnComplete:!1},t),n=0;function s(p){return $.line+p+" ".repeat(Math.max(0,r.barSize-p.length))}function o(p,d=!1){return(d?"\u25B1":"\u25B0").repeat(p)}function a(){r.clearOnComplete&&console.clear()}function u(p=1){let d=n+p;n=Math.min(d,e),n===e&&a()}function c(p=1){let d=n-p;n=Math.max(d,0)}function f(p){let d=Math.round(n/e*r.barSize),y=o(d),D=o(r.barSize-d,!0),g=br.default[r.barColor](y)+Y(D);return r.showPercentage&&(g+=(p||H)(` ${String(Math.round(n/e*100))}%`)),s(g)}return{stop:a,increment:u,decrement:c,render:f,get percent(){return n}}}l();import{relative as Jh}from"pathe";l();import{argv as Uh}from"node:process";var $r={};function wt(e){return We(e,$r)||($r[e]=[]),(t,r)=>{he(r)?$r[e].push(te(t)):$r[e].push(te(t+k+" "+h(r)))}}function V({option:e,name:t,provided:r,expects:n}){xe(Z({type:"error"}).Line("TYPE ERROR",h).NL.Line(`An invalid ${pe(e)} type value was provided within your ${h(i.file.base)} file.`).Line(`The ${pe(t)} option has an incorrect type. Syncify will not intialize until this is fixed.`).NL.Line(`provided${k} ${te(He(r).toLowerCase())}`).Line(`expected${k} ${I(n.replace(/([|,])/g,m("$1")))}`).Line(`location${k} ${Q}${m.underline(i.file.base)}`).NL.Line("How to fix?",m.bold).Line(`You need to change the option value to use the ${I("expected")} type.`,m).Line(`Use the ${C("defineConfig")} named export for type checking`,m).End(i.log.group).BR.toString()),process.exit(0)}function Qt({message:e,expected:t,provided:r=void 0,fix:n}){r?t=H(`syncify ${t}`):(r=Uh.slice(2).join(" "),t=H(`syncify ${r} ${pe(t.replace(/([|,-])/g,m("$1")))}`)),xe(Z({type:"error"}).Line("COMMAND ERROR",h).NL.Wrap(e).NL.Line(`provided${k} ${H("$")} ${H("syncify "+r)}`).Line(`expected${k} ${H("$")} ${t}`).NL.Line("How to fix?",m.bold).Wrap(n,m).NL.End(i.log.group).BR.toString()),process.exit(0)}function vl({type:e,message:t,provided:r,expected:n,fix:s}){qn.test(r)&&(r=r.replace(qn,m("$1"))),qn.test(n)&&(n=n.replace(qn,m("$1"))),xe(Z({type:"error"}).Line("INVALID TARGET",h).NL.Wrap(`Invalid ${pe(e)} target provided. `,...t).NL.Line(`provided${k} ${te(n)}`).Line(`expected${k} ${I(r)}`).NL.Line("How to fix?",m.bold).Wrap(s,m).End(i.log.group).BR.toString()),process.exit(0)}function ea(e){let t=Z({type:"error"}).Line("DEPENDENCY ERROR",h).NL;if(M(e))t.Wrap(`Missing ${pe(e)} dependency. You need to install ${pe(e)} to use it as a processor.`).NL.Line("How to fix?",m.bold).Line("Install the above module as a development dependency, for example:").NL.Line(`$ pnpm add ${e} -D`,H);else{let r=[`Missing ${pe(`${e.length}`)} dependencies. You are attempting to use processor`,"(transforms) which are not yet installed. Install the below modules as development","dependencies or disable the transform:"];t.Wrap(r).Newline();for(let n of e)t.Line(`$ pnpm add ${n} -D`,H)}xe(t.NL.Wrap("If you are using a different package manager please consider adopting pnpm.",m).End(i.log.group).BR.toString()),process.exit(0)}function $l({option:e,key:t,expects:r,reason:n}){e.indexOf(".")>-1&&(e=e.split(".").filter(Boolean).join(m(" \u2192 "))),xe(Z({type:"error"}).Line("MISSING OPTION",h).NL.Wrap(`Missing ${ko("CB",pe(e))} config option. The ${pe(t)} option needs to be defined`).NL.Line(`expected${k} ${I(r.replace(/([|,])/g,m("$1")))}`).Line(`location${k} ${m.underline(i.file.base)}`).NL.Line("Why?",m.bold).Wrap(n,m).End(i.log.group).BR.toString()),process.exit(0)}function Ne({option:e,name:t,value:r,expects:n,reason:s=[""]}){e.indexOf(".")>-1&&(e=e.split(".").filter(Boolean).join(m(" \u2192 "))),xe(Z({type:"error"}).Line("INVALID ERROR",h).NL.Wrap(`Invalid ${pe(e)} configuration. The ${pe(t)} option is invalid. `,...s).NL.Line(`provided${k} ${te(r)}`).Line(`expected${k} ${I(n.replace(/([|,])/g,m("$1")))}`).NL.Line("How to fix?",m.bold).Line("You need to update the option and use one of the expected values.",m).Line(`Use the ${C("defineConfig")} named export for type checking`,m).End(i.log.group).BR.toString(se)),process.exit(0)}function El(e){xe(Z({type:"error"}).Line("MISSING REFERENCE",h).NL.Line(`You have not provided any ${h("stores")} within your ${pe("package.json")} file.`).NL.Line("How to fix?",C.bold).Line(`You need to provide ${pe("stores")} via ${pe("syncify")} key`,m).Line("passing both your store name and a key > value list of theme targets.",m).NL.Line("{",m).Line('  "syncify": {'.replace(/"/g,C('"')),m).Line('    "stores": {'.replace(/"/g,C('"')),m).Line(`      "domain": "${ae("your-store")}"`.replace(/"/g,C('"')),m).Line('      "themes": {}'.replace(/"/g,C('"')),m).Line("    }",m).Line("  }",m).Line("}",m).NL.Line(`Replace the ${C("your-store")} with the name of your .myshopify domain.`,m).Line("Syncify will prompt you and provide a list of theme targets to select from.",m).NL.End(i.log.group).BR.toString()),process.exit(0)}function Cl(e){xe(Z({type:"nil"}).Line(`${`Missing ${pe("syncify.config.js")} configuration`}`,h).BR.Line("Unable to resolve a configuration file within the workspace").BR.Line(`at${k} ${m.underline("~"+e)}`).BR.Line("How to fix?",C.bold).Line("You need to add one the following files to your project",m).BR.Line(` - ${C("syncify.config.ts")}`,m).Line(` - ${C("syncify.config.js")}`,m).Line(` - ${C("syncify.config.mjs")}`,m).Line(` - ${C("syncify.config.cjs")}`,m).Line(` - ${C("syncify.config.json")}`,m).BR.Line(`You can also provide configuration in your ${C("package.json")}`,m).Line(`file using the ${pe('"syncify": { "config": {} }')} 'property.`,m).BR.toString(se)),process.exit(0)}function oi(e){let t=[`Missing ${pe(".env")} credentials. Syncify could not resolve credentials within the workspace.`,`Check you have ${pe(".env")} or ${pe("syncify.env")} file present in the root of your project`];xe(Z({type:"error"}).Line("MISSING ENV",h).NL.Wrap(t).NL.End(i.log.group).BR.toString(se)),process.exit(0)}function Al(e,t){let r=e instanceof Error?We("message",e)?e.message:e.toString():e;We("code",e)&&(t.entries.code=e.code),We("name",e)&&(t.entries.name=e.name),xe(Z({type:"error"}).Line("ERROR",h).NL.Wrap(t.message,ae).NL.Wrap(r,ae.bold).NL.Line("How to fix?",m.bold).Wrap(t.solution,m).NL.Context({entries:t.entries}).NL.End(i.log.group).BR.toString()),process.exit(0)}function qe(e,t){xe(Z({type:"error"}).Line("ERROR",h).NL.Wrap(e).NL.Line("How to fix?",m.bold).Wrap(t,m).NL.End(i.log.group).BR.toString()),process.exit(0)}function Er(e,t){e.indexOf(".")>-1&&(e=ko("CB",me(e.split(".").filter(Boolean).join(m(" \u2192 ")),U,ae.bold(t)),{spaced:!0}));let r=i.file.base==="package.json"?`${I("syncify")} config in the ${I("package.json")} file.`:`${I(i.file.base)} file.`;xe(Z({type:"error"}).Line("ERROR",h).NL.Line(`Unknown ${pe(e)} option provided.`).NL.Line("How to fix?",m.bold).Line(`The ${pe(t)} option is invalid or unsupported.`).Line(`You need to remove it from the ${r}`).End(i.log.group).BR.toString()),process.exit(0)}var xt=function(e){if(Qn(),e.log.config.silent)return;e.env.tree=!0;let t=Z().BR.Top("Syncify").NL.Line(`v${e.version}`,h.whiteBright);e.terminal.cols<80&&t.Newline("red").Error("TERMINAL WIDTH WARNING",h).Newline("red").Error(`Your terminal width is below ${h("100")} columns (currently ${h(`${e.terminal.cols}`)})`).Error("This is not recommended for usage with Syncify (size matters).").Error("Expand your terminal wider for an optimal logging experience."),T(t.toLine())};xt.time=function(){T(Zt(Y(`Started in ${A.stop("runtime")}`)))};xt.modes=function(e){let t=Z(),r=e.env.prod?"--prod":"--dev";if(e.mode.themes)return T(t.Wrap("Select theme target/s to be inserted into your package.json file.","You will be given a code example after selecting where you will define","a custom target name. If you would like to create a new theme, then run",`the ${pe("publish")} resource`,m).toLine());if(e.mode.cache&&(r!==""?r+=` ${Q} cache`:r+="cache"),e.mode.clean&&(r!==""?r+=` ${Q} clean`:r+="clean"),e.spawn.invoked&&(r!==""?r+=` ${Q} build`:r+="build"),e.mode.build&&(r!==""?r+=` ${Q} build`:r+="build"),e.mode.export&&(r!==""?r+=` ${Q} export`:r+="export"),e.mode.publish&&(r!==""?r+=` ${Q} publish`:r+="publish"),e.mode.import&&(r!==""?r+=` ${Q} import`:r+="import"),e.mode.watch&&(r!==""?r+=` ${Q} watch`:r+="watch",e.mode.hot&&(r+=` ${Q} hot`)),r!==""&&(t.Line(r,m),r=""),!Pr(e.filters)){t.NL.Line(`Filters${k}`,C.bold);let n=$t(e.filters);for(let s in e.filters){let o=C(e.filters[s].map(a=>Jh(e.cwd,a)).join(", "));t.Line(` ${Q} ${s}${k}${n(s)}${o}`,le)}}T(t.toLine())};xt.spawns=function(e){if(e.mode.build||e.mode.watch){let t=Z().Line(`Spawned${k}`,C.bold),r=$t(e.spawn.commands);for(let n in e.spawn.commands){let s=r(n),o=e.spawn.commands[n].pid;t.Line(` ${Q} ${le(n)}${k}${s}PID ${U} #${_t(`${o}`)}`,m)}T(t.toLine())}};xt.stores=function(e){let t=Z(),r=e.sync.themes.length;Vt(e.mode.upload,e.mode.import,e.mode.build,e.mode.clean)&&r>0&&(t.Line(`Editors${k}`,h.white),Tl(t,e.sync.themes,"editor")),dt(e.mode.upload,e.mode.import,e.mode.watch)&&r>0&&(e.mode.upload||e.mode.import?t.NL.Line(`Targets${k}`,h.white):t.NL.Line(`Previews${k}`,h.white),Tl(t,e.sync.themes,"preview")),T(t.toLine())};xt.warnings=function(t){if(!t.log.config.warnings)return;let r=Rt($r),n=r.reduce((o,a)=>(o=o+$r[a].length,o),0);if(n===0)return;let s=Z({type:"warning"}).Line(`${n} ${Dt("Warning",n)}`,h);for(let o of r){let a=$r[o];if(a.length>0){a.length===n?s.Newline().Line(`${o} ${Dt("Warning",a.length)}`,h).Newline():s.Newline().Line(`${a.length} ${o} ${Dt("Warning",a.length)}`,h);for(let u of a)s.Line(`${ar} ${u}`,te)}}un(s.toString())};function Tl(e,t,r){let n=t.reduce((s,{target:o,store:a})=>{let u=a.indexOf(".");return u>s.store&&(s.store=u),o.length>s.theme&&(s.theme=o.length),s},{store:0,theme:0});for(let{target:s,store:o,id:a}of t){let u=o.slice(0,o.indexOf(".")),c=r==="editor"?`https://${o}/admin/themes/${a}/editor`:`https://${o}?preview_theme_id=${a}`;e.Line(me(" ",Q,_t(u)," ".repeat(n.store-u.length),U," ",_t.bold(s)," ".repeat(n.theme-s.length),U," ",m.underline(c)))}}var Nt=hl();function ai(e){T(Zc(e.width,e.newlines))}function Ve(e,{color:t,type:r=null,prefix:n=null,suffix:s=null}={}){r==="error"?n===null?xe(me(Un(t?t(e):ae(e)),Re(s))):xe(Un((t||ae)(_(n,me(e,Re(s)))))):r==="warning"?n===null?T(vr(me(t?t(e):te(e),Re(s)))):T(vr((t||te)(_(n,me(e,Re(s)))))):n===null?T(ie(me(t?t(e):H(e),Re(s)))):T(ie((t||H)(_(n,me(e,Re(s))))))}function _e(e){e===""?T(`
`):e==="red"?T($.red):e==="yellow"?T($.yellow):T($.line)}function Qn(e=!1){if(e===!1&&i.log.config.clear===!1)return;let t=ta.rows-2;T(t>0?`
`.repeat(t):""),Yh(ta,0,0),Kh(ta)}function pt(e){i.log.config.silent||i.env.tree===!1||(T(Vn(i.log.group)),i.log.config.clear&&e!==!1&&Qn(),M(e)&&(i.log.group=e,T(`
`+zn(i.log.group))))}function Bl(e){i.log.config.silent||i.env.tree===!1||(M(e)?T(Oo(m(e)+" "+Re(pn()))):(Qn(),T($.line+`
`+Oo(me(m(i.log.group),Re(pn()))))))}function Pt(e,...t){i.mode.export||i.mode.build||i.log.config.silent||(t.length===2?T(ie(H(_("process",me(h(e),or,t[0],Re(t[1])))))):T(ie(H(_("process",me(h(e),Re(t[0])))))))}function ui(e){if(i.log.config.silent===!0||i.mode.watch===!1)return;A.start();let t=me(e.kind,or,xr(e.namespace)),r=x(e.relative,i.log.changes)?i.log.changes[e.relative]+1:1;i.log.changes[e.relative]=r,i.log.group!==t?(_e(),pt(t),i.log.title!==e.namespace&&(i.log.title=e.namespace)):i.log.config.clear&&(_e(),pt(t)),i.log.uri!==e.relative&&(i.log.uri=e.input),T(Qc(le(_("changed",me(e.relative,Re(`${r} change${r>1?"s":""}`))))))}function Ct(...e){i.mode.export||i.mode.build||i.log.config.silent||(e.length===1?T(ie(H(_("minified",h(e[0]))))):e.length===4?T(ie(H(_("minified",me(h(e[0]),U,e[1],js,e[2],Q,"saved",e[3]))))):T(ie(H(_("minified",me(h(e[0]),js,e[1],Q,"saved",e[2],Re(A.now())))))))}function Ge(e,{hot:t=!1}={}){i.mode.export||i.mode.build||i.log.config.silent||(i.warnings[e]&&T(vr(te(_("warning",me(Ee(i.warnings[e].size),Dt("warning",i.warnings[e].size),Vr.warning))))),T(ie(_s(_("syncing",e)))),ne.pending>(t?0:2)&&T(ie(st(_("queued",me(e,Q,h(zs(ne.pending)),"in queue"))))))}function es(e,t){return T(ie(st(_("prompt",e))),Vn(i.log.group)),W(t)&&ra.notify(t).notify(),()=>T(zn(i.log.group))}function na(e,t){if(i.mode.watch){if(i.log.queue.add([e,t.domain,A.stop()]),i.log.idle)return;i.log.idle=!0,ne.onIdle().then(()=>{for(let[r,n,s]of i.log.queue)T(ie(Fe(_("uploaded",me(h(r),U,n,Re(s))))));i.log.queue.clear(),i.log.idle=!1})}else T(ie(Fe(_("uploaded",me(h(e),U,t.domain,Re(A.stop()))))))}function Ll(e){if(!i.log.config.silent)if(i.mode.watch){if(i.log.queue.add([e.target,e.store,A.stop()]),i.log.idle)return;i.log.idle=!0,ne.onIdle().then(()=>{for(let[t,r,n]of i.log.queue)T(ie(Fe(_("uploaded",h(t),r,n))));i.log.queue.clear(),i.log.idle=!1})}else T(ie(Fe(_("uploaded",h(e.target),e.store,A.stop()))))}function er(e,t){T(Un(se(_("invalid",e)))),ra.notify({title:"Syncify Error",sound:"Pop",open:e,subtitle:e,message:"Invalid error"}).notify(),t&&xe(rl(t,{type:"error",color:se.bold}))}function $e(e,{suffix:t=null,notify:r=null}={}){xe(Un(se(_("error",t?e+" "+Re(t):e)))),r!==null&&ra.notify(r).notify()}function sa(e){return function(...t){i.spawn.invoked||(i.spawn.invoked=!0),i.log.group!=="Spawn"&&(T(Vn(i.log.group)),i.log.group!=="Syncify"&&Qn(),T(zn("Spawn")),i.log.group="Spawn"),i.log.title!==e&&(T(el(le(e))),i.log.title=e),wl.call(this,t.toString())}}function Ze(e,t){t?T(vr(te(_("warning",e)+Re(t)))):T(vr(te(_("warning",e))))}function ia(e,t){T(ie(st(_("retrying",e,t.target,t.store))))}function Rl(e,t){T(ie(mc(_("deleted",e,t.target,t.store))))}function Je(e,...t){i.mode.build||(t.length>0?T(ie(H(_("transform",me(h(e),U,t[0],t.length===2?me(U,t[1]):t.length===3?me(U,t[1],Re(t[2])):""))))):T(ie(H(_("transform",h(e))))))}function oa(e,t){T(ie(H(_("zipped",me(h("ZIP"),e,Re(t))))))}function Wt(e,t){i.mode.export||i.mode.build||T(ie(_("skipped",me(M(e)?e:e.key,Re(t)))))}function ci(e){T(Zt(H.bold(e)))}function li(e){T(ie(Is(_("reloaded",me(h("HOT RELOAD"),Re(A.now(e)))))))}function Nl(e,t){i.mode.build||T(ie(Mr(_("exported",me(h(e),U,h(t))))))}function fi(e,t){T(ie(H(_("version",me(e.number,js,e.update.number,Re(t))))))}async function rs(e,t){let r=qr(i.sync.stores[t.sidx].client,{method:"get",url:t.url,params:{"asset[key]":e}});return Or(r).then(({data:n})=>n.asset.value).catch(()=>!1)}async function pi(e,t){let r=qr(i.sync.stores[t.theme.sidx].client,{method:"put",url:t.theme.url,data:{asset:{key:t.key,value:e}}});return Or(r).then(()=>!0).catch(n=>($e(t.key),Qe(t.key,n.response),!1))}async function aa(e,t){let r=qr(t,{method:"get",url:e.url});try{let{data:n}=await Or(r);return n}catch(n){if(n.response&&(n.response.status===429||n.response.status===500))t.params["asset[key]"]&&(ia(t.params["asset[key]"],e),ne.add(()=>aa(e,t)));else{if(i.mode.upload)throw n.response;t.params["asset[key]"]&&($e(t.params["asset[key]"]),Qe(t.params["asset[key]"],n.response))}}}var ts;async function ns(e,t,r){return ne.isPaused?void 0:(ne.concurrency>2?(ts>=20&&ne.concurrency--,ts>=32&&ne.concurrency--,ts>=39&&await tt(500)):ne.concurrency<3&&ts<30&&ne.concurrency++,i.mode.upload===!1&&i.mode.import===!1&&A.start(),await Or(r).then(({headers:s,data:o})=>{if(i.mode.import===!1&&r.method==="get")return o;r.method==="delete"?Rl(t.relative,e):i.mode.watch?(i.mode.hot===!0&&t.type!==10&&t.type!==9&&li(),Ll(e)):i.mode.upload?gt.emit("upload",{status:0,get theme(){return e},get file(){return t}}):i.mode.import&&gt.emit("import",{status:0,get theme(){return e},get file(){return t},get data(){return o}}),ts=parseInt(s["x-shopify-shop-api-call-limit"].slice(0,2),10)}).catch(s=>{if(s.response&&(s.response.status===429||s.response.status===500))i.mode.upload===!1&&i.mode.import===!1&&ia(t.key,e),ne.add(()=>ns(e,t,r)),i.mode.upload?gt.emit("upload",{status:1,get theme(){return e},get file(){return t}}):i.mode.import&&gt.emit("import",{status:1,get theme(){return e},get file(){return t}});else{if(i.mode.upload)return gt.emit("upload",{status:2,error:s.response,get theme(){return e},get file(){return t}});if(i.mode.import)if(s.response===void 0)gt.emit("import",{status:3,get theme(){return e},get file(){return t}});else return gt.emit("import",{status:2,error:s.response,get theme(){return e},get file(){return t}});else $e(t.key,{suffix:"shopify rejected the request",notify:{title:"Request Error",message:`Failed to sync ${t.key}`}}),s.isAxiosError&&Qe(t.relative,s.response)}return Rs}))}l();import fa from"axios";import{stat as lE,writeJson as fE,mkdir as pE,pathExists as mE}from"fs-extra";import{join as gE}from"pathe";import yE from"prompts";async function Pl(e,t){if(arguments.length===1)return r=>Pl(e,r);if(Vt(We("namespace",t),We("key",t))){er("invalid fields");return}return fa.get("metafields.json",e.client).then(({data:r})=>r.metafields.find(n=>t.namespace===n.namespace&&t.key===n.key)).catch(r=>{console.log(r)})}async function ca(e,t){return arguments.length===1?r=>ca(e,r):(t.type="json",t.namespace="email",t.value_type="json_string",t.key="eng",fa.post("metafields.json",{metafield:t},e.client).then(({data:r})=>(console.log("created",r),r.metafield)).catch(r=>{if(console.log(r),!e.queue)return Qe(t.namespace,r.response);if(_r(r.response.status)){ne.add(()=>ca(e,t));return}else return Qe(e.store,r.response)}))}async function la(e,t,r){return is(arguments.length,1)?(n,s)=>la(e,n,s):fa.put(`metafields/${t}.json`,{metafield:r},e.client).then(n=>(console.log("created"),n.data.metafield)).catch(n=>{if(!e.queue)return Qe(r.namespace,n.response);if(_r(n.response.status))ne.add(()=>la(e,t,r));else return Qe(e.store,n.response)})}async function mi(e,t){if(is(arguments.length,1))return n=>mi(e,n);let r=await Pl(e,t);return r?la(e,r.id,ee(t,{id:r.id,type:"json"})).catch(n=>{if(!e.queue)return Qe(t.namespace,n.response);if(_r(n.response.status))ne.add(()=>mi(e,t));else return Qe(e.store,n.response)}):ca(e,t)}function di({stores:e,themes:t}){return{assets:async(r,n,s)=>{let o=he(s)?{method:r,params:{"asset[key]":n.key}}:{method:r,data:{asset:{key:n.key,value:s}}};await ne.add(()=>Jt(t,async a=>{i.mode.upload&&A.start(n.uuid),await ns(a,n,ee({url:a.url},e[a.sidx].client,o))}))},pages:async(r,n,s)=>{await ne.add(()=>Jt(e,async o=>{i.mode.upload&&A.start(),console.log(s)}))},metafields:r=>ne.add(function(){return Mu(async function(n){await mi(n,r)},e)})}}l();import{join as hi,parse as ga,relative as Ml,basename as Qh}from"pathe";l();import{join as lr,dirname as _l,basename as Zh}from"pathe";l();import{join as gi,dirname as kl,resolve as kE}from"pathe";function Cr(e){return R(e)?e.filter(t=>/\*/.test(t)):/\*/.test(e)?e:null}function St(e){if(R(e))return e.map(St);if(e.indexOf("/")===-1)return e;let t=e.endsWith("/")?kl(e.slice(0,-1)):kl(e),r=t.lastIndexOf("/")+1;return t.slice(r)}function pa(e){if(R(e))return e.map(pa);let t=e.lastIndexOf("/");if(t===-1)return e;let r=e.indexOf("*");return r===-1?e.slice(0,t):e.slice(0,r)}function yn(e,t=null){let r=new RegExp(`^\\.?\\/?${e}\\/`);return function n(s){if(R(s))return s.map(n);let o=s.charCodeAt(0)===33;if(o&&(s=s.slice(1)),r.test(s))return o?"!"+s:s;if(s.charCodeAt(0)===46&&s.charCodeAt(1)===46&&s.charCodeAt(2)===47&&qe(`Invalid path defined at: ${k} ${te(`"${s}"`)}`,["Paths must be relative to source"]),t!==null){let a=gi(t,s);return(o?"!":"")+(a.startsWith(e)?a:gi(e,s))}else return(o?"!":"")+gi(e,s)}}var Ol=e=>t=>{if(t.indexOf("*")!==-1&&qe(`Base directory path cannot contain glob${k} ${te(`"${t}"`)}`,["Ensure that path you are resolving is correctly formed"]),t.charCodeAt(0)===46){if(t.length===1)return e+"/";t.charCodeAt(1)===47?t=t.slice(1):qe(`Directory path is invalid at${k} ${te(`"${t}"`)}`,["Ensure that path you are resolving is correctly formed"])}if(t.charCodeAt(0)===47){if(t.length===1)return e+"/";t=t.slice(1)}if(/^[a-zA-Z0-9_-]+/.test(t))return t=gi(e,t),zu(t).charCodeAt(0)===47?t:t+"/";qe(`Directory path is invalid at${k} ${te(`"${t}"`)}`,["Ensure that path you are resolving is correctly formed"])};function Il(e){let t=i.svg.filter(r=>r.input.has(e.input)?!0:r.match(e.input)?(r.input.add(e.input),!0):!1);return he(t)||rt(e,"data",{get(){return t}}),e}function ss(e){let t=i.style.find(r=>r.watch(e.input));return he(t)||(rt(e,"data",{get(){return t}}),t.snippet?(e.namespace="snippets",e.key=lr("snippets",t.rename)):e.key=lr("assets",t.rename),e.output?e.data.rename!==Zh(e.output)&&(t.snippet?e.output=lr(i.dirs.output,e.key):e.output=lr(pa(e.output),e.data.rename)):e.output=lr(i.dirs.output,e.key)),e}function os(e){let t=i.script.filter(r=>r.watch.has(e.input));return t.length===0||rt(e,"data",{get(){return t}}),e}function ma(e,t){return rt(t,"data",{get(){return e}}),t}function da(e){if(i.section.prefixDir){if(e.base.endsWith("-group.json")||ur(i.section.global)&&i.section.global.test(e.input))return e;let t=St(e.input);if(i.section.baseDir.has(t))return e;let r=St(e.input)+i.section.separator+e.base;e.name=r,e.key=lr(e.namespace,r),e.output=lr(_l(e.output),r)}return e}function jl(e){if(i.snippet.prefixDir){if(ur(i.snippet.global)&&i.snippet.global.test(e.input))return e;let t=St(e.input);if(i.snippet.baseDir.has(t))return e;let r=t+i.snippet.separator+e.base;e.name=r,e.key=lr(e.namespace,r),e.output=lr(_l(e.output),r)}return e}function e0(e){switch(e){case".liquid":return"Liquid";case".json":return"JSON";case".html":return"HTML";case".md":return"Markdown";case".js":case".mjs":return"JavaScript";case".jsx":return"JSX";case".ts":return"TypeScript";case".tsx":return"TSX";case".svg":return"SVG";case".css":return"CSS";case".scss":return"SCSS";case".sass":return"SASS";case".mov":case".mp4":case".webm":case".ogg":return"Video";case".ico":case".jpg":case".png":case".gif":case".pjpg":case".webp":return"Image";case".eot":case".ttf":case".woff":case".woff2":return"Font";case".pdf":return"PDF";case".yaml":case".yml":return"YAML"}return"Unknown"}function us({name:e,dir:t,ext:r,namespace:n},s){let o=s;return/\[dir\]/.test(o)&&(o=o.replace(/\[dir\]/g,t)),/\[file\]/.test(o)&&(o=o.replace(/\[file\]/g,e)),/\[ext\]/.test(o)&&(o=o.replace(/\[ext\]/g,r)),n==="snippets"&&s.endsWith(".liquid")===!1?o+".liquid":!s.endsWith(".[ext]")||!s.endsWith(r)?/\.[a-z]+$/.test(s)?o:o+r:o}function ql(e,t,r){return e.size=NaN,function(n,s,o){let a;return s===15||s===16?(a=hi(St(e.dir),e.base),r=null):(a=hi(n,e.base),r=hi(r,a)),o===-1&&(t=i.cache.paths[t]),e.uuid=It(),e.type=s,e.key=a,e.namespace=n,e.kind=o,e.input=t,e.output=r,e.relative=Ml(i.cwd,t),e}}function t0(e,t){let r=e;return(n,s)=>ee({},r,{uuid:It(),key:n,namespace:s,output:t,kind:e0(r.ext),relative:Ml(i.cwd,t)})}function Gl(e){return cs(i.paths,i.dirs.output)(e)}function cs(e,t){return function r(n){let s=new mn(ga(n)),o=ql(s,n,t);if(s.ext===".liquid"){if(e.sections.match(n))return da(o("sections",4,"Liquid"));if(e.snippets.match(n))return jl(o("snippets",3,"Liquid"));if(e.layout.match(n))return o("layout",2,"Liquid");if(e.templates.match(n))return o("templates",1,"Liquid");if(e.customers.match(n))return o("templates/customers",1,"Liquid");if(e.metaobject.match(n))return o("templates/metaobject",1,"Liquid");if(e.transforms.has(n)&&e.transforms.get(n)===9)return ss(o("snippets",9,"CSS"))}else{if(s.ext===".schema"&&e.schema.match(n))return ma(r,o("schema",5,"JSON"));if(s.ext===".json"){if(e.metafields.match(n))return o("metafields",15,"JSON");if(e.sections.match(n))return da(o("sections",4,"JSON"));if(e.templates.match(n))return o("templates",1,"JSON");if(e.config.match(n))return o("config",7,"JSON");if(e.locales.match(n))return o("locales",8,"JSON");if(e.customers.match(n))return o("templates/customers",1,"JSON");if(e.metaobject.match(n))return o("templates/metaobject",1,"JSON");if(e.schema.match(n))return ma(r,o("schema",5,"JSON"))}}switch(s.ext){case".js":case".mjs":return os(o("assets",10,"JavaScript"));case".ts":return os(o("assets",10,"TypeScript"));case".tsx":return os(o("assets",10,"TSX"));case".jsx":return os(o("assets",10,"JSX"));case".svg":return Il(o("assets",11,"SVG"));case".css":return ss(o("assets",9,"CSS"));case".scss":return ss(o("assets",9,"SCSS"));case".sass":return ss(o("assets",9,"SASS"));case".md":return o("pages",16,"Markdown");case".html":return o("pages",16,"HTML")}if(e.assets.match(n)){if(i.spawn.invoked)return o("assets",17);switch(s.ext){case".json":return o("assets",14,"JSON");case".svg":return o("assets",14,"SVG");case".css":return o("assets",14,"CSS");case".ico":case".jpg":case".png":case".gif":case".webp":case".pjpg":return o("assets",14,"Image");case".mov":case".mp4":case".webm":case".ogg":return o("assets",14,"Video");case".pdf":return o("assets",14,"PDF");case".eot":case".ttf":case".woff":case".woff2":return o("assets",14,"Font")}}}}function Hl(e,t){let r=hi(t,e),n=new mn(ga(r)),s=t0(n,r);if(e.startsWith("sections/"))return s(e,"sections");if(e.startsWith("snippets/"))return s(e,"snippets");if(e.startsWith("layout/"))return s(e,"layout");if(e.startsWith("customers/",10))return s(e,"templates/customers");if(e.startsWith("metaobject/",10))return s(e,"templates/metaobject");if(e.startsWith("templates/"))return s(e,"templates");if(e.startsWith("config/"))return s(e,"config");if(e.startsWith("locales/"))return s(e,"locales");if(e.startsWith("assets/"))return s(e,"assets")}var zl=e=>t=>{let r=new mn(ga(t)),n=ql(r,t,e);switch(Qh(r.dir)){case"sections":return n("sections",4,-1);case"snippets":return n("snippets",3,-1);case"layout":return n("layout",2);case"templates":return n("templates",1,-1);case"customers":return n("templates/customers",1,-1);case"metaobject":return n("templates/metaobject",1,-1);case"config":return n("config",7,-1);case"locales":return n("locales",8,-1);case"assets":return n("assets",14,-1)}};l();import r0 from"node:zlib";var Ul=["b","kb","mb","gb","tb"];function Mt(e){return bt(e)?tr(e):tr(et(e))}function et(e){return M(e)?ln(e).toString().length:e.toString().length}function tr(e){if(e===0)return`${h("0")}b`;let t=parseInt(String(Math.floor(Math.log(e)/Math.log(1024))),10);return t===0?`${h(`${e}`)}${Ul[t]}`:`${h((e/1024**t).toFixed(1))}${Ul[t]}`}function At(e,t){let r=et(e);return{isSmaller:r>t||r===t,gzip:tr(r0.gzipSync(e).length),before:tr(t),after:tr(r),saved:tr(t-r)}}l();async function Vl(e,t,r,n){return he(r)||r===!1?n("put",e,t):M(r)?n("put",e,r):lt(r)?n("put",e,r.toString()):n("put",e,t)}l();import{pathExists as Jl,readFile as ha,writeFile as n0}from"fs-extra";import{basename as Yl}from"pathe";var ls=/{%-?\s*render\s+['"]hot\.js['"]/;async function Kl(){let e="snippets/hot.js.liquid",[t]=i.sync.themes,r=await ha(i.hot.snippet),n=await pi(r.toString(),{theme:t,key:e});return we(ie(m(` ${Q} ${le(e)} uploaded snippet injection`))),n}function Dn(e){return ls.test(e)}function Xl(e){if(!Dn(e))return Zl(e)}function bn(e){let t=e.search(ls);if(t>-1){let r=e.slice(0,t),n=e.slice(e.indexOf("%}")+2);return r+n}return e}function Zl(e){let t=e.indexOf("<head>")+6;return e.slice(0,t)+`
`+i.hot.renderer+`
`+e.slice(t)}async function ya(e){if(!await Jl(e))return null;let n=(await ha(e)).toString(),[s]=i.sync.themes,o=Yl(e),a=`layout/${o}`,u=await rs(`layout/${o}`,s);if(M(u))return ls.test(u)?(n=bn(n),await pi(n,{theme:s,key:a})):!0}async function Ql(e){if(!await Jl(e))return null;let n=(await ha(e)).toString();ls.test(n)||(n=Zl(n),await n0(e,n),we(ie(m(` ${Q} injected render tag in output layout`))));let[s]=i.sync.themes,o=Yl(e),a=`layout/${o}`,u=await rs(`layout/${o}`,s);if(M(u))return ls.test(u)&&(n=bn(n)),await pi(n,{theme:s,key:a})?(we(ie(m(` ${Q} uploaded and inject render tag`))),!0):!1}function u0(e){e===0&&qe("Empty output directory",[`There are no files within ${le(o0(i.cwd,i.dirs.output)+"/**")}`,`You may need to run the ${le.bold("syncify build")} command and try again.`]);let t=new Map,r=0;for(let n of i.sync.themes){n.target.length>r&&(r=n.target.length);let s=`${n.store}:${n.target}`;t.has(s)||t.set(s,{active:t.size===0,log:null,size:e,processed:"",failed:0,success:0,retry:0,progress:Zn(e),get theme(){return n},errors:{remote:new Map,retry:new Set}})}return t}async function ef(e){pt("Upload"),Nt("Preparing",{style:"spinning"}),A.start("upload");let t=di(i.sync),r=Ue(e),n=zl(i.dirs.output),s=i0.sync(`${i.dirs.output}/**`).sort(),o=u0(s.length),a=null;await tt(500);function u(p){let d=p.toRaw();a!==null&&(clearInterval(a),a=null),we(p.toString()),a=setInterval(()=>{d[3]=ie(m(_("Elapsed",H.bold(A.now("upload")))))+`
`,we(fe(d))},100)}function c(p){Nt.stop();let{file:d,theme:y}=p,D=`${y.store}:${y.target}`,g=o.get(D),F=Z().NL.Line(xr(d.namespace),h.whiteBright).NL.Line(_("Elapsed",H.bold(A.now("upload"))),m).Line(_("Duration",H(A.stop(d.uuid))),m).Line(_("Size",H(Mt(d.size))),m).Newline();p.status===0?(g.errors.retry.has(d.input)&&(g.retry-=1,g.errors.retry.delete(d.input)),g.success+=1,g.progress.increment(1),g.processed=le(d.key)):p.status===1?(g.errors.retry.has(d.input)||(g.retry+=1,g.errors.retry.add(d.input)),g.processed=st(d.key)):p.status===2&&(g.errors.retry.has(d.output)&&(g.retry-=1,g.errors.retry.delete(d.output)),g.errors.remote.has(d.output)||(g.failed+=1,g.progress.increment(1),g.errors.remote.set(d.output,p),g.processed=ae(d.key)));for(let[q,{success:O,size:K,failed:P,retry:B,progress:G,processed:ye}]of o){let[X,J]=q.split(":"),re=`${h(`${O}`)} ${C("of")} ${h(`${K}`)}`,ve=h(`${B}`),E=h(`${P}`);F.Line(`${h(J.toUpperCase())}  ${U}  ${X}`,H).NL.Line(ye).NL.Line(_("uploaded",re),H).Line(_("retrying",ve),B>0?st:H).Line(_("failures",E),P>0?ae:H).NL.Insert(G.render()).Newline()}u(F)}gt.on("upload",c),await tt(500);for(let p of s){let d=n(p),y;try{if(y=(await a0(d.output)).toString(),d.namespace==="layout"&&Dn(y)&&(y=bn(y)),d.size=et(y),!r)await t.assets("put",d,y);else{let g=e.apply({...d},y);await Vl(d,y,g,t.assets)}}catch(D){Me("Error reading output file",{file:d.key,source:d.relative})(D)}}await ne.onIdle(),clearInterval(a),we.clear(),pt("Errors");let f=!1;for(let{errors:p,theme:d,failed:y,success:D,size:g}of o.values())if(p.remote.size>0){let F=h(`${d.target.toUpperCase()} THEME`),q=h(`${y}`),O=`${h(`${D}`)} ${C("of")} ${h(`${g}`)}`;T(Z().Line(`${F}  ${U}  ${d.store}`).NL.Line(_("uploaded",O),Fe).Line(_("failures",q),ae).NL.toString());let K=1;for(let P of p.remote.values()){let B=`${(K<10?"0":"")+K++}`;_e(),Ve(ae.bold(`ERROR ${B}`)),Qe(P.file.input,P.error)}ai(),f=!0}await tt(500),f||T(Zt(m("No errors!"))),we(Zt("Uploaded Completed")),process.exit(0)}l();var pm=Bt(Kr());import qD from"fast-glob";l();import{readFile as U0,writeFile as V0}from"fs-extra";import{basename as Tf}from"pathe";function J0(e,t){let{type:r,relative:n,kind:s,key:o,output:a}=e;return async function(u){r!==17&&(i.mode.watch&&i.watch.unwatch(a),await V0(a,u).catch(Me("Error writing asset to output directory",{file:n,source:n}))),i.mode.hot&&(Ge(o,{hot:!0}),s==="JavaScript"?i.wss.script(e.uuid,Tf(o)):s==="CSS"&&i.wss.stylesheet(e.uuid,Tf(o))),i.env.sync!==0&&i.mode.build===!1&&await t("put",e,u)}}async function xi(e,t,r){let n=J0(e,t),s=await U0(e.input).catch(Me("Error reading asset file",{file:e.relative,source:e.relative}));if(s){let o=s.toString();if(Cc(o))return i.mode.watch&&Wt(e,"empty file"),null;if(!Ue(r))return n(o);let a=r.apply({...e},o);if(he(a)||a===!1)return n(o);if(an(a))return n(a);if(lt(a))return n(a.toString());await n(o)}return null}l();import{minify as sD}from"html-minifier-terser";import{relative as zp}from"pathe";import{readFile as iD,writeFile as Xa}from"fs-extra";l();import{readFile as Ip}from"fs-extra";l();var Pp=Bt(Lp(),1);l();var Rp=(e,t,r)=>r<0?-1:e.lastIndexOf(t,r);function zy(e,t){let r=Rp(e,`
`,t-1),n=t-r-1,s=0;for(let o=r;o>=0;o=Rp(e,`
`,o-1))s++;return{line:s,column:n}}function Li(e,t,{oneBased:r=!1}={}){if(t<0||t>=e.length&&e.length>0)throw new RangeError("Index out of bounds");let n=zy(e,t);return r?{line:n.line+1,column:n.column+1}:n}var Uy=e=>`\\u{${e.codePointAt(0).toString(16)}}`,sr=class e extends Error{name="JSONError";fileName;codeFrame;rawCodeFrame;#n;constructor(t){super(),this.#n=t,Error.captureStackTrace?.(this,e)}get message(){let{fileName:t,codeFrame:r}=this;return`${this.#n}${t?` in ${t}`:""}${r?`

${r}
`:""}`}set message(t){this.#n=t}},Np=(e,t,r=!0)=>(0,Pp.codeFrameColumns)(e,{start:t},{highlightCode:r}),Vy=(e,t)=>{let r=t.match(/in JSON at position (?<index>\d+)(?: \(line (?<line>\d+) column (?<column>\d+)\))?$/);if(!r)return;let{index:n,line:s,column:o}=r.groups;if(s&&o)return{line:Number(s),column:Number(o)};if(n=Number(n),n===e.length){let{line:a,column:u}=Li(e,e.length-1,{oneBased:!0});return{line:a,column:u+1}}return Li(e,n,{oneBased:!0})},Jy=e=>e.replace(/(?<=^Unexpected token )(?<quote>')?(.)\k<quote>/,(t,r,n)=>`"${n}"(${Uy(n)})`);function Ar(e,t,r){typeof t=="string"&&(r=t,t=void 0);let n;try{return JSON.parse(e,t)}catch(a){n=a.message}let s;e?(s=Vy(e,n),n=Jy(n)):n+=" while parsing empty string";let o=new sr(n);throw o.fileName=r,s&&(o.codeFrame=Np(e,s),o.rawCodeFrame=Np(e,s,!1)),o}l();function Ha(e,t){if(i.warnings.has(t)){let r=i.warnings.get(t);return r.has(e)?r.get(e):r.set(e,new Set).get(e)}return i.warnings.set(t,new Map([[e,new Set]])).get(t).get(e)}function Qr(e,t){let r=Ha("Shared Schema",e.input),n=Z({type:"warning"}).NL.Wrap(t.message,te).NL.Context({stack:!1,type:"warning",entries:{reference:t.$ref,schema:t.schema,section:e.relative,shared:t.shared}});r.add(n.toString())}var kp=e=>(t,r)=>{let n=Ha("sass",e.input),s=Z({type:"warning"}).NL.Wrap(t,te);if(x("span",r)){if(he(r.span))return;let{span:a}=r,f=(x("context",a)?a.context:a.text).slice(a.start.offset,a.end.offset).split(`
`);if(f.length<15){let p=Ee(a.end.line).length,d=a.start.line+1;for(let y of f){let D=Ee(d++),g=p-D.length,F=g===0?"":" ".repeat(g);s.Trim(`   ${F+I(D)} ${$.trim} ${y}`)}}}let o=s.NL.Wrap(r.stack,te).NL.Context({stack:!1,entries:{source:e.relative,deprecated:r.deprecation?"Yes":"No"}}).toString();n.has(o)||n.add(o),i.mode.build||T(vr(te(_("warning",me(Ee(n.size),Dt("warning",n.size)))+Vr.warning)))};function Op(e,t){let r=Ha("postcss",e.input),n=fe(tl(t.node.toString(),{line:"yellow",span:bt(t.endLine)?{start:t.line,end:t.endLine}:{start:t.line,end:t.endLine}}),_o({stack:!1,entries:{column:t.column,file:e.relative,plugin:t.plugin}}));r.has(n)||(r.add(n),un(n))}l();function _p(e){return i.terser.liquid.minifySchema===!1?i.processor.json.useTab?JSON.stringify(e,null,"	".repeat(i.processor.json.indent)):JSON.stringify(e,null,i.processor.json.indent):JSON.stringify(e,null,0)}async function Yy(e){let r=(await Ip(e.input)).toString(),n=r.search(/{%-?\s*schema/);if(n<0)return[r,null,null];let s=r.indexOf("%}",n+2)+2,o=r.slice(s),a=s+o.search(/{%-?\s*endschema/);if(a<0)return $e("Missing {% endschema %} tag in file.",{suffix:e.relative,notify:{title:"Invalid Syntax",message:"Missing {% endschema %} tag in file."}}),null;try{let u=Ar(r.slice(s,a));return[r.slice(0,s),u,r.slice(a)]}catch(u){return $e(e.relative,{notify:{title:"JSON Error",message:`Error when parsing ${e.base} in ExtractSchema`}}),u instanceof sr&&Yr(u,e),null}}function Ky(e,t){let r=[];for(let n=0,s=t.length;n<s;n++){if(!x("$ref",t[n])){r.push(t[n]);continue}let[o,a]=t[n].$ref.split(".");if(i.section.shared.has(o)){let u=i.section.shared.get(o);x(a,u.schema)?R(u.schema[a])?r.push(...u.schema[a]):W(u.schema[a])&&(x("settings",u.schema[a])?r.push(...u.schema[a].settings):r.push(u.schema[a])):i.mode.build?Qr(e,{shared:u.uri,$ref:t[n].$ref,schema:"settings",message:[`An unknown Shared Schema reference key of ${h(t[n].$ref)} was provided.`,`There is no such key ${h(a)} within the shared schema.`]}):Ze(`undefined $ref ${h(a)} in ${h(o)} `,e.base)}else i.mode.build?Qr(e,{shared:a,$ref:t[n].$ref,schema:"settings",message:[`An unknown Shared Schema file reference ${h(t[n].$ref)} was provided`,`to ${h("settings")} within section file ${h(e.base)}. There is no known shared`,"schema file using that name."]}):Ze(`unknown $ref ${h(t[n].$ref)} `,e.base)}return r}function Xy(e,t){let r=[];for(let n=0,s=t.length;n<s;n++)if(x("$ref",t[n])){let[o,a]=t[n].$ref.split(".");if(i.section.shared.has(o)){let u=i.section.shared.get(o);x(a,u.schema)?R(u.schema[a])?r.push(...u.schema[a]):r.push(u.schema[a]):i.mode.build?Qr(e,{shared:a,$ref:t[n].$ref,schema:"blocks",message:[`An unknown Shared Schema key reference of ${h(t[n].$ref)} was provided`,`to the ${h("blocks")} within section file ${h(e.base)}. The shared schema`,`file exists, but the key ${h(a)} does not.`]}):Ze(`undefined $ref ${h(a)} in ${h(o)} `,e.base)}else i.mode.build?Qr(e,{shared:a,$ref:t[n].$ref,schema:"blocks",message:[`An unknown Shared Schema file reference ${h(t[n].$ref)} was provided`,`to ${h("blocks")} within section file ${h(e.base)}. There is no known shared`,"schema file using that name."]}):Ze(`unknown $ref ${h(t[n].$ref)} `,e.base)}else{let o={};for(let a in t[n])a!=="settings"&&(o[a]=t[n][a]);if(o.settings=[],x("settings",t[n]))for(let a of t[n].settings)if(x("$ref",a)){let[u,c]=a.$ref.split(".");if(i.section.shared.has(u)){let f=i.section.shared.get(u);x(c,f.schema)?R(f.schema[c])?o.settings.push(...f.schema[c]):W(f.schema[c])&&(x("settings",f.schema[c])?o.settings.push(...f.schema[c].settings):o.settings.push(f.schema[c])):i.mode.build?Qr(e,{shared:c,$ref:t[n].$ref,schema:`blocks ${U} settings`,message:[`An unknown Shared Schema key reference of ${h(t[n].$ref)} was provided`,`to the ${h("blocks")} schema id ${h(a.id)} within section file`,`${h(e.base)}. The shared schema file exists, but the key ${h(c)} does not.`]}):Ze(`undefined $ref ${h(c)} in ${h(u)} `,e.base)}else i.mode.build?Qr(e,{shared:c,$ref:t[n].$ref,schema:`blocks ${U} settings`,message:[`An unknown Shared Schema file reference ${h(t[n].$ref)} was provided`,`to ${h("blocks")} schema id ${h(a.id)} within section file ${h(e.base)}.`,"There is no known shared schema file using that name."]}):Ze(`unknown $ref ${h(a.$ref)} `,e.base)}else o.settings.push(a);r.push(o)}return r}async function Zy(e){try{let t=await Ip(e.input),r=Kt(t);if(x(e.input,i.cache.schema)&&i.cache.checksum[e.input]===r&&i.section.shared.has(e.name))return i.section.shared.get(e.name);i.cache.checksum[e.input]=r;let n=t.toString();if(n.trim().length===0)return Ze("empty file","no shared schema defined"),null;let s=Ar(n.toString());x("$schema",s)&&delete s.$schema,x("$description",s)&&delete s.$description;for(let o in s)if(W(s[o]))x("$description",s[o])&&delete s[o].$description;else if(R(s[o]))for(let a of s[o])x("$description",a)&&delete a.$description;return i.section.shared.set(e.name,{uri:e.input,schema:s}).get(e.name)}catch(t){return $e(e.relative,{notify:{title:"JSON Error",message:`Error when parsing ${e.base}`}}),t instanceof sr&&Yr(t,e),null}}async function Ua(e){let t=await Yy(e);if(t===null)return null;let[r,n,s]=t;if(n===null)return r;let o=Le(n);return o("settings")&&(n.settings=Ky(e,n.settings)),o("blocks")&&(n.blocks=Xy(e,n.blocks)),fe(r.trimEnd(),`
`,_p(n),`
`,s.trimStart())}async function jp(e,t,r){let n=await Zy(e);if(n===null)return null;let s=hr(i.cache.schema[n.uri]),o=await Jt(s,a=>rt(e.data(a),"data",{get(){return i.cache.sections[a]}}));Pt("Shared Schema",`${o.length} ${Dt("section",o.length)}`);for(let a of o){let u=await Ua(a);Ge(a.key),await t("put",a,u),i.mode.hot&&(e.type===4?i.wss.section(a.name):a.type!==10&&a.type!==9&&await ne.onIdle().then(()=>i.wss.replace()))}}l();import{basename as Qy,join as eD,relative as Wp}from"pathe";import{readFile as tD,writeFile as Mp}from"fs-extra";import qp from"postcss";var Va=null,Ja=null;async function Ka(e){if(e==="sass")return Va=Xe("sass"),de(Va)===!1;if(e==="tailwind")return Ja=Xe("tailwindcss"),de(Ja)===!1}function Gp(e,t,r){let n=Ue(r)?{...e}:!1;return async function(s){if(de(s))return null;let o;if(n!==!1){let u=r.apply({...e},ln(s));he(u)||u===!1?o=s:(M(u)||lt(u))&&(o=Ee(u))}else o=s;i.cache.checksum[e.input]=Kt(o),Mp(e.output,o).catch(Me("Error writing stylesheet to output",{input:e.relative,output:Wp(i.cwd,e.output)}));let a=At(s,e.size);if(a.isSmaller?e.kind==="SCSS"||e.kind==="SASS"||e.kind==="Tailwind"?Je(e.kind,h("CSS"),a.before,A.stop(e.uuid)):Je("CSS",a.before,`gzip ${a.gzip}`):e.kind==="Tailwind"?Ct("Tailwind",a.before,a.after,a.saved):Ct("CSS",a.before,a.after,a.saved),i.mode.hot&&i.wss.stylesheet(e.uuid,Qy(e.key)),e.kind!=="Tailwind"&&Ge(e.key),t===null)return o;await t("put",e,o)}}async function rD(e){let{data:t}=e;if(be(t.sass)&&t.sass===!1||he(t))return Ri(e);let r=W(t.sass)?ke(i.processor.sass.config,t.sass):i.processor.sass.config;if(e.ext===".scss"||e.ext===".sass"){i.mode.watch&&A.start();try{let{css:n,sourceMap:s}=Va.compile(t.input,{loadPaths:r.include,sourceMapIncludeSources:t.postcss,sourceMap:r.sourcemap,style:r.style,alertColor:!1,alertAscii:!1,quietDeps:r.quietDeps,charset:t.snippet===!1,logger:{debug:o=>console.log("DEBUG",o),warn:kp(e)}});if(r.sourcemap){let o=eD(i.dirs.sourcemaps.styles,e.base+".map");Mp(o,JSON.stringify(s)).catch(Me("Error writing SASS Source Map file to the cache directory",{file:Wp(i.cwd,o),source:e.relative}))}return Pt("SASS Dart",A.stop()),e.size=et(n),{css:n,map:s}}catch(n){return i.mode.watch&&(A.clear(),$e(e.relative,{notify:{title:"SCSS Transform Error",message:`SASS Dart failed to process ${e.base}`}}),xl(e,n)),null}}return Ri(e)}async function Ni(e,t){for(let r in i.processor.tailwind.map)if(i.processor.tailwind.map[r].has(e.input)){let n=Gl(i.style[r].input);if(he(n))continue;A.start(n.uuid),n.kind="Tailwind";let s=await nD(n);M(s)&&t.push([n,s])}return t}async function nD(e){i.mode.hot&&A.start(e.uuid);let t=Gp(e,null,null),r=await Ri(e),n=await Hp(e,r.css,r.map);return n===null?null:e.data.snippet?t(Ya(n,e.data.attrs)):t(n)}async function Ri(e){try{let t=await tD(e.input);return e.size=et(t),{css:t.toString(),map:null}}catch(t){return A.clear(),$e(e.relative,{notify:{title:"Read Error",message:`File ${e.base} could not be read`}}),Et(t,{source:e.relative,transform:"style"}),null}}async function Hp(e,t,r){let{data:n}=e,o=be(n.tailwind)===!1&&n.tailwind?[Ja(n.tailwind)].concat(n.postcss):n.postcss;try{i.mode.watch&&e.kind!=="Tailwind"&&A.start();let a=await qp(o).process(t,{from:n.rename,to:n.rename,map:r?{prev:r,inline:!1,absolute:!0}:null});i.mode.watch&&e.kind!=="Tailwind"&&Pt("PostCSS",A.stop());let u=a.warnings();if(u.length>0)for(let c of u)Op(e,c);return a.css.toString()}catch(a){return i.mode.watch&&(A.clear(),$e(e.relative,{notify:{title:"PostCSS Transform Error",message:`PostCSS failed to process ${e.base}`}}),Fl(e,a)),null}}function Ya(e,t){return t.length>0?`<style ${t.join(" ")}>${e}</style>`:`<style>${e}</style>`}async function Pi(e,t,r){i.mode.watch&&A.start(),i.mode.hot&&A.start(e.uuid);let n=Gp(e,t,r);try{let s=await rD(e);if(s===null)return null;if(de(qp)||!e.data.postcss&&!e.data.snippet)return n(s.css);if(e.data.postcss){let o=await Hp(e,s.css,s.map);return o===null?null:e.data.snippet?n(Ya(o,e.data.attrs)):n(o)}return e.data.snippet?n(Ya(s.css,e.data.attrs)):n(s.css)}catch(s){return console.log(s),null}}var oD=/{%-?\s*#[\s\S]+?%}/g,aD=/{%-?\s*comment\s*-?%}[\s\S]+?{%-?\s*endcomment\s*-?%}/g,uD=/{%-?\s*liquid[\s\S]+?%}/g,cD=/[^,:'"a-zA-Z0-9=] +[^'"a-zA-Z0-9=}{]/g;function ki(e){return i.terser.liquid.removeComments?e.replace(aD,"").replace(oD,""):e}function lD(e){return e.replace(uD,t=>`
`+t.replace(/#.*?$/gm,"")+`
`)}function fD(e,t){if(!i.terser.liquid.minifySchema)return ki(t);let r=t.search(/{%-?\s*schema/);if(r>-1){let n=t.indexOf("%}",r+2)+2,s=t.slice(n),o=n+s.search(/{%-?\s*endschema/);if(o>-1){let a=JSON.parse(t.slice(n,o)),u=JSON.stringify(a,null,0),c=t.slice(0,n)+u+t.slice(o);return ki(c)}er(e.relative)}return ki(t)}function pD(e){return i.terser.liquid.stripDashes,e}async function mD(e,t){try{return await sD(t,i.terser.markup)}catch(r){return er(e.relative),console.error(r),null}}var dD=e=>async t=>{if(e.type===2&&i.mode.hot&&Dn(t)===!1&&(t=Xl(t)),!i.mode.terse)return Xa(e.output,t).catch(Me("Error writing liquid file to output",{input:e.relative,output:zp(i.cwd,e.output)})),Je(e.kind,xr(e.namespace),tr(e.size),A.now()),t;let r;if(e.base.endsWith(".js.liquid"))r=t.replace(cD,"").replace(/(?<=[:,]) +(?=['"{[])/g,"").replace(/{{%/g,"{ {%").replace(/%}}/g,"%} }").replace(/(?<=[%}]})\s+(?=[\]}])/g," ").replace(/>\s+(?=[{[])/,">").replace(/(?<=[}\]])\s<\//g,"</");else if(e.base.endsWith(".json.liquid"))r=JSON.stringify(JSON.parse(t),null,0);else{let o=e.type===4?fD(e,t):ki(t),a=await mD(e,o);r=lD(a)}if(Pt("HTML Terser",A.now()),de(r))return Xa(e.output,t).catch(Me("Error writing liquid file to output",{input:e.relative,output:zp(i.cwd,e.output)})),t;let n=pD(r).replace(/^\s+/gm,"");Xa(e.output,n);let s=At(t,e.size);return s.isSmaller?Je(`${e.namespace} ${s.before} \u2192 gzip ${s.gzip}`):Ct("Liquid",s.before,s.after,s.saved),n};async function pr(e,t,r){i.mode.watch&&A.start();let s=(await iD(e.input)).toString();if(i.mode.build&&e.namespace==="layout"&&Dn(s)&&(s=bn(s)),e.type===4){let u=await Ua(e);if(u===null)return null;s=u}e.size=et(s);let o=dD(e),a;if(Ue(r)){let u=r.apply({...e},s);he(u)||u===!1?a=await o(s):M(u)?a=await o(u):lt(u)&&(a=await o(u.toString()))}else a=await o(s);if(i.cache.checksum[e.input]=Kt(a),i.processor.tailwind.map!==null&&e.type!==9){let u=await Ni(e,[[e,a]]);for(let c of u)await t("put",c[0],c[1]),Ge(c[0].key)}else Ge(e.key),await t("put",e,a);i.mode.hot&&(e.type===4?i.wss.section(e.name):await ne.onIdle().then(()=>i.wss.replace()))}l();import{readFile as gD,writeFile as hD}from"fs-extra";function Za(e,t){try{return Ar(t)}catch(r){return $e(e.relative,{notify:{title:"JSON Error",message:`Error when parsing ${e.base}`}}),r instanceof sr&&Yr(r,e),null}}function yD(e,t=0){try{return JSON.stringify(e,null,t)}catch(r){return console.log(r),null}}async function Ds(e,t,r=0){let n=yD(t,r);if(Hu(n))return i.mode.watch&&A.stop(),t;if(r===0){let s=At(n,e.size);Ct("JSON",s.before,s.after,s.saved)}else Je("JSON",e.namespace,tr(e.size),A.now());return e.type===15||hD(e.output,n).catch(Me("Error writing JSON",{file:e.relative})),n}async function mr(e,t,r){i.mode.watch&&A.start();let n=await gD(e.input).catch(Me("Error reading JSON file",{file:e.relative}));if(lt(n)){let s=n.toString();if(e.size=et(s),s.trim().length===0)return Wt(e,"empty file"),null;if(e.type===7&&e.name==="settings_data")for(let c of i.sync.themes){let f=await rs("config/settings_data.json",c)}let o=Za(e,s);if(o===null)return null;if(ue(o))return Wt(e,"empty file"),null;let a=i.processor.json.indent;i.mode.terse&&(e.type===14?i.terser.json.assets&&(a=0):e.type===8?i.terser.json.locales&&(a=0):e.type===1?i.terser.json.templates&&(a=0):e.type===15?i.terser.json.metafields&&(a=0):e.type===6?i.terser.json.metaobject&&(a=0):e.type===4?i.terser.json.groups&&(a=0):e.type===7&&i.terser.json.config&&(a=0));let u;if(Ue(r)){let c=r.apply({...e},o);he(c)?u=await Ds(e,o,a):R(c)||W(c)?u=await Ds(e,Ee(c),a):M(c)?u=await Ds(e,Za(e,c),a):lt(c)&&(u=await Ds(e,Za(e,c.toString()),a))}else u=await Ds(e,o,a);if(i.cache.checksum[e.input]=Kt(u),i.processor.tailwind.map!==null&&e.type!==9){let c=await Ni(e,[[e,u]]);for(let f of c)await t("put",f[0],f[1]),Ge(f[0].key)}else Ge(e.key),await t("put",e,u);i.mode.hot&&await ne.onIdle().then(()=>i.wss.replace())}}l();import{writeFile as Qa}from"fs-extra";import Vp from"esbuild";import{basename as DD,join as Jp,relative as Up}from"pathe";async function Yp(e){e.watch.clear();let t=await Vp.build(e.esbuild);i.mode.terse&&i.mode.build&&(e.size=et(t.outputFiles[0].text)),i.mode.watch?await Kp(e,t.metafile.inputs):(e.watch.has(e.input)||e.watch.add(e.input),i.watch.has(e.input)||i.watch.add(e.input))}async function Kp(e,t){let r=[],{cwd:n,watch:s,mode:o}=i;for(let a in t){if(a.indexOf("/node_modules/")>-1)continue;let u=Jp(n,a);e.watch.has(u)||e.watch.add(u),s.has(u)||s.add(u),o.watch&&r.push(u)}o.watch&&await $c().then(()=>{for(let a of e.watch)a.indexOf("/node_modules/")>-1||e.watchCustom!==null&&e.watchCustom(a)||x(a.slice(n.length+1),t)||(e.watch.delete(a),s.unwatch(a))})}function bD(e,t){return t.length>0?`<script ${t.join(" ")}>${e}</script>`:`<script>${e}</script>`}function wD(e){return an("Function",e)?function(t,r){let n=e.apply({...t},r);return n===!1?(Ve("cancelled"),null):an("String",n)?(Ve("augment"),n):lt(n)?(Ve("augment"),n.toString()):r}:!1}async function Oi(e,t,r){if(!e.data)return;i.mode.watch&&A.start(),i.mode.hot&&A.start(e.uuid);let n=wD(r),s=e.data.length;for(let o of e.data){let{key:a,input:u,output:c,snippet:f,attrs:p,esbuild:{format:d}}=o;try{let{metafile:y,outputFiles:D,warnings:g}=await Vp.build(o.esbuild);s>1&&(_e(),Ve(Up(i.cwd,u))),i.mode.watch&&await Kp(o,y.inputs),g.length>0&&void 0;for(let{text:F,path:q}of D)if(q.endsWith(".map")){let O=Jp(i.dirs.sourcemaps.scripts,`${e.base}.map`);Qa(O,F).catch(Me("Error writing JavaScript Source Map to cache",{file:Up(i.cwd,O),source:e.relative}))}else{if(i.mode.terse)if(isNaN(o.size))Je(e.kind,`${h(d.toUpperCase())} bundle`),Ct(Mt(F));else{let{before:K,after:P,saved:B}=At(F,o.size);Je(`${h(d.toUpperCase())} bundle \u2192 ${h(Mt(F))}`),Ct(null,K,P,B)}else Je(`${h(d.toUpperCase())} bundle \u2192 ${h(Mt(F))}`);let O;if(f){if(O=bD(F,p),n&&(O=n(e,O),O===null))continue;await Qa(c,O).catch(Me("Error writing inline <script> snippet",{file:e.relative})),Nl("script","snippet")}else{if(O=F,n&&(O=n(e,O),O===null))continue;await Qa(c,O).catch(Me("Error writing JavaScript asset",{file:e.relative}))}i.mode.hot?(Ge(a,{hot:!0}),i.wss.script(e.uuid,DD(a)),await t("put",o,O)):i.mode.build||(Ge(a),await t("put",o,O))}}catch(y){x("errors",y)&&(A.clear(),$e(e.relative,{notify:{title:"JavaScript Error",message:`Transform failed for ${e.base}`}}),i.errors.add(u),y.errors.forEach(Sl))}}s>1&&_e()}l();import xD from"svgo";import SD from"svg-sprite";import{join as Tr,relative as FD}from"pathe";import{readFile as Xp,writeFile as Zp}from"fs-extra";async function vD(e){let t=await Xp(e);return[e,t.toString(),et(t)]}function $D(e){return new Promise(function(t,r){e.compile((n,s)=>{if(n)return r(n);for(let o in s)for(let a in s[o])t(s[o][a].contents.toString())})})}function ED(e,t,r){async function n(s){let o=ee({},e);i.mode.watch&&A.start(),o.kind="Sprite",s.snippet?(o.namespace="snippets",o.key=Tr("snippets",us(o,s.rename)),o.output=Tr(i.dirs.output,o.key)):(o.key=Tr("assets",us(o,s.rename)),o.output=Tr(i.dirs.output,o.key));let a=s.sprite===!0?i.processor.sprite:s.sprite,u=new SD(a),c=await Jt(hr(s.input),vD).catch(Me("Error reading an SVG file",{file:o.base,source:o.relative}));if(c){let f=c.filter(([D,g])=>Qp(g)?(Wt(FD(i.cwd,D),"Liquid Detected"),!1):!0);o.size=0;for(let[D,g,F]of f)u.add(D,null,g),o.size=o.size+F;let p=await $D(u),d=f.length;Pt("SVG Sprite",`${d} ${Dt("SVG",d)}`,A.stop()),await Zp(o.output,p).catch(Me("Error writing SVG Sprite",{file:o.key,caller:e.relative}));let y=At(p,o.size);y.isSmaller?Je(`${o.kind} ${y.before}`,`gzip ${y.gzip}`):Ct(o.kind,y.before,y.after,y.saved),t&&(Ge(o.key),await t("put",o,p))}}return n}function Qp(e){return/^(?:{{[\s\S]+?}}|{%[\s\S]+?%})|[^"'](?:{{[\s\S]+?}}|{%[\s\S]+?%})[^'"]/m.test(e)}function CD(e){if(/<path[^>]*[a-zA-Z"'\s](>)(?!\s*<\/path>)/g.test(e)){let r=`${m(`<${C("path")}>`)}`,n=`${Fe(`<${C("path")} />`)}`;return Je("SVG",r,n,"patched solidus"),e.replace(/(<path[^>]*[a-zA-Z"'\s])(>)(?!\s*<\/path>)/g,"$1 /$2")}return e}function AD(e,t,r){let n=ee({},e);async function s(o){i.mode.watch&&A.start(),o.snippet?(n.namespace="snippets",n.key=Tr("snippets",us(n,o.rename)),n.output=Tr(i.dirs.output,n.key)):(n.key=Tr("assets",us(n,o.rename)),n.output=Tr(i.dirs.output,n.key));let a=o.svgo===!0?i.processor.svgo:o.svgo,c=(await Xp(n.input)).toString();if(Qp(c))return Wt(n,"Liquid Detected"),null;let f=CD(c);n.size=et(f);let p;try{p=xD.optimize(f,a)}catch(D){return $e(n.relative,{notify:{title:"Transform Error",message:`SVGO failed to optimize ${n.key}`}}),Et(D,{source:n.relative,output:n.key,processor:"SVGO"}),null}Pt("SVGO",A.stop());let{data:d}=p,y=At(d,n.size);y.isSmaller?Je(`${n.kind} ${y.before} \u2192 gzip ${y.gzip}`):Ct(n.kind,y.before,y.after,y.saved),await Zp(n.output,d).catch(Me("Error writing SVG",{file:n.key,caller:e.relative})),t&&(Ge(n.key),await t("put",n,d))}return s}async function _i(e,t,r){i.mode.watch&&A.start();let n=ED(e,t,r),s=AD(e,t,r),o=e.data.length;for(let a=0;a<o;a++){let u=e.data[a];a>0&&i.mode.watch&&ui(e),u.format==="sprite"?await n(u):u.format==="file"&&await s(u)}}l();import{join as cu}from"pathe";import{existsSync as lu,mkdirSync as im,readFileSync as jD}from"fs-extra";var um=Bt(sm());import om from"node:zlib";import am from"cbor";var Gt=new kr;function WD(e){let t=jD(e),r=om.gunzipSync(t);return am.decode(r)}function Lr(e,t){return async()=>{let r=await am.encodeAsync(t,{omitUndefinedProperties:!0,canonical:!0}),n=om.gzipSync(r);return n[9]=3,(0,um.default)(e,n)}}async function cm(e){i.cache.uri=Ir(null);let t=cu(i.cwd,"node_modules",".cache");lu(t)||im(t);let r=cu(t,"syncify");lu(r)||im(r);for(let n of Js)i.cache.uri[n]=cu(r,`${n}.bin`),lu(i.cache.uri[n])?i.cache[n]=WD(i.cache.uri[n]):(i.cache[n]={},Gt.add(Lr(i.cache.uri[n],i.cache[n])));if(x("hotSnippet",i.cache.build)||(i.cache.build.hotSnippet=[]),e.cache)return MD()}function MD(e=null){if(e===null){for(let t of Js)Pr(i.cache[t])||(i.cache[t]={},Gt.add(Lr(i.cache.uri[t],i.cache[t])));return Gt.onIdle()}return i.cache[e]={},Gt.add(Lr(i.cache.uri[e],i.cache[e]))}function lm(){return Gt.onIdle()}function $n(e=null){if(e===null){for(let t of Js)Pr(i.cache[t])||Gt.add(Lr(i.cache.uri[t],i.cache[t]));return Gt.onIdle()}else return Gt.add(Lr(i.cache.uri[e],i.cache[e]))}function fm(e,t=NaN){let r=e.endsWith(".myshopify.com")?e.slice(0,e.indexOf(".myshopify.com")).toLowerCase():e.toLowerCase();return isNaN(t)===!1?Lt(`${r}.${t}`,i.cache.pages)?i.cache.pages[r][t]:(x(r,i.cache.pages)?i.cache.pages[r][t]={}:i.cache.pages[r]={[t]:{}},Gt.add(Lr(i.cache.uri.pages,i.cache.pages)),i.cache.pages[r][t]):(x(r,i.cache.pages)||(i.cache.pages[r]={},Gt.add(Lr(i.cache.uri.pages,i.cache.pages))),i.cache.pages[r])}function ws(e,t){let r=e.endsWith(".myshopify.com")?e.slice(0,e.indexOf(".myshopify.com")).toLowerCase():e.toLowerCase();return x(r,i.cache.pages)?i.cache.pages[r][t.id]=t:i.cache.pages[r]={[t.id]:t},Gt.add(Lr(i.cache.uri.pages,i.cache.pages)),i.cache.pages[r][t.id]}function GD(){let e=N({stats:N({total:0,errors:0,skipped:0,bundled:0})});for(let t of["styles","scripts","svgs","sections","layouts","metaobject","templates","snippets","locales","configs","schema","pages","metafields","assets"])e[t]=N({group:t,time:"",size:0,files:[],report:null});return e}async function Gi(e){A.start("build"),i.mode.export||(Bl("Build"),_e());let t=Z({type:"error"}),r=Z().Newline(),n=new Set,s=GD(),o=ue(i.filters)===!1,a=cs(i.paths,i.dirs.output),u=(0,pm.default)(hr(i.watch.values())),c=await qD("**",{absolute:!0,cwd:i.dirs.input}),f=i.cache.paths;for(let y of c.filter(u)){let D=a(y);if(!he(D))switch(D.type){case 9:s.styles.files.push(D);break;case 10:s.scripts.files.push(D);break;case 4:s.sections.files.push(D);break;case 2:s.layouts.files.push(D);break;case 3:s.snippets.files.push(D);break;case 8:s.locales.files.push(D);break;case 7:s.configs.files.push(D);break;case 1:s.templates.files.push(D);break;case 16:s.pages.files.push(D);break;case 14:s.assets.files.push(D);break;case 15:s.metafields.files.push(D);break;case 11:for(let{uuid:g,format:F,input:q}of D.data)if(!n.has(g))if(n.add(g),F==="sprite")s.svgs.files.push(D);else for(let O of q)s.svgs.files.push(a(O));break}}function p(y,D){return A.start(y.group),async function(g){A.start(g.uuid),s.stats.total+=1;try{f[g.output]=g.input;let F=g.ext===".json"?await mr(g,e):await D(g,e);return F===null||isNaN(g.size)?(s.stats.skipped+=1,N({name:g.base,input:g.relative,time:A.stop(g.uuid),output:g.key,error:"Skipped File"})):(s.stats.bundled+=1,N({name:g.base,input:g.relative,output:g.key,error:null,time:A.stop(g.uuid),size:At(F,g.size)}))}catch(F){return s.stats.errors+=1,t.Line(F.message),N({name:g.base,input:g.relative,output:g.key,time:A.stop(g.uuid),error:F.message})}}}async function d(y,D){let g=o&&x(y,i.filters)?i.filters[y]:null;if(g&&g.includes(y)===!1)return 0;let F=s[y];F.size=F.files.length,F.report=await Jt(F.files,p(F,D),{stopOnError:!0}),F.time=A.stop(y);let q=F.report.length,O=h(q<10?` ${q}`:`${q}`);r.Line(_(y,`${O} ${Dt("file",q)} ${Re(F.time)}`))}if(await d("svgs",_i),await d("layouts",pr),await d("templates",pr),await d("sections",pr),await d("snippets",pr),await d("locales",mr),await d("configs",mr),await d("assets",xi),await d("styles",Pi),await d("scripts",Oi),await $n(),i.mode.export===!1&&i.mode.publish===!1){if(r.NL.Dash("Completed",m).NL.Line(_("version",`${i.vc.number}`)).Line(_("processed",`${h(`${s.stats.total}`)} files`)).Line(_("bundled",`${h(`${s.stats.bundled}`)} files`)).Line(_("skipped",`${h(`${s.stats.skipped}`)} files`)).Line(_("duration",A.now("build"))).Line(_("warnings",h(`${i.warnings.size}`))).Line(_("errors",h(`${s.stats.errors}`))),i.warnings.size>0){r.NL.Dash("Warnings",m).Newline();let y,D=0;for(let g of i.warnings.keys())for(let[F,q]of i.warnings.get(g)){y!==F?(D=1,y=F):(D=D+1,r.Ruler()),r.Warn(`${h("WARNING")} ${gc}${h(`${D}`)}`,te).Newline("yellow").Warn(y,te);for(let O of q)r.Insert(O)}T(r.NL.End(i.log.group).BR.toString(H))}else T(r.NL.End(i.log.group).BR.toString(H));process.exit(0)}}l();l();import{readFile as UD,writeFile as VD}from"fs-extra";import JD,{stringify as YD}from"gray-matter";import Ui from"prompts";import KD from"markdown-it";import{Turndown as XD,GithubFlavor as ZD}from"@syncify/turndown";l();function HD(e){return e==="boolean"||e==="color"||e==="date"||e==="date_time"||e==="dimension"||e==="json"||e==="money"||e==="multi_line_text_field"||e==="number_decimal"||e==="number_integer"||e==="rating"||e==="rich_text_field"||e==="single_line_text_field"||e==="url"||e==="volume"||e==="weight"}function mm(e,t){for(let r of t)for(let n of["key","type","value","namespace","description"]){if(n!=="description"&&!We(n,r))return er(e.relative,[`Missing ${I.bold(n)} property key value in a ${te.bold("metafields")}`,"value of page frontmatter. Frontmatter metafields require you provide the following keys:","",`${m("-")} ${C("key")}`,`${m("-")} ${C("type")}`,`${m("-")} ${C("value")}`,`${m("-")} ${C("namespace")}`,"",`${m("Update the metafield entry to include")} ${C(n)}`]),!1;if(n==="type"){let s=r[n];if(!HD(s))return er(e.relative,[`Invalid type ${I.bold(s)} provided in a page frontmatter ${te.bold("metafields")}`,`value. Frontmatter metafields ${h("must")} be one of following types:`,"",`${m("-")} ${C("boolean")}`,`${m("-")} ${C("color")}`,`${m("-")} ${C("date")}`,`${m("-")} ${C("date_time")}`,`${m("-")} ${C("dimension")}`,`${m("-")} ${C("json")}`,`${m("-")} ${C("money")}`,`${m("-")} ${C("multi_line_text_field")}`,`${m("-")} ${C("number_decimal")}`,`${m("-")} ${C("number_integer")}`,`${m("-")} ${C("rating")}`,`${m("-")} ${C("rich_text_field")}`,`${m("-")} ${C("single_line_text_field")}`,`${m("-")} ${C("url")}`,`${m("-")} ${C("volume")}`,`${m("-")} ${C("weigh")}`,"",`${m("Update the metafield entry to an accepted")} ${C("type")}`]),!1}}return!0}l();import Hi from"axios";async function dm(e){return Hi.get("pages.json",e.client).then(({data:t})=>t.pages).catch(t=>Qe(e.store,t.response))}async function gm(e,t){if(Vt(We("handle",t),We("title",t))){console.log("invalid fields");return}return Hi.get("pages.json",e.client).then(({data:r})=>We("handle",t)&&We("title",t)?r.pages.find(n=>t.title===n.title&&t.handle===n.handle):We("handle",t)?r.pages.find(n=>t.handle===n.handle):We("title",t)?r.pages.find(n=>t.title===n.title):void 0).catch(r=>{console.log(r)})}async function zi(e,t){i.mode.upload||A.start();let r=await Hi.post("/pages.json",{page:t},e.client).then(({data:n})=>(na("page",e),n.page)).catch(n=>{_r(n.response.status)?ne.add(()=>zi(e,t)):Lt("response.data",n.response)&&Qe(t.title,n.response)});if(r)return ws(e.domain,r),r}async function fu(e,t,r){let{mode:n}=i;n.upload||A.start();let s=`pages/${r.id}.json`,o=await Hi.put(s,{page:r},e.client).then(({data:a})=>(n.watch?na("page",e):n.upload&&gt.emit("upload","uploaded",r,{key:t.key,namespace:t.namespace,fileSize:Mt(r.body_html)}),a.page)).catch(a=>{_r(a.response.status)?ne.add(()=>fu(e,t,r)):console.log(a)});if(o)return o}function QD(e){return new XD(i.page.import).use(ZD).turndown(e)}async function e1(e){let t=es("No matching pages, select an option",{title:"No matching pages",message:"Open CLI and select an option"}),r=await Ui({type:"select",name:"action",message:"Page Resources",hint:" ",instructions:!1,choices:[{title:"Create Page",description:`Create a new page on ${e.domain}`,value:1},{title:"Select Page",description:`Select a page to overwrite on ${e.domain}`,value:2},{title:"Cancel",description:"Cancel, and skip this sync operation",value:4}]});return{resume:t,action:r.action}}async function t1(e){let t=await dm(e);if(!t)return;let r=t.map(s=>({title:s.title,description:`https://admin.shopify.com/store/${e.store.toLowerCase()}/pages/${s.id}`,value:s.id}));return r.push({title:tui.hr(20,!1),disabled:!0,selected:!1},{title:"Create New Page",description:`Create a new page on ${e.domain}`,value:1},{title:"Cancel",description:"Cancel, and skip this sync operation",value:4}),(await Ui({type:"select",name:"action",message:"Choose Page",hint:" ",instructions:!1,choices:r})).action}async function r1(e){let t=[{title:"View Source",description:"Prints the page source in the CLI",value:5},{title:"Update Local",description:"Update the local source with remote version",value:3},{title:"Overwrite Remote",description:"Overwrite the remote version with local source",value:6},{title:"Cancel",description:"Cancel, and skip this sync operation",value:4}],r=es("Remote version is newer than local version",{title:"Remote \u2192 Local",message:"Remote version has changed"}),n=await Ui({type:"select",name:"action",message:"Page Resources",hint:" ",instructions:!1,choices:t});if(n.action===5){_e(""),T(e.body_html),_e("");let s=await Ui({type:"select",name:"action",message:"Page Resources",hint:" ",instructions:!1,choices:t.slice(1)});return{resume:r,action:s.action}}else return{resume:r,action:n.action}}function n1(e,t){let r={};if(x("title",t)?r.title=`${t.title}`:r.title=xr(e.name.replace(/[._-]/g," ")),x("handle",t)){let n,s=t.handle;/^[./]{1,2}/.test(s)&&(n=s,s=s.replace(/^[./]{1,2}/,""),Ze(`handle ${or} ${n} ${U} ${s}`,"fixed start")),/^pages\//.test(s)&&(n=s,s=s.replace(/^pages\//,""),Ze(`handle ${or} ${n} ${U} ${s}`,"fixed sub-path")),/[_/]/.test(t.handle)&&(n=s,s=s.replace(/[_/]/g,"-"),Ze(`handle ${or} ${n} ${U} ${s}`,"fixed invalid characters")),r.handle=s}else x("title",t)?r.handle=Ec(t.title):r.handle=e.name.toLowerCase();if(x("author",t)&&i.page.author!==""){let n,s=t.author;/\//.test(t.author)&&(n=t.author,s=n.replace(/\//g," "),Ze(`author ${or} ${n} ${U} ${s}`,"fixed invalid characters")),r.author=s}else t.author=i.page.author;return x("published",t)?be(t.published)?r.published=t.published:(Ze(`published ${or} expected boolean, got ${typeof t.published}`,"defaulted to false"),r.published=!1):r.published=!0,x("template_suffix",t)&&(x("template",t)?(Ze("duplicate template_suffix references","using template"),delete t.template_suffix):(t.template=t.template_suffix,delete t.template_suffix)),x("template",t)?r.template_suffix=t.template:i.page.suffixDir&&ur(i.page.global)&&i.page.global.test(e.input)!==!1&&(r.template_suffix=St(e.input)),x("metafield",t)&&(Ze("use metafields instead of metafield","sync will still process"),t.metafields=t.metafield,delete t.metafield),x("metafields",t)?W(t.metafields)&&(r.metafields=[t.metafields]):r.metafields=void 0,r}async function hm(e,t){if(i.sync.stores.length>1)return Wt(e,"pages do not support multistore sync"),null;let r=await UD(e.input);if(Pr(r.toString()))return i.mode.watch&&Wt(e,"empty file"),null;let n=JD(r),{data:s,content:o}={...n},a=n1(e,s);if(R(a.metafields)&&!mm(e,a.metafields))return null;e.kind==="Markdown"?(A.start(),a.body_html=KD(i.page.export).render(o),Je(`${h("Markdown")} ${U} ${h("HTML")} ${Q} ${A.stop()}`)):(Je("HTML"),a.body_html=o);let u=i.sync.stores[0],c=u.store.toLowerCase(),f=await gm(u,{handle:a.handle});if(R(f))return er(e.relative,[`Multiple pages returned when matching on handle ${I.bold(a.handle)}`,"Syncify is unsure of to handle this request and has cancelled the sync. Please","check the provided handle in your webshop."]),null;let p=fm(c);if(W(f)&&(a.id=f.id,p=ws(c,f)),he(f)&&i.page.safeSync){let y=await e1(u);if(y.action===2){let D=await t1(u);if(D===4)return y.resume();if(D===1)return y.resume(),Ge(`/pages/${a.handle} ${U} ${a.title} ${m(`${Q} ${e.relative}`)}`),zi(u,a);a.id=D,y.resume()}else return y.action===1?(y.resume(),Ge(`/pages/${a.handle} ${U} ${a.title} ${m(`${Q} ${e.relative}`)}`),zi(u,a)):y.resume()}if(i.page.safeSync&&W(f)){let y=new Date(f.updated_at).getTime(),D=new Date(p.updated_at).getTime();if(y>D&&f.body_html!==a.body_html){let g=await r1(f);if(g.action===3){g.resume();let F=f.body_html;if(i.page.language==="markdown"){let q=QD(F);Je(`${e.name}.html ${U} ${e.base}`),F=YD(`
`+q,n.data)}i.watch.unwatch(e.input),await VD(e.input,F),ws(u.domain,f),i.watch.add(e.input)}else{if(g.action===4)return g.resume();g.action===6&&g.resume()}}}if(i.mode.build)return a.body_html;Ge(`/pages/${a.handle} ${U} ${a.title} ${m(`${Q} ${e.relative}`)}`),await fu(u,e,a)&&await $n("pages")}function ym(e){let t=di(i.sync),r=cs(i.paths,i.dirs.output);i.mode.hot&&i.wss.connected(),i.watch.on("all",n);function n(o,a){let u=r(a);if(!he(u)&&u.base!==i.file.base){if(u.type!==17&&ui(u),o==="change"||o==="add")s(u);else if(o==="unlink")return u.type===16?t.pages("delete",u):t.assets("delete",u)}}async function s(o){try{switch(o.type){case 10:return Oi(o,t.assets,e);case 16:return hm(o,e);case 11:return _i(o,t.assets,e);case 14:case 17:return xi(o,t.assets,e);case 5:return jp(o,t.assets,e);case 9:return Pi(o,t.assets,e);case 2:case 3:return pr(o,t.assets,e);case 4:return o.kind==="JSON"?mr(o,t.assets,e):pr(o,t.assets,e);case 6:case 1:return o.kind==="JSON"?mr(o,t.assets,e):pr(o,t.assets,e);case 7:case 8:return mr(o,t.assets,e);case 15:return mr(o,t.metafields,e)}}catch(a){console.error(a),$e(a)}}}l();l();import s1 from"axios";async function Vi(e){return s1.get("themes.json",e.client).then(({data:t})=>t.themes).catch(t=>Qe(e.store,t.response))}import{prompt as Ji}from"enquirer";var En={pointer(e,t){let r=this.state.index===t?Y("\u251C "):Y("\u2502 ");return t===0?Y("\u2502 ")+`
`+r:r},prefix:Y("\u2502 "),styles:{primary:Fe,success:Fe,danger:se.bold,warning:te,muted:m,disabled:m,typing:m},symbols:{ellipsisLarge:"",ellipsisSmall:"",prefix:{pending:"",submitted:"\u2713",cancelled:"\u{10102}"},separator:{pending:"",submitted:" \u2192 ",cancelled:" \u{10102} "}}};async function Dm(e){let t=0,n=(await Vi(e)).filter(({role:D})=>D!=="demo"),s=$t(n,"name"),o=n.map(D=>(D.name.length>t&&(t=D.name.length),{name:D.name,message:D.name,hint:`${s(D.name)} ${Q} ${m(D.role)}`,value:D}));o.push({role:"separator",message:Y("\u2500".repeat(t))},{name:"create",message:"Create Theme"},{name:"create",message:"Remove Theme"}),i.sync.stores.length>1&&o.push({role:"separator",message:Y("\u2500".repeat(t))},{name:"store",message:"Select Stores",hint:`${s("Select Stores")} ${Q} ${m("go back and choose store")}`});let{targets:a}=await Ji({name:"targets",type:"select",multiple:!0,message:"Select Themes",hint:"Press spacebar to select",theme:En,choices:o,result(D){return cn(this.map(D))},format(D){if(R(D)&&D.length>0)return le(`${D.join(H(", "))}`)}}),u={domain:e.store.toLowerCase(),themes:{}},c=[];for(let D of a)u.themes["${"+D.name+"}"]=D.id,c.push({name:D.name,message:D.name,validate(g,F,q){if(q&&q.name===D.name){if(/[A-Z]/.test(g))return`
`+ht.redBright("  Target name must be lowercase");if(/[0-9]/.test(g))return`
`+ht.redBright("  Target name cannot contain numbers");if(/[ ]/.test(g))return`
`+ht.redBright("  Target name cannot contain spaces");if(/-/.test(g))return`
`+ht.redBright("  Target name cannot contain dashes")}return!0}});En.styles.primary=le.italic,En.styles.typing=Fe;let f=JSON.stringify(u,null,2),p=await Ji({name:"stores",type:"snippet",required:a.map(({name:D})=>D),message:"Theme Targets",newline:`
`,format(){return this.state.submitted===!0&&this.state.completed!==100?Fe(`${this.state.completed}% completed`):` ${U}  ${st(`${this.state.completed}% completed`)}`},theme:En,fields:c,template:f}),d={syncify:JSON.parse(p.stores.result)},y=await Ji({name:"save",type:"confirm",message:"Save Settings",theme:En,initial:!0,newline:`
`,format(){return/^[ty1]/i.test(this.input)?"Yes":"No"},footer:$.line+["",m("The following store and theme references will be saved"),m("to your package.json file on the syncify key property."),"",JSON.stringify(d.syncify,null,2).split(`
`).join(`
`+$.line),""].join(`
`+$.line)});console.log(y)}async function i1(){let e=$t(i.sync.stores,"store"),t=i.sync.stores.map(n=>({name:n.domain,message:n.store,hint:`${e(n.store)} ${Q} ${m(`https://${n.domain}`)}`,value:n})),{store:r}=await Ji({name:"store",type:"select",message:"Select Stores",choices:t,theme:En,result(){return this.focused.value},format(n){return Fe(n)}});return Dm(r)}async function bm(){return i.sync.stores.length>1?i1():Dm(i.sync.stores[0])}l();import{join as o1,relative as a1}from"pathe";import{writeFileSync as wm}from"fs-extra";async function u1(){let e=new Map,t=0;for(let r of i.sync.themes){r.target.length>t&&(t=r.target.length);let n=i.sync.stores[r.sidx],s=`${r.store}:${r.target}`,{assets:o}=await aa(r,n.client);e.has(s)||e.set(s,{active:e.size===0,log:null,number:e.size+1,size:o.length,transfers:0,warning:0,failed:0,success:0,retry:0,progress:Zn(o.length),get files(){return o},get theme(){return r},errors:{local:new Map,remote:new Map,retry:new Set}})}return e}function c1(e,t,r){let n=`${h(`${e.success}`)} ${C("of")} ${h(`${e.size}`)}`,s=h(`${e.failed}`),o=h(`${e.theme.target.toUpperCase()}`);return Z().Line(_(o,U),le).NL.Line(`completed in ${m(r)}`).NL.Line(_("synced",n),H).Line(_("errors",s),e.failed>0?ae:H).Line(_("location",m.underline(t))).NL.Insert(e.progress.render()).Line.toString()}function l1(e){return Z().Line(`${h(e.theme.target.toUpperCase())}  ${U}  ${e.theme.store}`,m.dim).NL.Line(`${h(zs(e.number))} in queue`,Eo).NL.Line(_("synced",`${h("0")} ${C("of")} ${h(`${e.size}`)}`),m.dim).Line(_("retry",h("0")),m.dim).Line(_("errors",h("0")),m.dim).NL.Insert(e.progress.render(m.dim)).NL.toString()}async function xm(e){let t=0,r=0;A.start("import"),pt("Import"),Nt("Preparing",{style:"spinning"});let n=await u1();await tt(500);function s(o){Nt.stop();let{theme:a,file:u}=o,c=`${a.store}:${a.target}`,f=n.get(c),p=`https://${a.store}?preview_theme_id=${a.id}`,d=Z().NL.Line(_("Duration",H(A.now("import"))),m).Line(_("Transfers",H(`${r++}`)),m).Line(_("Syncing",_t(`${h(a.target)}  ${U}  ${a.store}`)),m).Line(_("Preview",Yt(p)),m).Ruler(),y="";if(o.status===3)wm(u.output,""),f.warning+=1,f.transfers+=1,f.progress.increment(1),y=te(u.key);else if(o.status===0){f.errors.retry.has(u.output)&&(f.retry-=1,f.errors.retry.delete(u.output)),f.success+=1,f.transfers+=1,f.progress.increment(1);let B=Buffer.from(o.data.value||null,"utf8");wm(u.output,B),y=Fe(u.key)}else o.status===1?(f.errors.retry.has(u.output)||(f.retry+=1,f.errors.retry.add(u.output)),y=st(u.key)):o.status===2&&(f.errors.retry.has(u.output)&&(f.retry-=1,f.errors.retry.delete(u.output)),f.errors.remote.has(u.output)||(f.failed+=1,f.transfers+=1,f.progress.increment(1),f.errors.remote.set(u.output,o)),y=ae(u.key));let D=`${h(`${f.success}`)} ${C("of")} ${h(`${f.size}`)}`,g=h(`${f.retry}`),F=h(`${f.failed}`),q=h(`${f.warning}`),O=Z().NL.Line(`${h(f.theme.target.toUpperCase())}  ${U}  ${f.theme.store}`,le).NL.Line(y).NL.Line(_("synced",D),H).Line(_("retry",g),f.retry>0?st:H).Line(_("warning",q),f.warning>0?te:H).Line(_("failed",F),f.failed>0?ae:H).NL.Insert(f.progress.render()).NL.Ruler(),K=[d.toString()],P=0;for(let B of n.values())B.active?K.push(O.toString()):B.log===null?(P=P+1,B.number=P,K.push(l1(B))):K.push(B.log);we(fe(K))}gt.on("import",s),t=n.size-1;for(let[o,a]of n){let[u,c]=o.split(":"),f=o1(i.dirs.import,u,c);A.start(o),a.active=!0;for(let{key:p}of a.files){let d=Hl(p,f),y=ee({url:a.theme.url,method:"get",params:{"asset[key]":d.key}},i.sync.stores[a.theme.sidx].client);await ne.add(()=>ns(a.theme,d,y))}await ne.onIdle(),t=t-1,a.active=!1,a.log=c1(n.get(o),a1(i.cwd,f),A.stop(o))}for(let{errors:o}of n.values())o.remote.size>0}l();import{mkdir as hu,pathExists as Zi,statSync as B1}from"fs-extra";import{basename as L1,join as R1,relative as Im}from"pathe";import{glob as N1}from"fast-glob";import P1 from"adm-zip";l();import{join as Yi,parse as Sm,relative as f1}from"pathe";import{glob as p1}from"fast-glob";import Fm from"prompts";async function vm(e){let t=await p1("templates/*",{cwd:e,absolute:!0}),r=new Set,n=new Set;for(let a of t){let{name:u}=Sm(a);t.filter(f=>Sm(f).name===u).length>1&&!n.has(u)&&n.add(u)}if(n.size===0)return 1;n.size>1?Ve(`${h(`${n.size}`)} mismatch template files`,{suffix:"error",type:"error"}):Ve(`${h(`${n.size}`)} mismatch template file`,{suffix:"error",type:"error"});let s=es(`select ${h(".json")} or ${h(".liquid")} template`,{title:"Export Error",message:"Multiple templates detected"}),{action:o}=await Fm([{name:"action",type:"select",message:"Select an Option",hint:" ",instructions:!1,choices:[{title:"Select Templates",description:"Choose which templates to export",value:"select"},{title:"Export .json Templates",description:"Exports the .json templates",value:"json"},{title:"Export .liquid Templates",description:"Exports the .liquid templates",value:"liquid"},{title:"Cancel Export",value:"cancel"}]}]);if(o==="select"){let a=[];for(let u of n)a.push({name:"choice",type:"toggle",message:"templates",hint:" ",active:`${u}.json`,inactive:`${u}.liquid`,onState:({value:c})=>{c?r.add(Yi(e,"templates",`${u}.liquid`)):r.add(Yi(e,"templates",`${u}.json`))}});return await Fm(a).then(()=>s()),r}else if(o==="json"){for(let a of n)r.add(Yi(e,"templates",`${a}.json`));return s(),r}else if(o==="liquid"){for(let a of n)r.add(Yi(e,"templates",`${a}.liquid`));return s(),r}else o==="cancel"&&s();return 2}function $m(e){e.assets===0&&e.config===0&&e.templates===0&&e.layout===0&&e.snippets===0&&e.sections===0&&qe("Empty output directory",[`There are no files within ${le(f1(i.cwd,i.dirs.output)+"/**")}`,`You may need to run the ${le.bold("syncify build")} command and try again.`])}l();import Bm from"dotenv";import{join as Cn,relative as Lm,basename as Rm,extname as A1}from"pathe";import{pathExists as Ss,readFile as Nm,readJson as Pm,writeFile as T1}from"fs-extra";l();import{pathToFileURL as Cm}from"node:url";import{readFile as m1,unlink as d1,existsSync as xs,readFileSync as g1,writeFileSync as h1}from"fs-extra";import{isAbsolute as pu,dirname as mu,extname as du,join as Ki,parse as y1,resolve as D1}from"pathe";import{build as b1}from"esbuild";function Am(e,t,r=y1(t).root){let n=t;for(;n!==r;){let s=Ki(n,e);if(xs(s))return s;if(du(s)!==".json"){let o=s+".json";if(xs(o))return o}n=mu(n)}return null}function w1(e,t){return xs(Ki(e,t))?pu(t)?xs(t)?t:null:Am(t,e):null}function x1(e,t){return pu(t)?xs(t)?t:null:t.startsWith(".")?Am(t,e):Xe.resolve(t,{paths:[e]})}function Tm(e=process.cwd(),t="tsconfig.json",r=!1){e=D1(e);let n=r?x1(e,t):w1(e,t);if(!n)return null;let s=Hs(g1(n,"utf-8")),o=mu(n);We("baseURL",s.compilerOptions)&&(s.compilerOptions.baseUrl=Ki(o,s.compilerOptions.baseUrl));let a=[];if(s.extends){let u=R(s.extends)?s.extends:[s.extends],c={};for(let f of u){let p=Tm(o,f,!0);p&&(ee(c,{...p?.data,compilerOptions:{...c.compilerOptions,...p?.data?.compilerOptions}}),a.push(...p.files))}ee(s,{...c,...s,compilerOptions:{...c.compilerOptions,...s.compilerOptions}})}return delete s.extends,{path:n,data:s,files:[...a,n]}}function S1(e,t){return Tm(e,t)}function F1(e,t){return e.replace(Ys,`.bundled_${It()}.${t==="esm"?"mjs":"cjs"}`)}function v1(e){if(typeof jest>"u")return"cjs";let t=du(e);return t===".js"?i.pkg.type==="module"?"esm":"cjs":t===".ts"||t===".mjs"?"esm":"cjs"}function $1(e){return e===null?null:Rt(e||{}).map(t=>new RegExp(`^${t.replace(/\*/,".*")}$`))}function Em(e,t){return t?t.some(r=>ur(r)?r.test(e):e===r||e.startsWith(r+"/")):!1}function E1({external:e,notExternal:t}={}){return{name:"bundle-require:external",setup({onResolve:r}){r({filter:/.*/},async n=>{if(!(n.path.charCodeAt(0)===46||pu(n.path))){if(Em(n.path,e))return{external:!0};if(!Em(n.path,t))return{external:!0}}})}}}function C1(){return{name:"bundle-require:inject-file-scope",setup(e){e.initialOptions.define={...e.initialOptions.define,__dirname:"__injected_dirname__",__filename:"__injected_filename__","import.meta.url":"__injected_import_meta_url__"},e.onLoad({filter:Ys},async t=>{let r=await m1(t.path,"utf-8"),n=[`const __injected_filename__ = ${JSON.stringify(t.path)};`,`const __injected_dirname__ = ${JSON.stringify(mu(t.path))};`,`const __injected_import_meta_url__ = ${JSON.stringify(Cm(t.path).href)};`];return{contents:fe(n)+r,loader:Fc(du(t.path))}})}}}async function Xi(e){if(!Ys.test(e.filepath))throw new Error(`${e.filepath} is not a valid JS file`);let t=e.preserveTemporaryFile??!!process.env.BUNDLE_REQUIRE_PRESERVE,r=e.cwd||i.cwd,n=e.format??v1(e.filepath),s=e.tsconfig===null?null:S1(r,e.tsconfig),o=$1(s?.data.compilerOptions?.paths||{});async function a(f){if(!f.outputFiles)throw new Error("[bundle-require] no output files");let{text:p}=f.outputFiles[0],d=e.getOutputFile||F1,y=Ki(i.dirs.cache,d(e.filepath,n));h1(y,p,"utf8");let D,g=e.require||Sc;try{D=await g(n==="esm"?Cm(y).href:y,{format:n})}finally{t||await d1(y)}return{mod:D,dependencies:f.metafile?Rt(f.metafile.inputs):[]}}let u=await b1({...e.esbuildOptions,entryPoints:[e.filepath],absWorkingDir:r,outfile:"out.js",format:n,write:!1,platform:"node",sourcemap:"inline",bundle:!0,metafile:!0,plugins:[...We("plugins",e.esbuildOptions)?e.esbuildOptions.plugins:[],E1({external:e.external,notExternal:o}),C1()]});return await a(u)}async function km(e){let t=null;for(let r of["syncify.config.js","syncify.config.mjs","syncify.config.cjs","syncify.config.ts","syncify.config.json"]){if(t=Cn(e,r),await Ss(t))break;t=null}if(t===null)return null;try{if(A1(t)===".json"){i.file.path=t,i.file.relative=Lm(e,t),i.file.base=Rm(t);let r=await Nm(t);return Hs(r.toString())}else{i.file.path=t,i.file.relative=Lm(e,t),i.file.base=Rm(t);let r=await Xi({cwd:e,filepath:t});return r.mod.syncify||r.mod.default||r.mod}}catch(r){console.log(r);let n=Cn(e,"syncify.config.json");return await Ss(n)?Pm(n):null}}async function gu(e){let t=Cn(e.cwd,"package.json");if(!await Ss(t))throw new Error('Missing "package.json" file');try{i.pkg=await Pm(t),Lt("syncify.stores",i.pkg)?R(i.pkg.syncify.stores)?i.stores=i.pkg.syncify.stores:W(i.pkg.syncify.stores)&&ue(i.pkg.syncify.stores)===!1&&(i.stores=[i.pkg.syncify.stores]):e.strap===null&&El(e.cwd)}catch(n){throw new Error(n)}}async function Om(e,t){let r=Cn(i.cwd,"package.json");try{let s=(await Nm(r)).toString(),o=s.indexOf('"version"'),a=s.indexOf('"',o+10)+1,u=s.indexOf('"',a+1);return s.slice(a,u)===e?(await T1(r,`${s.slice(0,a)}${t}${s.slice(u)}`),await gu(i.cli),!0):!1}catch(n){throw new Error(n)}}async function _m(e){let t=Cn(e.cwd,".env");if(await Ss(t)){let r=Bm.config({path:t});if(r.error)return Et(r.error,{path:t}),null;i.env.file=t,i.env.vars=r.parsed}else if(t=Cn(e.cwd,"syncify.env"),await Ss(t)){let r=Bm.config({path:t});if(r.error)return Et(r.error.message,{path:t}),null;i.env.file=t,i.env.vars=r.parsed}else e.setup===!1&&e.strap===null&&oi(e.cwd)}async function Qi(e){let{themeVersion:t}=i.cache.build;A.start("export"),i.mode.build?(pt("Build"),await Gi(e)):$m(i.stats);let r=await vm(i.dirs.output);if(r===2)return;r===1&&i.mode.build&&A.stop("build"),i.mode.publish?ci("Exporting"):pt("Export"),_e(),await Zi(i.dirs.export)||await hu(i.dirs.export);let n=new P1;for(let o of Hr){let a=R1(i.dirs.output,o);if(await Zi(a)){let c=await N1("*",{cwd:a,absolute:!0});for(let f of c){let p=`${o}/${L1(f)}`;B1(f).size===0?(n.addFile(p,ln(" ")),Ze(p,"empty file")):(r===1||r.has(f)===!1)&&n.addLocalFile(f,o)}}}let s=et(n.toBuffer());if(i.vc.update!==null){await Zi(i.vc.update.dir)||await hu(i.vc.update.dir),fi(i.vc,"bump"),oa(Mt(s),Im(i.cwd,i.vc.update.zip));try{await n.writeZipPromise(i.vc.update.zip),t=i.vc.update.number}catch(o){return Et(o,{file:i.vc.zip,details:"Failed to write zip file"})}}else{await Zi(i.vc.dir)?fi(i.vc,"overwrite"):(await hu(i.vc.dir),fi(i.vc,"created")),oa(Mt(s),Im(i.cwd,i.vc.zip));try{await n.writeZipPromise(i.vc.zip)}catch(o){return Et(o,{file:i.vc.zip,details:"Failed to write zip file"})}}i.pkg.version!==t&&(await Om(i.pkg.version,t)?(Pt("package.json","version bumped"),i.cache.build.themeVersion=t,await $n("build")):Ze("package.json version failed to bump","manual increment required")),A.stop("export"),i.mode.publish===!1&&(pt(),_e(""),process.exit(0))}l();import k1 from"node:http";import O1 from"serve-static";import _1 from"finalhandler";import jm from"ngrok";import I1 from"prompts";async function Wm(e){await Qi(e),A.start("publish"),ci("Publishing");let t=O1(i.vc.dir),r=k1.createServer((u,c)=>t(u,c,_1(u,c))),n=u=>{if(u.code==="EADDRINUSE")return $e("EADDRINUSE"),null},s=()=>{r.removeListener("error",n),r.removeListener("connect",s)};r.on("error",n),r.on("connect",s),r.listen(i.publish.tunnelPort),await tt(500),A.start("ngrok");let a=`${await jm.connect({addr:i.publish.tunnelPort,onStatusChange(u){u==="closed"?Ve("disconnect",{prefix:"ngrok"}):Ve(`${h("connected")} PORT${k}${i.publish.tunnelPort}`,{prefix:"ngrok",suffix:A.stop("ngrok")})}})}/${i.vc.number}.zip`;Ve(m(a),{prefix:"server"});for(let u of i.sync.stores)A.start(u.domain),Ve(u.domain,{prefix:"webshop",color:le}),Ve(`${h("role")} ${U} ${i.publish.publishRole}`,{prefix:"publish"}),Ve(h(`v${i.vc.number}`),{prefix:"version",color:_s}),_e(),await tt(1e3),Nt("uploading",{style:"spinning",color:Fe}),await tt(2e3),Nt.update("dispatched"),await tt(2e3),Nt.update("extracting"),await tt(2e3),Nt.update("processing"),await tt(1e3),Nt.stop("done"),Ve(`${h("published")} ${U} ${u.domain}`,{prefix:"status",color:Fe,suffix:A.now(u.domain)});r.close(),await jm.disconnect(),_e(),pt(),_e(),await I1([{name:"action",hint:" ",type:"select",message:"Post-Publishing",choices:[{title:"Update Config",value:"config"},{title:"Publish Themes",value:"publish"},{title:"Delete Themes",value:"delete"}]}])}l();import j1 from"node:http";import W1 from"serve-static";import M1 from"finalhandler";import q1 from"fast-glob";import{pathExists as G1,readFile as H1,writeFile as z1}from"fs-extra";import{join as U1,basename as Gm,relative as V1}from"pathe";import{Server as J1}from"ws";l();var Mm=!1,qm=!1,yu=new Set;function eo(e,t){if(!Mm){Mm=!0;for(let r of yu)r();e&&process.exit(128+t)}}function to(e){return yu.add(e),qm||(qm=!0,process.once("exit",eo),process.once("SIGINT",eo.bind(void 0,!0,2)),process.once("SIGTERM",eo.bind(void 0,!0,15)),process.on("message",t=>{t==="shutdown"&&eo(!0,-128)})),()=>yu.delete(e)}var tn={enable:!0,output:[]};async function Y1(){if(we(ie(m("validating snippet injection"))),await Kl()){we(ie(m("validating layouts")));for(let t in i.hot.alive){if(!await G1(t)){we(ie(m("layout has not yet been bundled, building now...")));let n=q1.sync(i.config.paths.layout,{cwd:i.dirs.input,absolute:!0});for(let s of n)if(Gm(s)===Gm(t)){let o=await H1(s);await z1(t,o)}we(ie(m("layout was bundled from source, injecting hot snippet")))}try{await Ql(t)||(we.clear(),$e("Failed to inject hot reload render tag",{notify:{title:"HOT Reloading Failed",message:"HOT Reloading is disabled"}}))}catch(n){console.log(n)}}we.clear()}else we.clear(),$e("Failed to upload snippet")}async function Hm(){if(!tn.enable)return tn.output.push($.red,$.red+ae("Change the socket port address or kill the session occupying it."),$.red+ae("This error typically occurs when multiple Syncify instances are active.")),$e(ae(`${h("ERROR")} on ${h(`${i.hot.method==="hot"?"HOT":"LIVE"} Reload:`)}`)),T(tn.output.join(`
`)),null;T(ie(h(`${i.hot.method==="hot"?"HOT Reload":"LIVE Reload"}${k}`))),we(ie("configuring HOT Reload")),await Y1();function e(c){c.setHeader("Access-Control-Allow-Origin","*"),c.setHeader("Cache-Control","public, max-age=0")}let t=W1(U1(i.dirs.output,"assets"),{setHeaders:e}),r=j1.createServer((c,f)=>t(c,f,M1(c,f))),n=`http://localhost:${i.hot.server}`,s=c=>{if(c.code==="EADDRINUSE")return tn.output.push($.red+ae(`${h("EADDRINUSE")} ${U} ${n}`),$.red,$.red+ae.bold(`Server Port ${i.hot.server} address already in use`),$.red,$.red+ae("Change the server port address or kill the session occupying it."),$.red+ae("This error typically occurs when multiple Syncify instances are active.")),we.clear(),T(tn.output.join(`
`)),i.wss.http.close(),null},o=()=>{we.done(),i.wss.connected(),r.removeListener("error",s),r.removeListener("connect",o)};r.on("error",s),r.on("connect",o),r.listen(i.hot.server);let a=`${m("PORT")}  ${U} ${_t(`${i.hot.server}`)}`,u=`${m("PORT")}  ${U} ${_t(`${i.hot.socket}`)}`;we(ie(`${le("server")}  ${U}  ${a}`)),T(ie(`${le("socket")}  ${U}  ${u}`));for(let c in i.hot.alive)T(ie(`${le("layout")}  ${U}  ${m(V1(i.cwd,c))}`));_e()}function zm(){if(i.mode.hot===!1)return;let e=new J1({port:i.hot.socket,path:"/ws",skipUTF8Validation:!0});to(()=>{e.emit("disconnect"),e.close()});let t=s=>{s.code==="EADDRINUSE"&&(e.close(),tn.enable=!1,tn.output.push($.red+ae(`${h("EADDRINUSE")} ${U} ws://localhost:${i.hot.server}`),$.red,$.red+ae.bold(`Socket Port ${i.hot.server} address already in use`)))},r=()=>{e.removeAllListeners("script"),e.removeAllListeners("stylesheet"),e.removeAllListeners("section"),e.removeAllListeners("svg"),e.removeAllListeners("assets"),e.removeAllListeners("reload"),e.removeAllListeners("replace")},n=s=>{e.removeListener("error",t),e.prependListener("script",o=>s.send(`script,${o}`)),e.prependListener("stylesheet",o=>s.send(`stylesheet,${o}`)),e.prependListener("section",o=>s.send(`section,${o}`)),e.prependListener("svg",o=>s.send(`svg,${o}`)),e.prependListener("assets",()=>s.send("assets")),e.prependListener("reload",()=>s.send("reload")),e.prependListener("replace",()=>s.send("replace")),e.prependListener("connected",()=>s.send("connected")),e.prependListener("disconnect",()=>s.send("disconnect")),s.addEventListener("message",({data:o})=>li(o))};return e.on("close",r),e.on("error",t),e.on("connection",n),{get http(){return e},script:(s,o)=>e.emit("script",`${o},${s}`),stylesheet:(s,o)=>e.emit("stylesheet",`${o},${s}`),section:s=>e.emit("section",s),svg:s=>e.emit("svg",s),assets:()=>e.emit("assets"),reload:()=>e.emit("reload"),replace:()=>e.emit("replace"),connected:()=>e.emit("connected"),disconnect:()=>e.emit("disconnected")}}l();function Um(e){let t=e.toString().trim().toLowerCase();if(t==="v"){let r=Rt(i.errors);for(let n=0,s=r.length;n<s;n++){let o=r[n];if(i.errors[o].size!==0){n>0&&ai(),Ve(h.whiteBright(o));for(let a of i.errors[o].values())M(a)&&a.length>0&&xe(a);i.errors[o].clear()}}i.mode.upload&&(pt(),process.exit(0))}else if(t==="s"){for(let r of i.errors)M(r)&&r.length>0&&xe(r);i.errors.clear()}else if(t==="w"){let r=i.warnings[i.log.uri];for(let n of r.keys()){let s=r.get(n);if(s.size===0)continue;let o=Z({type:"warning"}).Newline("yellow").Ruler().Newline("yellow").Line(n.toUpperCase(),h.yellow).Newline("yellow");for(let a of s.values())M(a)&&a.length>0&&o.Line(a);un(o.toString()),s.clear()}}}l();function Vm(e){T(pc);let t=Y("-".repeat(80)),r=`
    ${h("SYNCIFY CLI  "+U+H("  v0.3.0-beta"))}

    ${H("Please provide a command argument.")}

    ${h("USAGE"+k)}

    $ syncify                    ${m.italic("Show this screen")}
    $ syncify {store} [theme]    ${m.italic("Store and theme targeting")}

    ${h("HELP"+k)}

    -h, --help                   ${m.italic("Print a list of all available commands")}
    -h, --help examples          ${m.italic("Print a list of command examples")}

  `;if(e.help===null)return T(r);let n=`
    ${h("SYNCIFY CLI  "+U+H("  v0.3.0-beta"))}

    Below are some usage examples for working with the Syncify CLI.
    The ${m("=")} character is optional and samples are using the ${m("$ sy")} alias.

    ${h("TARGETING"+k)}

    ${m("Target 1 store and 1 theme")}:
    $ sy your-store${m("=")}theme-1

    ${m("Target 1 store and 2 theme")}:
    $ sy your-store${m("=")}theme-1,some-theme,test-theme

    ${m("Target 2 stores and 1 theme")}:
    $ sy ---your-store${m("=")}theme-1 --another-store${m("=")}some-theme

    ${m("Target 2 stores and 4 theme")}:
    $ sy --your-store${m("=")}theme-1,theme-2 --another-store${m("=")}some-theme,test-theme

  ${t}

    ${h("BUILDING"+k)}

    ${m("Build theme from source")}:
    $ sy --build

    ${m("Build theme with terse minification")}:
    $ sy --build --terse

    ${m("Build theme and clean")}:
    $ sy --build --clean --terse

  ${t}

    ${h("WATCHING"+k)}

    ${m("Watch 1 store and 1 theme")}:
    $ sy your-store${m("=")}theme-1 --watch

    ${m("Watch 1 store and 2 themes with hot reloading")}:
    $ sy your-store${m("=")}theme-1,theme-2 --watch --hot

    ${m("Watch 2 stores and 1 theme")}:
    $ sy --your-store${m("=")}theme-1 --another-store${m("=")}some-theme --watch

    ${m("Watch 2 stores and 2 themes")}:
    $ sy --your-store${m("=")}theme-1,theme-2 --another-store${m("=")}some-theme,test-theme --watch

    ${m("Watch 1 store with 2 themes and clean mode with hot live reloads")}:
    $ sy your-store${m("=")}theme-1,theme-2 --watch --clean --hot

    ${m("Watch 1 store with 2 themes in production mode")}:
    $ sy your-store${m("=")}theme-1,theme-2 --prod --watch

  `,s=`
    ${h("SYNCIFY CLI  "+U+H("  v0.3.0-beta"))}

    Welcome to the Syncify CLI. The command line utility assumes that you have
    defined stores, themes and setup credentials within a ${m(".env")} file.

    ${h("ALIASES"+k)}

      $ sy                         ${m.italic("Shorthand for syncify")}

    ${h("COMMANDS"+k)}

      $ syncify                    ${m.italic("Show this screen")}
      $ syncify {store} [theme]    ${m.italic("Store and theme targeting")}

    ${h("THEMES"+k)}

        --{store} [theme]          ${m.italic("A store reference command (run examples)")}
      -t, --theme [theme]          ${m.italic("A comma seprated list of themes")}

    ${h("PATHS"+k)}

      -c, --config    <path>       ${m.italic("Set config directory path")}
      -i, --input     <path>       ${m.italic("Set input directory path")}
      -o, --output    <path>       ${m.italic("Set output directory path")}

    ${h("MODES"+k)}

      -w, --watch                  ${m.italic("Run watch mode")}
      -b, --build                  ${m.italic("Run build mode from input")}
      -u, --upload                 ${m.italic("Run upload mode theme to stores")}
      -d, --import                 ${m.italic("Run download mode from theme and stores")}
      -e, --export                 ${m.italic("Run export mode and generate theme zip")}
      -p, --publish                ${m.italic("Run publish and create a release")}
      -r, --resource               ${m.italic("Run resource mode, resource name expected")}

    ${h("RESOURCES"+k)}

      -r, --resource themes        ${m.italic("Run the themes resource")}
      -r, --resource assets        ${m.italic("Run the theme assets resource")}
      -r, --resource pages         ${m.italic("Run the pages resource")}
      -r, --resource metafields    ${m.italic("Run the metafields resource")}
      -r, --resource redirects     ${m.italic("Run the redirects resource")}
      -r, --resource files         ${m.italic("Run the files resource")}

    ${h("ENVIRONMENT"+k)}

      --dev                       ${m.italic("Build in development mode (default)")}
      --prod                      ${m.italic("Build in production mode")}
      --hot                       ${m.italic("Run watch with hot-reloads")}

    ${h("OPERATIONS"+k)}

      --clean                     ${m.italic("Clean the output, use with modes")}
      --silent                    ${m.italic("Silent logging, only errors will print")}
      --cache                     ${m.italic("Purges the local .cache references")}

    ${h("TRIGGERS"+k)}

      --spawn  [list]             ${m.italic("Invoke a defined spawn child process/s")}
      --delete [list]             ${m.italic("Delete a remote and local file")}
      --terse  [list]             ${m.italic("invoke minify mode, accepts resource/s")}

    ${h("TRANSFORMS"+k)}

      --script                    ${m.italic("Run the script transform in isolation")}
      --style                     ${m.italic("Run the style transform in isolation")}
      --svg                       ${m.italic("Run the svg transform in isolation")}
      --image                     ${m.italic("Run the image transform in isolation")}

    ${h("UTILITY"+k)}

      -f, --filter <path>         ${m.italic("Filter operation to be used with modes")}

    ${h("VERSIONING"+k)}

      --bump patch                ${m.italic("Apply a patch version bump, use in export mode")}
      --bump minor                ${m.italic("Apply a minor version bump, use in export mode")}
      --bump major                ${m.italic("Apply a major version bump, use in export mode")}

    ${h("STRAPS"+k)}

      --strap dusk                ${m.italic("Import and generate a dusk strap")}
      --strap dawn                ${m.italic("Import and generate a dawn strap")}
      --strap silk                ${m.italic("Import and generate a silk strap")}

    ${h("HELP"+k)}

      -h, --help                  ${m.italic("Print this screen")}
      -h, --help examples         ${m.italic("Print a list of command examples")}

    ${t}

    ${m("BY \u039D\u0399\u039A\u039F\u039B\u0391\u03A3 \u03A3\u0391\u0392\u0392\u0399\u0394\u0397\u03A3")}

    ${m.underline("https://github.com/panoply")}
    ${m.underline("https://x.com/niksavvidis")}

  `;T(e.help==="examples"?n:s)}l();import{FSWatcher as mb}from"chokidar";l();import{mkdir as An,emptyDir as Jm,pathExists as Tn,readdirSync as K1}from"fs-extra";import{join as rn}from"pathe";async function Ym(){let{dirs:e}=i;return await ro(e.cache),await ro(e.sourcemaps.root),Promise.all([ro(e.sourcemaps.scripts),ro(e.sourcemaps.styles)])}async function Du(e){if(e||(e=i.dirs.output),await Tn(e)){if(i.mode.clean)try{await Jm(e)}catch(r){console.error(r)}}else try{await An(e)}catch(r){throw new Error(r)}for(let r of Hr){let n=rn(e,r),s=await Tn(n),o=r.startsWith("templates/")?r.slice(10):r;if(s)i.stats[o]=K1(n).length;else try{await An(n),i.stats[o]=0}catch(a){throw new Error(a)}}}function Km(e){let t=Ol(i.cwd);for(let[r,n]of Lc){let s;if(r==="cache"){i.dirs[r]=rn(i.cwd,n,".syncify"),i.dirs.sourcemaps=Ir(null),i.dirs.sourcemaps.root=rn(i.dirs[r],"sourcemaps"),i.dirs.sourcemaps.scripts=rn(i.dirs.sourcemaps.root,"scripts"),i.dirs.sourcemaps.styles=rn(i.dirs.sourcemaps.root,"styles");continue}if(r==="import"){i.mode.import?x("output",e)?i.dirs[r]=t(e.output):i.dirs[r]=t(i.config.import):i.dirs[r]=t(i.config.import);continue}else if(r==="export"){i.mode.export?x("output",e)?i.dirs[r]=t(e.output):i.dirs[r]=t(i.config.export):i.dirs[r]=t(i.config.export);continue}else if(x(r,e)&&e[r]===n)if(i.config[r]===n){i.dirs[r]=t(e[r]);continue}else s=i.config[r];else M(e[r])?s=e[r]:s=i.config[r];M(s)?i.dirs[r]=t(s):V({option:"config",name:r,provided:s,expects:"string"})}i.watch.add(i.file.path)}async function Xm(){let{dirs:e,sync:t,mode:r}=i;if(!r.import)return;if(!await Tn(e.import))try{await An(e.import)}catch(s){throw new Error(s)}for(let s in t.themes){let{store:o,target:a}=t.themes[s],u=rn(e.import,o);if(await Tn(u)){if(r.clean)try{await Jm(u)}catch(f){console.error(f)}}else try{await An(u)}catch(f){throw new Error(f)}await Du(rn(u,a))}}async function ro(e){if(R(e)){for(let t of e)if(!await Tn(t))try{await An(t)}catch(n){throw new Error(n)}}else if(!await Tn(e))try{await An(e)}catch(r){throw new Error(r)}}l();var Zm=Bt(Kr());function Qm(){if(!x("processors",i.config)||!x("json",i.config.processors))return;let{json:e}=i.config.processors;if(!de(e)&&!(W(e)&&ue(e))){W(e)||V({option:"processors",name:"json",expects:"{}",provided:typeof e});for(let t in e){if(t==="indent")if(bt(e[t])){i.processor.json[t]=e[t];continue}else V({option:"json",name:t,provided:e[t],expects:"number"});if(t==="useTab")if(be(e[t])){i.processor.json[t]=e[t];continue}else V({option:"json",name:t,provided:e[t],expects:"boolean"});if(t==="exclude"){let r=M(e[t])?[e[t]]:e[t];if(R(r)){i.processor.json[t]=(0,Zm.default)(r);continue}else V({option:"json",name:t,provided:r[t],expects:"string | string[]"})}}}}l();function ed(e){let t=dt(e.pages,e.metafields,e.redirects),r=dt(e.style,e.script,e.image,e.svg),n=dt(t,e.upload,e.import)?!1:e.watch;if(i.mode=ee(i.mode,{watch:n,dev:!e.prod,prod:e.prod,setup:e.setup,strap:e.strap!==null,hot:Ts(e.watch,e.hot),interactive:e.interactive,redirects:e.redirects,metafields:e.metafields,pages:e.pages,pull:e.pull,cache:Ts(e.build,e.cache),force:e.force,views:e.views,script:r?e.script:!1,style:r?e.style:!1,image:r?e.image:!1,svg:r?e.svg:!1,terse:dt(e.terse,e.prod),clean:dt(t,r,e.upload)?!1:Ts(e.export,e.build)||e.clean,build:dt(e.watch,e.import)?!1:e.build,upload:dt(r,n)?!1:e.upload,export:e.export,import:dt(t,r,e.upload,e.watch,e.build)?!1:e.import,publish:e.publish,release:M(e.release),themes:e._[0]==="themes"}),i.mode.themes){e._=[];return}X1(i.mode,e),i.mode.release&&(i.mode.clean=!0,i.mode.build=!0,i.mode.export=!0,i.mode.publish=!0),i.mode.build&&Vt(i.mode.script,i.mode.style,i.mode.svg,i.mode.pages,i.mode.metafields,i.mode.image)&&(i.mode.script=!0,i.mode.style=!0,i.mode.svg=!0,i.mode.image=!0,i.mode.views=!0)}function X1(e,t){if(t.cache&&t.build===!1&&Qt({expected:"-b, --build",message:["Cache resets can only be executed along side build operations"],fix:[`Attempting to purge cache outside ${h("build")} mode Syncify requires you to pass`,"the build mode flags when executing a cache reset, for example:",`

`,`${H("$")} ${C(`syncify ${i.argv} ${I("-b --cache")}`)}`,`

`,`Run ${m("syncify --help")} for more information, or pass an execution`,`operation mode as per the ${H("expected")} value.`,`

`]}),cn(e).every(r=>r===!1)&&Qt({expected:"--<cmd>",message:["Execution is unclear, you have not provided Syncify with a valid operation","mode to execute"],fix:["Syncify requires that you provide an operation. In most cases, this","error occurs when you have forgotten to pass the mode, for example:",`

`,`${H("$")} ${H(`syncify ${qs}${pe("mode")}${Gs}`)}`,`

`,`Run ${I("syncify --help")} for more information`]}),e.export){let r=Rt(e);r.push("filter","delete","spawn","resource");for(let n of r)if(!(n==="build"||n==="clean"||n==="cache"||n==="export")&&e[n]){let s=r.filter(c=>c!=="build"&&c!=="clean"&&c!=="export");s.push("f\\b","u\\b","w\\b","s\\b","d\\b","r\\b");let o=s.map(c=>c==="filter"||c==="f"||c==="resource"||c==="-r"?`--?${c}.*?(?=(--?${s.join("|--?")}))`:`--?${c}`).join("|"),a=new RegExp(`(--?${s.join("|--?")})`,"g"),u=new RegExp(`(${o})`,"g");return Qt({message:[`Bad command ${Ws}argv${Ms} sequence passed with ${I("export")} mode.`,"Theme exports are performed in isolation. You command includes","execution modes that cannot be run when exporting theme/s"],provided:i.argv.replace(a,se("$1")).replace(/(--export)/,I("$1")),expected:i.argv.replace(u,"").replace(/(--export)/,I("$1")),fix:[`Removed the flags marked ${se("red")} as shown in provided aboved.`]})}}}l();function td(){if(!x("snippets",i.config.views))return;let{snippets:e}=i.config.views;if(!de(e)&&!(W(e)&&ue(e))){W(e)||V({option:"views",name:"snippets",expects:"{}",provided:typeof e});for(let t in i.snippet){if(t==="prefixDir")if(be(e[t])){i.snippet[t]=e[t];continue}else V({option:"views.snippets",name:t,provided:e[t],expects:"boolean"});if(t==="separator")if(M(e[t]))if(/[.@:_-]/.test(e[t])){i.section[t]=e[t];continue}else Ne({option:"views.snippets",name:t,value:e[t],expects:"@ | _ | : | - | ."});else V({option:"views.snippets",name:t,provided:e[t],expects:"string"});if(t==="global"){let r=M(e[t])?[e[t]]:e[t];if(R(r)){if(r.length>0){i.snippet[t]=new RegExp(`${r.join("|")}`);continue}}else V({option:"views.snippets",name:t,provided:e[t],expects:"string | string[]"})}}}}l();import{basename as bu,extname as Z1,relative as no}from"pathe";import{readFile as rd}from"fs-extra";async function nd(){if(!x("sections",i.config.views))return;let{sections:e}=i.config.views;if(!de(i.config.views.sections)&&!(W(e)&&ue(e))){W(e)||V({option:"views",name:"sections",expects:"{}",provided:typeof e});for(let t in i.section){if(t==="prefixDir")if(be(e[t])){i.section[t]=e[t];continue}else V({option:"views.sections",name:t,provided:e[t],expects:"boolean"});if(t==="separator")if(M(e[t]))if(/[@:_-]/.test(e[t])){i.section[t]=e[t];continue}else Ne({option:"view.sections",name:t,value:e[t],expects:"@ | _ | : | -"});else V({option:"views.sections",name:t,provided:e[t],expects:"string"});if(t==="global"){let r=M(e[t])?[e[t]]:e[t];if(R(r)){if(r.length>0){i.section[t]=new RegExp(`${r.join("|")}`);continue}}else V({option:"views.sections",name:t,provided:e[t],expects:"string | string[]"})}t==="shared"&&i.paths.schema.input!==null&&i.paths.schema.input.size>0&&(await Q1(),await eb(),rt(i.section,"schema",{get(){return i.cache.schema}}))}}}async function Q1(){for(let e of i.paths.schema.input){let t=Z1(e),r=bu(e,t);i.section.shared.has(r)&&qe(`Duplicated shared schema file name ${h.yellow(r+t)} detected.`,["Shared Schema JSON file names must be unique across the workspace.","Update the file name and try again."]);try{let s=(await rd(e)).toString();if(s.trim().length===0)continue;let o=Ar(s.toString());x("$schema",o)&&delete o.$schema,x("$description",o)&&delete o.$description;for(let a in o)if(W(o[a]))x("$description",o[a])&&delete o[a].$description;else if(R(o[a]))for(let u of o[a])x("$description",u)&&delete u.$description;i.cache.schema[e]=new Set,i.section.shared.set(r,{uri:e,schema:o})}catch(n){return $e(no(i.cwd,e),{notify:{title:"JSON Error (setSharedSchema)",message:`Error when parsing ${bu(e)}`}}),n instanceof sr&&Yr(n,{relative:no(i.cwd,e),base:bu(e)}),null}}}async function eb(){let{shared:e}=i.section,t=wt("Section Schema");for(let r of i.paths.sections.input){let n=await rd(r),s=Kt(n);if(x(r,i.cache.schema)&&i.cache.checksum[r]===s)continue;i.cache.checksum[r]=s;let o=n.toString(),a=o.search(/{%-?\s*schema/);if(a<0)continue;let u=o.indexOf("%}",a+2)+2,c=o.slice(u),f=u+c.search(/{%-?\s*endschema/);if(f<0){t("Liquid Parse Error",no(i.cwd,r));continue}try{let p=JSON.parse(o.slice(u,f)),d=Le(p);if(d("settings")){for(let y of p.settings)if(x("$ref",y)){let D=y.$ref.split(".")[0];e.has(D)&&i.cache.schema[e.get(D).uri].add(r)}}if(d("blocks"))for(let y of p.blocks){let D=Le(y);if(D("$ref")){let g=y.$ref.split(".")[0];e.has(g)&&i.cache.schema[e.get(g).uri].add(r)}if(D("settings")){for(let g of y.settings)if(x("$ref",g)){let F=g.$ref.split(".")[0];e.has(F)&&i.cache.schema[e.get(F).uri].add(r)}}}}catch{x(r,i.cache.sections)&&delete i.cache.sections[r],t("JSON Parse Error",no(i.cwd,r))}}}l();l();var wu=Bt(Kr());import{basename as nn,extname as tb}from"pathe";import sd from"fast-glob";import{pathExists as rb}from"fs-extra";function id(){let e=[],t=new Set;for(let r in i.env.vars){let n=r.toLowerCase();if(n.endsWith("_api_token"))e.push({domain:`${n.slice(0,n.indexOf("_api_token"))}`,themes:{}});else if(n.endsWith("_api_key")){let s=`${n.slice(0,n.indexOf("_api_key"))}`;t.has(s)||(e.push({domain:s,themes:{}}),t.add(s))}else if(n.endsWith("_api_secret")){let s=`${n.slice(0,n.indexOf("_api_secret"))}`;t.has(s)||(e.push({domain:s,themes:{}}),t.add(s))}}if(e.length>0)return e;oi(i.cwd)}function od(e){let t=e+"_api_token";if(x(t,i.env.vars)||(t=t.toUpperCase()),x(t,i.env.vars))return{baseURL:`https://${e}.myshopify.com/admin`,headers:{"X-Shopify-Access-Token":i.env.vars[t]}};let r=e+"_api_key",n=e+"_api_secret";if(x(r,i.env.vars)||(r=r.toUpperCase()),x(n,i.env.vars)||(n=n.toUpperCase()),x(r,i.env.vars)&&x(n,i.env.vars))return{baseURL:`https://${e}.myshopify.com/admin`,auth:{username:i.env.vars[r],password:i.env.vars[n]}};qe(`Invalid or missing ${pe(e+".myshopify.com")} credentials`,[`Your shop credentials in the ${pe.bold(nn(i.env.file))} file could`,"not be read correctly or are missing. Please check your environment file and ensure","you have provided authorization."])}function Ht(e,t){let{cwd:r}=i,n=Ue(t)?[]:!1,s=wt("Path Resolver"),o=yn(i.dirs.input,i.cwd);if(R(e)){let a=[];for(let u of e){let c=o(u),f=sd.sync(c,{cwd:r,absolute:!0});if(n){let p=t(c);M(p)?n.push(p):R(p)&&n.push(...p)}f.length===0?s("No files can be resolved in",u):a.push(...f)}return n===!1?a:{paths:a,match:(0,wu.default)(n)}}if(M(e)){let a=o(e),u=sd.sync(a,{cwd:r});if(u.length===0&&s("No files can be resolved in",e),n){let c=t(a);M(c)?n.push(c):R(c)&&n.push(...c)}return n===!1?u:{paths:u,match:(0,wu.default)(n)}}V({option:"uri",name:"uri/path",provided:e,expects:"string | string[]"})}function Bn(e,t){if(x("assertSnippet",t)||(t.assertSnippet=!0),M(e)){let{paths:r,match:n}=Ht(e,s=>(t.addWatch&&i.watch.add(s),Cr(s)));if(r)return t.flatten?r.map(s=>t.assertSnippet?{input:s,rename:nn(s),snippet:!1}:{input:s,rename:nn(s)}):t.assertSnippet?{input:r,rename:"[name].[ext]",snippet:!1,match:n}:{input:r,rename:"[name].[ext]",match:n}}else if(R(e)){if(e.every(M)){let{paths:r,match:n}=Ht(e,s=>(t.addWatch&&i.watch.add(s),Cr(s)));return t.flatten?r.map(s=>t.assertSnippet?{input:s,rename:nn(s),snippet:!1}:{input:s,rename:nn(s)}):t.assertSnippet?{input:r,rename:"[name].[ext]",snippet:!1,match:n}:{input:r,rename:"[name].[ext]",match:n}}else if(e.every(W))return e.map(r=>{x("input",r)||Ne({option:"tranform",name:"input",value:r,expects:"{ input: string | string[] }"});let{paths:n,match:s}=Ht(r.input,o=>(t.addWatch&&i.watch.add(o),Cr(o)));return r.match=s,r.input=n[0],t.assertSnippet&&!x("snippet",r)&&(r.snippet=!1),x("rename",r)||(r.rename=r.snippet?"[name].liquid":"[name].[ext]"),r})}else if(W(e)){let r=[];if(x("input",e)){let n=ke(e),{paths:s,match:o}=Ht(n.input,a=>(t.addWatch&&i.watch.add(a),Cr(a)));if(t.assertSnippet&&!x("snippet",n)&&(n.snippet=!1),x("rename",n)||(n.rename=n.snippet?"[name].liquid":"[name].[ext]"),t.flatten)for(let a of s)r.push(ee(n,{input:a}));else n.input=s,n.match=o,r.push(n)}else for(let n in e){let s={snippet:n.startsWith("snippets/")},o=n.startsWith("assets/"),a=e[n],u=o||s.snippet;if(M(a)){u&&(s.rename=o?n.slice(7):n.slice(9));let{paths:c,match:f}=Ht(a,p=>(t.addWatch&&i.watch.add(p),Cr(p)));if(c)if(t.flatten)for(let p of c)r.push(ee({},s,{input:p}));else r.push(ee({},s,{input:c,match:f}))}else if(W(a)){x("input",a)||Ne({option:"tranform",name:n,value:a,expects:"{ input: string | string[] }"});let{paths:c,match:f}=Ht(a.input,p=>(t.addWatch&&i.watch.add(p),Cr(p)));if(c){let p=u?ee({},a,s,{rename:o?n.slice(7):n.slice(9)}):ee({},s,a);if(t.flatten)for(let d of c)r.push(ee({},p,{input:d}));else r.push(ee(p,{input:c,match:f}))}}else if(R(a))if(a.every(M)){let{paths:c,match:f}=Ht(a,p=>(t.addWatch&&i.watch.add(p),Cr(p)));if(sb(n)&&(s.rename=nn(n)),c)if(t.flatten)for(let p of c)r.push(ee({},s,{input:p}));else r.push(ee({},s,{input:c,match:f}))}else V({option:"transform",name:n,provided:a,expects:"string[]"})}return r}}function xu(e,t){return!!(x("devDependencies",e)&&x(t,e.devDependencies)||x("dependencies",e)&&x(t,e.dependencies)||x("peerDependencies",e)&&x(t,e.peerDependencies)||x("optionalDependencies",e)&&x(t,e.peerDependencies))}async function nb(e){for(let t of Rc){let r=`${e}.${t}`;if(await rb(r))return r}return null}async function Su(e,t){try{let r=await nb(e);if(r!==null){let n=await Xi({cwd:i.cwd,filepath:r,...t||{}});return{path:r,config:n.mod.syncify||n.mod.default||n.mod}}return null}catch{return null}}function sb(e){return/\[(?:file|dir|ext)\]/.test(e)}function Fs(e,t){let r=t,n=St(e),s=tb(e),o=nn(e,s);return he(t)?{dir:n,ext:s,file:o,name:o}:(/(\[dir\])/.test(r)&&(r=r.replace("[dir]",n)),/(\[file\])/.test(r)&&(r=r.replace("[file]",o)),/(\.?\[ext\])/.test(r)&&(r=r.replace(/\.?\[ext\]/,s)),{ext:s,file:o,dir:n,name:t.replace(t,r)})}l();import{prompt as Fu}from"enquirer";var vs={prefix:Y("\u2502 "),styles:{primary:Fe,success:Fe,danger:se.bold,warning:te,muted:m,disabled:m,typing:m},symbols:{ellipsisLarge:"",ellipsisSmall:"",prefix:{pending:"",submitted:"\u2713",cancelled:"\u{10102}"},separator:{pending:"",submitted:" \u2192 ",cancelled:" \u{10102} "}},pointer(e,t){let r=this.state.index===t?$.stub.trimEnd()+" ":$.trim+" ";return t===0?$.trim+`
`+r:r}};async function ad(e){let t=0,r={...vs},s=(await Vi(e)).filter(({role:g})=>g!=="demo"),o=$t(s,"name"),a=s.map(g=>(g.name.length>t&&(t=g.name.length),{name:g.name,message:g.name,hint:`${o(g.name)} ${Q} ${m(g.role)}`,value:g}));a.push({role:"separator",message:Y("\u2500".repeat(t))},{name:"create",message:"Create Theme",value:"create"});let{targets:u}=await Fu({name:"targets",type:"select",multiple:!0,message:"Select Themes",hint:"Press spacebar to select",theme:r,choices:a,result(g){return cn(this.map(g))},format(g){if(R(g)&&g.length>0)return le(`${g.join(H(", "))}`)}}),c={domain:e.store.toLowerCase(),themes:{}},f=[];for(let g of u)c.themes["${"+g.name+"}"]=g.id,f.push({name:g.name,message:g.name,validate(F,q,O){if(O&&O.name===g.name){if(/[A-Z]/.test(F))return`
`+ht.redBright("  Target name must be lowercase");if(/[0-9]/.test(F))return`
`+ht.redBright("  Target name cannot contain numbers");if(/[ ]/.test(F))return`
`+ht.redBright("  Target name cannot contain spaces");if(/-/.test(F))return`
`+ht.redBright("  Target name cannot contain dashes")}return!0}});r.styles.primary=le.italic,r.styles.typing=Fe;let p=JSON.stringify(c,null,2),d=await Fu({name:"stores",type:"snippet",required:u.map(({name:g})=>g),message:"Theme Targets",newline:`
`,theme:r,fields:f,template:p,format(){return this.state.submitted===!0&&this.state.completed!==100?Fe(`${this.state.completed}% completed`):` ${U}  ${st(`${this.state.completed}% completed`)}`}}),y={syncify:JSON.parse(d.stores.result)},D=await Fu({name:"save",type:"confirm",message:"Save Settings",theme:r,initial:!0,newline:`
`,format(){return/^[ty1]/i.test(this.input)?"Yes":"No"},footer:$.line+["",m("The following store and theme references will be saved"),m("to your package.json file on the syncify key property."),"",JSON.stringify(y.syncify,null,2).split(`
`).join(`
`+$.line),""].join(`
`+$.line)});console.log(D)}async function ud(e){let t=dt(i.mode.metafields,i.mode.pages,i.mode.redirects,i.mode.release,i.mode.publish,i.mode.themes),r=dt(i.mode.watch,i.mode.upload,i.mode.import),n,s=[],o=!1;e._.length===0&&t&&Qt({expected:"syncify <store>",message:["You have not provided store to target, which is required","when running in a resource mode that syncs to a remote source"],fix:["Provide the store target name as the first command argument","followed by themes target/s and other flags."]}),i.mode.themes&&i.stores.length>0?s=id():(n=e._.length===0?i.stores.map(({domain:a})=>a):e._[0].split(","),s=i.stores.filter(({domain:a})=>fo(a,n)),o=s.length>1);for(let a of s){let u=`${a.domain}.myshopify.com`.toLowerCase(),c=od(a.domain),f=i.sync.stores.push({store:a.domain,domain:u,client:c,queue:o})-1;if(i.mode.themes)continue;if(i.mode.metafields||i.mode.pages)return;let p=[];x("theme",e)?p=e.theme.split(","):x(a.domain,e)?p=e[a.domain].split(","):x("themes",a)&&(p=Rt(a.themes)),p.length===0&&await ad(i.sync.stores[f]);for(let d of p)x(d,a.themes)||vl({type:"theme",expected:Rt(a.themes).join(","),provided:d,message:[`Unknown theme target (${I(d)}) provided to ${I(a.domain)} store`,`Your ${I(i.file.base)} file contains no such theme using this name.`],fix:[`Provide an ${I("expected")} theme target or update/add an existing target.`,`You have ${I(`${p.length}`)} theme targets defined for ${I(a.domain)}:`,`

`,`${ar} ${p.join(`
${ar} `)}`,`

`]}),i.sync.themes.push({target:d,sidx:f,store:u,id:a.themes[d],url:`/themes/${a.themes[d]}/assets.json`})}if(t&&i.sync.stores.length===0)return Qt({expected:"syncify <store>",message:["You have not provided store to target, which is required","when running in a resource mode that syncs to a remote source"],fix:["Provide the store target name as the first command argument followed by themes","target/s and other flags. Based on your current configuration:",`

`,`${ar} ${C("$")} syncify ${i.stores.join(`
${ar} ${C("$")} syncify `)}`,`

`]});if(i.sync.themes.length===0&&r)return Qt({expected:"-t <theme>",message:["You have not provided a theme to target, which is required","when running this resource mode."],fix:[`Provide a theme name to target following a ${I("-t")} or ${I("--theme")} flag.`,"Theme targets should be passed as the 2nd argument, the 1st argument should be store name/s."]});i.sync.stores.length===0&&qe("Unknown, missing or invalid store/theme targets",["Check your store config"]),i.sync.stores.length===1&&i.sync.themes.length===1?i.env.sync=1:(i.sync.stores.length>1||i.sync.themes.length>1)&&(i.env.sync=2)}l();var ld=Bt(Kr());import ib from"fast-glob";import{dirname as cd,join as vu}from"pathe";async function fd(){let e=yn(i.dirs.input),t=Le(i.config.paths);for(let r of Gr){let n;if(r==="customers")n=t(r)?R(i.config.paths[r])?i.config.paths[r].map(e):[e(i.config.paths[r])]:[e("templates/customers/*")];else if(r==="metaobject")n=t(r)?R(i.config.paths[r])?i.config.paths[r].map(e):[e(i.config.paths[r])]:[e("templates/metaobject/*")];else if(r==="schema")n=t(r)?R(i.config.paths[r])?i.config.paths[r].map(e):[e(i.config.paths[r])]:[e("schema/*")];else if(t(r))if(n=R(i.config.paths[r])?i.config.paths[r].map(e):[e(i.config.paths[r])],r==="snippets")for(let s of n)i.snippet.baseDir.add(St(cd(s)));else if(r==="sections")for(let s of n)i.section.baseDir.add(St(cd(s)));else r==="assets"&&n.push(vu(i.dirs.output,"assets/*"));else r==="redirects"&&t(r)?n=[vu(i.cwd,i.config.paths[r])]:n=[e(r)];for(let s of n){if(r!=="metafields"&&r!=="redirects"){let o=await ib(s,{cwd:i.cwd});if(o.length===0){if(r==="assets"&&s===vu(i.dirs.output,"assets/*"))continue}else{if(i.paths[r].input===null)i.paths[r].input=new Set(o);else for(let a of o)i.paths[r].input.add(a);i.watch.add(s)}}i.paths[r].match=(0,ld.default)(n)}}}l();import{join as Rr}from"pathe";function $u(e){let t=e.match(/^(\d{1,2})\.(\d{1,2})\.(\d{1,2})$/);if(!t)throw new Error("Unable to parse: "+e);return{patch:parseInt(t[3],10),minor:parseInt(t[2],10),major:parseInt(t[1],10)}}function pd(e){if(x("syncifyVersion",i.cache.build)||(i.cache.build.syncifyVersion=i.version),x("themeVersion",i.cache.build)||(i.cache.build.themeVersion=i.pkg.version),i.cache.build.themeVersion!==i.pkg.number){i.vc.update=$u(i.pkg.version),i.vc.update.number=i.pkg.version,i.vc.update.dir=Rr(i.dirs.export,`v${i.vc.major}`),i.vc.update.zip=Rr(i.vc.update.dir,`${i.vc.number}.zip`);let{patch:t,minor:r,major:n}=$u(i.cache.build.themeVersion);i.vc.number=i.cache.build.themeVersion,i.vc.patch=t,i.vc.minor=r,i.vc.major=n,i.vc.dir=Rr(i.dirs.export,`v${i.vc.major}`),i.vc.zip=Rr(i.vc.dir,`${i.vc.number}.zip`)}else{let{patch:t,minor:r,major:n}=$u(i.pkg.version);i.vc.number=i.pkg.version,i.vc.patch=t,i.vc.minor=r,i.vc.major=n,i.vc.dir=Rr(i.dirs.export,`v${i.vc.major}`),i.vc.zip=Rr(i.vc.dir,`${i.vc.number}.zip`)}e.release!==null&&(i.vc.update=N(i.vc),e.release==="patch"?(i.vc.update.patch=i.vc.patch+1,i.vc.update.bump="patch"):e.release==="minor"?(i.vc.update.minor=i.vc.minor+1,i.vc.update.bump="minor"):e.release==="major"&&(i.vc.update.major=i.vc.major+1,i.vc.update.bump="major",i.vc.update.dir=Rr(i.dirs.export,`v${i.vc.update.major}`)),i.vc.update.number=`${i.vc.update.major}.${i.vc.update.minor}.${i.vc.update.patch}`,i.vc.update.zip=Rr(i.vc.update.dir,`${i.vc.update.number}.zip`))}l();var bd=Bt(Dd());l();import{spawn as ab}from"cross-spawn";function Cu(e,t,r){let n=ab(t.cmd,t.args,{stdio:"pipe"});t.pid=n.pid,async function s(){if(i.env.ready===!1)return await tt(100),s();n.stdio[0].on("data",r.bind({name:e,type:"stdin"})),n.stdio[0].on("data",r.bind({name:e,type:"stdout"})),n.stdio[2].on("data",r.bind({name:e,type:"stderr"})),i.spawn.streams.set(e,n)}()}function wd(){let{mode:e,spawn:t,config:r}=i;if(!x("spawn",r)||de(r.spawn))return;W(r.spawn)||V({option:"config",name:"spawn",provided:r.spawn,expects:"{ build: {}, watch: {} }"});let n=Le(r.spawn),s=null;if(e.build&&n("build")&&(s="build"),e.watch&&n("watch")&&(s="watch"),!(de(e)||de(r.spawn[s]))&&(W(r.spawn[s])||V({option:"spawn",name:s,provided:r.spawn[s],expects:"{ build: {}, watch: {} }"}),!ue(r.spawn[s]))){for(let o in r.spawn[s]){let a=r.spawn[s][o];if(M(a)){i.spawn.commands[o]=N();let u=a.trimStart().indexOf(" ")>-1?a.trimStart().split(" "):[a];i.spawn.commands[o].cmd=u.shift().trim(),i.spawn.commands[o].args=u,i.spawn.commands[o].pid=NaN,Cu(o,i.spawn.commands[o],sa(o))}else if(R(a)){let u=a.shift().trim();i.spawn.commands[o]=N({cmd:u,args:a,pid:NaN}),Cu(o,i.spawn.commands[o],sa(o))}else V({option:"spawn",name:s,provided:r.spawn[s],expects:"string | string[]"})}xt.spawns(i),to(()=>{ne.pause(),ne.clear(),_e(""),t.streams.forEach((o,a)=>{T(`- ${m(`pid: #${o.pid} (${a}) process exited`)}`),(0,bd.default)(o.pid)}),_e(""),t.streams.clear(),process.exit(0)})}}l();var Sd=Bt(Kr());import{join as xd}from"pathe";async function Fd(){if(!x("script",i.config.transform)||!i.config.transform.script||ue(i.config.transform.script))return;let e=wt("Script Transform");x("entryPoints",i.processor.esbuild)&&(e("processor option is not allowed and was omitted","entryPoints"),delete i.processor.esbuild.entryPoints);let t=Bn(i.config.transform.script,{addWatch:!1,flatten:!0}),r=po(["input","watch","rename","snippet"]);x("absWorkingDir",i.processor.esbuild)||(i.processor.esbuild.absWorkingDir=i.cwd);for(let n of t){let s=n.snippet?"snippets":"assets",{name:o}=Fs(n.input,n.rename),a;o.endsWith(".js")===!1&&o.endsWith(".mjs")===!1?a=o+".js":o.endsWith(".cjs")?Ne({option:"transform.script",name:"rename",value:o,expects:".js | .mjs",reason:["You cannot use cjs extensions in web environments"]}):a=o,n.snippet===!0&&a.endsWith(".liquid")===!1&&(a=a+".liquid");let u=Le(n),c=N();if(n.snippet){if(c.snippet=!0,c.namespace="snippets",c.type=3,u("attrs")&&ue(n.attrs)===!1)if(R(n.attrs))for(let f=0;f<n.attrs.length;f++){let p=n.attrs[f];R(p)?c.attrs.push(p.join("")):V({option:"style",name:`attrs[${f}]`,provided:p,expects:"string[]"})}else V({option:"style",name:"attrs",provided:n.attrs,expects:"[ string[] ]"})}else c.snippet=!1,c.namespace="assets",c.type=10;if(c.uuid=It(),c.snippet=n.snippet,c.input=n.input,c.output=xd(i.dirs.output,s,a),c.key=xd(s,a),c.attrs=[],c.size=NaN,c.watch=null,c.watchCustom=null,c.esbuild=null,i.processor.esbuild.outfile=c.output,i.mode.watch&&i.watch.unwatch(c.output),u("esbuild"))if(be(n.esbuild)||de(n.esbuild))ue(r)?c.esbuild=i.processor.esbuild:c.esbuild=ke(i.processor.esbuild,r);else if(W(n.esbuild)){let f=Le(n.esbuild);for(let p in["entryPoints","outdir","watch","absWorkingDir","watch","write","logLevel","incremental"])p==="entryPoints"&&f(p)?e('Option is not allowed, use Syncify "input" instead',p):p==="outdir"&&f(p)?e("Option is not allowed, Syncify will handle output",p):p==="watch"&&f(p)?e("Option is not allowed, declare watch using Syncify",p):f(p)&&e("Option is not allowed and will be ignored",p);f("plugins")&&x("plugins",i.processor.esbuild)&&n.esbuild.plugins.unshift(...i.processor.esbuild.plugins),ue(r)?c.esbuild=ke(i.processor.esbuild,n.esbuild):c.esbuild=ke(i.processor.esbuild,n.esbuild,r)}else V({option:"script",name:"esbuild",provided:typeof n.esbuild,expects:"boolean | null | {}"});else ue(r)?c.esbuild=i.processor.esbuild:c.esbuild=ke(i.processor.esbuild,r);if(c.esbuild.entryPoints=[c.input],i.mode.watch)if(!u("watch"))c.watch=new Set;else{R(n.watch)||V({option:"script",name:"watch",provided:n.watch,expects:"string[]"});let f=Ht(n.watch);c.watchCustom=(0,Sd.default)(f),c.watch=new Set(f)}else c.watch=new Set;try{await Yp(c)}catch(f){Al(f,{message:["Syncify has failed to initialize due to a script prebuild error.","Script transforms execute runtime builds but the compile process did not complete.","This is typically due to invalid JavaScript syntax but may also be caused due to invalid","transform options being passed."],solution:["You will need to correct the error encountered. Alternatively you can skip Syncify","from applying the transform by excluding the file. "],entries:{processor:"ESBuild"}})}i.mode.terse&&(c.esbuild=ke(c.esbuild,i.terser.script,{exclude:void 0})),i.script.push(c)}}l();var Au=Bt(Kr());import vd from"fast-glob";import{join as sn,extname as ub}from"pathe";import{exists as $d}from"fs-extra";async function cb(){let e=await Su("postcss.config",{tsconfig:null});if(e!==null&&(i.processor.postcss.file=e.path,i.processor.postcss.config=e.config,i.watch.add(e.path)),i.processor.tailwind.installed=xu(i.pkg,"tailwindcss"),i.processor.tailwind.installed){await Ka("tailwind")||qe("Unable to dynamically import TailwindCSS",["Ensure you have installed tailwindcss"]);let r=await Su("tailwind.config",{tsconfig:null});r!==null&&(i.processor.tailwind.file=r.path,i.processor.tailwind.config=r.config,i.watch.add(r.path))}i.processor.sass.installed=xu(i.pkg,"sass"),i.processor.sass.installed&&(await Ka("sass")||qe("Unable to dynamically import SASS",["Ensure you have installed sass"]))}async function Ed(){if(!x("style",i.config.transform)||!i.config.transform.style||ue(i.config.transform.style))return;await cb();let e=wt("Style Transform"),t=Bn(i.config.transform.style,{addWatch:!1,flatten:!0}),r=yn(i.config.input);for(let n=0;n<t.length;n++){let s=t[n],o=Le(s),a=N();if(a.uuid=It(),a.input=s.input,a.watch=null,a.attrs=[],a.postcss=null,a.sass=!1,a.tailwind=null,o("postcss")?R(s.postcss)&&s.postcss.length>0?rt(a,"postcss",{get(){return s.postcss}}):be(s.postcss)&&s.postcss!==!1&&de(s.postcss)===!1?rt(a,"postcss",{get(){return ke(i.processor.postcss.config)}}):V({option:"style",name:"postcss",provided:a.postcss,expects:"boolean | []"}):rt(a,"postcss",{get(){return ke(i.processor.postcss.config)}}),o("tailwind")){i.processor.tailwind.installed||ea("tailwindcss");let f=W(s.tailwind);if(f||be(s.tailwind)&&s.tailwind!==!1&&de(s.tailwind)===!1){let p=ke(f?s.tailwind:i.processor.tailwind.config);if(R(p.content)&&ue(p.content)&&(p.content=[sn(i.dirs.input,"**","*.{js,ts,jsx,tsx,vue,svelte,liquid,json,schema}")]),rt(a,"tailwind",{get(){return p}}),i.mode.watch&&R(a.tailwind.content)){let d=await vd(a.tailwind.content);i.processor.tailwind.map===null&&(i.processor.tailwind.map=N()),i.processor.tailwind.map[n]=new Set(d)}}else V({option:"style",name:"tailwind",provided:a.tailwind,expects:"boolean | {}"})}if(o("sass")&&s.sass!==!1&&i.processor.sass.installed===!0){let f=W(s.sass);if((be(s.sass)||f)&&de(s.sass)===!1)if(i.processor.sass.installed||ea("sass"),f===!1)rt(a,"sass",{get(){return s.sass}});else{a.sass=ke(i.processor.sass.config,s.sass);for(let p in s.sass)if(p==="sourcemap"||p==="warnings"||p==="quietDeps")be(s.sass[p])?a.sass[p]=s.sass[p]:V({option:"sass",name:p,provided:s.sass[p],expects:"boolean"});else if(p==="style")M(s.sass[p])===!1&&V({option:"sass",name:p,provided:s.sass[p],expects:"string"}),s.sass[p]==="expanded"||s.sass[p]==="compressed"?a.sass[p]=s.sass[p]:Ne({option:"sass",name:p,value:s.sass[p],expects:"expanded | compressed"});else if(p==="includePaths")if(R(s.sass[p])){let d=[];for(let y of s.sass[p]){let D=sn(i.cwd,y);await $d(D)?d.push(D):e("Cannot resolve sass includePath entry",y)}a.sass[p]=d}else V({option:"sass",name:p,provided:s.sass[p],expects:"string[]"})}else V({option:"style",name:"sass",provided:s.sass,expects:"boolean | {}"});s.snippet===!1&&!/\.s[ac]ss/.test(ub(a.input))&&e("Input is not a sass file",a.input)}let u=Fs(s.rename);o("rename")&&de(s)===!1&&(M(s.rename)===!1&&V({option:"styles",name:"rename",provided:s.rename,expects:"string"}),u=Fs(a.input,s.rename),/[a-zA-Z0-9_.-]+/.test(u.name)===!1&&V({option:"sass",name:"rename",provided:u,expects:"Characters: [a-zA-Z0-9_.-]"}),u.name.endsWith(".css")?a.rename=u.name:u.name.endsWith(".scss")?u.name=u.name.replace(".scss",".css"):u.name.endsWith(".sass")?u.name=u.name.replace(".sass",".css"):u.name.endsWith(".liquid")||(u.name=u.name+".css"));let c=[];if(i.mode.watch&&o("watch")){R(s.watch)||V({option:"styles",name:"watch",provided:s.watch,expects:"string[]"});for(let f of s.watch){let p=await vd(sn(i.cwd,r(f)));p.length===0&&f[0]!=="!"&&e("Cannot resolve watch glob/path uri",f);for(let d of p)await $d(d)?c.push(d):e("No file exists in path",d)}c.push(a.input);for(let f of c)i.watch.add(f);a.watch=(0,Au.default)(c)}else a.watch=(0,Au.default)([a.input]),i.watch.add(a.input);if(W(a.sass)&&(a.sass.include.unshift(i.cwd,sn(i.cwd,u.dir)),Lt("sass.include",s)&&(a.sass.include=s.sass.include.map(f=>sn(i.cwd,f)))),o("snippet")&&(be(s.snippet)||V({option:"styles",name:"snippet",provided:s.snippet,expects:"boolean"}),a.snippet=s.snippet,a.snippet===!0&&o("attrs")&&ue(s.attrs)===!1))if(R(s.attrs))for(let f=0;f<s.attrs.length;f++){let p=s.attrs[f];R(p)?a.attrs.push(p.join("")):V({option:"style",name:`attrs[${f}]`,provided:p,expects:"string[]"})}else V({option:"style",name:"attrs",provided:s.attrs,expects:"[ string[] ]"});a.snippet?(x("rename",a)||(a.rename=u.name),(u.name.endsWith(".liquid")===!1||a.rename.endsWith(".liquid")===!1)&&(a.rename=u.name+".liquid"),i.paths.transforms.set(a.input,9),i.mode.watch&&i.watch.unwatch(sn(i.dirs.output,"snippets",a.rename))):(a.rename=u.name,i.mode.watch&&i.watch.unwatch(sn(i.dirs.output,"assets",u.name))),i.style.push(a)}}l();import{extname as lb,relative as fb}from"pathe";async function Cd(){if(!x("svg",i.config.transform)||!i.config.transform.svg||ue(i.config.transform.svg))return;let e=wt("SVG Transform"),t=Bn(i.config.transform.svg,{addWatch:!0,flatten:!1});for(let r of t){let n=r.input.filter(a=>lb(a)===".svg"?!0:(e("Excluded file which is not an SVG type",fb(i.cwd,a)),!1));if(n.length===0){e("No SVG file paths were resolved");continue}let s=Le(r),o=N();o.uuid=It(),o.input=new Set(n),o.format=null,o.match=r.match,o.rename=r.rename,o.snippet=r.snippet,s("svgo")&&s("sprite")&&Ne({option:"transform",name:"svg",value:"svgo AND sprite",expects:"svgo OR sprite"}),s("format")?r.format==="file"||r.format==="sprite"?(o.format=r.format,r.format==="file"?o.svgo=!0:o.sprite=!0):Ne({option:"transform > svg",name:"format",value:r.format,expects:'"sprite" | "file"'}):s("svgo")?(o.format="file",o.svgo=W(r.svgo)?ke(i.processor.svgo,r.svgo):!0):s("sprite")?(o.format="sprite",o.sprite=W(r.sprite)?ke(i.processor.sprite,r.sprite):!0):$l({option:"transform.svg",key:"format",expects:"sprite | file",reason:[`SVG transforms require you to define ${pe("format")} Syncify needs to knows how`,"it should handle the input and which processor to use for the transform."]}),i.svg.push(o)}}l();import{join as so}from"pathe";async function Ad(){if(i.mode.watch!==!0){if(i.cache.build.hotSnippet.length>0){for(let r of i.cache.build.hotSnippet)await ya(r);i.cache.build.hotSnippet=[]}return}if(i.mode.hot===!1&&i.config.hot===!1){if(i.cache.build.hotSnippet.length>0){for(let r of i.cache.build.hotSnippet)await ya(r);i.cache.build.hotSnippet=[]}return}i.mode.hot===!1&&i.config.hot===!0&&(i.mode.hot=!0);let e=wt("HOT Reloads");if(i.env.sync>1){e("HOT Reloads can only be used on 1 store");return}else if(i.sync.themes.length>1){e("HOT Reloads can only be used on 1 theme");return}if(Vt(W(i.config.hot),be(i.config.hot),de(i.config.hot))&&V({option:"config",name:"hot",provided:i.config.hot,expects:"boolean | {}"}),W(i.config.hot)&&ue(i.config.hot)===!1){let r=Le(i.hot);for(let n in i.config.hot)r(n)||Er(`hot.${n}`,i.config.hot[n]),n==="label"?i.config.hot[n]==="visible"||i.config.hot[n]==="hidden"?i.hot[n]=i.config.hot[n]:Ne({option:"hot",name:n,value:i.config.hot[n],expects:"visible | hidden"}):n==="strategy"?i.config.hot[n]==="hydrate"||i.config.hot[n]==="replace"?i.hot[n]=i.config.hot[n]:Ne({option:"hot",name:n,value:i.config.hot[n],expects:"hydrate | replace"}):n==="method"?i.config.hot[n]==="hot"||i.config.hot[n]==="refresh"?i.hot[n]=i.config.hot[n]:Ne({option:"hot",name:n,value:i.config.hot[n],expects:"hot | refresh"}):n==="scroll"?i.config.hot[n]==="preserved"||i.config.hot[n]==="top"?i.hot[n]=i.config.hot[n]:Ne({option:"hot",name:n,value:i.config.hot[n],expects:"preserved | top"}):typeof i.hot[n]==typeof i.config.hot[n]?i.hot[n]=i.config.hot[n]:V({option:"hot",name:n,provided:i.config.hot[n],expects:typeof i.hot[n]})}i.hot.snippet=so(i.cwd,"node_modules","@syncify/cli","hot.js.liquid"),i.hot.output=so(i.dirs.output,"snippets","hot.js.liquid");let t=so(i.dirs.output,"layout");for(let r of i.hot.layouts){let n=so(t,r);i.hot.alive[n]=!1,i.cache.build.hotSnippet.includes(t)||i.cache.build.hotSnippet.push(t)}i.hot.renderer="{% render 'hot.js'"+["",`server: ${i.hot.server}`,`socket: ${i.hot.socket}`,`strategy: "${i.hot.strategy}"`,`scroll: "${i.hot.scroll}"`,`label: "${i.hot.label}"`,`history: "${i.hot.history}`,`method: "${i.hot.method}"`].join(", ")+" %}",i.wss=zm()}l();import{join as pb}from"pathe";function Tu(e,t){let r=[],n=N();i.mode.upload?(n.base="output",n.from="output",n.dirs=Hr.map(s=>`${C("-")} ${I(s)}`),n.fix=[`The ${I("--filter")} (or ${I("-f")}) flag command argument expects you`,"provide a theme output directory as the starting point. Filtering begins with","a Shopify output directory name, for example:","",`${C("$")} ${C(`syncify --filter ${I("sections/file.liquid")}`)}`,`${C("$")} ${C(`syncify --filter ${I("snippets/*")}`)}`,`${C("$")} ${C(`syncify --filter ${I("templates/*.json")}`)}`,`${C("$")} ${C(`syncify --filter ${I("!assets/some-file.ext")}`)}`,"",`Syncify will automatically resolve files from within your defined ${h(n.base)} directory`,"based on the starting point directory name. You can pass glob star matches following the",`directory namespace or starting point ignores (${I("!")}) as long the directory can match.`]):(n.base="input",n.from="paths",n.dirs=Gr.map(s=>`${C("-")} ${I(s)}`),n.fix=[`The ${I("--filter")} (or ${I("-f")}) flag command argument expects you`,`provide a ${Ot.bold("paths")} key name as the starting point. Filtering begins with`,"a Shopify output directory name, for example:","",`${C("$")} ${C(`syncify --filter ${I("sections/file.liquid")}`)}`,`${C("$")} ${C(`syncify --filter ${I("snippets/*")}`)}`,`${C("$")} ${C(`syncify --filter ${I("templates/*.json")}`)}`,`${C("$")} ${C(`syncify --filter ${I("!assets/some-file.ext")}`)}`,"",`Syncify will automatically resolve files from within your defined ${h(n.base)} directory`,`based on the starting point ${h("paths")} name. You can pass glob star matches following the`,`starting point or ignores (${I("!")}) as long the reference can match.`]),e==="pattern"?(r.push(`Invalid ${I("--filter")} pattern provided. You cannot pass starting point`),t[0]==="*"?r.push(`glob (${I("*")}) stars as filters, Syncify does not support this.`):t[0]==="/"?r.push(`path (${I("/")}) roots as filters, Syncify does not support this.`):t[0]==="."&&r.push(`dot paths (${I(".")})  as filters, Syncify does not support this.`),r.push(`Use a starting point reference name based on the ${I(n.from)} key property`,`in your ${I(i.file.base)} file.`)):r.push(`Invalid directory provided. The ${I("--filter")} pattern expects the starting point`,"directory path be one of the following:","",...n.dirs,""),Qt({message:r,expected:"--filter <dir>",fix:n.fix})}function Td(e,t,r){if((t[0]==="*"||t[0]==="/"||t[0]===".")&&Tu("pattern",t),t[0]==="!"){r.test(t.slice(1))||Tu("dir",t);return}r.test(t)||Tu("dir",t);let n=t.slice(0,t.indexOf("/"));R(i.filters[n])||(i.filters[n]=[]),i.filters[n].push(pb(e,t))}function Bd(e){if(!x("filter",e))return;let t=i.mode.upload?i.dirs.output:i.dirs.input,r=e.filter.replace(/\s+/g," ").trim(),n=i.mode.upload?new RegExp(`^(${Hr.join("|")})`):new RegExp(`^(${Gr.join("|")})`);if(r.indexOf(",")>-1){let s=r.split(",").filter(Boolean).map(o=>o.trim());for(let o of s)Td(t,o,n)}else Td(t,r,n)}l();function Ld(){let{terser:e,mode:t}=i;if(be(i.config.terser)){if(t.terse===!1&&i.config.terser===!1)return;t.terse===!1&&i.config.terser===!0&&(t.terse=!0)}let r=wt("terser configuration");if(typeof i.config.terser=="object")for(let n in i.config.terser){if(i.config.terser[n]===!1||de(i.config.terser[n])){i.mode.terse===!0&&(i.terse[n]=!0);continue}if(n==="script"&&i.processor.esbuild.installed===!1&&(W(i.config.terser[n])&&ue(i.config.terser[n])===!1||be(i.config.terser[n])&&i.config.terser[n]===!0)&&qe("esbuild is not installed",Nc),be(i.config.terser[n]))i.terser[n]=i.config.terser[n];else if(W(e[n])){if(ue(e[n]))continue;for(let s in i.config.terser[n]){if(s==="exclude"){ue(i.config.terser[n][s])||(e[n][s]=Ht(i.config.terser[n][s]));continue}x(s,e[n])||Er(`terser.${n}`,s),s==="mangleProps"?!de(i.config.terser[n][s])&&!ur(e[n][s])&&V({option:`terser.${n}`,name:s,provided:`${typeof i.config.terser[n][s]} (${i.config.terser[n][s]})`,expects:"Regex | string | undefined"}):!de(i.config.terser[n][s])&&typeof e[n][s]!=typeof i.config.terser[n][s]&&V({option:`terser.${n}`,name:s,provided:typeof i.config.terser[n][s],expects:typeof e[n][s]}),s==="collapseWhitespace"?e.markup.collapseWhitespace=i.config.terser[n][s]:e[n][s]=i.config.terser[n][s]}}else r("unkown option provided",n)}}l();function Rd(){if(!Le(i.config.views)("pages"))return;let{pages:e}=i.config.views;if(!W(e)&&!de(e)&&V({option:"views",name:"pages",provided:typeof e,expects:"{}"}),ue(e))return;let t=Le(e);for(let r in e)if(t(r)||Er("pages",r),r==="language")M(e[r])?e[r]==="markdown"||e[r]==="html"?i.page[r]=e[r]:Ne({option:"views.pages",name:r,value:e[r],expects:"markdown | html"}):V({option:"views.pages",name:r,provided:e[r],expects:"markdown | html"});else if(r==="author"){if(de(e[r]))continue;M(e[r])?i.page[r]=e[r]:V({option:"views.pages",name:r,provided:e[r],expects:"string"})}else if(r==="suffixDir"||r==="safeSync"){if(de(e[r]))continue;be(e[r])?i.page[r]=e[r]:V({option:"views.pages",name:r,provided:e[r],expects:"object"})}else if(r==="global"){if(de(e[r]))continue;if(R(e[r])){if(e[r].length>0){i.page[r]=new RegExp(`${e[r].join("|")}`);continue}}else V({option:"views.pages",name:r,provided:e[r],expects:"string | string[]"})}}l();async function Nd(){if(W(i.config.publish)&&ue(i.config.publish)===!1)for(let e in i.config.publish)x(e,i.publish)||Er(`publish.${e}`,i.config.publish[e]),e==="tunnelPort"?bt(i.config.publish[e])&&isNaN(i.config.publish[e])===!1?i.publish[e]=i.config.publish[e]:Ne({option:"publish",name:e,value:i.config.hot[e],expects:"visible | hidden"}):e==="publishRole"?i.config.publish[e]==="main"||i.config.publish[e]==="unpublished"||i.config.publish[e]==="development"?i.publish[e]=i.config.publish[e]:Ne({option:"publish",name:e,value:i.config.hot[e],expects:"main | unpublished | development"}):e==="bindVersion"?be(i.config.publish[e])?i.publish[e]=i.config.publish[e]:V({option:"bindVersion",name:e,provided:i.config.publish[e],expects:typeof i.publish[e]}):e==="themeLimit"&&(bt(i.config.publish[e])?i.config.publish[e]>5?Ne({option:"publish",name:e,value:i.config.hot[e],expects:"1 - 5",reason:["Syncify requries a theme limit between 1 and 5."]}):i.publish[e]=i.config.publish[e]:V({option:"themeLimit",name:e,provided:i.config.publish[e],expects:typeof i.publish[e]}));(i.mode.publish===!0||i.mode.release===!0)&&(x("ngrok_auth_token",i.env.vars)||qe("Missing ngrok auth token",["Theme publishing requires an ngrok authorisation token",`This is easy to obtain, visit ${Yt("https://ngrok.com")}`,`and create a ${h("free")} account to get a token.`,"",`Once you have obtained an auth token, provide it in your ${m(".env")}`,"file, use the following environment variable name:","",`${H('ngrok_auth_token = ""')}`]))}async function Pd(e,t){if(A.start("runtime"),xt(i),await _m(e),await gu(e),await Db(e),await cm(e),db(e),ed(e),i.mode.setup||i.mode.strap||(process.env.SYNCIFY_ENV=i.env.dev?"dev":"prod",process.env.SYNCIFY_WATCH=String(i.mode.watch),Km(e),pd(e),Bd(e),xt.modes(i),await ud(e),gb(e.watch||e.upload),hb(),Nd(),wd(),await Promise.all([Ym(),Du(),Xm(),fd()]).catch(n=>{Et(n,{details:"Directory and path generation error"})}),i.mode.themes))return;Rd(),Qm(),td(),yb(),i.mode.build||xt.stores(i),await nd(),await Fd(),await Cd(),await Ed(),Ld();let r=await Promise.all([Ad(),lm()]).catch(n=>{Et(n,{details:"Runtime error"})});return xt.warnings(i),i.mode.build||xt.time(),r}function db(e){i.restart=!1,i.cli=e,i.cwd=e.cwd,i.env.cli=e.cli,i.env.prod=e.prod,i.env.dev=e.dev&&!e.prod,i.terminal.wrap=Math.round(i.terminal.cols-i.terminal.cols/3);let t=Le(i.config.log);t("silent")&&(i.log.config.silent=i.config.log.silent),t("clear")&&(i.log.config.clear=i.config.log.clear),t("stats")&&(i.log.config.stats=i.config.log.stats),t("warnings")&&(i.log.config.warnings=i.config.log.warnings)}function gb(e){e&&(i.watch=new mb({persistent:!0,ignoreInitial:!0,usePolling:!0,interval:75,binaryInterval:100,ignored:["**/*.map"],ignorePermissionErrors:!0}),i.watch=Object.defineProperties(i.watch,{has:{value(t,r=i.cwd){return i.watch._watched.has(r)?i.watch._watched.get(r).items.has(t):!1}},paths:{get(){return hr(this._closers.keys())}},watching:{get(){return i.watch._watched}}}))}function hb(){if(x("processors",i.config)&&W(process.config))for(let e in i.config.processors)ue(i.config.processors[e])||(R(i.config.processors[e])?i.processor[e].config=i.config.processors[e]:W(i.config.processors[e])&&(e==="esbuild"?i.processor[e]=ke(i.processor[e],i.config.processors[e]):i.processor[e].config=ke(i.processor[e].config,i.config.processors[e])))}function yb(){if(x("plugins",i.config)&&R(i.config.plugins))for(let e of i.config.plugins)x("onInit",e)&&e.onInit.call({...i},i.config),x("onChange",e)&&i.plugins.onChange.push([e.name,e.onChange]),x("onTransform",e)&&i.plugins.onTransform.push([e.name,e.onTransform]),i.mode.watch&&(x("onWatch",e)&&i.plugins.onWatch.push([e.name,e.onWatch]),x("onReload",e)&&i.plugins.onReload.push([e.name,e.onReload])),i.mode.build&&x("onBuild",e)&&i.plugins.onBuild.push([e.name,e.onBuild])}async function Db(e){let t=await km(e.cwd);t!==null?i.config=t:x("syncify",i.pkg)&&(x("config",i.pkg.syncify)?i.config=i.pkg.syncify.config:x("stores",i.pkg.syncify)||e.setup===!1&&e.strap===null&&Cl(e.cwd))}l();import{prompt as Bu}from"enquirer";l();async function kd(e){return Or.get("/oauth/access_scopes.json",e).then(({data:t})=>t).catch(t=>!1)}async function Od(){let e=Z({type:"info"}),t={store:null,domain:null,token:null,ngrok:null,version:null,scopes:{read_content:!1,read_files:!1,read_online_store_pages:!1,read_themes:!1,write_content:!1,write_files:!1,write_online_store_pages:!1,write_themes:!1}},r=ee({},vs,{pointer(f,p){return this.state.index===p?$.stub.trimEnd()+" ":$.trim+" "}}),n=[`Existing Setup${k}  `,`Shopify Domain${k}  `,`Admin API Token${k} `,`Ngrok API Token${k} `];if(i.env.file!==null)return T(e.Line("Environment references exist, setup can only be used for new installations.").NL.End(i.log.group).BR.toString());let{domain:s}=await Bu({type:"input",name:"domain",message:n[1],required:!0,format(f){return f+".myshopify.com"},validate(f){return this.state.symbols.pointer="  ",f===".myshopify.com"||f.length===0?"Enter myshopify.com domain name":!0},theme:r}),{token:o}=await Bu({type:"input",name:"token",required:!0,message:n[2],theme:r,validate(f){return this.state.symbols.pointer="  ",!f||f.length<10?"Invalid Admin API Token":!0}}),{ngrok:a}=await Bu({type:"input",name:"ngrok",required:!0,message:n[3],theme:r,validate(f){return this.state.symbols.pointer="  ",!f||f.length<10?"Invalid Ngrok API Token":!0}}),u=await kd({baseURL:`https://${s}.myshopify.com/admin`,headers:{"X-Shopify-Access-Token":o.trim()}});if(be(u))return T(e.NL.Wrap(`Connection failed on ${pe(`${s}.myshopify.com`)}. Please check the API Access Token`,"is correct and you have set the correct scopes, then try again.",se).NL.End(i.log.group).BR.toString());for(let{handle:f}of u.access_scopes)f in t.scopes&&(t.scopes[f]=!0,e.Line(`${hc} ${f}`));let c=0;for(let f in t.scopes)t.scopes[f]===!1&&(e.Line(`${wr} ${f}`,se),c=c+1);if(c>0)return T(e.NL.Wrap("Syncify requires read and write access to all the above resources.","Provide access to all scopes listed in red (above) and try again.",se).NL.End(i.log.group).BR.toString());T(e.toLine()),t.store=s,t.domain=`${s}.myshopify.com`,t.token=o.trim(),t.ngrok=a.trim()}l();import{prompt as wb}from"enquirer";import{copy as xb}from"fs-extra";import{join as io}from"pathe";async function _d(){let e=io(i.cwd,"node_modules","@syncify/cli","straps"),t={dawn:io(e,"dawn"),dusk:io(e,"dusk"),silk:io(e,"silk")},r=ee({},vs,{pointer(s,o){return this.state.index===o?$.stub.trimEnd()+" ":$.trim+" "}}),{template:n}=await wb({type:"select",name:"template",message:`Choose Strap${k}    `,required:!0,theme:r,choices:[{name:"dusk",message:"Dusk  ",hint:"Stripped theme"},{name:"dawn",message:"Dawn  ",hint:"Shopify Slop"},{name:"silk",message:"Silk  ",hint:"Custom theme"}]});xb(t[n],i.cwd)}l();async function Lu(e,t,r){if(We("_",e)&&(e._=e._.slice(1)),Sb.slice(2).length===0||e.help==="examples"||M(e.help)&&e.help.length===0)return Vm(e);if(await Pd(e,t),i.mode.setup)return Od();if(i.mode.strap)return _d();if(i.mode.themes)return bm();process.stdin.on("data",Um),i.mode.hot&&await Hm();try{if(i.env.ready=!0,i.mode.build&&i.mode.export===!1)return Gi(r);if(i.mode.watch)return ym(r);if(i.mode.upload)return ef(r);if(i.mode.import)return xm(r);if(i.mode.export&&i.mode.publish===!1)return Qi(r);if(i.mode.publish)return Wm(r);if(i.mode.interactive)return console.log("TODO: --interactive is not yet supported");if(i.mode.metafields)return console.log("TODO: --metafields is not yet supported")}catch(n){console.log(n)}}Lu((0,Id.default)(Fb.slice(1),{alias:{config:"c",input:"i",output:"o",build:"b",watch:"w",upload:"u",publish:"p",theme:"t",help:"h",spawn:"s",resource:"r",filter:"f",delete:"d"},default:{cwd:process.cwd(),config:".",input:"source",cli:!0,dev:!0,prod:!1,setup:!1,import:!1,export:!1,build:!1,watch:!1,upload:!1,terse:!1,hot:!1,interactive:!1,publish:!1,release:!1,views:!1,script:!1,style:!1,svg:!1,image:!1,metafields:!1,pages:!1,redirects:!1,doctor:!1,clean:!1,silent:!1,force:!1,cache:!1,strap:null,bump:null,help:null},boolean:["build","watch","upload","import","export","hot","terse","interactive","setup","dev","prod","metafields","pages","redirects","clean","silent","pull","force","test","cache","doctor","strap","views","script","style","svg","image"],string:["input","output","config","theme","spawn","del","release","bump","resource","filter","help","strap"]})).catch(console.error);
/*! Bundled license information:

normalize-path/index.js:
  (*!
   * normalize-path <https://github.com/jonschlinkert/normalize-path>
   *
   * Copyright (c) 2014-2018, Jon Schlinkert.
   * Released under the MIT License.
   *)

imurmurhash/imurmurhash.js:
  (**
   * @preserve
   * JS Implementation of incremental MurmurHash3 (r150) (as of May 10, 2013)
   *
   * @author <a href="mailto:jensyt@gmail.com">Jens Taylor</a>
   * @see http://github.com/homebrewing/brauhaus-diff
   * @author <a href="mailto:gary.court@gmail.com">Gary Court</a>
   * @see http://github.com/garycourt/murmurhash-js
   * @author <a href="mailto:aappleby@gmail.com">Austin Appleby</a>
   * @see http://sites.google.com/site/murmurhash/
   *)
*/
