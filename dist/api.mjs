var Od=Object.create;var uo=Object.defineProperty;var _d=Object.getOwnPropertyDescriptor;var Id=Object.getOwnPropertyNames;var jd=Object.getPrototypeOf,Wd=Object.prototype.hasOwnProperty;var Xe=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,r)=>(typeof require<"u"?require:t)[r]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')});var Md=(e,t)=>()=>(e&&(t=e(e=0)),t);var ge=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),qd=(e,t)=>{for(var r in t)uo(e,r,{get:t[r],enumerable:!0})},Gd=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of Id(t))!Wd.call(e,s)&&s!==r&&uo(e,s,{get:()=>t[s],enumerable:!(n=_d(t,s))||n.enumerable});return e};var Pt=(e,t,r)=>(r=e!=null?Od(jd(e)):{},Gd(t||!e||!e.__esModule?uo(r,"default",{value:e,enumerable:!0}):r,e));import{fileURLToPath as Hd}from"url";var zd,y,l=Md(()=>{zd=()=>Hd(import.meta.url),y=zd()});var Vu=ge((Uu,go)=>{"use strict";l();Object.defineProperty(Uu,"__esModule",{value:!0});var{round:kr,floor:Nu,max:Yd}=Math,Wu=e=>{let[,t]=/([a-f\d]{3,6})/i.exec(e)||[],r=t?t.length:0;if(r===3)t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2];else if(r!==6)return[0,0,0];let n=parseInt(t,16);return[n>>16&255,n>>8&255,255&n]},Mu=(e,t,r)=>e===t&&t===r?e<8?16:e>248?231:kr((e-8)/247*24)+232:16+36*kr(e/51)+6*kr(t/51)+kr(r/51),fo=e=>{let t,r,n,s,o,a;return e<8?30+e:e<16?e-8+90:(e>=232?t=r=n=(10*(e-232)+8)/255:(a=(e-=16)%36,t=Nu(e/36)/5,r=Nu(a/6)/5,n=a%6/5),s=2*Yd(t,r,n),s===0?30:(o=30+(kr(n)<<2|kr(r)<<1|kr(t)),s===2?o+60:o))},ku=(e,t,r)=>fo(Mu(e,t,r)),po=(e=>{let t=Y=>!!c.find(H=>Y.test(H)),r=globalThis,n=r.Deno,s=n!=null,o=r.process||n||{},a=o.stdout,u=(s?n.build.os:o.platform)==="win32",c=o.argv||o.args||[],f=o.env||{},p=-1;if(s)try{f=f.toObject()}catch{p=0}let d="FORCE_COLOR",w=f[d],b=parseInt(w),h=w==="false"?0:isNaN(b)?3:b,v="NO_COLOR"in f||h===0||t(/^-{1,2}(no-color|color=(false|never))$/),W=d in f&&h||t(/^-{1,2}color=?(true|always)?$/),G=(f.NEXT_RUNTIME||"").indexOf("edge")>-1||"PM2_HOME"in f&&"pm_id"in f||(s?n.isatty(1):a&&"isTTY"in a);return v?0:(p<0&&(p=((Y,H,Z)=>{let{TERM:K,COLORTERM:Ie}=Y;return"TF_BUILD"in Y?1:"TEAMCITY_VERSION"in Y?2:"CI"in Y?["GITHUB_ACTIONS","GITEA_ACTIONS"].some(qe=>qe in Y)?3:1:!H||/-mono|dumb/i.test(K)?0:Z||Ie==="truecolor"||Ie==="24bit"||K==="xterm-kitty"?3:/-256(colou?r)?$/i.test(K)?2:/^screen|^tmux|^xterm|^vt[1-5][0-9]([0-9])?|^ansi|color|cygwin|linux|mintty|rxvt/i.test(K)?1:3})(f,G,u)),W&&p===0?3:p)})(),qu=po>0,Gu={open:"",close:""},Ee=qu?(e,t)=>({open:`\x1B[${e}m`,close:`\x1B[${t}m`}):()=>Gu,gr=39,hr=49,Pu=e=>(t,r,n)=>e(Mu(t,r,n)),Ou=e=>t=>{let[r,n,s]=Wu(t);return e(r,n,s)},Bs=e=>Ee(`38;5;${e}`,gr),Ls=e=>Ee(`48;5;${e}`,hr),On=(e,t,r)=>Ee(`38;2;${e};${t};${r}`,gr),Rs=(e,t,r)=>Ee(`48;2;${e};${t};${r}`,hr);po===1?(Bs=e=>Ee(fo(e),gr),Ls=e=>Ee(fo(e)+10,hr),On=(e,t,r)=>Ee(ku(e,t,r),gr),Rs=(e,t,r)=>Ee(ku(e,t,r)+10,hr)):po===2&&(On=Pu(Bs),Rs=Pu(Ls));var Nn,lo,Pn={ansi256:Bs,bgAnsi256:Ls,fg:Bs,bg:Ls,rgb:On,bgRgb:Rs,hex:Ou(On),bgHex:Ou(Rs),visible:Gu,reset:Ee(0,0),inverse:Ee(7,27),hidden:Ee(8,28),bold:Ee(1,22),dim:Ee(2,22),italic:Ee(3,23),underline:Ee(4,24),strikethrough:Ee(9,29),strike:Ee(9,29),grey:Ee(90,gr),gray:Ee(90,gr),bgGrey:Ee(100,hr),bgGray:Ee(100,hr)},Kd=["black","red","green","yellow","blue","magenta","cyan","white"],_u="Bright",kn=30;for(Nn of Kd)lo="bg"+Nn[0].toUpperCase()+Nn.slice(1),Pn[Nn]=Ee(kn,gr),Pn[Nn+_u]=Ee(kn+60,gr),Pn[lo]=Ee(kn+10,hr),Pn[lo+_u]=Ee(kn+70,hr),kn++;var{defineProperty:Xd,defineProperties:Zd,setPrototypeOf:Hu}=Object,Qd=/[Â›][[()#;?]*(?:[0-9]{1,4}(?:;[0-9]{0,4})*)?[0-9A-ORZcf-nqry=><]/g,eg=/(\r?\n)/g,Iu={},ju=({_p:e},{open:t,close:r})=>{let n=(a,...u)=>{if(!a)return"";let c=n._p,{_a:f,_b:p}=c,d=a.raw!=null?String.raw(a,...u):""+a;if(d.includes("\x1B"))for(;c!=null;){let w=c.close,b=w.length;if(b){let h,v=0,W="";for(;~(h=d.indexOf(w,v));)W+=d.slice(v,h)+c.open,v=h+b;v&&(d=W+d.slice(v))}c=c._p}return d.includes(`
`)&&(d=d.replace(eg,p+"$1"+f)),f+d+p},s=t,o=r;return e!=null&&(s=e._a+t,o=r+e._b),Hu(n,mo),n._p={open:t,close:r,_a:s,_b:o,_p:e},n.open=s,n.close=o,n},zu=function(){let e=t=>""+t;return e.isSupported=()=>qu,e.strip=t=>t.replace(Qd,""),e.extend=t=>{for(let r in t){let n=t[r],s=typeof n,o=s==="string"?On(...Wu(n)):n;Iu[r]=s==="function"?{get(){return(...a)=>ju(this,n(...a))}}:{get(){let a=ju(this,o);return Xd(this,r,{value:a}),a}}}mo=Zd({},Iu),Hu(e,mo)},e.extend(Pn),e},mo,tg=new zu;go.exports=tg,go.exports.Ansis=zu});var xc=ge((bx,Fo)=>{"use strict";l();var yg=Object.prototype.hasOwnProperty,lt="~";function _n(){}Object.create&&(_n.prototype=Object.create(null),new _n().__proto__||(lt=!1));function Dg(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function wc(e,t,r,n,s){if(typeof r!="function")throw new TypeError("The listener must be a function");var o=new Dg(r,n||e,s),a=lt?lt+t:t;return e._events[a]?e._events[a].fn?e._events[a]=[e._events[a],o]:e._events[a].push(o):(e._events[a]=o,e._eventsCount++),e}function Us(e,t){--e._eventsCount===0?e._events=new _n:delete e._events[t]}function st(){this._events=new _n,this._eventsCount=0}st.prototype.eventNames=function(){var t=[],r,n;if(this._eventsCount===0)return t;for(n in r=this._events)yg.call(r,n)&&t.push(lt?n.slice(1):n);return Object.getOwnPropertySymbols?t.concat(Object.getOwnPropertySymbols(r)):t};st.prototype.listeners=function(t){var r=lt?lt+t:t,n=this._events[r];if(!n)return[];if(n.fn)return[n.fn];for(var s=0,o=n.length,a=new Array(o);s<o;s++)a[s]=n[s].fn;return a};st.prototype.listenerCount=function(t){var r=lt?lt+t:t,n=this._events[r];return n?n.fn?1:n.length:0};st.prototype.emit=function(t,r,n,s,o,a){var u=lt?lt+t:t;if(!this._events[u])return!1;var c=this._events[u],f=arguments.length,p,d;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),f){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,r),!0;case 3:return c.fn.call(c.context,r,n),!0;case 4:return c.fn.call(c.context,r,n,s),!0;case 5:return c.fn.call(c.context,r,n,s,o),!0;case 6:return c.fn.call(c.context,r,n,s,o,a),!0}for(d=1,p=new Array(f-1);d<f;d++)p[d-1]=arguments[d];c.fn.apply(c.context,p)}else{var w=c.length,b;for(d=0;d<w;d++)switch(c[d].once&&this.removeListener(t,c[d].fn,void 0,!0),f){case 1:c[d].fn.call(c[d].context);break;case 2:c[d].fn.call(c[d].context,r);break;case 3:c[d].fn.call(c[d].context,r,n);break;case 4:c[d].fn.call(c[d].context,r,n,s);break;default:if(!p)for(b=1,p=new Array(f-1);b<f;b++)p[b-1]=arguments[b];c[d].fn.apply(c[d].context,p)}}return!0};st.prototype.on=function(t,r,n){return wc(this,t,r,n,!1)};st.prototype.once=function(t,r,n){return wc(this,t,r,n,!0)};st.prototype.removeListener=function(t,r,n,s){var o=lt?lt+t:t;if(!this._events[o])return this;if(!r)return Us(this,o),this;var a=this._events[o];if(a.fn)a.fn===r&&(!s||a.once)&&(!n||a.context===n)&&Us(this,o);else{for(var u=0,c=[],f=a.length;u<f;u++)(a[u].fn!==r||s&&!a[u].once||n&&a[u].context!==n)&&c.push(a[u]);c.length?this._events[o]=c.length===1?c[0]:c:Us(this,o)}return this};st.prototype.removeAllListeners=function(t){var r;return t?(r=lt?lt+t:t,this._events[r]&&Us(this,r)):(this._events=new _n,this._eventsCount=0),this};st.prototype.off=st.prototype.removeListener;st.prototype.addListener=st.prototype.on;st.prefixed=lt;st.EventEmitter=st;typeof Fo<"u"&&(Fo.exports=st)});var ps=ge((NE,tf)=>{"use strict";l();var n0=Xe("path"),rr="\\\\/",Xl=`[^${rr}]`,fr="\\.",s0="\\+",i0="\\?",Di="\\/",o0="(?=.)",Zl="[^/]",ba=`(?:${Di}|$)`,Ql=`(?:^|${Di})`,wa=`${fr}{1,2}${ba}`,a0=`(?!${fr})`,u0=`(?!${Ql}${wa})`,c0=`(?!${fr}{0,1}${ba})`,l0=`(?!${wa})`,f0=`[^.${Di}]`,p0=`${Zl}*?`,ef={DOT_LITERAL:fr,PLUS_LITERAL:s0,QMARK_LITERAL:i0,SLASH_LITERAL:Di,ONE_CHAR:o0,QMARK:Zl,END_ANCHOR:ba,DOTS_SLASH:wa,NO_DOT:a0,NO_DOTS:u0,NO_DOT_SLASH:c0,NO_DOTS_SLASH:l0,QMARK_NO_DOT:f0,STAR:p0,START_ANCHOR:Ql},m0={...ef,SLASH_LITERAL:`[${rr}]`,QMARK:Xl,STAR:`${Xl}*?`,DOTS_SLASH:`${fr}{1,2}(?:[${rr}]|$)`,NO_DOT:`(?!${fr})`,NO_DOTS:`(?!(?:^|[${rr}])${fr}{1,2}(?:[${rr}]|$))`,NO_DOT_SLASH:`(?!${fr}{0,1}(?:[${rr}]|$))`,NO_DOTS_SLASH:`(?!${fr}{1,2}(?:[${rr}]|$))`,QMARK_NO_DOT:`[^.${rr}]`,START_ANCHOR:`(?:^|[${rr}])`,END_ANCHOR:`(?:[${rr}]|$)`},d0={alnum:"a-zA-Z0-9",alpha:"a-zA-Z",ascii:"\\x00-\\x7F",blank:" \\t",cntrl:"\\x00-\\x1F\\x7F",digit:"0-9",graph:"\\x21-\\x7E",lower:"a-z",print:"\\x20-\\x7E ",punct:"\\-!\"#$%&'()\\*+,./:;<=>?@[\\]^_`{|}~",space:" \\t\\r\\n\\v\\f",upper:"A-Z",word:"A-Za-z0-9_",xdigit:"A-Fa-f0-9"};tf.exports={MAX_LENGTH:1024*64,POSIX_REGEX_SOURCE:d0,REGEX_BACKSLASH:/\\(?![*+?^${}(|)[\]])/g,REGEX_NON_SPECIAL_CHARS:/^[^@![\].,$*+?^{}()|\\/]+/,REGEX_SPECIAL_CHARS:/[-*+?.^${}(|)[\]]/,REGEX_SPECIAL_CHARS_BACKREF:/(\\?)((\W)(\3*))/g,REGEX_SPECIAL_CHARS_GLOBAL:/([-*+?.^${}(|)[\]])/g,REGEX_REMOVE_BACKSLASH:/(?:\[.*?[^\\]\]|\\(?=.))/g,REPLACEMENTS:{"***":"*","**/**":"**","**/**/**":"**"},CHAR_0:48,CHAR_9:57,CHAR_UPPERCASE_A:65,CHAR_LOWERCASE_A:97,CHAR_UPPERCASE_Z:90,CHAR_LOWERCASE_Z:122,CHAR_LEFT_PARENTHESES:40,CHAR_RIGHT_PARENTHESES:41,CHAR_ASTERISK:42,CHAR_AMPERSAND:38,CHAR_AT:64,CHAR_BACKWARD_SLASH:92,CHAR_CARRIAGE_RETURN:13,CHAR_CIRCUMFLEX_ACCENT:94,CHAR_COLON:58,CHAR_COMMA:44,CHAR_DOT:46,CHAR_DOUBLE_QUOTE:34,CHAR_EQUAL:61,CHAR_EXCLAMATION_MARK:33,CHAR_FORM_FEED:12,CHAR_FORWARD_SLASH:47,CHAR_GRAVE_ACCENT:96,CHAR_HASH:35,CHAR_HYPHEN_MINUS:45,CHAR_LEFT_ANGLE_BRACKET:60,CHAR_LEFT_CURLY_BRACE:123,CHAR_LEFT_SQUARE_BRACKET:91,CHAR_LINE_FEED:10,CHAR_NO_BREAK_SPACE:160,CHAR_PERCENT:37,CHAR_PLUS:43,CHAR_QUESTION_MARK:63,CHAR_RIGHT_ANGLE_BRACKET:62,CHAR_RIGHT_CURLY_BRACE:125,CHAR_RIGHT_SQUARE_BRACKET:93,CHAR_SEMICOLON:59,CHAR_SINGLE_QUOTE:39,CHAR_SPACE:32,CHAR_TAB:9,CHAR_UNDERSCORE:95,CHAR_VERTICAL_LINE:124,CHAR_ZERO_WIDTH_NOBREAK_SPACE:65279,SEP:n0.sep,extglobChars(e){return{"!":{type:"negate",open:"(?:(?!(?:",close:`))${e.STAR})`},"?":{type:"qmark",open:"(?:",close:")?"},"+":{type:"plus",open:"(?:",close:")+"},"*":{type:"star",open:"(?:",close:")*"},"@":{type:"at",open:"(?:",close:")"}}},globChars(e){return e===!0?m0:ef}}});var bi=ge(Ft=>{"use strict";l();var g0=Xe("path"),h0=process.platform==="win32",{REGEX_BACKSLASH:y0,REGEX_REMOVE_BACKSLASH:D0,REGEX_SPECIAL_CHARS:b0,REGEX_SPECIAL_CHARS_GLOBAL:w0}=ps();Ft.isObject=e=>e!==null&&typeof e=="object"&&!Array.isArray(e);Ft.hasRegexChars=e=>b0.test(e);Ft.isRegexChar=e=>e.length===1&&Ft.hasRegexChars(e);Ft.escapeRegex=e=>e.replace(w0,"\\$1");Ft.toPosixSlashes=e=>e.replace(y0,"/");Ft.removeBackslashes=e=>e.replace(D0,t=>t==="\\"?"":t);Ft.supportsLookbehinds=()=>{let e=process.version.slice(1).split(".").map(Number);return e.length===3&&e[0]>=9||e[0]===8&&e[1]>=10};Ft.isWindows=e=>e&&typeof e.windows=="boolean"?e.windows:h0===!0||g0.sep==="\\";Ft.escapeLast=(e,t,r)=>{let n=e.lastIndexOf(t,r);return n===-1?e:e[n-1]==="\\"?Ft.escapeLast(e,t,n-1):`${e.slice(0,n)}\\${e.slice(n)}`};Ft.removePrefix=(e,t={})=>{let r=e;return r.startsWith("./")&&(r=r.slice(2),t.prefix="./"),r};Ft.wrapOutput=(e,t={},r={})=>{let n=r.contains?"":"^",s=r.contains?"":"$",o=`${n}(?:${e})${s}`;return t.negated===!0&&(o=`(?:^(?!${o}).*$)`),o}});var lf=ge((_E,cf)=>{"use strict";l();var rf=bi(),{CHAR_ASTERISK:xa,CHAR_AT:x0,CHAR_BACKWARD_SLASH:ms,CHAR_COMMA:S0,CHAR_DOT:Sa,CHAR_EXCLAMATION_MARK:Fa,CHAR_FORWARD_SLASH:uf,CHAR_LEFT_CURLY_BRACE:va,CHAR_LEFT_PARENTHESES:$a,CHAR_LEFT_SQUARE_BRACKET:F0,CHAR_PLUS:v0,CHAR_QUESTION_MARK:nf,CHAR_RIGHT_CURLY_BRACE:$0,CHAR_RIGHT_PARENTHESES:sf,CHAR_RIGHT_SQUARE_BRACKET:C0}=ps(),of=e=>e===uf||e===ms,af=e=>{e.isPrefix!==!0&&(e.depth=e.isGlobstar?1/0:1)},E0=(e,t)=>{let r=t||{},n=e.length-1,s=r.parts===!0||r.scanToEnd===!0,o=[],a=[],u=[],c=e,f=-1,p=0,d=0,w=!1,b=!1,h=!1,v=!1,W=!1,G=!1,Y=!1,H=!1,Z=!1,K=!1,Ie=0,qe,J,De={value:"",depth:0,isGlob:!1},Ye=()=>f>=n,C=()=>c.charCodeAt(f+1),Le=()=>(qe=J,c.charCodeAt(++f));for(;f<n;){J=Le();let at;if(J===ms){Y=De.backslashes=!0,J=Le(),J===va&&(G=!0);continue}if(G===!0||J===va){for(Ie++;Ye()!==!0&&(J=Le());){if(J===ms){Y=De.backslashes=!0,Le();continue}if(J===va){Ie++;continue}if(G!==!0&&J===Sa&&(J=Le())===Sa){if(w=De.isBrace=!0,h=De.isGlob=!0,K=!0,s===!0)continue;break}if(G!==!0&&J===S0){if(w=De.isBrace=!0,h=De.isGlob=!0,K=!0,s===!0)continue;break}if(J===$0&&(Ie--,Ie===0)){G=!1,w=De.isBrace=!0,K=!0;break}}if(s===!0)continue;break}if(J===uf){if(o.push(f),a.push(De),De={value:"",depth:0,isGlob:!1},K===!0)continue;if(qe===Sa&&f===p+1){p+=2;continue}d=f+1;continue}if(r.noext!==!0&&(J===v0||J===x0||J===xa||J===nf||J===Fa)===!0&&C()===$a){if(h=De.isGlob=!0,v=De.isExtglob=!0,K=!0,J===Fa&&f===p&&(Z=!0),s===!0){for(;Ye()!==!0&&(J=Le());){if(J===ms){Y=De.backslashes=!0,J=Le();continue}if(J===sf){h=De.isGlob=!0,K=!0;break}}continue}break}if(J===xa){if(qe===xa&&(W=De.isGlobstar=!0),h=De.isGlob=!0,K=!0,s===!0)continue;break}if(J===nf){if(h=De.isGlob=!0,K=!0,s===!0)continue;break}if(J===F0){for(;Ye()!==!0&&(at=Le());){if(at===ms){Y=De.backslashes=!0,Le();continue}if(at===C0){b=De.isBracket=!0,h=De.isGlob=!0,K=!0;break}}if(s===!0)continue;break}if(r.nonegate!==!0&&J===Fa&&f===p){H=De.negated=!0,p++;continue}if(r.noparen!==!0&&J===$a){if(h=De.isGlob=!0,s===!0){for(;Ye()!==!0&&(J=Le());){if(J===$a){Y=De.backslashes=!0,J=Le();continue}if(J===sf){K=!0;break}}continue}break}if(h===!0){if(K=!0,s===!0)continue;break}}r.noext===!0&&(v=!1,h=!1);let $e=c,dr="",S="";p>0&&(dr=c.slice(0,p),c=c.slice(p),d-=p),$e&&h===!0&&d>0?($e=c.slice(0,d),S=c.slice(d)):h===!0?($e="",S=c):$e=c,$e&&$e!==""&&$e!=="/"&&$e!==c&&of($e.charCodeAt($e.length-1))&&($e=$e.slice(0,-1)),r.unescape===!0&&(S&&(S=rf.removeBackslashes(S)),$e&&Y===!0&&($e=rf.removeBackslashes($e)));let F={prefix:dr,input:e,start:p,base:$e,glob:S,isBrace:w,isBracket:b,isGlob:h,isExtglob:v,isGlobstar:W,negated:H,negatedExtglob:Z};if(r.tokens===!0&&(F.maxDepth=0,of(J)||a.push(De),F.tokens=a),r.parts===!0||r.tokens===!0){let at;for(let de=0;de<o.length;de++){let zt=at?at+1:p,Ut=o[de],vt=e.slice(zt,Ut);r.tokens&&(de===0&&p!==0?(a[de].isPrefix=!0,a[de].value=dr):a[de].value=vt,af(a[de]),F.maxDepth+=a[de].depth),(de!==0||vt!=="")&&u.push(vt),at=Ut}if(at&&at+1<e.length){let de=e.slice(at+1);u.push(de),r.tokens&&(a[a.length-1].value=de,af(a[a.length-1]),F.maxDepth+=a[a.length-1].depth)}F.slashes=o,F.parts=u}return F};cf.exports=E0});var mf=ge((jE,pf)=>{"use strict";l();var wi=ps(),Tt=bi(),{MAX_LENGTH:xi,POSIX_REGEX_SOURCE:A0,REGEX_NON_SPECIAL_CHARS:T0,REGEX_SPECIAL_CHARS_BACKREF:B0,REPLACEMENTS:ff}=wi,L0=(e,t)=>{if(typeof t.expandRange=="function")return t.expandRange(...e,t);e.sort();let r=`[${e.join("-")}]`;try{new RegExp(r)}catch{return e.map(s=>Tt.escapeRegex(s)).join("..")}return r},wn=(e,t)=>`Missing ${e}: "${t}" - use "\\\\${t}" to match literal characters`,Ca=(e,t)=>{if(typeof e!="string")throw new TypeError("Expected a string");e=ff[e]||e;let r={...t},n=typeof r.maxLength=="number"?Math.min(xi,r.maxLength):xi,s=e.length;if(s>n)throw new SyntaxError(`Input length: ${s}, exceeds maximum allowed length: ${n}`);let o={type:"bos",value:"",output:r.prepend||""},a=[o],u=r.capture?"":"?:",c=Tt.isWindows(t),f=wi.globChars(c),p=wi.extglobChars(f),{DOT_LITERAL:d,PLUS_LITERAL:w,SLASH_LITERAL:b,ONE_CHAR:h,DOTS_SLASH:v,NO_DOT:W,NO_DOT_SLASH:G,NO_DOTS_SLASH:Y,QMARK:H,QMARK_NO_DOT:Z,STAR:K,START_ANCHOR:Ie}=f,qe=_=>`(${u}(?:(?!${Ie}${_.dot?v:d}).)*?)`,J=r.dot?"":W,De=r.dot?H:Z,Ye=r.bash===!0?qe(r):K;r.capture&&(Ye=`(${Ye})`),typeof r.noext=="boolean"&&(r.noextglob=r.noext);let C={input:e,index:-1,start:0,dot:r.dot===!0,consumed:"",output:"",prefix:"",backtrack:!1,negated:!1,brackets:0,braces:0,parens:0,quotes:0,globstar:!1,tokens:a};e=Tt.removePrefix(e,C),s=e.length;let Le=[],$e=[],dr=[],S=o,F,at=()=>C.index===s-1,de=C.peek=(_=1)=>e[C.index+_],zt=C.advance=()=>e[++C.index]||"",Ut=()=>e.slice(C.index+1),vt=(_="",Ce=0)=>{C.consumed+=_,C.index+=Ce},Cs=_=>{C.output+=_.output!=null?_.output:_.value,vt(_.value)},kd=()=>{let _=1;for(;de()==="!"&&(de(2)!=="("||de(3)==="?");)zt(),C.start++,_++;return _%2===0?!1:(C.negated=!0,C.start++,!0)},Es=_=>{C[_]++,dr.push(_)},Nr=_=>{C[_]--,dr.pop()},ae=_=>{if(S.type==="globstar"){let Ce=C.braces>0&&(_.type==="comma"||_.type==="brace"),B=_.extglob===!0||Le.length&&(_.type==="pipe"||_.type==="paren");_.type!=="slash"&&_.type!=="paren"&&!Ce&&!B&&(C.output=C.output.slice(0,-S.output.length),S.type="star",S.value="*",S.output=Ye,C.output+=S.output)}if(Le.length&&_.type!=="paren"&&(Le[Le.length-1].inner+=_.value),(_.value||_.output)&&Cs(_),S&&S.type==="text"&&_.type==="text"){S.value+=_.value,S.output=(S.output||"")+_.value;return}_.prev=S,a.push(_),S=_},As=(_,Ce)=>{let B={...p[Ce],conditions:1,inner:""};B.prev=S,B.parens=C.parens,B.output=C.output;let se=(r.capture?"(":"")+B.open;Es("parens"),ae({type:_,value:Ce,output:C.output?"":h}),ae({type:"paren",extglob:!0,value:zt(),output:se}),Le.push(B)},Pd=_=>{let Ce=_.close+(r.capture?")":""),B;if(_.type==="negate"){let se=Ye;if(_.inner&&_.inner.length>1&&_.inner.includes("/")&&(se=qe(r)),(se!==Ye||at()||/^\)+$/.test(Ut()))&&(Ce=_.close=`)$))${se}`),_.inner.includes("*")&&(B=Ut())&&/^\.[^\\/.]+$/.test(B)){let Oe=Ca(B,{...t,fastpaths:!1}).output;Ce=_.close=`)${Oe})${se})`}_.prev.type==="bos"&&(C.negatedExtglob=!0)}ae({type:"paren",extglob:!0,value:F,output:Ce}),Nr("parens")};if(r.fastpaths!==!1&&!/(^[*!]|[/()[\]{}"])/.test(e)){let _=!1,Ce=e.replace(B0,(B,se,Oe,ut,Ke,ao)=>ut==="\\"?(_=!0,B):ut==="?"?se?se+ut+(Ke?H.repeat(Ke.length):""):ao===0?De+(Ke?H.repeat(Ke.length):""):H.repeat(Oe.length):ut==="."?d.repeat(Oe.length):ut==="*"?se?se+ut+(Ke?Ye:""):Ye:se?B:`\\${B}`);return _===!0&&(r.unescape===!0?Ce=Ce.replace(/\\/g,""):Ce=Ce.replace(/\\+/g,B=>B.length%2===0?"\\\\":B?"\\":"")),Ce===e&&r.contains===!0?(C.output=e,C):(C.output=Tt.wrapOutput(Ce,C,t),C)}for(;!at();){if(F=zt(),F==="\0")continue;if(F==="\\"){let B=de();if(B==="/"&&r.bash!==!0||B==="."||B===";")continue;if(!B){F+="\\",ae({type:"text",value:F});continue}let se=/^\\+/.exec(Ut()),Oe=0;if(se&&se[0].length>2&&(Oe=se[0].length,C.index+=Oe,Oe%2!==0&&(F+="\\")),r.unescape===!0?F=zt():F+=zt(),C.brackets===0){ae({type:"text",value:F});continue}}if(C.brackets>0&&(F!=="]"||S.value==="["||S.value==="[^")){if(r.posix!==!1&&F===":"){let B=S.value.slice(1);if(B.includes("[")&&(S.posix=!0,B.includes(":"))){let se=S.value.lastIndexOf("["),Oe=S.value.slice(0,se),ut=S.value.slice(se+2),Ke=A0[ut];if(Ke){S.value=Oe+Ke,C.backtrack=!0,zt(),!o.output&&a.indexOf(S)===1&&(o.output=h);continue}}}(F==="["&&de()!==":"||F==="-"&&de()==="]")&&(F=`\\${F}`),F==="]"&&(S.value==="["||S.value==="[^")&&(F=`\\${F}`),r.posix===!0&&F==="!"&&S.value==="["&&(F="^"),S.value+=F,Cs({value:F});continue}if(C.quotes===1&&F!=='"'){F=Tt.escapeRegex(F),S.value+=F,Cs({value:F});continue}if(F==='"'){C.quotes=C.quotes===1?0:1,r.keepQuotes===!0&&ae({type:"text",value:F});continue}if(F==="("){Es("parens"),ae({type:"paren",value:F});continue}if(F===")"){if(C.parens===0&&r.strictBrackets===!0)throw new SyntaxError(wn("opening","("));let B=Le[Le.length-1];if(B&&C.parens===B.parens+1){Pd(Le.pop());continue}ae({type:"paren",value:F,output:C.parens?")":"\\)"}),Nr("parens");continue}if(F==="["){if(r.nobracket===!0||!Ut().includes("]")){if(r.nobracket!==!0&&r.strictBrackets===!0)throw new SyntaxError(wn("closing","]"));F=`\\${F}`}else Es("brackets");ae({type:"bracket",value:F});continue}if(F==="]"){if(r.nobracket===!0||S&&S.type==="bracket"&&S.value.length===1){ae({type:"text",value:F,output:`\\${F}`});continue}if(C.brackets===0){if(r.strictBrackets===!0)throw new SyntaxError(wn("opening","["));ae({type:"text",value:F,output:`\\${F}`});continue}Nr("brackets");let B=S.value.slice(1);if(S.posix!==!0&&B[0]==="^"&&!B.includes("/")&&(F=`/${F}`),S.value+=F,Cs({value:F}),r.literalBrackets===!1||Tt.hasRegexChars(B))continue;let se=Tt.escapeRegex(S.value);if(C.output=C.output.slice(0,-S.value.length),r.literalBrackets===!0){C.output+=se,S.value=se;continue}S.value=`(${u}${se}|${S.value})`,C.output+=S.value;continue}if(F==="{"&&r.nobrace!==!0){Es("braces");let B={type:"brace",value:F,output:"(",outputIndex:C.output.length,tokensIndex:C.tokens.length};$e.push(B),ae(B);continue}if(F==="}"){let B=$e[$e.length-1];if(r.nobrace===!0||!B){ae({type:"text",value:F,output:F});continue}let se=")";if(B.dots===!0){let Oe=a.slice(),ut=[];for(let Ke=Oe.length-1;Ke>=0&&(a.pop(),Oe[Ke].type!=="brace");Ke--)Oe[Ke].type!=="dots"&&ut.unshift(Oe[Ke].value);se=L0(ut,r),C.backtrack=!0}if(B.comma!==!0&&B.dots!==!0){let Oe=C.output.slice(0,B.outputIndex),ut=C.tokens.slice(B.tokensIndex);B.value=B.output="\\{",F=se="\\}",C.output=Oe;for(let Ke of ut)C.output+=Ke.output||Ke.value}ae({type:"brace",value:F,output:se}),Nr("braces"),$e.pop();continue}if(F==="|"){Le.length>0&&Le[Le.length-1].conditions++,ae({type:"text",value:F});continue}if(F===","){let B=F,se=$e[$e.length-1];se&&dr[dr.length-1]==="braces"&&(se.comma=!0,B="|"),ae({type:"comma",value:F,output:B});continue}if(F==="/"){if(S.type==="dot"&&C.index===C.start+1){C.start=C.index+1,C.consumed="",C.output="",a.pop(),S=o;continue}ae({type:"slash",value:F,output:b});continue}if(F==="."){if(C.braces>0&&S.type==="dot"){S.value==="."&&(S.output=d);let B=$e[$e.length-1];S.type="dots",S.output+=F,S.value+=F,B.dots=!0;continue}if(C.braces+C.parens===0&&S.type!=="bos"&&S.type!=="slash"){ae({type:"text",value:F,output:d});continue}ae({type:"dot",value:F,output:d});continue}if(F==="?"){if(!(S&&S.value==="(")&&r.noextglob!==!0&&de()==="("&&de(2)!=="?"){As("qmark",F);continue}if(S&&S.type==="paren"){let se=de(),Oe=F;if(se==="<"&&!Tt.supportsLookbehinds())throw new Error("Node.js v10 or higher is required for regex lookbehinds");(S.value==="("&&!/[!=<:]/.test(se)||se==="<"&&!/<([!=]|\w+>)/.test(Ut()))&&(Oe=`\\${F}`),ae({type:"text",value:F,output:Oe});continue}if(r.dot!==!0&&(S.type==="slash"||S.type==="bos")){ae({type:"qmark",value:F,output:Z});continue}ae({type:"qmark",value:F,output:H});continue}if(F==="!"){if(r.noextglob!==!0&&de()==="("&&(de(2)!=="?"||!/[!=<:]/.test(de(3)))){As("negate",F);continue}if(r.nonegate!==!0&&C.index===0){kd();continue}}if(F==="+"){if(r.noextglob!==!0&&de()==="("&&de(2)!=="?"){As("plus",F);continue}if(S&&S.value==="("||r.regex===!1){ae({type:"plus",value:F,output:w});continue}if(S&&(S.type==="bracket"||S.type==="paren"||S.type==="brace")||C.parens>0){ae({type:"plus",value:F});continue}ae({type:"plus",value:w});continue}if(F==="@"){if(r.noextglob!==!0&&de()==="("&&de(2)!=="?"){ae({type:"at",extglob:!0,value:F,output:""});continue}ae({type:"text",value:F});continue}if(F!=="*"){(F==="$"||F==="^")&&(F=`\\${F}`);let B=T0.exec(Ut());B&&(F+=B[0],C.index+=B[0].length),ae({type:"text",value:F});continue}if(S&&(S.type==="globstar"||S.star===!0)){S.type="star",S.star=!0,S.value+=F,S.output=Ye,C.backtrack=!0,C.globstar=!0,vt(F);continue}let _=Ut();if(r.noextglob!==!0&&/^\([^?]/.test(_)){As("star",F);continue}if(S.type==="star"){if(r.noglobstar===!0){vt(F);continue}let B=S.prev,se=B.prev,Oe=B.type==="slash"||B.type==="bos",ut=se&&(se.type==="star"||se.type==="globstar");if(r.bash===!0&&(!Oe||_[0]&&_[0]!=="/")){ae({type:"star",value:F,output:""});continue}let Ke=C.braces>0&&(B.type==="comma"||B.type==="brace"),ao=Le.length&&(B.type==="pipe"||B.type==="paren");if(!Oe&&B.type!=="paren"&&!Ke&&!ao){ae({type:"star",value:F,output:""});continue}for(;_.slice(0,3)==="/**";){let Ts=e[C.index+4];if(Ts&&Ts!=="/")break;_=_.slice(3),vt("/**",3)}if(B.type==="bos"&&at()){S.type="globstar",S.value+=F,S.output=qe(r),C.output=S.output,C.globstar=!0,vt(F);continue}if(B.type==="slash"&&B.prev.type!=="bos"&&!ut&&at()){C.output=C.output.slice(0,-(B.output+S.output).length),B.output=`(?:${B.output}`,S.type="globstar",S.output=qe(r)+(r.strictSlashes?")":"|$)"),S.value+=F,C.globstar=!0,C.output+=B.output+S.output,vt(F);continue}if(B.type==="slash"&&B.prev.type!=="bos"&&_[0]==="/"){let Ts=_[1]!==void 0?"|$":"";C.output=C.output.slice(0,-(B.output+S.output).length),B.output=`(?:${B.output}`,S.type="globstar",S.output=`${qe(r)}${b}|${b}${Ts})`,S.value+=F,C.output+=B.output+S.output,C.globstar=!0,vt(F+zt()),ae({type:"slash",value:"/",output:""});continue}if(B.type==="bos"&&_[0]==="/"){S.type="globstar",S.value+=F,S.output=`(?:^|${b}|${qe(r)}${b})`,C.output=S.output,C.globstar=!0,vt(F+zt()),ae({type:"slash",value:"/",output:""});continue}C.output=C.output.slice(0,-S.output.length),S.type="globstar",S.output=qe(r),S.value+=F,C.output+=S.output,C.globstar=!0,vt(F);continue}let Ce={type:"star",value:F,output:Ye};if(r.bash===!0){Ce.output=".*?",(S.type==="bos"||S.type==="slash")&&(Ce.output=J+Ce.output),ae(Ce);continue}if(S&&(S.type==="bracket"||S.type==="paren")&&r.regex===!0){Ce.output=F,ae(Ce);continue}(C.index===C.start||S.type==="slash"||S.type==="dot")&&(S.type==="dot"?(C.output+=G,S.output+=G):r.dot===!0?(C.output+=Y,S.output+=Y):(C.output+=J,S.output+=J),de()!=="*"&&(C.output+=h,S.output+=h)),ae(Ce)}for(;C.brackets>0;){if(r.strictBrackets===!0)throw new SyntaxError(wn("closing","]"));C.output=Tt.escapeLast(C.output,"["),Nr("brackets")}for(;C.parens>0;){if(r.strictBrackets===!0)throw new SyntaxError(wn("closing",")"));C.output=Tt.escapeLast(C.output,"("),Nr("parens")}for(;C.braces>0;){if(r.strictBrackets===!0)throw new SyntaxError(wn("closing","}"));C.output=Tt.escapeLast(C.output,"{"),Nr("braces")}if(r.strictSlashes!==!0&&(S.type==="star"||S.type==="bracket")&&ae({type:"maybe_slash",value:"",output:`${b}?`}),C.backtrack===!0){C.output="";for(let _ of C.tokens)C.output+=_.output!=null?_.output:_.value,_.suffix&&(C.output+=_.suffix)}return C};Ca.fastpaths=(e,t)=>{let r={...t},n=typeof r.maxLength=="number"?Math.min(xi,r.maxLength):xi,s=e.length;if(s>n)throw new SyntaxError(`Input length: ${s}, exceeds maximum allowed length: ${n}`);e=ff[e]||e;let o=Tt.isWindows(t),{DOT_LITERAL:a,SLASH_LITERAL:u,ONE_CHAR:c,DOTS_SLASH:f,NO_DOT:p,NO_DOTS:d,NO_DOTS_SLASH:w,STAR:b,START_ANCHOR:h}=wi.globChars(o),v=r.dot?d:p,W=r.dot?w:p,G=r.capture?"":"?:",Y={negated:!1,prefix:""},H=r.bash===!0?".*?":b;r.capture&&(H=`(${H})`);let Z=J=>J.noglobstar===!0?H:`(${G}(?:(?!${h}${J.dot?f:a}).)*?)`,K=J=>{switch(J){case"*":return`${v}${c}${H}`;case".*":return`${a}${c}${H}`;case"*.*":return`${v}${H}${a}${c}${H}`;case"*/*":return`${v}${H}${u}${c}${W}${H}`;case"**":return v+Z(r);case"**/*":return`(?:${v}${Z(r)}${u})?${W}${c}${H}`;case"**/*.*":return`(?:${v}${Z(r)}${u})?${W}${H}${a}${c}${H}`;case"**/.*":return`(?:${v}${Z(r)}${u})?${a}${c}${H}`;default:{let De=/^(.*?)\.(\w+)$/.exec(J);if(!De)return;let Ye=K(De[1]);return Ye?Ye+a+De[2]:void 0}}},Ie=Tt.removePrefix(e,Y),qe=K(Ie);return qe&&r.strictSlashes!==!0&&(qe+=`${u}?`),qe};pf.exports=Ca});var gf=ge((ME,df)=>{"use strict";l();var R0=Xe("path"),N0=lf(),Ea=mf(),Aa=bi(),k0=ps(),P0=e=>e&&typeof e=="object"&&!Array.isArray(e),He=(e,t,r=!1)=>{if(Array.isArray(e)){let p=e.map(w=>He(w,t,r));return w=>{for(let b of p){let h=b(w);if(h)return h}return!1}}let n=P0(e)&&e.tokens&&e.input;if(e===""||typeof e!="string"&&!n)throw new TypeError("Expected pattern to be a non-empty string");let s=t||{},o=Aa.isWindows(t),a=n?He.compileRe(e,t):He.makeRe(e,t,!1,!0),u=a.state;delete a.state;let c=()=>!1;if(s.ignore){let p={...t,ignore:null,onMatch:null,onResult:null};c=He(s.ignore,p,r)}let f=(p,d=!1)=>{let{isMatch:w,match:b,output:h}=He.test(p,a,t,{glob:e,posix:o}),v={glob:e,state:u,regex:a,posix:o,input:p,output:h,match:b,isMatch:w};return typeof s.onResult=="function"&&s.onResult(v),w===!1?(v.isMatch=!1,d?v:!1):c(p)?(typeof s.onIgnore=="function"&&s.onIgnore(v),v.isMatch=!1,d?v:!1):(typeof s.onMatch=="function"&&s.onMatch(v),d?v:!0)};return r&&(f.state=u),f};He.test=(e,t,r,{glob:n,posix:s}={})=>{if(typeof e!="string")throw new TypeError("Expected input to be a string");if(e==="")return{isMatch:!1,output:""};let o=r||{},a=o.format||(s?Aa.toPosixSlashes:null),u=e===n,c=u&&a?a(e):e;return u===!1&&(c=a?a(e):e,u=c===n),(u===!1||o.capture===!0)&&(o.matchBase===!0||o.basename===!0?u=He.matchBase(e,t,r,s):u=t.exec(c)),{isMatch:!!u,match:u,output:c}};He.matchBase=(e,t,r,n=Aa.isWindows(r))=>(t instanceof RegExp?t:He.makeRe(t,r)).test(R0.basename(e));He.isMatch=(e,t,r)=>He(t,r)(e);He.parse=(e,t)=>Array.isArray(e)?e.map(r=>He.parse(r,t)):Ea(e,{...t,fastpaths:!1});He.scan=(e,t)=>N0(e,t);He.compileRe=(e,t,r=!1,n=!1)=>{if(r===!0)return e.output;let s=t||{},o=s.contains?"":"^",a=s.contains?"":"$",u=`${o}(?:${e.output})${a}`;e&&e.negated===!0&&(u=`^(?!${u}).*$`);let c=He.toRegex(u,t);return n===!0&&(c.state=e),c};He.makeRe=(e,t={},r=!1,n=!1)=>{if(!e||typeof e!="string")throw new TypeError("Expected a non-empty string");let s={negated:!1,fastpaths:!0};return t.fastpaths!==!1&&(e[0]==="."||e[0]==="*")&&(s.output=Ea.fastpaths(e,t)),s.output||(s=Ea(e,t)),He.compileRe(s,t,r,n)};He.toRegex=(e,t)=>{try{let r=t||{};return new RegExp(e,r.flags||(r.nocase?"i":""))}catch(r){if(t&&t.debug===!0)throw r;return/$^/}};He.constants=k0;df.exports=He});var yf=ge((GE,hf)=>{"use strict";l();hf.exports=gf()});var bf=ge((zE,Df)=>{l();Df.exports=function(e,t){if(typeof e!="string")throw new TypeError("expected path to be a string");if(e==="\\"||e==="/")return"/";var r=e.length;if(r<=1)return e;var n="";if(r>4&&e[3]==="\\"){var s=e[2];(s==="?"||s===".")&&e.slice(0,2)==="\\\\"&&(e=e.slice(2),n="//")}var o=e.split(/[/\\]+/);return t!==!1&&o[o.length-1]===""&&o.pop(),n+o.join("/")}});var Kr=ge((Ff,vf)=>{"use strict";l();Object.defineProperty(Ff,"__esModule",{value:!0});var Sf=yf(),O0=bf(),wf="!",_0={returnIndex:!1},I0=e=>Array.isArray(e)?e:[e],j0=(e,t)=>{if(typeof e=="function")return e;if(typeof e=="string"){let r=Sf(e,t);return n=>e===n||r(n)}return e instanceof RegExp?r=>e.test(r):r=>!1},xf=(e,t,r,n)=>{let s=Array.isArray(r),o=s?r[0]:r;if(!s&&typeof o!="string")throw new TypeError("anymatch: second argument must be a string: got "+Object.prototype.toString.call(o));let a=O0(o,!1);for(let c=0;c<t.length;c++){let f=t[c];if(f(a))return n?-1:!1}let u=s&&[a].concat(r.slice(1));for(let c=0;c<e.length;c++){let f=e[c];if(s?f(...u):f(a))return n?c:!0}return n?-1:!1},Ta=(e,t,r=_0)=>{if(e==null)throw new TypeError("anymatch: specify first argument");let n=typeof r=="boolean"?{returnIndex:r}:r,s=n.returnIndex||!1,o=I0(e),a=o.filter(c=>typeof c=="string"&&c.charAt(0)===wf).map(c=>c.slice(1)).map(c=>Sf(c,n)),u=o.filter(c=>typeof c!="string"||typeof c=="string"&&c.charAt(0)!==wf).map(c=>j0(c,n));return t==null?(c,f=!1)=>xf(u,a,c,typeof f=="boolean"?f:!1):xf(u,a,t,s)};Ta.default=Ta;vf.exports=Ta});var Cf=ge(Fi=>{l();Object.defineProperty(Fi,"__esModule",{value:!0});Fi.default=/((['"])(?:(?!\2|\\).|\\(?:\r\n|[\s\S]))*(\2)?|`(?:[^`\\$]|\\[\s\S]|\$(?!\{)|\$\{(?:[^{}]|\{[^}]*\}?)*\}?)*(`)?)|(\/\/.*)|(\/\*(?:[^*]|\*(?!\/))*(\*\/)?)|(\/(?!\*)(?:\[(?:(?![\]\\]).|\\.)*\]|(?![\/\]\\]).|\\.)+\/(?:(?!\s*(?:\b|[\u0080-\uFFFF$\\'"~({]|[+\-!](?!=)|\.?\d))|[gmiyus]{1,6}\b(?![\u0080-\uFFFF$\\]|\s*(?:[+\-*%&|^<>!=?({]|\/(?![\/*])))))|(0[xX][\da-fA-F]+|0[oO][0-7]+|0[bB][01]+|(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?)|((?!\d)(?:(?!\s)[$\w\u0080-\uFFFF]|\\u[\da-fA-F]{4}|\\u\{[\da-fA-F]+\})+)|(--|\+\+|&&|\|\||=>|\.{3}|(?:[+\-\/%&|^]|\*{1,2}|<{1,2}|>{1,3}|!=?|={1,2})=?|[?~.,:;[\](){}])|(\s+)|(^$|[\s\S])/g;Fi.matchToToken=function(e){var t={type:"invalid",value:e[0],closed:void 0};return e[1]?(t.type="string",t.closed=!!(e[3]||e[4])):e[5]?t.type="comment":e[6]?(t.type="comment",t.closed=!!e[7]):e[8]?t.type="regex":e[9]?t.type="number":e[10]?t.type="name":e[11]?t.type="punctuator":e[12]&&(t.type="whitespace"),t}});var Lf=ge(ds=>{"use strict";l();Object.defineProperty(ds,"__esModule",{value:!0});ds.isIdentifierChar=Bf;ds.isIdentifierName=U0;ds.isIdentifierStart=Tf;var La="\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC",Ef="\u200C\u200D\xB7\u0300-\u036F\u0387\u0483-\u0487\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u0669\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u06F0-\u06F9\u0711\u0730-\u074A\u07A6-\u07B0\u07C0-\u07C9\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0966-\u096F\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09E6-\u09EF\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A66-\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AE6-\u0AEF\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B66-\u0B6F\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0BE6-\u0BEF\u0C00-\u0C04\u0C3C\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C66-\u0C6F\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0CE6-\u0CEF\u0CF3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D66-\u0D6F\u0D81-\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0E50-\u0E59\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0ED0-\u0ED9\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1040-\u1049\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F-\u109D\u135D-\u135F\u1369-\u1371\u1712-\u1715\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u17E0-\u17E9\u180B-\u180D\u180F-\u1819\u18A9\u1920-\u192B\u1930-\u193B\u1946-\u194F\u19D0-\u19DA\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AB0-\u1ABD\u1ABF-\u1ACE\u1B00-\u1B04\u1B34-\u1B44\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BB0-\u1BB9\u1BE6-\u1BF3\u1C24-\u1C37\u1C40-\u1C49\u1C50-\u1C59\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DFF\u200C\u200D\u203F\u2040\u2054\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\u30FB\uA620-\uA629\uA66F\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA82C\uA880\uA881\uA8B4-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F1\uA8FF-\uA909\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9D0-\uA9D9\uA9E5\uA9F0-\uA9F9\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA50-\uAA59\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uABF0-\uABF9\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFF10-\uFF19\uFF3F\uFF65",G0=new RegExp("["+La+"]"),H0=new RegExp("["+La+Ef+"]");La=Ef=null;var Af=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,4026,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,757,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],z0=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,81,2,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,9,5351,0,7,14,13835,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,983,6,110,6,6,9,4759,9,787719,239];function Ba(e,t){let r=65536;for(let n=0,s=t.length;n<s;n+=2){if(r+=t[n],r>e)return!1;if(r+=t[n+1],r>=e)return!0}return!1}function Tf(e){return e<65?e===36:e<=90?!0:e<97?e===95:e<=122?!0:e<=65535?e>=170&&G0.test(String.fromCharCode(e)):Ba(e,Af)}function Bf(e){return e<48?e===36:e<58?!0:e<65?!1:e<=90?!0:e<97?e===95:e<=122?!0:e<=65535?e>=170&&H0.test(String.fromCharCode(e)):Ba(e,Af)||Ba(e,z0)}function U0(e){let t=!0;for(let r=0;r<e.length;r++){let n=e.charCodeAt(r);if((n&64512)===55296&&r+1<e.length){let s=e.charCodeAt(++r);(s&64512)===56320&&(n=65536+((n&1023)<<10)+(s&1023))}if(t){if(t=!1,!Tf(n))return!1}else if(!Bf(n))return!1}return!t}});var Pf=ge(Xr=>{"use strict";l();Object.defineProperty(Xr,"__esModule",{value:!0});Xr.isKeyword=X0;Xr.isReservedWord=Rf;Xr.isStrictBindOnlyReservedWord=kf;Xr.isStrictBindReservedWord=K0;Xr.isStrictReservedWord=Nf;var Ra={keyword:["break","case","catch","continue","debugger","default","do","else","finally","for","function","if","return","switch","throw","try","var","const","while","with","new","this","super","class","extends","export","import","null","true","false","in","instanceof","typeof","void","delete"],strict:["implements","interface","let","package","private","protected","public","static","yield"],strictBind:["eval","arguments"]},V0=new Set(Ra.keyword),J0=new Set(Ra.strict),Y0=new Set(Ra.strictBind);function Rf(e,t){return t&&e==="await"||e==="enum"}function Nf(e,t){return Rf(e,t)||J0.has(e)}function kf(e){return Y0.has(e)}function K0(e,t){return Nf(e,t)||kf(e)}function X0(e){return V0.has(e)}});var Of=ge(nr=>{"use strict";l();Object.defineProperty(nr,"__esModule",{value:!0});Object.defineProperty(nr,"isIdentifierChar",{enumerable:!0,get:function(){return Na.isIdentifierChar}});Object.defineProperty(nr,"isIdentifierName",{enumerable:!0,get:function(){return Na.isIdentifierName}});Object.defineProperty(nr,"isIdentifierStart",{enumerable:!0,get:function(){return Na.isIdentifierStart}});Object.defineProperty(nr,"isKeyword",{enumerable:!0,get:function(){return gs.isKeyword}});Object.defineProperty(nr,"isReservedWord",{enumerable:!0,get:function(){return gs.isReservedWord}});Object.defineProperty(nr,"isStrictBindOnlyReservedWord",{enumerable:!0,get:function(){return gs.isStrictBindOnlyReservedWord}});Object.defineProperty(nr,"isStrictBindReservedWord",{enumerable:!0,get:function(){return gs.isStrictBindReservedWord}});Object.defineProperty(nr,"isStrictReservedWord",{enumerable:!0,get:function(){return gs.isStrictReservedWord}});var Na=Lf(),gs=Pf()});var Pa=ge((f3,ka)=>{l();var _f=process.argv||[],vi=process.env,Z0=!("NO_COLOR"in vi||_f.includes("--no-color"))&&("FORCE_COLOR"in vi||_f.includes("--color")||process.platform==="win32"||Xe!=null&&Xe("tty").isatty(1)&&vi.TERM!=="dumb"||"CI"in vi),Q0=(e,t,r=e)=>n=>{let s=""+n,o=s.indexOf(t,e.length);return~o?e+ey(s,t,r,o)+t:e+s+t},ey=(e,t,r,n)=>{let s="",o=0;do s+=e.substring(o,n)+r,o=n+t.length,n=e.indexOf(t,o);while(~n);return s+e.substring(o)},If=(e=Z0)=>{let t=e?Q0:()=>String;return{isColorSupported:e,reset:t("\x1B[0m","\x1B[0m"),bold:t("\x1B[1m","\x1B[22m","\x1B[22m\x1B[1m"),dim:t("\x1B[2m","\x1B[22m","\x1B[22m\x1B[2m"),italic:t("\x1B[3m","\x1B[23m"),underline:t("\x1B[4m","\x1B[24m"),inverse:t("\x1B[7m","\x1B[27m"),hidden:t("\x1B[8m","\x1B[28m"),strikethrough:t("\x1B[9m","\x1B[29m"),black:t("\x1B[30m","\x1B[39m"),red:t("\x1B[31m","\x1B[39m"),green:t("\x1B[32m","\x1B[39m"),yellow:t("\x1B[33m","\x1B[39m"),blue:t("\x1B[34m","\x1B[39m"),magenta:t("\x1B[35m","\x1B[39m"),cyan:t("\x1B[36m","\x1B[39m"),white:t("\x1B[37m","\x1B[39m"),gray:t("\x1B[90m","\x1B[39m"),bgBlack:t("\x1B[40m","\x1B[49m"),bgRed:t("\x1B[41m","\x1B[49m"),bgGreen:t("\x1B[42m","\x1B[49m"),bgYellow:t("\x1B[43m","\x1B[49m"),bgBlue:t("\x1B[44m","\x1B[49m"),bgMagenta:t("\x1B[45m","\x1B[49m"),bgCyan:t("\x1B[46m","\x1B[49m"),bgWhite:t("\x1B[47m","\x1B[49m")}};ka.exports=If();ka.exports.createColors=If});var Wf=ge((d3,jf)=>{"use strict";l();var ty=/[|\\{}()[\]^$+*?.]/g;jf.exports=function(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(ty,"\\$&")}});var qf=ge((h3,Mf)=>{"use strict";l();Mf.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}});var Oa=ge((D3,Uf)=>{l();var Zr=qf(),zf={};for($i in Zr)Zr.hasOwnProperty($i)&&(zf[Zr[$i]]=$i);var $i,M=Uf.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(mt in M)if(M.hasOwnProperty(mt)){if(!("channels"in M[mt]))throw new Error("missing channels property: "+mt);if(!("labels"in M[mt]))throw new Error("missing channel labels property: "+mt);if(M[mt].labels.length!==M[mt].channels)throw new Error("channel and label counts mismatch: "+mt);Gf=M[mt].channels,Hf=M[mt].labels,delete M[mt].channels,delete M[mt].labels,Object.defineProperty(M[mt],"channels",{value:Gf}),Object.defineProperty(M[mt],"labels",{value:Hf})}var Gf,Hf,mt;M.rgb.hsl=function(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,s=Math.min(t,r,n),o=Math.max(t,r,n),a=o-s,u,c,f;return o===s?u=0:t===o?u=(r-n)/a:r===o?u=2+(n-t)/a:n===o&&(u=4+(t-r)/a),u=Math.min(u*60,360),u<0&&(u+=360),f=(s+o)/2,o===s?c=0:f<=.5?c=a/(o+s):c=a/(2-o-s),[u,c*100,f*100]};M.rgb.hsv=function(e){var t,r,n,s,o,a=e[0]/255,u=e[1]/255,c=e[2]/255,f=Math.max(a,u,c),p=f-Math.min(a,u,c),d=function(w){return(f-w)/6/p+1/2};return p===0?s=o=0:(o=p/f,t=d(a),r=d(u),n=d(c),a===f?s=n-r:u===f?s=1/3+t-n:c===f&&(s=2/3+r-t),s<0?s+=1:s>1&&(s-=1)),[s*360,o*100,f*100]};M.rgb.hwb=function(e){var t=e[0],r=e[1],n=e[2],s=M.rgb.hsl(e)[0],o=1/255*Math.min(t,Math.min(r,n));return n=1-1/255*Math.max(t,Math.max(r,n)),[s,o*100,n*100]};M.rgb.cmyk=function(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,s,o,a,u;return u=Math.min(1-t,1-r,1-n),s=(1-t-u)/(1-u)||0,o=(1-r-u)/(1-u)||0,a=(1-n-u)/(1-u)||0,[s*100,o*100,a*100,u*100]};function ry(e,t){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)+Math.pow(e[2]-t[2],2)}M.rgb.keyword=function(e){var t=zf[e];if(t)return t;var r=1/0,n;for(var s in Zr)if(Zr.hasOwnProperty(s)){var o=Zr[s],a=ry(e,o);a<r&&(r=a,n=s)}return n};M.keyword.rgb=function(e){return Zr[e]};M.rgb.xyz=function(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255;t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92,r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92,n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92;var s=t*.4124+r*.3576+n*.1805,o=t*.2126+r*.7152+n*.0722,a=t*.0193+r*.1192+n*.9505;return[s*100,o*100,a*100]};M.rgb.lab=function(e){var t=M.rgb.xyz(e),r=t[0],n=t[1],s=t[2],o,a,u;return r/=95.047,n/=100,s/=108.883,r=r>.008856?Math.pow(r,1/3):7.787*r+16/116,n=n>.008856?Math.pow(n,1/3):7.787*n+16/116,s=s>.008856?Math.pow(s,1/3):7.787*s+16/116,o=116*n-16,a=500*(r-n),u=200*(n-s),[o,a,u]};M.hsl.rgb=function(e){var t=e[0]/360,r=e[1]/100,n=e[2]/100,s,o,a,u,c;if(r===0)return c=n*255,[c,c,c];n<.5?o=n*(1+r):o=n+r-n*r,s=2*n-o,u=[0,0,0];for(var f=0;f<3;f++)a=t+1/3*-(f-1),a<0&&a++,a>1&&a--,6*a<1?c=s+(o-s)*6*a:2*a<1?c=o:3*a<2?c=s+(o-s)*(2/3-a)*6:c=s,u[f]=c*255;return u};M.hsl.hsv=function(e){var t=e[0],r=e[1]/100,n=e[2]/100,s=r,o=Math.max(n,.01),a,u;return n*=2,r*=n<=1?n:2-n,s*=o<=1?o:2-o,u=(n+r)/2,a=n===0?2*s/(o+s):2*r/(n+r),[t,a*100,u*100]};M.hsv.rgb=function(e){var t=e[0]/60,r=e[1]/100,n=e[2]/100,s=Math.floor(t)%6,o=t-Math.floor(t),a=255*n*(1-r),u=255*n*(1-r*o),c=255*n*(1-r*(1-o));switch(n*=255,s){case 0:return[n,c,a];case 1:return[u,n,a];case 2:return[a,n,c];case 3:return[a,u,n];case 4:return[c,a,n];case 5:return[n,a,u]}};M.hsv.hsl=function(e){var t=e[0],r=e[1]/100,n=e[2]/100,s=Math.max(n,.01),o,a,u;return u=(2-r)*n,o=(2-r)*s,a=r*s,a/=o<=1?o:2-o,a=a||0,u/=2,[t,a*100,u*100]};M.hwb.rgb=function(e){var t=e[0]/360,r=e[1]/100,n=e[2]/100,s=r+n,o,a,u,c;s>1&&(r/=s,n/=s),o=Math.floor(6*t),a=1-n,u=6*t-o,o&1&&(u=1-u),c=r+u*(a-r);var f,p,d;switch(o){default:case 6:case 0:f=a,p=c,d=r;break;case 1:f=c,p=a,d=r;break;case 2:f=r,p=a,d=c;break;case 3:f=r,p=c,d=a;break;case 4:f=c,p=r,d=a;break;case 5:f=a,p=r,d=c;break}return[f*255,p*255,d*255]};M.cmyk.rgb=function(e){var t=e[0]/100,r=e[1]/100,n=e[2]/100,s=e[3]/100,o,a,u;return o=1-Math.min(1,t*(1-s)+s),a=1-Math.min(1,r*(1-s)+s),u=1-Math.min(1,n*(1-s)+s),[o*255,a*255,u*255]};M.xyz.rgb=function(e){var t=e[0]/100,r=e[1]/100,n=e[2]/100,s,o,a;return s=t*3.2406+r*-1.5372+n*-.4986,o=t*-.9689+r*1.8758+n*.0415,a=t*.0557+r*-.204+n*1.057,s=s>.0031308?1.055*Math.pow(s,1/2.4)-.055:s*12.92,o=o>.0031308?1.055*Math.pow(o,1/2.4)-.055:o*12.92,a=a>.0031308?1.055*Math.pow(a,1/2.4)-.055:a*12.92,s=Math.min(Math.max(0,s),1),o=Math.min(Math.max(0,o),1),a=Math.min(Math.max(0,a),1),[s*255,o*255,a*255]};M.xyz.lab=function(e){var t=e[0],r=e[1],n=e[2],s,o,a;return t/=95.047,r/=100,n/=108.883,t=t>.008856?Math.pow(t,1/3):7.787*t+16/116,r=r>.008856?Math.pow(r,1/3):7.787*r+16/116,n=n>.008856?Math.pow(n,1/3):7.787*n+16/116,s=116*r-16,o=500*(t-r),a=200*(r-n),[s,o,a]};M.lab.xyz=function(e){var t=e[0],r=e[1],n=e[2],s,o,a;o=(t+16)/116,s=r/500+o,a=o-n/200;var u=Math.pow(o,3),c=Math.pow(s,3),f=Math.pow(a,3);return o=u>.008856?u:(o-16/116)/7.787,s=c>.008856?c:(s-16/116)/7.787,a=f>.008856?f:(a-16/116)/7.787,s*=95.047,o*=100,a*=108.883,[s,o,a]};M.lab.lch=function(e){var t=e[0],r=e[1],n=e[2],s,o,a;return s=Math.atan2(n,r),o=s*360/2/Math.PI,o<0&&(o+=360),a=Math.sqrt(r*r+n*n),[t,a,o]};M.lch.lab=function(e){var t=e[0],r=e[1],n=e[2],s,o,a;return a=n/360*2*Math.PI,s=r*Math.cos(a),o=r*Math.sin(a),[t,s,o]};M.rgb.ansi16=function(e){var t=e[0],r=e[1],n=e[2],s=1 in arguments?arguments[1]:M.rgb.hsv(e)[2];if(s=Math.round(s/50),s===0)return 30;var o=30+(Math.round(n/255)<<2|Math.round(r/255)<<1|Math.round(t/255));return s===2&&(o+=60),o};M.hsv.ansi16=function(e){return M.rgb.ansi16(M.hsv.rgb(e),e[2])};M.rgb.ansi256=function(e){var t=e[0],r=e[1],n=e[2];if(t===r&&r===n)return t<8?16:t>248?231:Math.round((t-8)/247*24)+232;var s=16+36*Math.round(t/255*5)+6*Math.round(r/255*5)+Math.round(n/255*5);return s};M.ansi16.rgb=function(e){var t=e%10;if(t===0||t===7)return e>50&&(t+=3.5),t=t/10.5*255,[t,t,t];var r=(~~(e>50)+1)*.5,n=(t&1)*r*255,s=(t>>1&1)*r*255,o=(t>>2&1)*r*255;return[n,s,o]};M.ansi256.rgb=function(e){if(e>=232){var t=(e-232)*10+8;return[t,t,t]}e-=16;var r,n=Math.floor(e/36)/5*255,s=Math.floor((r=e%36)/6)/5*255,o=r%6/5*255;return[n,s,o]};M.rgb.hex=function(e){var t=((Math.round(e[0])&255)<<16)+((Math.round(e[1])&255)<<8)+(Math.round(e[2])&255),r=t.toString(16).toUpperCase();return"000000".substring(r.length)+r};M.hex.rgb=function(e){var t=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!t)return[0,0,0];var r=t[0];t[0].length===3&&(r=r.split("").map(function(u){return u+u}).join(""));var n=parseInt(r,16),s=n>>16&255,o=n>>8&255,a=n&255;return[s,o,a]};M.rgb.hcg=function(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,s=Math.max(Math.max(t,r),n),o=Math.min(Math.min(t,r),n),a=s-o,u,c;return a<1?u=o/(1-a):u=0,a<=0?c=0:s===t?c=(r-n)/a%6:s===r?c=2+(n-t)/a:c=4+(t-r)/a+4,c/=6,c%=1,[c*360,a*100,u*100]};M.hsl.hcg=function(e){var t=e[1]/100,r=e[2]/100,n=1,s=0;return r<.5?n=2*t*r:n=2*t*(1-r),n<1&&(s=(r-.5*n)/(1-n)),[e[0],n*100,s*100]};M.hsv.hcg=function(e){var t=e[1]/100,r=e[2]/100,n=t*r,s=0;return n<1&&(s=(r-n)/(1-n)),[e[0],n*100,s*100]};M.hcg.rgb=function(e){var t=e[0]/360,r=e[1]/100,n=e[2]/100;if(r===0)return[n*255,n*255,n*255];var s=[0,0,0],o=t%1*6,a=o%1,u=1-a,c=0;switch(Math.floor(o)){case 0:s[0]=1,s[1]=a,s[2]=0;break;case 1:s[0]=u,s[1]=1,s[2]=0;break;case 2:s[0]=0,s[1]=1,s[2]=a;break;case 3:s[0]=0,s[1]=u,s[2]=1;break;case 4:s[0]=a,s[1]=0,s[2]=1;break;default:s[0]=1,s[1]=0,s[2]=u}return c=(1-r)*n,[(r*s[0]+c)*255,(r*s[1]+c)*255,(r*s[2]+c)*255]};M.hcg.hsv=function(e){var t=e[1]/100,r=e[2]/100,n=t+r*(1-t),s=0;return n>0&&(s=t/n),[e[0],s*100,n*100]};M.hcg.hsl=function(e){var t=e[1]/100,r=e[2]/100,n=r*(1-t)+.5*t,s=0;return n>0&&n<.5?s=t/(2*n):n>=.5&&n<1&&(s=t/(2*(1-n))),[e[0],s*100,n*100]};M.hcg.hwb=function(e){var t=e[1]/100,r=e[2]/100,n=t+r*(1-t);return[e[0],(n-t)*100,(1-n)*100]};M.hwb.hcg=function(e){var t=e[1]/100,r=e[2]/100,n=1-r,s=n-t,o=0;return s<1&&(o=(n-s)/(1-s)),[e[0],s*100,o*100]};M.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]};M.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]};M.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]};M.gray.hsl=M.gray.hsv=function(e){return[0,0,e[0]]};M.gray.hwb=function(e){return[0,100,e[0]]};M.gray.cmyk=function(e){return[0,0,0,e[0]]};M.gray.lab=function(e){return[e[0],0,0]};M.gray.hex=function(e){var t=Math.round(e[0]/100*255)&255,r=(t<<16)+(t<<8)+t,n=r.toString(16).toUpperCase();return"000000".substring(n.length)+n};M.rgb.gray=function(e){var t=(e[0]+e[1]+e[2])/3;return[t/255*100]}});var Jf=ge((w3,Vf)=>{l();var Ci=Oa();function ny(){for(var e={},t=Object.keys(Ci),r=t.length,n=0;n<r;n++)e[t[n]]={distance:-1,parent:null};return e}function sy(e){var t=ny(),r=[e];for(t[e].distance=0;r.length;)for(var n=r.pop(),s=Object.keys(Ci[n]),o=s.length,a=0;a<o;a++){var u=s[a],c=t[u];c.distance===-1&&(c.distance=t[n].distance+1,c.parent=n,r.unshift(u))}return t}function iy(e,t){return function(r){return t(e(r))}}function oy(e,t){for(var r=[t[e].parent,e],n=Ci[t[e].parent][e],s=t[e].parent;t[s].parent;)r.unshift(t[s].parent),n=iy(Ci[t[s].parent][s],n),s=t[s].parent;return n.conversion=r,n}Vf.exports=function(e){for(var t=sy(e),r={},n=Object.keys(t),s=n.length,o=0;o<s;o++){var a=n[o],u=t[a];u.parent!==null&&(r[a]=oy(a,t))}return r}});var Kf=ge((S3,Yf)=>{l();var _a=Oa(),ay=Jf(),xn={},uy=Object.keys(_a);function cy(e){var t=function(r){return r==null?r:(arguments.length>1&&(r=Array.prototype.slice.call(arguments)),e(r))};return"conversion"in e&&(t.conversion=e.conversion),t}function ly(e){var t=function(r){if(r==null)return r;arguments.length>1&&(r=Array.prototype.slice.call(arguments));var n=e(r);if(typeof n=="object")for(var s=n.length,o=0;o<s;o++)n[o]=Math.round(n[o]);return n};return"conversion"in e&&(t.conversion=e.conversion),t}uy.forEach(function(e){xn[e]={},Object.defineProperty(xn[e],"channels",{value:_a[e].channels}),Object.defineProperty(xn[e],"labels",{value:_a[e].labels});var t=ay(e),r=Object.keys(t);r.forEach(function(n){var s=t[n];xn[e][n]=ly(s),xn[e][n].raw=cy(s)})});Yf.exports=xn});var Zf=ge((v3,Xf)=>{"use strict";l();var Sn=Kf(),Ei=(e,t)=>function(){return`\x1B[${e.apply(Sn,arguments)+t}m`},Ai=(e,t)=>function(){let r=e.apply(Sn,arguments);return`\x1B[${38+t};5;${r}m`},Ti=(e,t)=>function(){let r=e.apply(Sn,arguments);return`\x1B[${38+t};2;${r[0]};${r[1]};${r[2]}m`};function fy(){let e=new Map,t={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],gray:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};t.color.grey=t.color.gray;for(let s of Object.keys(t)){let o=t[s];for(let a of Object.keys(o)){let u=o[a];t[a]={open:`\x1B[${u[0]}m`,close:`\x1B[${u[1]}m`},o[a]=t[a],e.set(u[0],u[1])}Object.defineProperty(t,s,{value:o,enumerable:!1}),Object.defineProperty(t,"codes",{value:e,enumerable:!1})}let r=s=>s,n=(s,o,a)=>[s,o,a];t.color.close="\x1B[39m",t.bgColor.close="\x1B[49m",t.color.ansi={ansi:Ei(r,0)},t.color.ansi256={ansi256:Ai(r,0)},t.color.ansi16m={rgb:Ti(n,0)},t.bgColor.ansi={ansi:Ei(r,10)},t.bgColor.ansi256={ansi256:Ai(r,10)},t.bgColor.ansi16m={rgb:Ti(n,10)};for(let s of Object.keys(Sn)){if(typeof Sn[s]!="object")continue;let o=Sn[s];s==="ansi16"&&(s="ansi"),"ansi16"in o&&(t.color.ansi[s]=Ei(o.ansi16,0),t.bgColor.ansi[s]=Ei(o.ansi16,10)),"ansi256"in o&&(t.color.ansi256[s]=Ai(o.ansi256,0),t.bgColor.ansi256[s]=Ai(o.ansi256,10)),"rgb"in o&&(t.color.ansi16m[s]=Ti(o.rgb,0),t.bgColor.ansi16m[s]=Ti(o.rgb,10))}return t}Object.defineProperty(Xf,"exports",{enumerable:!0,get:fy})});var ep=ge((C3,Qf)=>{"use strict";l();Qf.exports=(e,t)=>{t=t||process.argv;let r=e.startsWith("-")?"":e.length===1?"-":"--",n=t.indexOf(r+e),s=t.indexOf("--");return n!==-1&&(s===-1?!0:n<s)}});var rp=ge((A3,tp)=>{"use strict";l();var py=Xe("os"),qt=ep(),ot=process.env,Fn;qt("no-color")||qt("no-colors")||qt("color=false")?Fn=!1:(qt("color")||qt("colors")||qt("color=true")||qt("color=always"))&&(Fn=!0);"FORCE_COLOR"in ot&&(Fn=ot.FORCE_COLOR.length===0||parseInt(ot.FORCE_COLOR,10)!==0);function my(e){return e===0?!1:{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}function dy(e){if(Fn===!1)return 0;if(qt("color=16m")||qt("color=full")||qt("color=truecolor"))return 3;if(qt("color=256"))return 2;if(e&&!e.isTTY&&Fn!==!0)return 0;let t=Fn?1:0;if(process.platform==="win32"){let r=py.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(r[0])>=10&&Number(r[2])>=10586?Number(r[2])>=14931?3:2:1}if("CI"in ot)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(r=>r in ot)||ot.CI_NAME==="codeship"?1:t;if("TEAMCITY_VERSION"in ot)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(ot.TEAMCITY_VERSION)?1:0;if(ot.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in ot){let r=parseInt((ot.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(ot.TERM_PROGRAM){case"iTerm.app":return r>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(ot.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(ot.TERM)||"COLORTERM"in ot?1:(ot.TERM==="dumb",t)}function Ia(e){let t=dy(e);return my(t)}tp.exports={supportsColor:Ia,stdout:Ia(process.stdout),stderr:Ia(process.stderr)}});var ap=ge((B3,op)=>{"use strict";l();var gy=/(?:\\(u[a-f\d]{4}|x[a-f\d]{2}|.))|(?:\{(~)?(\w+(?:\([^)]*\))?(?:\.\w+(?:\([^)]*\))?)*)(?:[ \t]|(?=\r?\n)))|(\})|((?:.|[\r\n\f])+?)/gi,np=/(?:^|\.)(\w+)(?:\(([^)]*)\))?/g,hy=/^(['"])((?:\\.|(?!\1)[^\\])*)\1$/,yy=/\\(u[a-f\d]{4}|x[a-f\d]{2}|.)|([^\\])/gi,Dy=new Map([["n",`
`],["r","\r"],["t","	"],["b","\b"],["f","\f"],["v","\v"],["0","\0"],["\\","\\"],["e","\x1B"],["a","\x07"]]);function ip(e){return e[0]==="u"&&e.length===5||e[0]==="x"&&e.length===3?String.fromCharCode(parseInt(e.slice(1),16)):Dy.get(e)||e}function by(e,t){let r=[],n=t.trim().split(/\s*,\s*/g),s;for(let o of n)if(!isNaN(o))r.push(Number(o));else if(s=o.match(hy))r.push(s[2].replace(yy,(a,u,c)=>u?ip(u):c));else throw new Error(`Invalid Chalk template style argument: ${o} (in style '${e}')`);return r}function wy(e){np.lastIndex=0;let t=[],r;for(;(r=np.exec(e))!==null;){let n=r[1];if(r[2]){let s=by(n,r[2]);t.push([n].concat(s))}else t.push([n])}return t}function sp(e,t){let r={};for(let s of t)for(let o of s.styles)r[o[0]]=s.inverse?null:o.slice(1);let n=e;for(let s of Object.keys(r))if(Array.isArray(r[s])){if(!(s in n))throw new Error(`Unknown Chalk style: ${s}`);r[s].length>0?n=n[s].apply(n,r[s]):n=n[s]}return n}op.exports=(e,t)=>{let r=[],n=[],s=[];if(t.replace(gy,(o,a,u,c,f,p)=>{if(a)s.push(ip(a));else if(c){let d=s.join("");s=[],n.push(r.length===0?d:sp(e,r)(d)),r.push({inverse:u,styles:wy(c)})}else if(f){if(r.length===0)throw new Error("Found extraneous } in Chalk template literal");n.push(sp(e,r)(s.join(""))),s=[],r.pop()}else s.push(p)}),n.push(s.join("")),r.length>0){let o=`Chalk template literal is missing ${r.length} closing bracket${r.length===1?"":"s"} (\`}\`)`;throw new Error(o)}return n.join("")}});var pp=ge((R3,ys)=>{"use strict";l();var Wa=Wf(),Je=Zf(),ja=rp().stdout,xy=ap(),cp=process.platform==="win32"&&!(process.env.TERM||"").toLowerCase().startsWith("xterm"),lp=["ansi","ansi","ansi256","ansi16m"],fp=new Set(["gray"]),vn=Object.create(null);function up(e,t){t=t||{};let r=ja?ja.level:0;e.level=t.level===void 0?r:t.level,e.enabled="enabled"in t?t.enabled:e.level>0}function hs(e){if(!this||!(this instanceof hs)||this.template){let t={};return up(t,e),t.template=function(){let r=[].slice.call(arguments);return vy.apply(null,[t.template].concat(r))},Object.setPrototypeOf(t,hs.prototype),Object.setPrototypeOf(t.template,t),t.template.constructor=hs,t.template}up(this,e)}cp&&(Je.blue.open="\x1B[94m");for(let e of Object.keys(Je))Je[e].closeRe=new RegExp(Wa(Je[e].close),"g"),vn[e]={get(){let t=Je[e];return Bi.call(this,this._styles?this._styles.concat(t):[t],this._empty,e)}};vn.visible={get(){return Bi.call(this,this._styles||[],!0,"visible")}};Je.color.closeRe=new RegExp(Wa(Je.color.close),"g");for(let e of Object.keys(Je.color.ansi))fp.has(e)||(vn[e]={get(){let t=this.level;return function(){let n={open:Je.color[lp[t]][e].apply(null,arguments),close:Je.color.close,closeRe:Je.color.closeRe};return Bi.call(this,this._styles?this._styles.concat(n):[n],this._empty,e)}}});Je.bgColor.closeRe=new RegExp(Wa(Je.bgColor.close),"g");for(let e of Object.keys(Je.bgColor.ansi)){if(fp.has(e))continue;let t="bg"+e[0].toUpperCase()+e.slice(1);vn[t]={get(){let r=this.level;return function(){let s={open:Je.bgColor[lp[r]][e].apply(null,arguments),close:Je.bgColor.close,closeRe:Je.bgColor.closeRe};return Bi.call(this,this._styles?this._styles.concat(s):[s],this._empty,e)}}}}var Sy=Object.defineProperties(()=>{},vn);function Bi(e,t,r){let n=function(){return Fy.apply(n,arguments)};n._styles=e,n._empty=t;let s=this;return Object.defineProperty(n,"level",{enumerable:!0,get(){return s.level},set(o){s.level=o}}),Object.defineProperty(n,"enabled",{enumerable:!0,get(){return s.enabled},set(o){s.enabled=o}}),n.hasGrey=this.hasGrey||r==="gray"||r==="grey",n.__proto__=Sy,n}function Fy(){let e=arguments,t=e.length,r=String(arguments[0]);if(t===0)return"";if(t>1)for(let s=1;s<t;s++)r+=" "+e[s];if(!this.enabled||this.level<=0||!r)return this._empty?"":r;let n=Je.dim.open;cp&&this.hasGrey&&(Je.dim.open="");for(let s of this._styles.slice().reverse())r=s.open+r.replace(s.closeRe,s.open)+s.close,r=r.replace(/\r?\n/g,`${s.close}$&${s.open}`);return Je.dim.open=n,r}function vy(e,t){if(!Array.isArray(t))return[].slice.call(arguments,1).join(" ");let r=[].slice.call(arguments,2),n=[t.raw[0]];for(let s=1;s<t.length;s++)n.push(String(r[s-1]).replace(/[{}\\]/g,"\\$&")),n.push(String(t.raw[s]));return xy(e,n.join(""))}Object.defineProperties(hs.prototype,vn);ys.exports=hs();ys.exports.supportsColor=ja;ys.exports.default=ys.exports});var wp=ge(Ds=>{"use strict";l();Object.defineProperty(Ds,"__esModule",{value:!0});Ds.default=Ry;Ds.shouldHighlight=bp;var mp=Cf(),dp=Of(),qa=$y(Pa(),!0);function hp(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,r=new WeakMap;return(hp=function(n){return n?r:t})(e)}function $y(e,t){if(!t&&e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var r=hp(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(o!=="default"&&{}.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}var yp=typeof process=="object"&&(process.env.FORCE_COLOR==="0"||process.env.FORCE_COLOR==="false")?(0,qa.createColors)(!1):qa.default,gp=(e,t)=>r=>e(t(r)),Cy=new Set(["as","async","from","get","of","set"]);function Ey(e){return{keyword:e.cyan,capitalized:e.yellow,jsxIdentifier:e.yellow,punctuator:e.yellow,number:e.magenta,string:e.green,regex:e.magenta,comment:e.gray,invalid:gp(gp(e.white,e.bgRed),e.bold)}}var Ay=/\r\n|[\n\r\u2028\u2029]/,Ty=/^[()[\]{}]$/,Dp;{let e=/^[a-z][\w-]*$/i,t=function(r,n,s){if(r.type==="name"){if((0,dp.isKeyword)(r.value)||(0,dp.isStrictReservedWord)(r.value,!0)||Cy.has(r.value))return"keyword";if(e.test(r.value)&&(s[n-1]==="<"||s.slice(n-2,n)==="</"))return"jsxIdentifier";if(r.value[0]!==r.value[0].toLowerCase())return"capitalized"}return r.type==="punctuator"&&Ty.test(r.value)?"bracket":r.type==="invalid"&&(r.value==="@"||r.value==="#")?"punctuator":r.type};Dp=function*(r){let n;for(;n=mp.default.exec(r);){let s=mp.matchToToken(n);yield{type:t(s,n.index,r),value:s.value}}}}function By(e,t){let r="";for(let{type:n,value:s}of Dp(t)){let o=e[n];o?r+=s.split(Ay).map(a=>o(a)).join(`
`):r+=s}return r}function bp(e){return yp.isColorSupported||e.forceColor}var Ma;function Ly(e){if(e){var t;return(t=Ma)!=null||(Ma=(0,qa.createColors)(!0)),Ma}return yp}function Ry(e,t={}){if(e!==""&&bp(t)){let r=Ey(Ly(t.forceColor));return By(r,e)}else return e}{let e,t;Ds.getChalk=({forceColor:r})=>{var n;if((n=e)!=null||(e=pp()),r){var s;return(s=t)!=null||(t=new e.constructor({enabled:!0,level:1})),t}return e}}});var Ep=ge(Li=>{"use strict";l();Object.defineProperty(Li,"__esModule",{value:!0});Li.codeFrameColumns=Cp;Li.default=Iy;var xp=wp(),Ha=Ny(Pa(),!0);function $p(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,r=new WeakMap;return($p=function(n){return n?r:t})(e)}function Ny(e,t){if(!t&&e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var r=$p(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(o!=="default"&&{}.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}var ky=typeof process=="object"&&(process.env.FORCE_COLOR==="0"||process.env.FORCE_COLOR==="false")?(0,Ha.createColors)(!1):Ha.default,Sp=(e,t)=>r=>e(t(r)),Ga;function Py(e){if(e){var t;return(t=Ga)!=null||(Ga=(0,Ha.createColors)(!0)),Ga}return ky}var Fp=!1;function Oy(e){return{gutter:e.gray,marker:Sp(e.red,e.bold),message:Sp(e.red,e.bold)}}var vp=/\r\n|[\n\r\u2028\u2029]/;function _y(e,t,r){let n=Object.assign({column:0,line:-1},e.start),s=Object.assign({},n,e.end),{linesAbove:o=2,linesBelow:a=3}=r||{},u=n.line,c=n.column,f=s.line,p=s.column,d=Math.max(u-(o+1),0),w=Math.min(t.length,f+a);u===-1&&(d=0),f===-1&&(w=t.length);let b=f-u,h={};if(b)for(let v=0;v<=b;v++){let W=v+u;if(!c)h[W]=!0;else if(v===0){let G=t[W-1].length;h[W]=[c,G-c+1]}else if(v===b)h[W]=[0,p];else{let G=t[W-v].length;h[W]=[0,G]}}else c===p?c?h[u]=[c,0]:h[u]=!0:h[u]=[c,p-c];return{start:d,end:w,markerLines:h}}function Cp(e,t,r={}){let n=(r.highlightCode||r.forceColor)&&(0,xp.shouldHighlight)(r),s=Py(r.forceColor),o=Oy(s),a=(v,W)=>n?v(W):W,u=e.split(vp),{start:c,end:f,markerLines:p}=_y(t,u,r),d=t.start&&typeof t.start.column=="number",w=String(f).length,h=(n?(0,xp.default)(e,r):e).split(vp,f).slice(c,f).map((v,W)=>{let G=c+1+W,H=` ${` ${G}`.slice(-w)} |`,Z=p[G],K=!p[G+1];if(Z){let Ie="";if(Array.isArray(Z)){let qe=v.slice(0,Math.max(Z[0]-1,0)).replace(/[^\t]/g," "),J=Z[1]||1;Ie=[`
 `,a(o.gutter,H.replace(/\d/g," "))," ",qe,a(o.marker,"^").repeat(J)].join(""),K&&r.message&&(Ie+=" "+a(o.message,r.message))}return[a(o.marker,">"),a(o.gutter,H),v.length>0?` ${v}`:"",Ie].join("")}else return` ${a(o.gutter,H)}${v.length>0?` ${v}`:""}`}).join(`
`);return r.message&&!d&&(h=`${" ".repeat(w+1)}${r.message}
${h}`),n?s.reset(h):h}function Iy(e,t,r,n={}){if(!Fp){Fp=!0;let o="Passing lineNumber and colNumber is deprecated to @babel/code-frame. Please use `codeFrameColumns`.";if(process.emitWarning)process.emitWarning(o,"DeprecationWarning");else{let a=new Error(o);a.name="DeprecationWarning",console.warn(new Error(o))}}return r=Math.max(r,0),Cp(e,{start:{column:r,line:t}},n)}});var Kp=ge((T6,tu)=>{l();(function(){var e;function t(r,n){var s=this instanceof t?this:e;if(s.reset(n),typeof r=="string"&&r.length>0&&s.hash(r),s!==this)return s}t.prototype.hash=function(r){var n,s,o,a,u;switch(u=r.length,this.len+=u,s=this.k1,o=0,this.rem){case 0:s^=u>o?r.charCodeAt(o++)&65535:0;case 1:s^=u>o?(r.charCodeAt(o++)&65535)<<8:0;case 2:s^=u>o?(r.charCodeAt(o++)&65535)<<16:0;case 3:s^=u>o?(r.charCodeAt(o)&255)<<24:0,s^=u>o?(r.charCodeAt(o++)&65280)>>8:0}if(this.rem=u+this.rem&3,u-=this.rem,u>0){for(n=this.h1;s=s*11601+(s&65535)*3432906752&4294967295,s=s<<15|s>>>17,s=s*13715+(s&65535)*461832192&4294967295,n^=s,n=n<<13|n>>>19,n=n*5+3864292196&4294967295,!(o>=u);)s=r.charCodeAt(o++)&65535^(r.charCodeAt(o++)&65535)<<8^(r.charCodeAt(o++)&65535)<<16,a=r.charCodeAt(o++),s^=(a&255)<<24^(a&65280)>>8;switch(s=0,this.rem){case 3:s^=(r.charCodeAt(o+2)&65535)<<16;case 2:s^=(r.charCodeAt(o+1)&65535)<<8;case 1:s^=r.charCodeAt(o)&65535}this.h1=n}return this.k1=s,this},t.prototype.result=function(){var r,n;return r=this.k1,n=this.h1,r>0&&(r=r*11601+(r&65535)*3432906752&4294967295,r=r<<15|r>>>17,r=r*13715+(r&65535)*461832192&4294967295,n^=r),n^=this.len,n^=n>>>16,n=n*51819+(n&65535)*2246770688&4294967295,n^=n>>>13,n=n*44597+(n&65535)*3266445312&4294967295,n^=n>>>16,n>>>0},t.prototype.reset=function(r){return this.h1=typeof r=="number"?r:0,this.rem=this.k1=this.len=0,this},e=new t,typeof tu<"u"?tu.exports=t:this.MurmurHash3=t})()});var Xp=ge(en=>{"use strict";l();Object.defineProperty(en,"__esModule",{value:!0});en.signals=void 0;en.signals=[];en.signals.push("SIGHUP","SIGINT","SIGTERM");process.platform!=="win32"&&en.signals.push("SIGALRM","SIGABRT","SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT");process.platform==="linux"&&en.signals.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT")});var Zp=ge(ir=>{"use strict";l();var ji;Object.defineProperty(ir,"__esModule",{value:!0});ir.unload=ir.load=ir.onExit=ir.signals=void 0;var Wi=Xp();Object.defineProperty(ir,"signals",{enumerable:!0,get:function(){return Wi.signals}});var Mi=e=>!!e&&typeof e=="object"&&typeof e.removeListener=="function"&&typeof e.emit=="function"&&typeof e.reallyExit=="function"&&typeof e.listeners=="function"&&typeof e.kill=="function"&&typeof e.pid=="number"&&typeof e.on=="function",ru=Symbol.for("signal-exit emitter"),nu=globalThis,FD=Object.defineProperty.bind(Object),su=class{emitted={afterExit:!1,exit:!1};listeners={afterExit:[],exit:[]};count=0;id=Math.random();constructor(){if(nu[ru])return nu[ru];FD(nu,ru,{value:this,writable:!1,enumerable:!1,configurable:!1})}on(t,r){this.listeners[t].push(r)}removeListener(t,r){let n=this.listeners[t],s=n.indexOf(r);s!==-1&&(s===0&&n.length===1?n.length=0:n.splice(s,1))}emit(t,r,n){if(this.emitted[t])return!1;this.emitted[t]=!0;let s=!1;for(let o of this.listeners[t])s=o(r,n)===!0||s;return t==="exit"&&(s=this.emit("afterExit",r,n)||s),s}},qi=class{},vD=e=>({onExit(t,r){return e.onExit(t,r)},load(){return e.load()},unload(){return e.unload()}}),iu=class extends qi{onExit(){return()=>{}}load(){}unload(){}},ou=class extends qi{#n=au.platform==="win32"?"SIGINT":"SIGHUP";#t=new su;#e;#a;#o;#i={};#r=!1;constructor(t){super(),this.#e=t,this.#i={};for(let r of Wi.signals)this.#i[r]=()=>{let n=this.#e.listeners(r),{count:s}=this.#t,o=t;if(typeof o.__signal_exit_emitter__=="object"&&typeof o.__signal_exit_emitter__.count=="number"&&(s+=o.__signal_exit_emitter__.count),n.length===s){this.unload();let a=this.#t.emit("exit",null,r),u=r==="SIGHUP"?this.#n:r;a||t.kill(t.pid,u)}};this.#o=t.reallyExit,this.#a=t.emit}onExit(t,r){if(!Mi(this.#e))return()=>{};this.#r===!1&&this.load();let n=r?.alwaysLast?"afterExit":"exit";return this.#t.on(n,t),()=>{this.#t.removeListener(n,t),this.#t.listeners.exit.length===0&&this.#t.listeners.afterExit.length===0&&this.unload()}}load(){if(!this.#r){this.#r=!0,this.#t.count+=1;for(let t of Wi.signals)try{let r=this.#i[t];r&&this.#e.on(t,r)}catch{}this.#e.emit=(t,...r)=>this.#s(t,...r),this.#e.reallyExit=t=>this.#c(t)}}unload(){this.#r&&(this.#r=!1,Wi.signals.forEach(t=>{let r=this.#i[t];if(!r)throw new Error("Listener not defined for signal: "+t);try{this.#e.removeListener(t,r)}catch{}}),this.#e.emit=this.#a,this.#e.reallyExit=this.#o,this.#t.count-=1)}#c(t){return Mi(this.#e)?(this.#e.exitCode=t||0,this.#t.emit("exit",this.#e.exitCode,null),this.#o.call(this.#e,this.#e.exitCode)):0}#s(t,...r){let n=this.#a;if(t==="exit"&&Mi(this.#e)){typeof r[0]=="number"&&(this.#e.exitCode=r[0]);let s=n.call(this.#e,t,...r);return this.#t.emit("exit",this.#e.exitCode,null),s}else return n.call(this.#e,t,...r)}},au=globalThis.process;ji=vD(Mi(au)?new ou(au):new iu),ir.onExit=ji.onExit,ir.load=ji.load,ir.unload=ji.unload});var em=ge((P6,ws)=>{"use strict";l();ws.exports=LD;ws.exports.sync=RD;ws.exports._getTmpname=uu;ws.exports._cleanupOnExit=cu;var Pe=Xe("fs"),$D=Kp(),{onExit:Qp}=Zp(),CD=Xe("path"),{promisify:kt}=Xe("util"),Br={},ED=function(){try{return Xe("worker_threads").threadId}catch{return 0}}(),AD=0;function uu(e){return e+"."+$D(y).hash(String(process.pid)).hash(String(ED)).hash(String(++AD)).result()}function cu(e){return()=>{try{Pe.unlinkSync(typeof e=="function"?e():e)}catch{}}}function TD(e){return new Promise(t=>{Br[e]||(Br[e]=[]),Br[e].push(t),Br[e].length===1&&t()})}function Gi(e){return e.code==="ENOSYS"||(!process.getuid||process.getuid()!==0)&&(e.code==="EINVAL"||e.code==="EPERM")}async function BD(e,t,r={}){typeof r=="string"&&(r={encoding:r});let n,s,o=Qp(cu(()=>s)),a=CD.resolve(e);try{await TD(a);let u=await kt(Pe.realpath)(e).catch(()=>e);if(s=uu(u),!r.mode||!r.chown){let c=await kt(Pe.stat)(u).catch(()=>{});c&&(r.mode==null&&(r.mode=c.mode),r.chown==null&&process.getuid&&(r.chown={uid:c.uid,gid:c.gid}))}n=await kt(Pe.open)(s,"w",r.mode),r.tmpfileCreated&&await r.tmpfileCreated(s),ArrayBuffer.isView(t)?await kt(Pe.write)(n,t,0,t.length,0):t!=null&&await kt(Pe.write)(n,String(t),0,String(r.encoding||"utf8")),r.fsync!==!1&&await kt(Pe.fsync)(n),await kt(Pe.close)(n),n=null,r.chown&&await kt(Pe.chown)(s,r.chown.uid,r.chown.gid).catch(c=>{if(!Gi(c))throw c}),r.mode&&await kt(Pe.chmod)(s,r.mode).catch(c=>{if(!Gi(c))throw c}),await kt(Pe.rename)(s,u)}finally{n&&await kt(Pe.close)(n).catch(()=>{}),o(),await kt(Pe.unlink)(s).catch(()=>{}),Br[a].shift(),Br[a].length>0?Br[a][0]():delete Br[a]}}async function LD(e,t,r,n){r instanceof Function&&(n=r,r={});let s=BD(e,t,r);if(n)try{let o=await s;return n(o)}catch(o){return n(o)}return s}function RD(e,t,r){typeof r=="string"?r={encoding:r}:r||(r={});try{e=Pe.realpathSync(e)}catch{}let n=uu(e);if(!r.mode||!r.chown)try{let c=Pe.statSync(e);r=Object.assign({},r),r.mode||(r.mode=c.mode),!r.chown&&process.getuid&&(r.chown={uid:c.uid,gid:c.gid})}catch{}let s,o=cu(n),a=Qp(o),u=!0;try{if(s=Pe.openSync(n,"w",r.mode||438),r.tmpfileCreated&&r.tmpfileCreated(n),ArrayBuffer.isView(t)?Pe.writeSync(s,t,0,t.length,0):t!=null&&Pe.writeSync(s,String(t),0,String(r.encoding||"utf8")),r.fsync!==!1&&Pe.fsyncSync(s),Pe.closeSync(s),s=null,r.chown)try{Pe.chownSync(n,r.chown.uid,r.chown.gid)}catch(c){if(!Gi(c))throw c}if(r.mode)try{Pe.chmodSync(n,r.mode)}catch(c){if(!Gi(c))throw c}Pe.renameSync(n,e),u=!1}finally{if(s)try{Pe.closeSync(s)}catch{}a(),u&&o()}}});var dd=ge((X8,md)=>{"use strict";l();var pd=Xe("child_process"),cd=pd.spawn,eb=pd.exec;md.exports=function(e,t,r){if(typeof t=="function"&&r===void 0&&(r=t,t=void 0),e=parseInt(e),Number.isNaN(e)){if(r)return r(new Error("pid must be a number"));throw new Error("pid must be a number")}var n={},s={};switch(n[e]=[],s[e]=1,process.platform){case"win32":eb("taskkill /pid "+e+" /T /F",r);break;case"darwin":Eu(e,n,s,function(o){return cd("pgrep",["-P",o])},function(){ld(n,t,r)});break;default:Eu(e,n,s,function(o){return cd("ps",["-o","pid","--no-headers","--ppid",o])},function(){ld(n,t,r)});break}};function ld(e,t,r){var n={};try{Object.keys(e).forEach(function(s){e[s].forEach(function(o){n[o]||(fd(o,t),n[o]=1)}),n[s]||(fd(s,t),n[s]=1)})}catch(s){if(r)return r(s);throw s}if(r)return r()}function fd(e,t){try{process.kill(parseInt(e,10),t)}catch(r){if(r.code!=="ESRCH")throw r}}function Eu(e,t,r,n,s){var o=n(e),a="";o.stdout.on("data",function(f){var f=f.toString("ascii");a+=f});var u=function(c){if(delete r[e],c!=0){Object.keys(r).length==0&&s();return}a.match(/\d+/g).forEach(function(f){f=parseInt(f,10),t[e].push(f),t[f]=[],r[f]=1,Eu(f,t,r,n,s)})};o.on("close",u)}});l();l();import{createHash as ug}from"node:crypto";import{createRequire as cg}from"node:module";l();var co=Symbol("singleComment"),Ru=Symbol("multiComment"),Ud=()=>"",Vd=(e,t,r)=>e.slice(t,r).replace(/\S/g," "),Jd=(e,t)=>{let r=t-1,n=0;for(;e[r]==="\\";)r-=1,n+=1;return!!(n%2)};function Rn(e,{whitespace:t=!0,trailingCommas:r=!1}={}){if(typeof e!="string")throw new TypeError(`Expected argument \`jsonString\` to be a \`string\`, got \`${typeof e}\``);let n=t?Vd:Ud,s=!1,o=!1,a=0,u="",c="",f=-1;for(let p=0;p<e.length;p++){let d=e[p],w=e[p+1];if(!o&&d==='"'&&(Jd(e,p)||(s=!s)),!s)if(!o&&d+w==="//")u+=e.slice(a,p),a=p,o=co,p++;else if(o===co&&d+w===`\r
`){p++,o=!1,u+=n(e,a,p),a=p;continue}else if(o===co&&d===`
`)o=!1,u+=n(e,a,p),a=p;else if(!o&&d+w==="/*"){u+=e.slice(a,p),a=p,o=Ru,p++;continue}else if(o===Ru&&d+w==="*/"){p++,o=!1,u+=n(e,a,p+1),a=p+1;continue}else r&&!o&&(f!==-1?d==="}"||d==="]"?(u+=e.slice(a,p),c+=n(u,0,1)+u.slice(1),u="",a=p,f=-1):d!==" "&&d!=="	"&&d!=="\r"&&d!==`
`&&(u+=e.slice(a,p),a=p,f=-1):d===","&&(c+=u+e.slice(a,p),u="",a=p,f=p))}return c+u+(o?n(e.slice(a)):e.slice(a))}l();l();l();var yr=Pt(Vu(),1);var{ansi256:vb,fg:$b,bgAnsi256:Cb,bg:Eb,rgb:Ab,bgRgb:Tb,hex:Bb,bgHex:Lb,reset:Rb,inverse:Nb,hidden:kb,visible:Pb,bold:Ob,dim:_b,italic:Ib,underline:jb,strikethrough:Wb,strike:Mb,black:qb,red:Gb,green:Hb,yellow:zb,blue:Ub,magenta:Vb,cyan:Jb,white:Yb,grey:Kb,gray:Xb,blackBright:Zb,redBright:Qb,greenBright:e2,yellowBright:t2,blueBright:r2,magentaBright:n2,cyanBright:s2,whiteBright:i2,bgBlack:o2,bgRed:a2,bgGreen:u2,bgYellow:c2,bgBlue:l2,bgMagenta:f2,bgCyan:p2,bgWhite:m2,bgGrey:d2,bgGray:g2,bgBlackBright:h2,bgRedBright:y2,bgGreenBright:D2,bgYellowBright:b2,bgBlueBright:w2,bgMagentaBright:x2,bgCyanBright:S2,bgWhiteBright:F2}=yr.default;var Ju="\x1B[H\x1B[2J";yr.default.extend({brown:"#c19a6b",pink:"#ff75d1",teal:"#91EBC2",lightGray:"#2a2a2e",orange:"#FFAB40",lavender:"#8080FF",neonGreen:"#56ef83",neonCyan:"#69d5fd",neonRouge:"#FF8095",neonMagenta:"#7b68ee"});var{cyan:le,red:re,green:rg,yellow:Ot,magenta:ho,blue:P,white:E,gray:m,dim:A2,cyanBright:T2,redBright:ie,greenBright:B2,yellowBright:Q,magentaBright:Ns,blueBright:Yu,whiteBright:j,strip:Ku,underline:Vt,bold:g,reset:dt,lightGray:U,pink:_t,brown:L2,teal:Pr,orange:nt,lavender:R2,neonGreen:xe,neonCyan:ue,neonRouge:ks,neonMagenta:on}=yr.default;var $=R({open:`${U.open}\u250C\u2500${U.close} `,stub:`${U.open}\u251C${U.close}  `,dash:`${U.open}\u251C\u2500${U.close} `,trim:`${U.open}\u2502${U.close}`,line:`${U.open}\u2502${U.close}  `,next:`
${U.open}\u2502${U.close}`,after:`${U.open}\u2502${U.close}`,wrap:`
${U.open}\u2502${U.close}
`,base:`${U.open}\u2514\u2500${U.close} `,red:`${re.dim.open}\u2502${re.dim.close}  `,redTrim:`${re.dim.open}\u2502${re.dim.close}`,yellow:`${Ot.dim.open}\u2502${Ot.dim.close}  `,yellowTrim:`${Ot.dim.open}\u2502${Ot.dim.close}`,indent:R({edge:`${U.open}\u251C\u2500\u2500\u252C\u2500${U.close} `,fall:`${U.open}\u251C\u2500\u2500\u2510${U.close} `,line:`${U.open}\u2502  \u2502${U.close} `,stub:`${U.open}\u2502  \u251C${U.close} `,dash:`${U.open}\u2502  \u251C\u2500${U.close} `,base:`${U.open}\u2502  \u2514\u2500${U.close} `})}),O2=`${m.open}|${m.close}`,Xu=`${m.open}#${m.close}`,_2=`${m.open}+${m.close}`,I2=`${m.open}-${m.close}`,j2=`${m.open},${m.close}`,Zu=`${xe.open}\u2713${xe.close}`,Dr=`${ie.open}\u{10102}${ie.close}`,N=`${m.open}:${m.close}`,q=`${m.open}\u2192${m.close}`,or=`${m.open}\u25B8${m.close}`,Ps=`${m.open}\u2942${m.close}`,X=`${m.open}~${m.close}`,ar=`${m.open}\u2014${m.close}`,Os=`${m.open}(${m.close}`,_s=`${m.open})${m.close}`,Qu=`${m.open}{${m.close}`,ec=`${m.open}}${m.close}`,tc=`${m.open}[${m.close}`,rc=`${m.open}]${m.close}`,Is=`${m.open}<${m.close}`,js=`${m.open}>${m.close}`;l();import{Console as ng}from"node:console";import{stdout as sg,stderr as ig}from"node:process";import{EventEmitter as og}from"node:events";var ht=new og,{error:be,log:T,warn:an,clear:z2}=new ng(sg,ig),{create:Or,assign:ee,defineProperty:tt,defineProperties:U2,keys:Bt,values:un,setPrototypeOf:V2}=Object,br=Array.from,cn=Buffer.from,{abs:_r}=Math,{toString:J2}=Object.prototype;function Re(e,...t){let r=L(e);return function n(s,o,a){let u=typeof a;if(a&&u==="object")if(L(a))for(let c of a)o=n(s,o,c);else for(let c in a){let f=a[c];ze(f)?o[c]=f(o[c],Re):f===void 0?s?o.splice(c,1):delete o[c]:f===null||O(f)===!1||L(f)?o[c]=f:typeof o[c]=="object"?o[c]=f===o[c]?f:Re(o[c],f):o[c]=n(!1,{},f)}else u==="function"&&(o=a(o,Re));return o}(r,r?e.slice():ee({},e),t)}function x(e,t){return O(t)?e in t:!1}function Ae(e){return t=>t in e}function R(e){return e?ee(Or(null),e):Or(null)}function nc(e,{onlyFirst:t=!1}={}){let r=e.match(new RegExp(["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-nq-uy=><~]))"].join("|"),t?void 0:"g"));return r!==null?r:!1}function Ws(e){if(Rn(e).trim()==="")return{};try{return new Function(`return ${Rn(e).trim()}`)()}catch{return{}}}async function sc(e,{format:t}){return t==="esm"?r=>import(r):lg(e)}function lg(e){return ze(Xe)?Xe(e):cg(import.meta.url)(e)}function ic(e){return e===".mjs"||e===".cjs"?"js":e.slice(1)}function ln(){let e=new Date,t=e.getHours(),r=e.getMinutes(),n=e.getSeconds();return(t<10?`0${t}`:t)+N+(r<10?`0${r}`:r)+N+(n<10?`0${n}`:n)}function oc(e,t=2){return e.reduce((r,n,s)=>{let o=Math.floor(s/t);return r[o]||(r[o]=[]),r[o].push(n),r},[])}function ac(){return new Promise(e=>{ze(setImmediate)?setImmediate(e):setTimeout(e)})}function Fe(e){return ct(e)?e.toString():O(e)||L(e)?JSON.stringify(e):he(e)||Dt(e)?`${e}`:I(e)?e:String(e)}function Jt(e){return ug("md5").update(e).digest("hex")}function uc(e){return e.toLowerCase().replace(/[^a-z0-9_:]+/g,"-").replace(/-$/,"").replace(/^-/,"")}function yt(e,t){return t>=2?e[e.length-1]!=="s"?`${e}s`:e:e[e.length-1]!=="s"?e:e.slice(0,-1)}function wr(e){return e.charAt(0).toUpperCase()+e.slice(1)}function Ms(e){let t=e%10,r=e%100;return e+(t===1&&r!==11?"st":t===2&&r!==12?"nd":t===3&&r!==13?"rd":"th")}function fe(...e){return e.join(" ")}function ce(...e){return L(e[0])?e[0].join(""):e.join("")}function $t(e,t=null){let r=0;if(L(e))for(let n of e)t?n[t].length>r&&(r=n[t].length):n.length>r&&(r=n.length);else for(let n in e)n.length>r&&(r=n.length);return r=r+1,function(s){let o=I(s)?r-s.length:r-s;return o<1?" ":" ".repeat(o)}}function It(){return Math.random().toString(36).slice(2)}function pe(e){return e==null}function cc(e){return ct(e)?e.toString().trim().length===0:e.trim().length===0}function oe(e){if(O(e)){for(let t in e)return!1;return!0}return L(e)?e.length===0:me(e)||Dt(e)||fg(e)||yo(e)?!1:!e}function L(e){return Array.isArray(e)}function O(e){return typeof e=="object"}function I(e){return typeof e=="string"}function ur(e){return Object.prototype.toString.call(e).slice(8,-1)==="RegExp"}function ze(e){return typeof e=="function"}function he(e){return typeof e=="boolean"}function Dt(e){return typeof e=="number"}function yo(e){return Number.isNaN(e)}function fg(e){return Object.prototype.toString.call(e).slice(8,-1)==="Null"}function me(e){return typeof e>"u"}function ct(e){return Buffer.isBuffer(e)}l();import{argv as hb}from"node:process";l();l();l();function Ge(e){if(e===null)return"Null";if(e===void 0)return"Undefined";if(Number.isNaN(e))return"NaN";let t=Object.prototype.toString.call(e).slice(8,-1);return t==="AsyncFunction"?"Promise":t}l();var{isArray:xr}=Array;function fn(e){return xr(e)?e.length>0:Ge(e)==="Object"?Object.keys(e).length>0:!!e}function Kt(...e){let t=0;for(;t<e.length;){let r=e[t];if(Ge(r)==="Function"){if(fn(r()))return!1}else if(fn(r))return!1;t++}return!0}l();l();function Do(e){return xr(e)?e.length===0:Ge(e)==="Object"?Object.keys(e).length===0:!e}function qs(...e){let t=0;for(;t<e.length;){let r=e[t];if(Ge(r)==="Function"){if(Do(r()))return!1}else if(Do(r))return!1;t++}return!0}l();function bt(...e){let t=0;for(;t<e.length;){let r=e[t];if(Ge(r)==="Function"){if(fn(r()))return!0}else if(fn(r))return!0;t++}return!1}l();l();function pg(e){return e<<0===e}var lc=Number.isInteger||pg;function Gs(e,t="."){return typeof e=="string"?e.split(t).map(r=>lc(r)?Number(r):r):e}l();function mg(e,t){let r=t,n=0,s=Gs(e);for(;n<s.length;){if(r==null||r[s[n]]===null)return;r=r[s[n]],n++}return r}function bo(e,t){if(arguments.length===1)return r=>bo(e,r);if(t!=null)return mg(e,t)}l();function wo(e,t){if(!xr(t))throw new Error(`Cannot read property 'indexOf' of ${t}`);let r=Ge(e);if(!["Array","NaN","Object","RegExp"].includes(r))return t.indexOf(e);let n=-1,s=-1,{length:o}=t;for(;++n<o&&s===-1;)Hs(t[n],e)&&(s=n);return s}function fc(e){let t=[],r;for(;!(r=e.next()).done;)t.push(r.value);return t}function dg(e,t){if(e.size!==t.size)return!1;let r=fc(e.values()),n=fc(t.values());return r.filter(o=>wo(o,n)===-1).length===0}function gg(e,t){return e.message!==t.message||e.toString!==t.toString?!1:e.toString()===t.toString()}function pc(e){return e.toDateString?[!0,e.getTime()]:[!1]}function mc(e){return e.constructor!==RegExp?[!1]:[!0,e.toString()]}function Hs(e,t){if(arguments.length===1)return u=>Hs(e,u);if(Object.is(e,t))return!0;let r=Ge(e);if(r!==Ge(t))return!1;if(r==="Function")return e.name===void 0?!1:e.name===t.name;if(["NaN","Null","Undefined"].includes(r))return!0;if(["BigInt","Number"].includes(r))return Object.is(-0,e)!==Object.is(-0,t)?!1:e.toString()===t.toString();if(["Boolean","String"].includes(r))return e.toString()===t.toString();if(r==="Array"){let u=Array.from(e),c=Array.from(t);if(u.toString()!==c.toString())return!1;let f=!0;return u.forEach((p,d)=>{f&&p!==c[d]&&!Hs(p,c[d])&&(f=!1)}),f}let n=mc(e),s=mc(t);if(n[0])return s[0]?n[1]===s[1]:!1;if(s[0])return!1;let o=pc(e),a=pc(t);if(o[0])return a[0]?o[1]===a[1]:!1;if(a[0])return!1;if(e instanceof Error)return t instanceof Error?gg(e,t):!1;if(r==="Set")return dg(e,t);if(r==="Object"){let u=Object.keys(e);if(u.length!==Object.keys(t).length)return!1;let c=!0;return u.forEach(f=>{if(c){let p=e[f],d=t[f];p!==d&&!Hs(p,d)&&(c=!1)}}),c}return!1}l();var hg="RAMBDAX_DELAY";function rt(e){return new Promise(t=>{setTimeout(()=>{t(hg)},e)})}l();function xo(e,t){if(arguments.length===1)return r=>xo(e,r);if(typeof t=="string")return t.includes(e);if(!t)throw new TypeError(`Cannot read property 'indexOf' of ${t}`);return xr(t)?wo(e,t)>-1:!1}l();function pn(e,t){return arguments.length===1?r=>pn(e,r):Ge(t)===e}l();async function dc(e,t){let r=t.map((n,s)=>e(n,s));return Promise.all(r)}function gc(e,t){return arguments.length===1?async r=>dc(e,r):new Promise((r,n)=>{dc(e,t).then(r).catch(n)})}l();l();l();function hc(e,t){return String(e)===String(t)}function yc(e,t){let r=-1,{length:n}=t;for(;++r<n;)if(hc(t[r],e))return!0;return!1}function So(e,t){if(arguments.length===1)return s=>So(e,s);if(t==null)return;let r=Gs(e,","),n={};for(let s in t)yc(s,r)||(n[s]=t[s]);return n}l();function _e(e,t){return arguments.length===1?r=>_e(e,r):t?t.hasOwnProperty(e):!1}l();function Lt(e,t){return arguments.length===1?r=>Lt(e,r):bo(e,t)!==void 0}l();function Ir(e){let t=Ge(e);return["Undefined","NaN","Number","Null"].includes(t)?!1:e?Ge(e.isEmpty)==="Function"?e.isEmpty():e.isEmpty?!!e.isEmpty:t==="Object"?Object.keys(e).length===0:t==="Array"?e.length===0:!1:!0}l();function Dc(e){return e==null}l();function bc(e){return typeof e=="string"?e[e.length-1]||"":e[e.length-1]}l();import Qh from"fast-glob";import{relative as e0}from"pathe";import{readFile as t0}from"fs-extra";l();l();async function Xt(e,t,{concurrency:r=Number.POSITIVE_INFINITY,stopOnError:n=!0,signal:s}={}){return new Promise((o,a)=>{if(e[Symbol.iterator]===void 0&&e[Symbol.asyncIterator]===void 0)throw new TypeError(`Expected \`input\` to be either an \`Iterable\` or \`AsyncIterable\`, got (${typeof e})`);if(typeof t!="function")throw new TypeError("Mapper function is required");if(!(Number.isSafeInteger(r)&&r>=1||r===Number.POSITIVE_INFINITY))throw new TypeError(`Expected \`concurrency\` to be an integer from 1 and up or \`Infinity\`, got \`${r}\` (${typeof r})`);let u=[],c=[],f=new Map,p=!1,d=!1,w=!1,b=0,h=0,v=e[Symbol.iterator]===void 0?e[Symbol.asyncIterator]():e[Symbol.iterator](),W=Y=>{p=!0,d=!0,a(Y)};s&&(s.aborted&&W(s.reason),s.addEventListener("abort",()=>{W(s.reason)}));let G=async()=>{if(d)return;let Y=await v.next(),H=h;if(h++,Y.done){if(w=!0,b===0&&!d){if(!n&&c.length>0){W(new AggregateError(c));return}if(d=!0,f.size===0){o(u);return}let Z=[];for(let[K,Ie]of u.entries())f.get(K)!==zs&&Z.push(Ie);o(Z)}return}b++,(async()=>{try{let Z=await Y.value;if(d)return;let K=await t(Z,H);K===zs&&f.set(H,K),u[H]=K,b--,await G()}catch(Z){if(n)W(Z);else{c.push(Z),b--;try{await G()}catch(K){W(K)}}}})()};(async()=>{for(let Y=0;Y<r;Y++){try{await G()}catch(H){W(H);break}if(w||p)break}})()})}var zs=Symbol("skip");l();l();l();var vo=Pt(xc(),1);l();var In=class extends Error{constructor(t){super(t),this.name="TimeoutError"}},$o=class extends Error{constructor(t){super(),this.name="AbortError",this.message=t}},Sc=e=>globalThis.DOMException===void 0?new $o(e):new DOMException(e),Fc=e=>{let t=e.reason===void 0?Sc("This operation was aborted."):e.reason;return t instanceof Error?t:Sc(t)};function Co(e,t){let{milliseconds:r,fallback:n,message:s,customTimers:o={setTimeout,clearTimeout}}=t,a,c=new Promise((f,p)=>{if(typeof r!="number"||Math.sign(r)!==1)throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${r}\``);if(t.signal){let{signal:w}=t;w.aborted&&p(Fc(w)),w.addEventListener("abort",()=>{p(Fc(w))})}if(r===Number.POSITIVE_INFINITY){e.then(f,p);return}let d=new In;a=o.setTimeout.call(void 0,()=>{if(n){try{f(n())}catch(w){p(w)}return}typeof e.cancel=="function"&&e.cancel(),s===!1?f():s instanceof Error?p(s):(d.message=s??`Promise timed out after ${r} milliseconds`,p(d))},r),(async()=>{try{f(await e)}catch(w){p(w)}})()}).finally(()=>{c.clear()});return c.clear=()=>{o.clearTimeout.call(void 0,a),a=void 0},c}l();l();function Eo(e,t,r){let n=0,s=e.length;for(;s>0;){let o=Math.trunc(s/2),a=n+o;r(e[a],t)<=0?(n=++a,s-=o+1):s=o}return n}var jn=class{#n=[];enqueue(t,r){r={priority:0,...r};let n={priority:r.priority,run:t};if(this.size&&this.#n[this.size-1].priority>=r.priority){this.#n.push(n);return}let s=Eo(this.#n,n,(o,a)=>a.priority-o.priority);this.#n.splice(s,0,n)}dequeue(){return this.#n.shift()?.run}filter(t){return this.#n.filter(r=>r.priority===t.priority).map(r=>r.run)}get size(){return this.#n.length}};var jr=class extends vo.default{#n;#t;#e=0;#a;#o;#i=0;#r;#c;#s;#g;#u=0;#f;#l;#h;timeout;constructor(t){if(super(),t={carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:jn,...t},!(typeof t.intervalCap=="number"&&t.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${t.intervalCap?.toString()??""}\` (${typeof t.intervalCap})`);if(t.interval===void 0||!(Number.isFinite(t.interval)&&t.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${t.interval?.toString()??""}\` (${typeof t.interval})`);this.#n=t.carryoverConcurrencyCount,this.#t=t.intervalCap===Number.POSITIVE_INFINITY||t.interval===0,this.#a=t.intervalCap,this.#o=t.interval,this.#s=new t.queueClass,this.#g=t.queueClass,this.concurrency=t.concurrency,this.timeout=t.timeout,this.#h=t.throwOnTimeout===!0,this.#l=t.autoStart===!1}get#b(){return this.#t||this.#e<this.#a}get#w(){return this.#u<this.#f}#x(){this.#u--,this.#p(),this.emit("next")}#S(){this.#D(),this.#y(),this.#c=void 0}get#F(){let t=Date.now();if(this.#r===void 0){let r=this.#i-t;if(r<0)this.#e=this.#n?this.#u:0;else return this.#c===void 0&&(this.#c=setTimeout(()=>{this.#S()},r)),!0}return!1}#p(){if(this.#s.size===0)return this.#r&&clearInterval(this.#r),this.#r=void 0,this.emit("empty"),this.#u===0&&this.emit("idle"),!1;if(!this.#l){let t=!this.#F;if(this.#b&&this.#w){let r=this.#s.dequeue();return r?(this.emit("active"),r(),t&&this.#y(),!0):!1}}return!1}#y(){this.#t||this.#r!==void 0||(this.#r=setInterval(()=>{this.#D()},this.#o),this.#i=Date.now()+this.#o)}#D(){this.#e===0&&this.#u===0&&this.#r&&(clearInterval(this.#r),this.#r=void 0),this.#e=this.#n?this.#u:0,this.#m()}#m(){for(;this.#p(););}get concurrency(){return this.#f}set concurrency(t){if(!(typeof t=="number"&&t>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${t}\` (${typeof t})`);this.#f=t,this.#m()}async#v(t){return new Promise((r,n)=>{t.addEventListener("abort",()=>{n(t.reason)},{once:!0})})}async add(t,r={}){return r={timeout:this.timeout,throwOnTimeout:this.#h,...r},new Promise((n,s)=>{this.#s.enqueue(async()=>{this.#u++,this.#e++;try{r.signal?.throwIfAborted();let o=t({signal:r.signal});r.timeout&&(o=Co(Promise.resolve(o),{milliseconds:r.timeout})),r.signal&&(o=Promise.race([o,this.#v(r.signal)]));let a=await o;n(a),this.emit("completed",a)}catch(o){if(o instanceof In&&!r.throwOnTimeout){n();return}s(o),this.emit("error",o)}finally{this.#x()}},r),this.emit("add"),this.#p()})}async addAll(t,r){return Promise.all(t.map(async n=>this.add(n,r)))}start(){return this.#l?(this.#l=!1,this.#m(),this):this}pause(){this.#l=!0}clear(){this.#s=new this.#g}async onEmpty(){this.#s.size!==0&&await this.#d("empty")}async onSizeLessThan(t){this.#s.size<t||await this.#d("next",()=>this.#s.size<t)}async onIdle(){this.#u===0&&this.#s.size===0||await this.#d("idle")}async#d(t,r){return new Promise(n=>{let s=()=>{r&&!r()||(this.off(t,s),n())};this.on(t,s)})}get size(){return this.#s.size}sizeBy(t){return this.#s.filter(t).length}get pending(){return this.#u}get isPaused(){return this.#l}};import bg from"axios";var Wr=bg.create({responseType:"json",headers:{}}),te=new jr({interval:500,intervalCap:2});function Mr(e){return e===429||e===500?!0:(te.isPaused||te.pause(),!1)}l();import{performance as Ao}from"node:perf_hooks";var A=new class{marks=[];time={};cache={};now(t){return this.stop(t||!0)}sec(t){let r=this.stop(t||!0);return r.slice(0,r.lastIndexOf(" "))}pause(t){t in this.marks&&(this.cache[t]=this.stop(t||!0))}start(t){t?this.time[t]=Ao.now():this.marks.push(Ao.now())}clear(t){if(t){if(t in this.time){delete this.time[t];return}if(t in this.cache){delete this.cache[t];return}}for(;this.marks.length!==0;)this.marks.pop()}stop(t=!1,r=!1){let n;if(typeof t=="boolean")n=t?this.marks[this.marks.length-1]:this.marks.pop();else if(t){if(t in this.cache){let u=this.cache[t];return delete this.cache[t],u}r?(n=this.time[t],delete this.time[t]):n=this.time[t]}let s=Ao.now()-n;if(s<1e3)return`${_r(+s.toFixed(0))}ms`;let o=s/1e3;if(o<60)return`${_r(+o.toFixed(0))}s ${_r(+s.toFixed(0).slice(1,4))}ms`;let a=_r(+(o/60).toFixed(0));return`${a}m ${_r(+(o-60*Number(a)).toFixed(0))}s ${_r(+s.toFixed(0).slice(1,4))}ms`}};l();import{argv as $g}from"node:process";l();var wg=Object.assign||((e,t)=>(t&&Object.keys(t).forEach(r=>e[r]=t[r]),e)),To=(e,t,r)=>{let n=typeof r;if(r&&n==="object")if(Array.isArray(r))for(let s of r)t=To(e,t,s);else for(let s of Object.keys(r)){let o=r[s];typeof o=="function"?t[s]=o(t[s],Vs):o===void 0?e&&!isNaN(s)?t.splice(s,1):delete t[s]:o===null||typeof o!="object"||Array.isArray(o)?t[s]=o:typeof t[s]=="object"?t[s]=o===t[s]?o:Vs(t[s],o):t[s]=To(!1,{},o)}else n==="function"&&(t=r(t,Vs));return t},Vs=(e,...t)=>{let r=Array.isArray(e);return To(r,r?e.slice():wg({},e),t)},qr=Vs;l();import{stdout as Wn,stderr as Mn,env as qn,platform as vc}from"node:process";import{execFileSync as xg}from"node:child_process";import{fileURLToPath as Sg}from"node:url";import{dirname as Fg,join as vg}from"pathe";function Js(e,t,r){return xg(e,t,{encoding:"utf8",shell:r,stdio:["ignore","pipe","ignore"]}).trim()}function $c(e,t){let r=Fg(Sg(import.meta.url));return Js(vg(r,e),[],t).split(/\r?\n/)}function Sr(e,t){let r=Number.parseInt(e,10);return{wrap:r>85?85:r,cols:Number.parseInt(e,10),rows:Number.parseInt(t,10)}}function Cc(){if(Wn&&Wn.columns&&Wn.rows)return Sr(Wn.columns,Wn.rows);if(Mn&&Mn.columns&&Mn.rows)return Sr(Mn.columns,Mn.rows);if(qn.COLUMNS&&qn.LINES)return Sr(qn.COLUMNS,qn.LINES);if(vc==="win32")try{let e=$c("vendor/windows/term-size.exe",!1);if(e.length===2)return Sr(e[0],e[1])}catch{}else{if(vc==="darwin")try{let e=$c("vendor/macos/term-size",!0);if(e.length===2)return Sr(e[0],e[1])}catch{}try{let e=Js("resize",["-u"]).match(/\d+/g);if(e.length===2)return Sr(e[0],e[1])}catch{}if(qn.TERM)try{let e=Js("tput",["cols"]),t=Js("tput",["lines"]);if(e&&t)return Sr(e,t)}catch{}}return Sr(80,24)}l();var Ys=["build","checksum","metafields","pages","paths","schema","sections","settings","templates"],Ec=[["cache","node_modules"],["input","source"],["output","theme"],["export","export"],["import","import"],["config","."]],Gr=["assets","config","layout","customers","locales","sections","schema","snippets","templates","metaobject","metafields","pages","redirects"],Hr=["templates","templates/customers","templates/metaobject","assets","config","layout","locales","sections","snippets"],Ac=["js","cjs","mjs","ts"];var Tc=["You cannot use script minification without esbuild installed","and configured as a processor. Install esbuild and configure Syncify","to apply transforms to leverage script minification."],Gn=/([|,])/g,Ks=/\.(mjs|cjs|ts|js|tsx|jsx)$/;var Bo={404:"The requested resource was not found.",400:"The request was not understood by the server, generally due to bad syntax or because the Content-Type header was not correctly set to application / json. This status is also returned when the request provides an invalid code parameter during the OAuth token exchange process.",303:"The response to the request can be found under a different URL in the Location header and can be retrieved using a GET method on that resource.",401:"The necessary authentication credentials are not present in the request or are incorrect",402:"The requested shop is currently frozen. The shop owner needs to log in to the shop's admin, and pay the outstanding balance to unfreeze the shop.",406:"The requested resource is only capable of generating content not acceptable according to the Accept headers sent in the request.",423:"The requested shop is currently locked. Shops are locked if they repeatedly exceed their API request limit. or if there is an issue with the account, such as a detected compromise or fraud risk.",403:"The server is refusing to respond to the request. This is generally because you have not requested the appropriate scope for this action.",501:"The requested endpoint is not available on that particular shop, e.g. requesting access to a Shopify Plus\u2013only API on a non-Plus shop. This response may also indicate that this endpoint is reserved for future use.",503:"The server is currently unavailable. Check the Shopify status page for reported service outages. See https://www.shopifystatus.com"};l();var Bc=()=>({json:{assets:!0,config:!0,locales:!0,metafields:!0,metaobject:!0,groups:!0,templates:!0,exclude:[]},script:{minifySyntax:!0,minifyIdentifiers:!0,minifyWhitespace:!0,mangleProps:void 0,legalComments:"none",mangleQuoted:!1,keepNames:!1,exclude:[]},liquid:{minifyJavascript:!1,minifyStylesheet:!1,minifyStyle:!0,minifySchema:!0,removeComments:!0,collapseInner:!1,collapseWhitespace:!0,stripDashes:!0,exclude:[]},style:{exclude:[],format:!1,inline:!1,purgeUnusedCSS:!1,obfuscateAlphabet:"abcefghijklmnopqrstuvwxyz0123456789",obfuscateClassNames:!1,obfuscateWhitelist:[]},markup:{caseSensitive:!1,collapseBooleanAttributes:!1,collapseInlineTagWhitespace:!1,conservativeCollapse:!1,keepClosingSlash:!1,noNewlinesBeforeTagClose:!1,preventAttributesEscaping:!1,removeEmptyAttributes:!1,removeEmptyElements:!1,removeOptionalTags:!1,removeRedundantAttributes:!1,removeScriptTypeAttributes:!0,removeStyleLinkTypeAttributes:!0,useShortDoctype:!1,collapseWhitespace:!0,continueOnParseError:!0,removeComments:!0,minifyCSS:!0,minifyJS:!0,trimCustomFragments:!1,ignoreCustomFragments:[/(?<=\bstyle\b=["']\s?)[\s\S]*?(?="[\s\n>]?)/,/<style[\s\S]*?<\/style>/,/<script[\s\S]*?<\/script>/,/{%[\s\S]*?%}/]}});l();var Lc=()=>({input:"source",output:"theme",import:"import",export:"export",config:".",hot:!1,stores:null,publish:{bindVersion:!1,publishRole:"unpublished",themeLimit:3,tunnelPort:80},spawn:{build:null,watch:null},log:{clear:!0,silent:!1,stats:!0,warnings:!0},paths:{assets:"assets/*",config:"config/*.json",layout:"layout/*.liquid",locales:"locales/*.json",metafields:"metafields/**/*.json",redirects:"redirects.yaml",schema:"schema/*.{schema,json}",snippets:"snippets/**/*.liquid",metaobject:"templates/metaobject/*",sections:"sections/**/*.{liquid,json}",pages:"pages/*",templates:"templates/*",customers:"templates/customers/*"},views:{sections:{prefixDir:!1,separator:"-",global:[]},snippets:{prefixDir:!1,separator:"-",global:[]},pages:{author:"",safeSync:!0,language:"html",suffixDir:!1,global:[]}},transform:{svg:null,style:null,script:null},terser:{json:!1,markup:!1,liquid:!1,script:!1}});l();var Rc=()=>({json:{indent:2,useTab:!1,crlf:!1,exclude:null},tailwind:{installed:!1,loaded:!1,file:!1,map:null,config:null},sass:{installed:!1,loaded:!1,file:!1,config:{warnings:!0,style:"compressed",sourcemap:!0,quietDeps:!1,include:["node_modules"]}},esbuild:{bundle:!0,format:"esm",globalName:void 0,target:"es2016",metafile:!0,external:[],platform:"browser",splitting:!1,sourcemap:"linked",write:!1,logLevel:"silent",plugins:[]},sharp:{installed:!1,required:!1,loaded:!1,file:!1,config:{}},postcss:{file:!1,config:[]},sprite:{mode:{inline:!0,symbol:{example:!1}},shape:{transform:["svgo"],id:{generator:"svg-%s"}},svg:{xmlDeclaration:!1,doctypeDeclaration:!1,dimensionAttributes:!1,namespaceClassnames:!1,namespaceIDs:!1}},svgo:{multipass:!0,js2svg:{indent:2,pretty:!0},plugins:["preset-default"]}});l();var Nc=()=>({onBuild:[],onChange:[],onReload:[],onTransform:[],onWatch:[]});function Cg(){let e=R();for(let t of Gr)e[t]=R({input:null,match:null});return e.transforms=new Map,e}var i=new class ft{static defaults=Lc();static plugins=Nc();static terser=Bc();static processor=Rc();static package=R();static cache=R();static watch=new Set;process;restart=!1;cli=R();wss=null;stats=R();filters=R();commands=R();version="0.3.0-beta";cwd=null;argv=$g.slice(2).join(" ");errors=new Set;warnings=new Map;publish=R({ngrok:null,bindVersion:!1,publishRole:"unpublished",themeLimit:3,tunnelPort:80});vc=R({dir:null,number:null,zip:null,patch:0,major:0,minor:0,update:null});env=R({cli:!1,tree:!1,dev:!0,prod:!1,ready:!1,sync:0,file:null,vars:{}});hot=R({inject:!0,server:3e3,socket:8089,history:!1,method:"hot",strategy:"hydrate",scroll:"preserved",layouts:["theme.liquid"],label:"visible",snippet:null,output:null,alive:{},renderer:"{% render 'hot.js'"+["","server: 3000","socket: 8089",'strategy: "hydrate"','scroll: "preserved"','label: "visible"',"history: false",'method: "hot"'].join(", ")+" %}"});log=R({idle:!1,group:"Syncify",title:"",uri:"",listen:null,thrown:null,queue:new Set,changes:R(),config:R({clear:!0,silent:!1,stats:!0,warnings:!0})});mode=R({build:!1,interactive:!1,dev:!0,prod:!1,strap:!1,watch:!1,clean:!1,cache:!1,setup:!1,upload:!1,import:!1,metafields:!1,terse:!1,hot:!1,pages:!1,pull:!1,force:!1,views:!1,script:!1,image:!1,style:!1,svg:!1,redirects:!1,export:!1,release:!1,publish:!1,themes:!1});file=R({base:null,path:null,relative:null});files=new Map;dirs=R();cmd=R({config:null,delete:null,filter:null,input:null,output:null});stores=[];sync=R({themes:[],stores:[]});spawn=R({paths:new Set,streams:new Map,invoked:!1,commands:R()});section=R({prefixDir:!1,separator:"-",global:null,baseDir:new Set,schema:null,shared:new Map});snippet=R({prefixDir:!1,separator:"-",global:null,baseDir:new Set});paths=Cg();page=R({safeSync:!0,author:"",global:null,suffixDir:!1,language:"html",export:R({quotes:"\u201C\u201D\u2018\u2019",html:!0,linkify:!1,typographer:!1,xhtmlOut:!1,breaks:!0,langPrefix:"language-"}),import:R({codeBlockStyle:"fenced",emDelimiter:"_",fence:"```",headingStyle:"atx",hr:"---",linkReferenceStyle:"full",linkStyle:"inlined",strongDelimiter:"**",bulletListMarker:"-"})});script=[];style=[];svg=[];image;terse=R({json:!1,liquid:!1,markup:!1,style:!1,script:!1});get watch(){return ft.watch}set watch(t){ft.watch=t}get cache(){return ft.cache}set cache(t){ft.cache=t}get terser(){return ft.terser}set terser(t){ft.terser=qr(ft.terser,t)}get processor(){return ft.processor}set config(t){ft.defaults=qr(ft.defaults,t)}get config(){return ft.defaults}set pkg(t){ft.package=t}get pkg(){return ft.package}get plugins(){return ft.plugins}get terminal(){return Cc()}};l();l();var mn=class{constructor({base:t,dir:r,ext:n,name:s,root:o}){this.base=t,this.dir=r,this.ext=n,this.name=s,this.root=o}data=void 0;hash;uuid;type;resource;root;dir;name;ext;base;relative;key;namespace;kind;input;output;size};l();import{cursorTo as Gh,clearScreenDown as Hh}from"node:readline";import{stdout as ra}from"node:process";import na from"node-notifier";l();l();l();l();l();l();l();function Lo({onlyFirst:e=!1}={}){let t=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))"].join("|");return new RegExp(t,e?void 0:"g")}var Eg=Lo();function zr(e){if(typeof e!="string")throw new TypeError(`Expected a \`string\`, got \`${typeof e}\``);return e.replace(Eg,"")}l();l();function kc(e){return e===161||e===164||e===167||e===168||e===170||e===173||e===174||e>=176&&e<=180||e>=182&&e<=186||e>=188&&e<=191||e===198||e===208||e===215||e===216||e>=222&&e<=225||e===230||e>=232&&e<=234||e===236||e===237||e===240||e===242||e===243||e>=247&&e<=250||e===252||e===254||e===257||e===273||e===275||e===283||e===294||e===295||e===299||e>=305&&e<=307||e===312||e>=319&&e<=322||e===324||e>=328&&e<=331||e===333||e===338||e===339||e===358||e===359||e===363||e===462||e===464||e===466||e===468||e===470||e===472||e===474||e===476||e===593||e===609||e===708||e===711||e>=713&&e<=715||e===717||e===720||e>=728&&e<=731||e===733||e===735||e>=768&&e<=879||e>=913&&e<=929||e>=931&&e<=937||e>=945&&e<=961||e>=963&&e<=969||e===1025||e>=1040&&e<=1103||e===1105||e===8208||e>=8211&&e<=8214||e===8216||e===8217||e===8220||e===8221||e>=8224&&e<=8226||e>=8228&&e<=8231||e===8240||e===8242||e===8243||e===8245||e===8251||e===8254||e===8308||e===8319||e>=8321&&e<=8324||e===8364||e===8451||e===8453||e===8457||e===8467||e===8470||e===8481||e===8482||e===8486||e===8491||e===8531||e===8532||e>=8539&&e<=8542||e>=8544&&e<=8555||e>=8560&&e<=8569||e===8585||e>=8592&&e<=8601||e===8632||e===8633||e===8658||e===8660||e===8679||e===8704||e===8706||e===8707||e===8711||e===8712||e===8715||e===8719||e===8721||e===8725||e===8730||e>=8733&&e<=8736||e===8739||e===8741||e>=8743&&e<=8748||e===8750||e>=8756&&e<=8759||e===8764||e===8765||e===8776||e===8780||e===8786||e===8800||e===8801||e>=8804&&e<=8807||e===8810||e===8811||e===8814||e===8815||e===8834||e===8835||e===8838||e===8839||e===8853||e===8857||e===8869||e===8895||e===8978||e>=9312&&e<=9449||e>=9451&&e<=9547||e>=9552&&e<=9587||e>=9600&&e<=9615||e>=9618&&e<=9621||e===9632||e===9633||e>=9635&&e<=9641||e===9650||e===9651||e===9654||e===9655||e===9660||e===9661||e===9664||e===9665||e>=9670&&e<=9672||e===9675||e>=9678&&e<=9681||e>=9698&&e<=9701||e===9711||e===9733||e===9734||e===9737||e===9742||e===9743||e===9756||e===9758||e===9792||e===9794||e===9824||e===9825||e>=9827&&e<=9829||e>=9831&&e<=9834||e===9836||e===9837||e===9839||e===9886||e===9887||e===9919||e>=9926&&e<=9933||e>=9935&&e<=9939||e>=9941&&e<=9953||e===9955||e===9960||e===9961||e>=9963&&e<=9969||e===9972||e>=9974&&e<=9977||e===9979||e===9980||e===9982||e===9983||e===10045||e>=10102&&e<=10111||e>=11094&&e<=11097||e>=12872&&e<=12879||e>=57344&&e<=63743||e>=65024&&e<=65039||e===65533||e>=127232&&e<=127242||e>=127248&&e<=127277||e>=127280&&e<=127337||e>=127344&&e<=127373||e===127375||e===127376||e>=127387&&e<=127404||e>=917760&&e<=917999||e>=983040&&e<=1048573||e>=1048576&&e<=1114109}function Pc(e){return e===12288||e>=65281&&e<=65376||e>=65504&&e<=65510}function Oc(e){return e>=4352&&e<=4447||e===8986||e===8987||e===9001||e===9002||e>=9193&&e<=9196||e===9200||e===9203||e===9725||e===9726||e===9748||e===9749||e>=9800&&e<=9811||e===9855||e===9875||e===9889||e===9898||e===9899||e===9917||e===9918||e===9924||e===9925||e===9934||e===9940||e===9962||e===9970||e===9971||e===9973||e===9978||e===9981||e===9989||e===9994||e===9995||e===10024||e===10060||e===10062||e>=10067&&e<=10069||e===10071||e>=10133&&e<=10135||e===10160||e===10175||e===11035||e===11036||e===11088||e===11093||e>=11904&&e<=11929||e>=11931&&e<=12019||e>=12032&&e<=12245||e>=12272&&e<=12287||e>=12289&&e<=12350||e>=12353&&e<=12438||e>=12441&&e<=12543||e>=12549&&e<=12591||e>=12593&&e<=12686||e>=12688&&e<=12771||e>=12783&&e<=12830||e>=12832&&e<=12871||e>=12880&&e<=19903||e>=19968&&e<=42124||e>=42128&&e<=42182||e>=43360&&e<=43388||e>=44032&&e<=55203||e>=63744&&e<=64255||e>=65040&&e<=65049||e>=65072&&e<=65106||e>=65108&&e<=65126||e>=65128&&e<=65131||e>=94176&&e<=94180||e===94192||e===94193||e>=94208&&e<=100343||e>=100352&&e<=101589||e>=101632&&e<=101640||e>=110576&&e<=110579||e>=110581&&e<=110587||e===110589||e===110590||e>=110592&&e<=110882||e===110898||e>=110928&&e<=110930||e===110933||e>=110948&&e<=110951||e>=110960&&e<=111355||e===126980||e===127183||e===127374||e>=127377&&e<=127386||e>=127488&&e<=127490||e>=127504&&e<=127547||e>=127552&&e<=127560||e===127568||e===127569||e>=127584&&e<=127589||e>=127744&&e<=127776||e>=127789&&e<=127797||e>=127799&&e<=127868||e>=127870&&e<=127891||e>=127904&&e<=127946||e>=127951&&e<=127955||e>=127968&&e<=127984||e===127988||e>=127992&&e<=128062||e===128064||e>=128066&&e<=128252||e>=128255&&e<=128317||e>=128331&&e<=128334||e>=128336&&e<=128359||e===128378||e===128405||e===128406||e===128420||e>=128507&&e<=128591||e>=128640&&e<=128709||e===128716||e>=128720&&e<=128722||e>=128725&&e<=128727||e>=128732&&e<=128735||e===128747||e===128748||e>=128756&&e<=128764||e>=128992&&e<=129003||e===129008||e>=129292&&e<=129338||e>=129340&&e<=129349||e>=129351&&e<=129535||e>=129648&&e<=129660||e>=129664&&e<=129672||e>=129680&&e<=129725||e>=129727&&e<=129733||e>=129742&&e<=129755||e>=129760&&e<=129768||e>=129776&&e<=129784||e>=131072&&e<=196605||e>=196608&&e<=262141}function Ag(e){if(!Number.isSafeInteger(e))throw new TypeError(`Expected a code point, got \`${typeof e}\`.`)}function Xs(e,{ambiguousAsWide:t=!1}={}){return Ag(e),Pc(e)||Oc(e)||t&&kc(e)?2:1}l();var _c=()=>/[#*0-9]\uFE0F?\u20E3|[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23ED-\u23EF\u23F1\u23F2\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB\u25FC\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692\u2694-\u2697\u2699\u269B\u269C\u26A0\u26A7\u26AA\u26B0\u26B1\u26BD\u26BE\u26C4\u26C8\u26CF\u26D1\u26E9\u26F0-\u26F5\u26F7\u26F8\u26FA\u2702\u2708\u2709\u270F\u2712\u2714\u2716\u271D\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u27A1\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B55\u3030\u303D\u3297\u3299]\uFE0F?|[\u261D\u270C\u270D](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?|[\u270A\u270B](?:\uD83C[\uDFFB-\uDFFF])?|[\u23E9-\u23EC\u23F0\u23F3\u25FD\u2693\u26A1\u26AB\u26C5\u26CE\u26D4\u26EA\u26FD\u2705\u2728\u274C\u274E\u2753-\u2755\u2795-\u2797\u27B0\u27BF\u2B50]|\u26D3\uFE0F?(?:\u200D\uD83D\uDCA5)?|\u26F9(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|\u2764\uFE0F?(?:\u200D(?:\uD83D\uDD25|\uD83E\uDE79))?|\uD83C(?:[\uDC04\uDD70\uDD71\uDD7E\uDD7F\uDE02\uDE37\uDF21\uDF24-\uDF2C\uDF36\uDF7D\uDF96\uDF97\uDF99-\uDF9B\uDF9E\uDF9F\uDFCD\uDFCE\uDFD4-\uDFDF\uDFF5\uDFF7]\uFE0F?|[\uDF85\uDFC2\uDFC7](?:\uD83C[\uDFFB-\uDFFF])?|[\uDFC4\uDFCA](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDFCB\uDFCC](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDCCF\uDD8E\uDD91-\uDD9A\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF43\uDF45-\uDF4A\uDF4C-\uDF7C\uDF7E-\uDF84\uDF86-\uDF93\uDFA0-\uDFC1\uDFC5\uDFC6\uDFC8\uDFC9\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF8-\uDFFF]|\uDDE6\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF]|\uDDE7\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF]|\uDDE8\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF]|\uDDE9\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF]|\uDDEA\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA]|\uDDEB\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7]|\uDDEC\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE]|\uDDED\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA]|\uDDEE\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9]|\uDDEF\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5]|\uDDF0\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF]|\uDDF1\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE]|\uDDF2\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF]|\uDDF3\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF]|\uDDF4\uD83C\uDDF2|\uDDF5\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE]|\uDDF6\uD83C\uDDE6|\uDDF7\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC]|\uDDF8\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF]|\uDDF9\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF]|\uDDFA\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF]|\uDDFB\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA]|\uDDFC\uD83C[\uDDEB\uDDF8]|\uDDFD\uD83C\uDDF0|\uDDFE\uD83C[\uDDEA\uDDF9]|\uDDFF\uD83C[\uDDE6\uDDF2\uDDFC]|\uDF44(?:\u200D\uD83D\uDFEB)?|\uDF4B(?:\u200D\uD83D\uDFE9)?|\uDFC3(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?|\uDFF3\uFE0F?(?:\u200D(?:\u26A7\uFE0F?|\uD83C\uDF08))?|\uDFF4(?:\u200D\u2620\uFE0F?|\uDB40\uDC67\uDB40\uDC62\uDB40(?:\uDC65\uDB40\uDC6E\uDB40\uDC67|\uDC73\uDB40\uDC63\uDB40\uDC74|\uDC77\uDB40\uDC6C\uDB40\uDC73)\uDB40\uDC7F)?)|\uD83D(?:[\uDC3F\uDCFD\uDD49\uDD4A\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA\uDECB\uDECD-\uDECF\uDEE0-\uDEE5\uDEE9\uDEF0\uDEF3]\uFE0F?|[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC](?:\uD83C[\uDFFB-\uDFFF])?|[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4\uDEB5](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD74\uDD90](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?|[\uDC00-\uDC07\uDC09-\uDC14\uDC16-\uDC25\uDC27-\uDC3A\uDC3C-\uDC3E\uDC40\uDC44\uDC45\uDC51-\uDC65\uDC6A\uDC79-\uDC7B\uDC7D-\uDC80\uDC84\uDC88-\uDC8E\uDC90\uDC92-\uDCA9\uDCAB-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDDA4\uDDFB-\uDE2D\uDE2F-\uDE34\uDE37-\uDE41\uDE43\uDE44\uDE48-\uDE4A\uDE80-\uDEA2\uDEA4-\uDEB3\uDEB7-\uDEBF\uDEC1-\uDEC5\uDED0-\uDED2\uDED5-\uDED7\uDEDC-\uDEDF\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB\uDFF0]|\uDC08(?:\u200D\u2B1B)?|\uDC15(?:\u200D\uD83E\uDDBA)?|\uDC26(?:\u200D(?:\u2B1B|\uD83D\uDD25))?|\uDC3B(?:\u200D\u2744\uFE0F?)?|\uDC41\uFE0F?(?:\u200D\uD83D\uDDE8\uFE0F?)?|\uDC68(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDC68\uDC69]\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFE])))?))?|\uDC69(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?[\uDC68\uDC69]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?|\uDC69\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?))|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFE])))?))?|\uDC6F(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDD75(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDE2E(?:\u200D\uD83D\uDCA8)?|\uDE35(?:\u200D\uD83D\uDCAB)?|\uDE36(?:\u200D\uD83C\uDF2B\uFE0F?)?|\uDE42(?:\u200D[\u2194\u2195]\uFE0F?)?|\uDEB6(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?)|\uD83E(?:[\uDD0C\uDD0F\uDD18-\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5\uDEC3-\uDEC5\uDEF0\uDEF2-\uDEF8](?:\uD83C[\uDFFB-\uDFFF])?|[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD\uDDCF\uDDD4\uDDD6-\uDDDD](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDDDE\uDDDF](?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD0D\uDD0E\uDD10-\uDD17\uDD20-\uDD25\uDD27-\uDD2F\uDD3A\uDD3F-\uDD45\uDD47-\uDD76\uDD78-\uDDB4\uDDB7\uDDBA\uDDBC-\uDDCC\uDDD0\uDDE0-\uDDFF\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC2\uDECE-\uDEDB\uDEE0-\uDEE8]|\uDD3C(?:\u200D[\u2640\u2642]\uFE0F?|\uD83C[\uDFFB-\uDFFF])?|\uDDCE(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?|\uDDD1(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1|\uDDD1\u200D\uD83E\uDDD2(?:\u200D\uD83E\uDDD2)?|\uDDD2(?:\u200D\uD83E\uDDD2)?))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFC-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFD-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFD\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFE]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?))?|\uDEF1(?:\uD83C(?:\uDFFB(?:\u200D\uD83E\uDEF2\uD83C[\uDFFC-\uDFFF])?|\uDFFC(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFD-\uDFFF])?|\uDFFD(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])?|\uDFFE(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFD\uDFFF])?|\uDFFF(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFE])?))?)/g;var Tg=new Intl.Segmenter,Bg=/^\p{Default_Ignorable_Code_Point}$/u;function Ur(e,t={}){if(typeof e!="string"||e.length===0)return 0;let{ambiguousIsNarrow:r=!0,countAnsiEscapeCodes:n=!1}=t;if(n||(e=zr(e)),e.length===0)return 0;let s=0,o={ambiguousAsWide:!r};for(let{segment:a}of Tg.segment(e)){let u=a.codePointAt(0);if(!(u<=31||u>=127&&u<=159)&&!(u>=8203&&u<=8207||u===65279)&&!(u>=768&&u<=879||u>=6832&&u<=6911||u>=7616&&u<=7679||u>=8400&&u<=8447||u>=65056&&u<=65071)&&!(u>=55296&&u<=57343)&&!(u>=65024&&u<=65039)&&!Bg.test(a)){if(_c().test(a)){s+=2;continue}s+=Xs(u,o)}}return s}l();var Ic=(e=0)=>t=>`\x1B[${t+e}m`,jc=(e=0)=>t=>`\x1B[${38+e};5;${t}m`,Wc=(e=0)=>(t,r,n)=>`\x1B[${38+e};2;${t};${r};${n}m`,Ne={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],gray:[90,39],grey:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgGray:[100,49],bgGrey:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}},MS=Object.keys(Ne.modifier),Lg=Object.keys(Ne.color),Rg=Object.keys(Ne.bgColor),qS=[...Lg,...Rg];function Ng(){let e=new Map;for(let[t,r]of Object.entries(Ne)){for(let[n,s]of Object.entries(r))Ne[n]={open:`\x1B[${s[0]}m`,close:`\x1B[${s[1]}m`},r[n]=Ne[n],e.set(s[0],s[1]);Object.defineProperty(Ne,t,{value:r,enumerable:!1})}return Object.defineProperty(Ne,"codes",{value:e,enumerable:!1}),Ne.color.close="\x1B[39m",Ne.bgColor.close="\x1B[49m",Ne.color.ansi=Ic(),Ne.color.ansi256=jc(),Ne.color.ansi16m=Wc(),Ne.bgColor.ansi=Ic(10),Ne.bgColor.ansi256=jc(10),Ne.bgColor.ansi16m=Wc(10),Object.defineProperties(Ne,{rgbToAnsi256:{value:(t,r,n)=>t===r&&r===n?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(r/255*5)+Math.round(n/255*5),enumerable:!1},hexToRgb:{value:t=>{let r=/[a-f\d]{6}|[a-f\d]{3}/i.exec(t.toString(16));if(!r)return[0,0,0];let[n]=r;n.length===3&&(n=[...n].map(o=>o+o).join(""));let s=Number.parseInt(n,16);return[s>>16&255,s>>8&255,s&255]},enumerable:!1},hexToAnsi256:{value:t=>Ne.rgbToAnsi256(...Ne.hexToRgb(t)),enumerable:!1},ansi256ToAnsi:{value:t=>{if(t<8)return 30+t;if(t<16)return 90+(t-8);let r,n,s;if(t>=232)r=((t-232)*10+8)/255,n=r,s=r;else{t-=16;let u=t%36;r=Math.floor(t/36)/5,n=Math.floor(u/6)/5,s=u%6/5}let o=Math.max(r,n,s)*2;if(o===0)return 30;let a=30+(Math.round(s)<<2|Math.round(n)<<1|Math.round(r));return o===2&&(a+=60),a},enumerable:!1},rgbToAnsi:{value:(t,r,n)=>Ne.ansi256ToAnsi(Ne.rgbToAnsi256(t,r,n)),enumerable:!1},hexToAnsi:{value:t=>Ne.ansi256ToAnsi(Ne.hexToAnsi256(t)),enumerable:!1}}),Ne}var kg=Ng(),jt=kg;var Qs=new Set(["\x1B","\x9B"]),Pg=39,No="\x07",Gc="[",Og="]",Hc="m",Zs=`${Og}8;;`,Mc=e=>`${Qs.values().next().value}${Gc}${e}${Hc}`,qc=e=>`${Qs.values().next().value}${Zs}${e}${No}`,_g=e=>e.split(" ").map(t=>Ur(t)),Ro=(e,t,r)=>{let n=[...t],s=!1,o=!1,a=Ur(zr(e.at(-1)));for(let[u,c]of n.entries()){let f=Ur(c);if(a+f<=r?e[e.length-1]+=c:(e.push(c),a=0),Qs.has(c)&&(s=!0,o=n.slice(u+1,u+1+Zs.length).join("")===Zs),s){o?c===No&&(s=!1,o=!1):c===Hc&&(s=!1);continue}a+=f,a===r&&u<n.length-1&&(e.push(""),a=0)}!a&&e.at(-1).length>0&&e.length>1&&(e[e.length-2]+=e.pop())},Ig=e=>{let t=e.split(" "),r=t.length;for(;r>0&&!(Ur(t[r-1])>0);)r--;return r===t.length?e:t.slice(0,r).join(" ")+t.slice(r).join("")},jg=(e,t,r={})=>{if(r.trim!==!1&&e.trim()==="")return"";let n="",s,o,a=_g(e),u=[""];for(let[d,w]of e.split(" ").entries()){r.trim!==!1&&(u[u.length-1]=u.at(-1).trimStart());let b=Ur(u.at(-1));if(d!==0&&(b>=t&&(r.wordWrap===!1||r.trim===!1)&&(u.push(""),b=0),(b>0||r.trim===!1)&&(u[u.length-1]+=" ",b++)),r.hard&&a[d]>t){let h=t-b,v=1+Math.floor((a[d]-h-1)/t);Math.floor((a[d]-1)/t)<v&&u.push(""),Ro(u,w,t);continue}if(b+a[d]>t&&b>0&&a[d]>0){if(r.wordWrap===!1&&b<t){Ro(u,w,t);continue}u.push("")}if(b+a[d]>t&&r.wordWrap===!1){Ro(u,w,t);continue}u[u.length-1]+=w}r.trim!==!1&&(u=u.map(d=>Ig(d)));let c=u.join(`
`),f=[...c],p=0;for(let[d,w]of f.entries()){if(n+=w,Qs.has(w)){let{groups:h}=new RegExp(`(?:\\${Gc}(?<code>\\d+)m|\\${Zs}(?<uri>.*)${No})`).exec(c.slice(p))||{groups:{}};if(h.code!==void 0){let v=Number.parseFloat(h.code);s=v===Pg?void 0:v}else h.uri!==void 0&&(o=h.uri.length===0?void 0:h.uri)}let b=jt.codes.get(Number(s));f[d+1]===`
`?(o&&(n+=qc("")),s&&b&&(n+=Mc(b))):w===`
`&&(s&&b&&(n+=Mc(s)),o&&(n+=qc(o))),p+=w.length}return n};function Fr(e,t,r){return String(e).normalize().replaceAll(`\r
`,`
`).split(`
`).map(n=>jg(n,t,r)).join(`
`)}l();l();function ko(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}l();import Wg from"node:os";var Mg=()=>Wg.homedir().replace(/\\/g,"/"),zc=Mg;var Uc=/\s+at.*[(\s](.*)\)?/,Vc=/^(?:(?:(?:node|node:[\w/]+|(?:(?:node:)?internal\/[\w/]*|.*node_modules\/(?:babel-polyfill|pirates)\/.*)?\w+)(?:\.js)?:\d+:\d+)|native)/;function Hn(e,{pretty:t=!1,basePath:r,pathFilter:n}={}){let s=r&&new RegExp(`(file://)?${ko(r.replace(/\\/g,"/"))}/?`,"g"),o=t?zc():"";if(typeof e=="string")return e.replace(/\\/g,"/").split(`
`).filter(a=>{let u=a.match(Uc);if(u===null||!u[1])return!0;let c=u[1];return c.includes(".app/Contents/Resources/electron.asar")||c.includes(".app/Contents/Resources/default_app.asar")||c.includes("node_modules/electron/dist/resources/electron.asar")||c.includes("node_modules/electron/dist/resources/default_app.asar")?!1:n?!Vc.test(c)&&n(c):!Vc.test(c)}).filter(a=>a.trim()!=="").map(a=>(s&&(a=a.replace(s,"")),t&&(a=a.replace(Uc,(u,c)=>u.replace(c,c.replace(o,"~")))),a)).join(`
`)}function k(e,...t){let r=e.length>9?"  ":" ".repeat(11-e.length),n=t.length>0?t.length===1?q+"  "+t[0]:t.length===2?q+"  "+t[0]+" "+q+" "+t[1]:q+"  "+t[0]+" "+q+" "+t[1]+" "+Te(t[2]):"";return e+r+n}function Te(e){return e?X+" "+dt.gray(e):""}function Oo(e,t,{spaced:r=!1}={}){let n=r?" ":"";switch(e){case"AN":return Is+n+t+n+js;case"CB":return Qu+n+t+n+ec;case"PR":return Os+n+t+n+_s;case"SB":return tc+n+t+n+rc}}var Vr=R({warning:Ot(` ${X} Type ${g("w")} and press ${g("enter")} to view`),error:re(` ${X} Type ${g("v")} and press ${g("enter")} to view`),stack:m(`Type ${g("s")} and press ${g("enter")} to view stack trace`)});function Jc(e=i.terminal.wrap,t=!0){let r="\u251C"+"\u2500".repeat(e-10);return t?`${U.open}
${r}
\u2502${U.close}`:`${U.open}${r}${U.close}`}function Un(e){return $.open+dt.gray(`${e} ~ ${ln()}`)}function zn(...e){let t=R({color:null,line:$.line}),r,n="";for(L(e[0])?(O(e[1])&&ee(t,e[1]),r=Fr(e[0].join(" "),i.terminal.wrap).split(`
`)):(O(e[e.length-1])&&ee(t,e.pop()),r=Fr(e.join(" "),i.terminal.wrap).split(`
`));r.length!==0;){let s=r.shift().trim();s.length>0?n+=t.line+(t.color?t.color(s):s)+`
`:n+=t.line+`
`}return n.trimEnd()}function Zt(e){return $.trim+`
`+$.line+e+`
`+$.trim}function ne(e){return $.line+e}function Vn(e){return $.red+e}function vr(e){return $.yellow+e}function Yc(e){return $.trim+`
`+$.line+e}function Kc(e){return $.line+e+`
`+$.line}function _o(e){return $.dash+e}function Jn(e){return $.base+dt.gray(`${e} ~ ${ln()}`)+`
`}function Io(e){let t=$t(e.entries),r=V({type:e.type||"error"});if(I(e.stack)){let n=e.cleanStack?Hn(e.stack,{pretty:!0,basePath:i.cwd}):e.stack;r.Wrap(n.split(`
`),m).NL.Newline()}for(let n in e.entries){if(me(e.entries[n]))continue;let s;if(Dt(e.entries[n])){if(yo(e.entries[n]))continue;s=ks(Fe(e.entries[n]))}else s=Fe(e.entries[n]);if(s.length===0)continue;let o=e.type==="warning"?Q(n):ie(n);n==="source"||n==="output"||n==="input"||n==="file"?r.Line(o+N+" "+t(n)+Vt(s),m):r.Line(o+N+" "+t(n)+s,m)}return e.stack===!0&&r.NL.Line(Vr.stack),r.toString()}var Po=class{type="info";line;trim;text;constructor(t){if(O(t)){let r=Ae(t);this.type=r("type")?t.type:"info",this.text=r("text")?t.text:[],this.type==="error"?(this.line=$.red,this.trim=$.redTrim):this.type==="warning"?(this.line=$.yellow,this.trim=$.yellowTrim):this.type==="nil"?(this.line="",this.trim=""):(this.line=$.line,this.trim=$.trim)}else this.line=$.line,this.trim=$.trim,this.text=[]}toRaw(){return this.text}toLine(t){if(this.text.length===0)return"";this.text[this.text.length-1]=this.text[this.text.length-1].trimEnd();let r;return t?r=t(ce(this.text)):this.type==="info"?r=E(ce(this.text)):this.type==="error"?r=re(ce(this.text)):this.type==="warning"?r=Q(ce(this.text)):r=ce(this.text),this.text=[],r+`
`+this.trim}toString(t){if(this.text.length===0)return"";this.text[this.text.length-1]=this.text[this.text.length-1].trimEnd();let r;return t?r=t(ce(this.text)):this.type==="info"?r=E(ce(this.text)):this.type==="error"?r=re(ce(this.text)):this.type==="warning"?r=Q(ce(this.text)):r=ce(this.text),this.text=[],r}Get(t=this.text.length-1){return this.text[t]}Remove(t){return this.text.splice(t,1),this}Replace(t,r,n){return this.text[t]&&(this.text[t]=this.line+(n?n(r):r)+`
`),this}Ruler(t=i.terminal.wrap){return this.text.push($.trim+`
`+U(`\u251C${"\u2500".repeat(t)}`)+`
`+$.trim+`
`),this}get NL(){return this.text.push(this.trim+`
`),this}get BR(){return this.text.push(`
`),this}Pop(){return this.text.pop(),this}Newline(t,r){if(Dt(t)){let n=this.trim+`
`;r&&(r==="yellow"?n=$.yellowTrim+`
`:r==="red"?n=$.redTrim+`
`:r===""&&(n=`
`));for(let s=0;s<t;s++)this.text.push(n)}else t===""?this.text.push(`
`):t==="line"?this.text.push($.trim+`
`):t==="yellow"?this.text.push($.yellowTrim+`
`):t==="red"?this.text.push($.redTrim+`
`):this.text.push(this.trim+`
`);return this}Inline(t,r){let n=this.text.length;return n>0?this.text[n-1]=this.text[n-1].trimEnd()+" "+(r?r(t):t)+`
`:this.text.push(this.line+(r?r(t):t)+`
`),this}Trim(t,r){return this.text.push(this.line+(r?r(t):t)+`
`),this}Insert(t,r){return this.text.push((r?r(t):t)+`
`),this}Line(t,r){return this.type==="error"?this.Error(t,r):this.type==="warning"?this.Warn(t,r):(this.text.push(this.line+(r?r(t):t)+`
`),this)}Error(t,r){return this.text.push($.red+(r?r(t):re(t))+`
`),this}Warn(t,r){return this.text.push($.yellow+(r?r(t):Ot(t))+`
`),this}Break(t,r){return this.text.push(this.trim+`
`+this.line+(r?r(t):t)+`
`+this.trim+`
`),this}Top(t){return this.text.push(Un(t)+`
`),this}End(t){return this.text.push(Jn(t)),this}Context(t){return this.text.push(Io(t)+`
`),this}Dash(t,r){return this.text.push($.dash+(r?r(t):t)+`
`),this}Multiline(t){let r=L(t)?t:t.split(`
`);for(;r.length!==0;)this.text.push(this.line+r.shift()+`
`);return this}Wrap(...t){let r=R({line:this.line});return this.type==="error"?r.color=re:this.type==="warning"?r.color=Ot:r.color=j,L(t[0])?(ze(t[1])&&(r.color=t.pop()),this.text.push(zn(t[0],r)+`
`)):(ze(t[t.length-1])&&(r.color=t.pop()),this.text.push(zn(t,r)+`
`)),this}};function V(e){return i.env.tree===!1&&(O(e)?e.type="nil":e=R({type:"nil"})),new Po(e)}function ei(e,{type:t="info"}={}){let r=V({type:t}),n=L(e)?e:e.split(`
`),s=t==="error"?"red":t==="warn"?"yellow":"line";for(;n.length!==0;){let o=n.shift();o.trim().length>0?r.Line(o.trimEnd()):r.Newline(s)}return r.Newline(s).toString()}function dn(e){let t=$t(e.entries),r=x("message",e);x("warning",e)||(e.warning=!1),r||(e.warning===!1?e.message=V({type:"error"}).NL:e.message=V({type:"warn"}).NL);for(let n in e.entries){let s=Fe(e.entries[n]);n==="source"||n==="output"||n==="input"||n==="file"?e.message.Line(E(n)+N+t(n)+X+Vt(s),m):e.message.Line(E(n)+N+t(n)+s,m)}return I(e.stack)&&(e.warning===!1&&i.errors.add(e.stack),e.message.Break(Vr.stack)),e.message.toLine()}function Xc(e,{line:t=$.line,span:r=null}={}){if(t==="red"?t=$.red:t==="yellow"&&(t=$.yellow),r!==null){let n=x("end",r)?r.end:r.start+1;return t+`
`+[t+P(`${r.start-1}`)+N,t+P(`${r.start}`)+N+e,t+P(`${n}`)+N].join(`
`)}return t+`
`+t+e}function Zc(e,{type:t="info",color:r=E}={}){let n=t==="error"?"red":t==="warn"?"yellow":"line";return V({type:t}).Newline(n).Wrap(e,r).toLine()}l();l();import ll from"node:process";l();var Zn={};qd(Zn,{beep:()=>mh,clearScreen:()=>ch,clearTerminal:()=>lh,cursorBackward:()=>Jg,cursorDown:()=>Ug,cursorForward:()=>Vg,cursorGetPosition:()=>Xg,cursorHide:()=>eh,cursorLeft:()=>tl,cursorMove:()=>zg,cursorNextLine:()=>Zg,cursorPrevLine:()=>Qg,cursorRestorePosition:()=>Kg,cursorSavePosition:()=>Yg,cursorShow:()=>th,cursorTo:()=>Hg,cursorUp:()=>el,enterAlternativeScreen:()=>fh,eraseDown:()=>ih,eraseEndLine:()=>nh,eraseLine:()=>rl,eraseLines:()=>rh,eraseScreen:()=>Wo,eraseStartLine:()=>sh,eraseUp:()=>oh,exitAlternativeScreen:()=>ph,iTerm:()=>hh,image:()=>gh,link:()=>dh,scrollDown:()=>uh,scrollUp:()=>ah});l();import Mo from"node:process";l();var ti=globalThis.window?.document!==void 0,bF=globalThis.process?.versions?.node!==void 0,wF=globalThis.process?.versions?.bun!==void 0,xF=globalThis.Deno?.version?.deno!==void 0,SF=globalThis.process?.versions?.electron!==void 0,FF=globalThis.navigator?.userAgent?.includes("jsdom")===!0,vF=typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope,$F=typeof DedicatedWorkerGlobalScope<"u"&&globalThis instanceof DedicatedWorkerGlobalScope,CF=typeof SharedWorkerGlobalScope<"u"&&globalThis instanceof SharedWorkerGlobalScope,EF=typeof ServiceWorkerGlobalScope<"u"&&globalThis instanceof ServiceWorkerGlobalScope,Yn=globalThis.navigator?.userAgentData?.platform,AF=Yn==="macOS"||globalThis.navigator?.platform==="MacIntel"||globalThis.navigator?.userAgent?.includes(" Mac ")===!0||globalThis.process?.platform==="darwin",TF=Yn==="Windows"||globalThis.navigator?.platform==="Win32"||globalThis.process?.platform==="win32",BF=Yn==="Linux"||globalThis.navigator?.platform?.startsWith("Linux")===!0||globalThis.navigator?.userAgent?.includes(" Linux ")===!0||globalThis.process?.platform==="linux",LF=Yn==="iOS"||globalThis.navigator?.platform==="MacIntel"&&globalThis.navigator?.maxTouchPoints>1||/iPad|iPhone|iPod/.test(globalThis.navigator?.platform),RF=Yn==="Android"||globalThis.navigator?.platform==="Android"||globalThis.navigator?.userAgent?.includes(" Android ")===!0||globalThis.process?.platform==="android";var we="\x1B[",Xn="\x1B]",gn="\x07",Kn=";",Qc=!ti&&Mo.env.TERM_PROGRAM==="Apple_Terminal",qg=!ti&&Mo.platform==="win32",Gg=ti?()=>{throw new Error("`process.cwd()` only works in Node.js, not the browser.")}:Mo.cwd,Hg=(e,t)=>{if(typeof e!="number")throw new TypeError("The `x` argument is required");return typeof t!="number"?we+(e+1)+"G":we+(t+1)+Kn+(e+1)+"H"},zg=(e,t)=>{if(typeof e!="number")throw new TypeError("The `x` argument is required");let r="";return e<0?r+=we+-e+"D":e>0&&(r+=we+e+"C"),t<0?r+=we+-t+"A":t>0&&(r+=we+t+"B"),r},el=(e=1)=>we+e+"A",Ug=(e=1)=>we+e+"B",Vg=(e=1)=>we+e+"C",Jg=(e=1)=>we+e+"D",tl=we+"G",Yg=Qc?"\x1B7":we+"s",Kg=Qc?"\x1B8":we+"u",Xg=we+"6n",Zg=we+"E",Qg=we+"F",eh=we+"?25l",th=we+"?25h",rh=e=>{let t="";for(let r=0;r<e;r++)t+=rl+(r<e-1?el():"");return e&&(t+=tl),t},nh=we+"K",sh=we+"1K",rl=we+"2K",ih=we+"J",oh=we+"1J",Wo=we+"2J",ah=we+"S",uh=we+"T",ch="\x1Bc",lh=qg?`${Wo}${we}0f`:`${Wo}${we}3J${we}H`,fh=we+"?1049h",ph=we+"?1049l",mh=gn,dh=(e,t)=>[Xn,"8",Kn,Kn,t,gn,e,Xn,"8",Kn,Kn,gn].join(""),gh=(e,t={})=>{let r=`${Xn}1337;File=inline=1`;return t.width&&(r+=`;width=${t.width}`),t.height&&(r+=`;height=${t.height}`),t.preserveAspectRatio===!1&&(r+=";preserveAspectRatio=0"),r+":"+Buffer.from(e).toString("base64")+gn},hh={setCwd:(e=Gg())=>`${Xn}50;CurrentDir=${e}${gn}`,annotation(e,t={}){let r=`${Xn}1337;`,n=t.x!==void 0,s=t.y!==void 0;if((n||s)&&!(n&&s&&t.length!==void 0))throw new Error("`x`, `y` and `length` must be defined when `x` or `y` is defined");return e=e.replaceAll("|",""),r+=t.isHidden?"AddHiddenAnnotation=":"AddAnnotation=",t.length>0?r+=(n?[e,t.length,t.x,t.y]:[t.length,e]).join("|"):r+=e,r+gn}};l();import ul from"node:process";l();import ii from"node:process";l();l();var yh=(e,t,r,n)=>{if(r==="length"||r==="prototype"||r==="arguments"||r==="caller")return;let s=Object.getOwnPropertyDescriptor(e,r),o=Object.getOwnPropertyDescriptor(t,r);!Dh(s,o)&&n||Object.defineProperty(e,r,o)},Dh=function(e,t){return e===void 0||e.configurable||e.writable===t.writable&&e.enumerable===t.enumerable&&e.configurable===t.configurable&&(e.writable||e.value===t.value)},bh=(e,t)=>{let r=Object.getPrototypeOf(t);r!==Object.getPrototypeOf(e)&&Object.setPrototypeOf(e,r)},wh=(e,t)=>`/* Wrapped ${e}*/
${t}`,xh=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),Sh=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name"),Fh=(e,t,r)=>{let n=r===""?"":`with ${r.trim()}() `,s=wh.bind(null,n,t.toString());Object.defineProperty(s,"name",Sh);let{writable:o,enumerable:a,configurable:u}=xh;Object.defineProperty(e,"toString",{value:s,writable:o,enumerable:a,configurable:u})};function qo(e,t,{ignoreNonConfigurable:r=!1}={}){let{name:n}=e;for(let s of Reflect.ownKeys(t))yh(e,t,s,r);return bh(e,t),Fh(e,t,n),e}var ri=new WeakMap,nl=(e,t={})=>{if(typeof e!="function")throw new TypeError("Expected a function");let r,n=0,s=e.displayName||e.name||"<anonymous>",o=function(...a){if(ri.set(o,++n),n===1)r=e.apply(this,a),e=void 0;else if(t.throw===!0)throw new Error(`Function \`${s}\` can only be called once`);return r};return qo(o,e),ri.set(o,n),o};nl.callCount=e=>{if(!ri.has(e))throw new Error(`The given function \`${e.name}\` is not wrapped by the \`onetime\` package`);return ri.get(e)};var sl=nl;l();l();var Jr=[];Jr.push("SIGHUP","SIGINT","SIGTERM");process.platform!=="win32"&&Jr.push("SIGALRM","SIGABRT","SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT");process.platform==="linux"&&Jr.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT");var ni=e=>!!e&&typeof e=="object"&&typeof e.removeListener=="function"&&typeof e.emit=="function"&&typeof e.reallyExit=="function"&&typeof e.listeners=="function"&&typeof e.kill=="function"&&typeof e.pid=="number"&&typeof e.on=="function",Go=Symbol.for("signal-exit emitter"),Ho=globalThis,vh=Object.defineProperty.bind(Object),zo=class{emitted={afterExit:!1,exit:!1};listeners={afterExit:[],exit:[]};count=0;id=Math.random();constructor(){if(Ho[Go])return Ho[Go];vh(Ho,Go,{value:this,writable:!1,enumerable:!1,configurable:!1})}on(t,r){this.listeners[t].push(r)}removeListener(t,r){let n=this.listeners[t],s=n.indexOf(r);s!==-1&&(s===0&&n.length===1?n.length=0:n.splice(s,1))}emit(t,r,n){if(this.emitted[t])return!1;this.emitted[t]=!0;let s=!1;for(let o of this.listeners[t])s=o(r,n)===!0||s;return t==="exit"&&(s=this.emit("afterExit",r,n)||s),s}},si=class{},$h=e=>({onExit(t,r){return e.onExit(t,r)},load(){return e.load()},unload(){return e.unload()}}),Uo=class extends si{onExit(){return()=>{}}load(){}unload(){}},Vo=class extends si{#n=Jo.platform==="win32"?"SIGINT":"SIGHUP";#t=new zo;#e;#a;#o;#i={};#r=!1;constructor(t){super(),this.#e=t,this.#i={};for(let r of Jr)this.#i[r]=()=>{let n=this.#e.listeners(r),{count:s}=this.#t,o=t;if(typeof o.__signal_exit_emitter__=="object"&&typeof o.__signal_exit_emitter__.count=="number"&&(s+=o.__signal_exit_emitter__.count),n.length===s){this.unload();let a=this.#t.emit("exit",null,r),u=r==="SIGHUP"?this.#n:r;a||t.kill(t.pid,u)}};this.#o=t.reallyExit,this.#a=t.emit}onExit(t,r){if(!ni(this.#e))return()=>{};this.#r===!1&&this.load();let n=r?.alwaysLast?"afterExit":"exit";return this.#t.on(n,t),()=>{this.#t.removeListener(n,t),this.#t.listeners.exit.length===0&&this.#t.listeners.afterExit.length===0&&this.unload()}}load(){if(!this.#r){this.#r=!0,this.#t.count+=1;for(let t of Jr)try{let r=this.#i[t];r&&this.#e.on(t,r)}catch{}this.#e.emit=(t,...r)=>this.#s(t,...r),this.#e.reallyExit=t=>this.#c(t)}}unload(){this.#r&&(this.#r=!1,Jr.forEach(t=>{let r=this.#i[t];if(!r)throw new Error("Listener not defined for signal: "+t);try{this.#e.removeListener(t,r)}catch{}}),this.#e.emit=this.#a,this.#e.reallyExit=this.#o,this.#t.count-=1)}#c(t){return ni(this.#e)?(this.#e.exitCode=t||0,this.#t.emit("exit",this.#e.exitCode,null),this.#o.call(this.#e,this.#e.exitCode)):0}#s(t,...r){let n=this.#a;if(t==="exit"&&ni(this.#e)){typeof r[0]=="number"&&(this.#e.exitCode=r[0]);let s=n.call(this.#e,t,...r);return this.#t.emit("exit",this.#e.exitCode,null),s}else return n.call(this.#e,t,...r)}},Jo=globalThis.process,{onExit:il,load:YF,unload:KF}=$h(ni(Jo)?new Vo(Jo):new Uo);var ol=ii.stderr.isTTY?ii.stderr:ii.stdout.isTTY?ii.stdout:void 0,Ch=ol?sl(()=>{il(()=>{ol.write("\x1B[?25h")},{alwaysLast:!0})}):()=>{},al=Ch;var oi=!1,hn={};hn.show=(e=ul.stderr)=>{e.isTTY&&(oi=!1,e.write("\x1B[?25h"))};hn.hide=(e=ul.stderr)=>{e.isTTY&&(al(),oi=!0,e.write("\x1B[?25l"))};hn.toggle=(e,t)=>{e!==void 0&&(oi=e),oi?hn.show(t):hn.hide(t)};var Yo=hn;l();l();function Ko(e){return Number.isInteger(e)?Xs(e)===2:!1}var Eh=new Set([27,155]),Ah="0".codePointAt(0),Th="9".codePointAt(0),Zo=new Set,Xo=new Map;for(let[e,t]of jt.codes)Zo.add(jt.color.ansi(t)),Xo.set(jt.color.ansi(e),jt.color.ansi(t));function Bh(e){if(Zo.has(e))return e;if(Xo.has(e))return Xo.get(e);e=e.slice(2),e.includes(";")&&(e=e[0]+"0");let t=jt.codes.get(Number.parseInt(e,10));return t?jt.color.ansi(t):jt.reset.open}function Lh(e){for(let t=0;t<e.length;t++){let r=e.codePointAt(t);if(r>=Ah&&r<=Th)return t}return-1}function Rh(e,t){e=e.slice(t,t+19);let r=Lh(e);if(r!==-1){let n=e.indexOf("m",r);return n===-1&&(n=e.length),e.slice(0,n+1)}}function Nh(e,t=Number.POSITIVE_INFINITY){let r=[],n=0,s=0;for(;n<e.length;){let o=e.codePointAt(n);if(Eh.has(o)){let c=Rh(e,n);if(c){r.push({type:"ansi",code:c,endCode:Bh(c)}),n+=c.length;continue}}let a=Ko(o),u=String.fromCodePoint(o);if(r.push({type:"character",value:u,isFullWidth:a}),n+=u.length,s+=a?2:u.length,s>=t)break}return r}function cl(e){let t=[];for(let r of e)r.code===jt.reset.open?t=[]:Zo.has(r.code)?t=t.filter(n=>n.endCode!==r.code):(t=t.filter(n=>n.endCode!==r.endCode),t.push(r));return t}function kh(e){return cl(e).map(({endCode:n})=>n).reverse().join("")}function Qo(e,t,r){let n=Nh(e,r),s=[],o=0,a="",u=!1;for(let c of n){if(r!==void 0&&o>=r)break;c.type==="ansi"?(s.push(c),u&&(a+=c.code)):(!u&&o>=t&&(u=!0,s=cl(s),a=s.map(({code:f})=>f).join("")),u&&(a+=c.value),o+=c.isFullWidth?2:c.value.length)}return a+=kh(s),a}var Ph=24,ea=({columns:e=80})=>e,Oh=(e,t)=>{let r=e.rows??Ph,n=t.split(`
`),s=Math.max(0,n.length-r);return s?Qo(t,zr(n.slice(0,s).join(`
`)).length+1):t};function fl(e,{showCursor:t=!1}={}){let r=0,n=ea(e),s="",o=()=>{s="",n=ea(e),r=0},a=(...u)=>{t||Yo.hide();let c=Oh(e,u.join(" ")+`
`),f=ea(e);c===s&&n===f||(s=c,n=f,c=Fr(c,f,{trim:!1,hard:!0,wordWrap:!1}),e.write(Zn.eraseLines(r)+c),r=c.split(`
`).length)};return a.clear=()=>{e.write(Zn.eraseLines(r)),o()},a.done=()=>{o(),t||Yo.show()},a}var _h=fl(ll.stdout),ye=_h,xv=fl(ll.stderr);function pl(){let e,t=!1,r="",n=!0,s=R({arrows:R({interval:120,frames:["\u25B9\u25B9\u25B9\u25B9","\u25B8\u25B9\u25B9\u25B9","\u25B9\u25B8\u25B9\u25B9","\u25B9\u25B9\u25B8\u25B9","\u25B9\u25B9\u25B9\u25B8"]}),brielle:R({interval:50,frames:["\u280B","\u2819","\u2839","\u2838","\u283C","\u2834","\u2826","\u2827","\u2807","\u280F"]}),spinning:R({interval:60,frames:["\u25D0","\u25D3","\u25D1","\u25D2"]})}),o=R({label:"",line:!0,color:null,style:"brielle",action:null}),a=function(c,f){let p=R(o);O(c)?p=ee(p,c):I(c)&&(p.label=c,O(f)&&(p=ee(p,f))),t=!0,n=p.line;let d,w=0,b,h=0;p.action!==null?(p.style="arrows",d=x("color",p.action)?p.action.color:xe,b=s.arrows.frames,h=b.length):(d=ze(p.color)?p.color:_t,r=p.label,b=s[p.style].frames,h=b.length),ye.done(),e=setInterval(()=>{if(!t)return;let v;if(p.action!==null){let W=fe(g(p.action.before),b[w=++w%h],p.action.after);v=d(r!==""?k(r,W):W)}else v=d(fe(b[w=++w%h],r));ye(p.line?Zt(v):v)},s[p.style].interval)};return a.update=function(u){r=u},a.stop=function(u){t!==!1&&(t=!1,u?(ye(n?Zt(u):u),ye.done()):ye.clear(),clearInterval(e),e=void 0,r="")},tt(a,"active",{get(){return t}}),a}l();l();function ml(e){return ie(e.replace(/('[{}_\w\s.-]*?'|"[\w\s.-]*?")/g,nt("$1")).replace(/({{2}-?[a-zA-Z0-9_\-.'"[\]]+-?}{2})/g,Pr("$1")).replace(/((?:www|http:|https:)+[^\s]+[\w])/g,Vt("$1")).replace(/(\/)(.*?)(\/)/g,Pr("$1")+ue("$2")+Pr("$3")).replace(/(\\)(\W)/g,m("$1")+ue("$2")).replace(/(:)(?= )/g,m("$1")).replace(/(?<=Filename\s)([\w._-]+)(?=\salready)/,ue.bold("$1")))}function dl(e){return e.replace(/({%|{%-}|-%}|%}|{{|{{-|}}|-}}|<\/?|>|:|,)/g,ue("$1")).replace(/(['"].*?['"])/g,m("$1"))}function Ih(e){let t="",r=e.indexOf("- Valid syntax:");return r>-1?(t=`
`+e.slice(r).slice(1).replace(/(Valid syntax)(:)(.*)/,ie("$1")+m("$2")+Pr("$3")),e.slice(0,r)+t):e}function gl(e,t){let r=[],n=/\(line \d+\):/,s=/'(.*?)'/,o="  ",a=i.terminal.cols-10,u=NaN,c=NaN,f=0;I(e);let p=[];for(let d=0,w=e.length;d<w;d++){let b=e[d];if(n.test(b)){let h=b.indexOf("):"),v=b.indexOf("(line");if(h>-1&&v>-1&&(r.unshift(ce($.red,re.bold(b.slice(0,h+2)),`
`,$.redTrim)),u=Number(b.slice(v+6,h)),f=Fe(u).length+3,b=Ih(b.slice(h+2)),r.push(ce(ml(zn(b,{line:$.red,color:ie})),`
`,$.redTrim,`
`,$.redTrim)),t.length>1)){let W=ce($.redTrim," ".repeat(f-Fe(u-1).length),P(`${u-1}`)," ",$.trim),G=ce($.redTrim," ",re.bold(">")," ",P(`${u}`)," ",$.trim),Y="",H=t[u-1].replace(/\t/g,"  ").trimEnd(),Z=H.match(/^\s*/)[0];s.test(b)&&(Y=b.match(s)[1],c=t[u-1].indexOf(Y),c<0&&(c=NaN));let K=t[u-2].replace(/\t/g,"  ").trimEnd(),Ie=K.match(/^\s*/)[0].length;Z.length===Ie?(K="  "+K.trimStart(),o="  "):Z.length<Ie?(K="    "+K.trimStart(),o="  "):(K="  "+K.trimStart(),o="    "),K.length>a&&(K=K.slice(0,a-3)+"..."),p.push(W+m(K)),H=o+H.trimStart(),H.length>a&&(H=H.slice(0,a-3)+"..."),isNaN(c)?p.push(ce(G,E(dl(H)),`
`,$.redTrim)):p.push(G+E(dl(H)),ce($.redTrim," ".repeat(f-1),Dr," ",$.redTrim," ".repeat(H.indexOf(Y)),ie("^".repeat(Y.length)),`
`+$.redTrim))}}else r.push(ml(zn(b,{line:$.red,color:ie})))}return{line:u,column:c,output:r.join(`
`)+`
`+p.join(`
`)}}function hl(e){let t=e.split(`
`).reduce((s,o)=>{let a=nc(o),u="",c="";if(a!==!1)if(a.length>2){let p=oc(a,a.length/2);u=ce(p[0]),c=ce(p[1]||"")}else u=a[0],c=a[1]||"";let f=o.trim().replace(new RegExp(i.cwd,"g"),"");if(f.length===0)s.push([$.trim]);else{let p=[],d=Fr(f,i.terminal.wrap,{hard:!0}).split(`
`);for(;d.length!==0;){let w=d.shift();d.length!==0&&d[0].length===1&&(w=w+d.shift()),p.push($.line+u+w+c)}s.push(p)}return s},[]),r=[],n=!1;for(;t.length!==0;){let s=t.shift();t.length!==0&&s.length>1?(r.length>0&&r[r.length-1]!==$.trim&&r.push($.trim),r.push(s.join(`
`))):s===$.trim?n?n=!1:(n=!0,r.push(s[0])):r.push(s[0])}ye(r.join(`
`))}function Qe(e,t,r){let n=R({log:!0,store:!1}),s=ee(n,r);s.store===!0&&(s.data=R());let o=Lt("error.asset",t.data)?t.data.error.asset:Lt("errors.asset",t.data)?t.data.errors.asset:null;if(t.status===422){let{value:f}=JSON.parse(t.config.data).asset,{output:p,line:d,column:w}=gl(o,f.split(`
`)),b=R({stack:!1,entries:R({column:w,line:d,file:X+e,details:t.statusText,status:E(Fe(t.status)),processor:on("SHOPIFY API")})}),h=V({type:"error"}).NL.Insert(p,m).NL.Context(b).toString();return s.store&&(s.data.message=p,s.data.rawMessage=Ku(p),s.data.context=b),s.log&&be(h),s.store?s.data:h}if(t.status in Bo){let f=V({type:"error"}).NL.Wrap(Bo[t.status]).toLine(),p=R({stack:!1,entries:R({status:t.status,message:t.statusText,source:`${e}`})});s.store&&(s.data.message=f,s.data.context=p);let d=ce($.red,`
`,f,dn(p));return s.log&&be(d),s.store?s.data:d}let a=re("Unknown error has occured"),u={stack:!1,entries:{status:t.status,message:t.statusText,source:`${e}`}};s.store&&(s.data.message=a,s.data.context=u);let c=ce($.red,`
`,a,dn({stack:!1,entries:R({status:t.status,message:t.statusText,source:`${e}`})}));return s.log&&be(c),s.store?s.data:c}function Ct(e,t){let r={stack:!1,entries:{...t}},n=e instanceof Error?x("message",e)?e.message:e.toString():e;x("stack",e)&&(r.stack=e.stack),x("code",e)&&(r.entries.code=e.code),x("name",e)&&(r.entries.name=e.name),r.stack===!1?(be(ce(ei(n,{type:"error"}),dn(r))),process.exit(0)):i.errors.add(ce(ei(n,{type:"error"}),dn(r)))}var je=(e,t)=>r=>{be(ce(ei(r.message,{type:"error"}),dn({stack:r.stack,entries:{...t,code:r.code,name:r.name,details:e}})))};function Yr(e,t){e.fileName=t.base;let r=R(),n,s=V({type:"error"}).NL.Wrap(e.message.split(`
`)[0],re.bold).NL;if(x("codeFrame",e)){s.Newline();let u=e.codeFrame.split(`
`),c=e.rawCodeFrame.split(`
`),f=0;for(;u.length!==0;){if(x("line",r)===!1){let p=c[f].trimStart();if(p[0]===">"){let d=p.slice(1).trimStart().match(/^\d+/);d!==null&&(n=Number(d[0]))}}s.Line(u.shift()),f=f+1}s.Newline()}let o=[],a=e.stack.split(`
`);for(;a.length!==0;)o.push($.red+a.shift());i.errors.add(o.join(`
`)),be(s.NL.Context({stack:!0,entries:{line:n,name:e.name,file:X+t.relative,processor:on("JSON")}}).toString())}function yl(e,t){let r=V({type:"error"}).NL.Wrap(t.sassMessage,re.bold).Newline();if(x("span",t)){let{span:n}=t,s=x("context",n)?n.context:n.text;if(s.length===0)return"";r.Newline();let{start:o,end:a}=n,u=Fe(a.line+1).length;if(o.line===a.line){let c=u-Fe(a.line).length;o.line>1&&r.Line(`${" ".repeat(c)+P(`${a.line}`)} ${$.trim}`),c=u-Fe(a.line+1).length,r.Line(`${" ".repeat(c)+P(`${a.line+1}`)} ${$.trim} ${s.trimEnd()}`),r.Line(`${" ".repeat(u-1)+Dr} ${$.redTrim} ${" ".repeat(a.column)+g("^")}`)}else{let f=s.slice(n.start.offset,n.end.offset).split(`
`),p=n.start.line+1;for(let d of f){let w=Fe(p++),b=u-w.length,h=b===0?"":" ".repeat(b);r.Line(`${h+P(w)} ${$.trim} ${d}`)}}}be(r.NL.Context({stack:t.sassStack,entries:{line:t.span.start.line,name:t.name,input:e.input,cause:t.cause,processor:on("SASS Dart")}}).toString())}function Dl(e){let t=V({type:"error"}).NL.Wrap(e.text,re.bold).Newline(),r=e.location,n=Fe(r.line).length,s=n-Fe(e.location.line).length;r.line>1&&t.Line(`${" ".repeat(s)+P(`${r.line-1}`)} ${$.trim}`),s=n-Fe(r.line).length,be(t.Line(`${" ".repeat(s)+P(`${r.line}`)} ${$.trim} ${r.lineText}`).Line(`${" ".repeat(n-1)+Dr} ${$.redTrim} ${" ".repeat(r.column)+g("^")}`).NL.NL.Context({stack:!1,entries:{suggest:j(r.suggestion),line:e.location.line,column:e.location.column,plugin:e.pluginName,namespace:r.namespace,file:X+e.location.file,processor:on("ESBuild")}}).toString())}function bl(e,t){let r=[],n=Hn(t.stack,{pretty:!0,basePath:i.cwd}).split(`
`);for(;n.length!==0;)r.push($.red+n.shift());i.errors.add(r.join(`
`)),be(V({type:"error"}).NL.Wrap(`${t.name}${N} ${t.reason}`,re.bold).Newline().Multiline(t.showSourceCode(!0)).NL.NL.Context({stack:!0,entries:{line:t.line,column:t.column,source:e.input,file:e.input===t.file?void 0:t.file,plugin:P(t.plugin),processor:on("PostCSS")}}).toString())}l();function Qn(e,t={}){let r=ee({showPercentage:!0,barColor:"neonGreen",percentColor:"whiteBright",barSize:40,clearOnComplete:!1},t),n=0;function s(p){return $.line+p+" ".repeat(Math.max(0,r.barSize-p.length))}function o(p,d=!1){return(d?"\u25B1":"\u25B0").repeat(p)}function a(){r.clearOnComplete&&console.clear()}function u(p=1){let d=n+p;n=Math.min(d,e),n===e&&a()}function c(p=1){let d=n-p;n=Math.max(d,0)}function f(p){let d=Math.round(n/e*r.barSize),w=o(d),b=o(r.barSize-d,!0),h=yr.default[r.barColor](w)+U(b);return r.showPercentage&&(h+=(p||j)(` ${String(Math.round(n/e*100))}%`)),s(h)}return{stop:a,increment:u,decrement:c,render:f,get percent(){return n}}}l();import{relative as qh}from"pathe";l();import{argv as Wh}from"node:process";var $r={};function wt(e){return _e(e,$r)||($r[e]=[]),(t,r)=>{me(r)?$r[e].push(Q(t)):$r[e].push(Q(t+N+" "+g(r)))}}function z({option:e,name:t,provided:r,expects:n}){be(V({type:"error"}).Line("TYPE ERROR",g).NL.Line(`An invalid ${le(e)} type value was provided within your ${g(i.file.base)} file.`).Line(`The ${le(t)} option has an incorrect type. Syncify will not intialize until this is fixed.`).NL.Line(`provided${N} ${Q(Ge(r).toLowerCase())}`).Line(`expected${N} ${P(n.replace(/([|,])/g,m("$1")))}`).Line(`location${N} ${X}${m.underline(i.file.base)}`).NL.Line("How to fix?",m.bold).Line(`You need to change the option value to use the ${P("expected")} type.`,m).Line(`Use the ${E("defineConfig")} named export for type checking`,m).End(i.log.group).BR.toString()),process.exit(0)}function Qt({message:e,expected:t,provided:r=void 0,fix:n}){r?t=j(`syncify ${t}`):(r=Wh.slice(2).join(" "),t=j(`syncify ${r} ${le(t.replace(/([|,-])/g,m("$1")))}`)),be(V({type:"error"}).Line("COMMAND ERROR",g).NL.Wrap(e).NL.Line(`provided${N} ${j("$")} ${j("syncify "+r)}`).Line(`expected${N} ${j("$")} ${t}`).NL.Line("How to fix?",m.bold).Wrap(n,m).NL.End(i.log.group).BR.toString()),process.exit(0)}function wl({type:e,message:t,provided:r,expected:n,fix:s}){Gn.test(r)&&(r=r.replace(Gn,m("$1"))),Gn.test(n)&&(n=n.replace(Gn,m("$1"))),be(V({type:"error"}).Line("INVALID TARGET",g).NL.Wrap(`Invalid ${le(e)} target provided. `,...t).NL.Line(`provided${N} ${Q(n)}`).Line(`expected${N} ${P(r)}`).NL.Line("How to fix?",m.bold).Wrap(s,m).End(i.log.group).BR.toString()),process.exit(0)}function ta(e){let t=V({type:"error"}).Line("DEPENDENCY ERROR",g).NL;if(I(e))t.Wrap(`Missing ${le(e)} dependency. You need to install ${le(e)} to use it as a processor.`).NL.Line("How to fix?",m.bold).Line("Install the above module as a development dependency, for example:").NL.Line(`$ pnpm add ${e} -D`,j);else{let r=[`Missing ${le(`${e.length}`)} dependencies. You are attempting to use processor`,"(transforms) which are not yet installed. Install the below modules as development","dependencies or disable the transform:"];t.Wrap(r).Newline();for(let n of e)t.Line(`$ pnpm add ${n} -D`,j)}be(t.NL.Wrap("If you are using a different package manager please consider adopting pnpm.",m).End(i.log.group).BR.toString()),process.exit(0)}function xl({option:e,key:t,expects:r,reason:n}){e.indexOf(".")>-1&&(e=e.split(".").filter(Boolean).join(m(" \u2192 "))),be(V({type:"error"}).Line("MISSING OPTION",g).NL.Wrap(`Missing ${Oo("CB",le(e))} config option. The ${le(t)} option needs to be defined`).NL.Line(`expected${N} ${P(r.replace(/([|,])/g,m("$1")))}`).Line(`location${N} ${m.underline(i.file.base)}`).NL.Line("Why?",m.bold).Wrap(n,m).End(i.log.group).BR.toString()),process.exit(0)}function Be({option:e,name:t,value:r,expects:n,reason:s=[""]}){e.indexOf(".")>-1&&(e=e.split(".").filter(Boolean).join(m(" \u2192 "))),be(V({type:"error"}).Line("INVALID ERROR",g).NL.Wrap(`Invalid ${le(e)} configuration. The ${le(t)} option is invalid. `,...s).NL.Line(`provided${N} ${Q(r)}`).Line(`expected${N} ${P(n.replace(/([|,])/g,m("$1")))}`).NL.Line("How to fix?",m.bold).Line("You need to update the option and use one of the expected values.",m).Line(`Use the ${E("defineConfig")} named export for type checking`,m).End(i.log.group).BR.toString(re)),process.exit(0)}function Sl(e){be(V({type:"error"}).Line("MISSING REFERENCE",g).NL.Line(`You have not provided any ${g("stores")} within your ${le("package.json")} file.`).NL.Line("How to fix?",E.bold).Line(`You need to provide ${le("stores")} via ${le("syncify")} key`,m).Line("passing both your store name and a key > value list of theme targets.",m).NL.Line("{",m).Line('  "syncify": {'.replace(/"/g,E('"')),m).Line('    "stores": {'.replace(/"/g,E('"')),m).Line(`      "domain": "${ie("your-store")}"`.replace(/"/g,E('"')),m).Line('      "themes": {}'.replace(/"/g,E('"')),m).Line("    }",m).Line("  }",m).Line("}",m).NL.Line(`Replace the ${E("your-store")} with the name of your .myshopify domain.`,m).Line("Syncify will prompt you and provide a list of theme targets to select from.",m).NL.End(i.log.group).BR.toString()),process.exit(0)}function Fl(e){be(V({type:"nil"}).Line(`${`Missing ${le("syncify.config.js")} configuration`}`,g).BR.Line("Unable to resolve a configuration file within the workspace").BR.Line(`at${N} ${m.underline("~"+e)}`).BR.Line("How to fix?",E.bold).Line("You need to add one the following files to your project",m).BR.Line(` - ${E("syncify.config.ts")}`,m).Line(` - ${E("syncify.config.js")}`,m).Line(` - ${E("syncify.config.mjs")}`,m).Line(` - ${E("syncify.config.cjs")}`,m).Line(` - ${E("syncify.config.json")}`,m).BR.Line(`You can also provide configuration in your ${E("package.json")}`,m).Line(`file using the ${le('"syncify": { "config": {} }')} 'property.`,m).BR.toString(re)),process.exit(0)}function ai(e){let t=[`Missing ${le(".env")} credentials. Syncify could not resolve credentials within the workspace.`,`Check you have ${le(".env")} or ${le("syncify.env")} file present in the root of your project`];be(V({type:"error"}).Line("MISSING ENV",g).NL.Wrap(t).NL.End(i.log.group).BR.toString(re)),process.exit(0)}function vl(e,t){let r=e instanceof Error?_e("message",e)?e.message:e.toString():e;_e("code",e)&&(t.entries.code=e.code),_e("name",e)&&(t.entries.name=e.name),be(V({type:"error"}).Line("ERROR",g).NL.Wrap(t.message,ie).NL.Wrap(r,ie.bold).NL.Line("How to fix?",m.bold).Wrap(t.solution,m).NL.Context({entries:t.entries}).NL.End(i.log.group).BR.toString()),process.exit(0)}function We(e,t){be(V({type:"error"}).Line("ERROR",g).NL.Wrap(e).NL.Line("How to fix?",m.bold).Wrap(t,m).NL.End(i.log.group).BR.toString()),process.exit(0)}function Cr(e,t){e.indexOf(".")>-1&&(e=Oo("CB",fe(e.split(".").filter(Boolean).join(m(" \u2192 ")),q,ie.bold(t)),{spaced:!0}));let r=i.file.base==="package.json"?`${P("syncify")} config in the ${P("package.json")} file.`:`${P(i.file.base)} file.`;be(V({type:"error"}).Line("ERROR",g).NL.Line(`Unknown ${le(e)} option provided.`).NL.Line("How to fix?",m.bold).Line(`The ${le(t)} option is invalid or unsupported.`).Line(`You need to remove it from the ${r}`).End(i.log.group).BR.toString()),process.exit(0)}var xt=function(e){if(es(),e.log.config.silent)return;e.env.tree=!0;let t=V().BR.Top("Syncify").NL.Line(`v${e.version}`,g.whiteBright);e.terminal.cols<80&&t.Newline("red").Error("TERMINAL WIDTH WARNING",g).Newline("red").Error(`Your terminal width is below ${g("100")} columns (currently ${g(`${e.terminal.cols}`)})`).Error("This is not recommended for usage with Syncify (size matters).").Error("Expand your terminal wider for an optimal logging experience."),T(t.toLine())};xt.time=function(){T(Zt(U(`Started in ${A.stop("runtime")}`)))};xt.modes=function(e){let t=V(),r=e.env.prod?"--prod":"--dev";if(e.mode.themes)return T(t.Wrap("Select theme target/s to be inserted into your package.json file.","You will be given a code example after selecting where you will define","a custom target name. If you would like to create a new theme, then run",`the ${le("publish")} resource`,m).toLine());if(e.mode.cache&&(r!==""?r+=` ${X} cache`:r+="cache"),e.mode.clean&&(r!==""?r+=` ${X} clean`:r+="clean"),e.spawn.invoked&&(r!==""?r+=` ${X} build`:r+="build"),e.mode.build&&(r!==""?r+=` ${X} build`:r+="build"),e.mode.export&&(r!==""?r+=` ${X} export`:r+="export"),e.mode.publish&&(r!==""?r+=` ${X} publish`:r+="publish"),e.mode.import&&(r!==""?r+=` ${X} import`:r+="import"),e.mode.watch&&(r!==""?r+=` ${X} watch`:r+="watch",e.mode.hot&&(r+=` ${X} hot`)),r!==""&&(t.Line(r,m),r=""),!Ir(e.filters)){t.NL.Line(`Filters${N}`,E.bold);let n=$t(e.filters);for(let s in e.filters){let o=E(e.filters[s].map(a=>qh(e.cwd,a)).join(", "));t.Line(` ${X} ${s}${N}${n(s)}${o}`,ue)}}T(t.toLine())};xt.spawns=function(e){if(e.mode.build||e.mode.watch){let t=V().Line(`Spawned${N}`,E.bold),r=$t(e.spawn.commands);for(let n in e.spawn.commands){let s=r(n),o=e.spawn.commands[n].pid;t.Line(` ${X} ${ue(n)}${N}${s}PID ${q} #${_t(`${o}`)}`,m)}T(t.toLine())}};xt.stores=function(e){let t=V(),r=e.sync.themes.length;Kt(e.mode.upload,e.mode.import,e.mode.build,e.mode.clean)&&r>0&&(t.Line(`Editors${N}`,g.white),$l(t,e.sync.themes,"editor")),bt(e.mode.upload,e.mode.import,e.mode.watch)&&r>0&&(e.mode.upload||e.mode.import?t.NL.Line(`Targets${N}`,g.white):t.NL.Line(`Previews${N}`,g.white),$l(t,e.sync.themes,"preview")),T(t.toLine())};xt.warnings=function(t){if(!t.log.config.warnings)return;let r=Bt($r),n=r.reduce((o,a)=>(o=o+$r[a].length,o),0);if(n===0)return;let s=V({type:"warning"}).Line(`${n} ${yt("Warning",n)}`,g);for(let o of r){let a=$r[o];if(a.length>0){a.length===n?s.Newline().Line(`${o} ${yt("Warning",a.length)}`,g).Newline():s.Newline().Line(`${a.length} ${o} ${yt("Warning",a.length)}`,g);for(let u of a)s.Line(`${ar} ${u}`,Q)}}an(s.toString())};function $l(e,t,r){let n=t.reduce((s,{target:o,store:a})=>{let u=a.indexOf(".");return u>s.store&&(s.store=u),o.length>s.theme&&(s.theme=o.length),s},{store:0,theme:0});for(let{target:s,store:o,id:a}of t){let u=o.slice(0,o.indexOf(".")),c=r==="editor"?`https://${o}/admin/themes/${a}/editor`:`https://${o}?preview_theme_id=${a}`;e.Line(fe(" ",X,_t(u)," ".repeat(n.store-u.length),q," ",_t.bold(s)," ".repeat(n.theme-s.length),q," ",m.underline(c)))}}var Rt=pl();function ui(e){T(Jc(e.width,e.newlines))}function Ue(e,{color:t,type:r=null,prefix:n=null,suffix:s=null}={}){r==="error"?n===null?be(fe(Vn(t?t(e):ie(e)),Te(s))):be(Vn((t||ie)(k(n,fe(e,Te(s)))))):r==="warning"?n===null?T(vr(fe(t?t(e):Q(e),Te(s)))):T(vr((t||Q)(k(n,fe(e,Te(s)))))):n===null?T(ne(fe(t?t(e):j(e),Te(s)))):T(ne((t||j)(k(n,fe(e,Te(s))))))}function ke(e){e===""?T(`
`):e==="red"?T($.red):e==="yellow"?T($.yellow):T($.line)}function es(e=!1){if(e===!1&&i.log.config.clear===!1)return;let t=ra.rows-2;T(t>0?`
`.repeat(t):""),Gh(ra,0,0),Hh(ra)}function pt(e){i.log.config.silent||i.env.tree===!1||(T(Jn(i.log.group)),i.log.config.clear&&e!==!1&&es(),I(e)&&(i.log.group=e,T(`
`+Un(i.log.group))))}function Cl(e){i.log.config.silent||i.env.tree===!1||(I(e)?T(_o(m(e)+" "+Te(ln()))):(es(),T($.line+`
`+_o(fe(m(i.log.group),Te(ln()))))))}function Nt(e,...t){i.mode.export||i.mode.build||i.log.config.silent||(t.length===2?T(ne(j(k("process",fe(g(e),or,t[0],Te(t[1])))))):T(ne(j(k("process",fe(g(e),Te(t[0])))))))}function ci(e){if(i.log.config.silent===!0||i.mode.watch===!1)return;A.start();let t=fe(e.kind,or,wr(e.namespace)),r=x(e.relative,i.log.changes)?i.log.changes[e.relative]+1:1;i.log.changes[e.relative]=r,i.log.group!==t?(ke(),pt(t),i.log.title!==e.namespace&&(i.log.title=e.namespace)):i.log.config.clear&&(ke(),pt(t)),i.log.uri!==e.relative&&(i.log.uri=e.input),T(Yc(ue(k("changed",fe(e.relative,Te(`${r} change${r>1?"s":""}`))))))}function Et(...e){i.mode.export||i.mode.build||i.log.config.silent||(e.length===1?T(ne(j(k("minified",g(e[0]))))):e.length===4?T(ne(j(k("minified",fe(g(e[0]),q,e[1],Ps,e[2],X,"saved",e[3]))))):T(ne(j(k("minified",fe(g(e[0]),Ps,e[1],X,"saved",e[2],Te(A.now())))))))}function Me(e,{hot:t=!1}={}){i.mode.export||i.mode.build||i.log.config.silent||(i.warnings[e]&&T(vr(Q(k("warning",fe(Fe(i.warnings[e].size),yt("warning",i.warnings[e].size),Vr.warning))))),T(ne(Ns(k("syncing",e)))),te.pending>(t?0:2)&&T(ne(nt(k("queued",fe(e,X,g(Ms(te.pending)),"in queue"))))))}function ts(e,t){return T(ne(nt(k("prompt",e))),Jn(i.log.group)),O(t)&&na.notify(t).notify(),()=>T(Un(i.log.group))}function sa(e,t){if(i.mode.watch){if(i.log.queue.add([e,t.domain,A.stop()]),i.log.idle)return;i.log.idle=!0,te.onIdle().then(()=>{for(let[r,n,s]of i.log.queue)T(ne(xe(k("uploaded",fe(g(r),q,n,Te(s))))));i.log.queue.clear(),i.log.idle=!1})}else T(ne(xe(k("uploaded",fe(g(e),q,t.domain,Te(A.stop()))))))}function El(e){if(!i.log.config.silent)if(i.mode.watch){if(i.log.queue.add([e.target,e.store,A.stop()]),i.log.idle)return;i.log.idle=!0,te.onIdle().then(()=>{for(let[t,r,n]of i.log.queue)T(ne(xe(k("uploaded",g(t),r,n))));i.log.queue.clear(),i.log.idle=!1})}else T(ne(xe(k("uploaded",g(e.target),e.store,A.stop()))))}function er(e,t){T(Vn(re(k("invalid",e)))),na.notify({title:"Syncify Error",sound:"Pop",open:e,subtitle:e,message:"Invalid error"}).notify(),t&&be(Zc(t,{type:"error",color:re.bold}))}function Se(e,{suffix:t=null,notify:r=null}={}){be(Vn(re(k("error",t?e+" "+Te(t):e)))),r!==null&&na.notify(r).notify()}function ia(e){return function(...t){i.spawn.invoked||(i.spawn.invoked=!0),i.log.group!=="Spawn"&&(T(Jn(i.log.group)),i.log.group!=="Syncify"&&es(),T(Un("Spawn")),i.log.group="Spawn"),i.log.title!==e&&(T(Kc(ue(e))),i.log.title=e),hl.call(this,t.toString())}}function Ze(e,t){t?T(vr(Q(k("warning",e)+Te(t)))):T(vr(Q(k("warning",e))))}function oa(e,t){T(ne(nt(k("retrying",e,t.target,t.store))))}function Al(e,t){T(ne(Yu(k("deleted",e,t.target,t.store))))}function Ve(e,...t){i.mode.build||(t.length>0?T(ne(j(k("transform",fe(g(e),q,t[0],t.length===2?fe(q,t[1]):t.length===3?fe(q,t[1],Te(t[2])):""))))):T(ne(j(k("transform",g(e))))))}function aa(e,t){T(ne(j(k("zipped",fe(g("ZIP"),e,Te(t))))))}function Wt(e,t){i.mode.export||i.mode.build||T(ne(k("skipped",fe(I(e)?e:e.key,Te(t)))))}function li(e){T(Zt(j.bold(e)))}function fi(e){T(ne(ks(k("reloaded",fe(g("HOT RELOAD"),Te(A.now(e)))))))}function Tl(e,t){i.mode.build||T(ne(Pr(k("exported",fe(g(e),q,g(t))))))}function pi(e,t){T(ne(j(k("version",fe(e.number,Ps,e.update.number,Te(t))))))}async function ns(e,t){let r=qr(i.sync.stores[t.sidx].client,{method:"get",url:t.url,params:{"asset[key]":e}});return Wr(r).then(({data:n})=>n.asset.value).catch(()=>!1)}async function mi(e,t){let r=qr(i.sync.stores[t.theme.sidx].client,{method:"put",url:t.theme.url,data:{asset:{key:t.key,value:e}}});return Wr(r).then(()=>!0).catch(n=>(Se(t.key),Qe(t.key,n.response),!1))}async function ua(e,t){let r=qr(t,{method:"get",url:e.url});try{let{data:n}=await Wr(r);return n}catch(n){if(n.response&&(n.response.status===429||n.response.status===500))t.params["asset[key]"]&&(oa(t.params["asset[key]"],e),te.add(()=>ua(e,t)));else{if(i.mode.upload)throw n.response;t.params["asset[key]"]&&(Se(t.params["asset[key]"]),Qe(t.params["asset[key]"],n.response))}}}var rs;async function ss(e,t,r){return te.isPaused?void 0:(te.concurrency>2?(rs>=20&&te.concurrency--,rs>=32&&te.concurrency--,rs>=39&&await rt(500)):te.concurrency<3&&rs<30&&te.concurrency++,i.mode.upload===!1&&i.mode.import===!1&&A.start(),await Wr(r).then(({headers:s,data:o})=>{if(i.mode.import===!1&&r.method==="get")return o;r.method==="delete"?Al(t.relative,e):i.mode.watch?(i.mode.hot===!0&&t.type!==10&&t.type!==9&&fi(),El(e)):i.mode.upload?ht.emit("upload",{status:0,get theme(){return e},get file(){return t}}):i.mode.import&&ht.emit("import",{status:0,get theme(){return e},get file(){return t},get data(){return o}}),rs=parseInt(s["x-shopify-shop-api-call-limit"].slice(0,2),10)}).catch(s=>{if(s.response&&(s.response.status===429||s.response.status===500))i.mode.upload===!1&&i.mode.import===!1&&oa(t.key,e),te.add(()=>ss(e,t,r)),i.mode.upload?ht.emit("upload",{status:1,get theme(){return e},get file(){return t}}):i.mode.import&&ht.emit("import",{status:1,get theme(){return e},get file(){return t}});else{if(i.mode.upload)return ht.emit("upload",{status:2,error:s.response,get theme(){return e},get file(){return t}});if(i.mode.import)if(s.response===void 0)ht.emit("import",{status:3,get theme(){return e},get file(){return t}});else return ht.emit("import",{status:2,error:s.response,get theme(){return e},get file(){return t}});else Se(t.key,{suffix:"shopify rejected the request",notify:{title:"Request Error",message:`Failed to sync ${t.key}`}}),s.isAxiosError&&Qe(t.relative,s.response)}return zs}))}l();import pa from"axios";import{stat as rC,writeJson as nC,mkdir as sC,pathExists as iC}from"fs-extra";import{join as aC}from"pathe";import cC from"prompts";async function Bl(e,t){if(arguments.length===1)return r=>Bl(e,r);if(Kt(_e("namespace",t),_e("key",t))){er("invalid fields");return}return pa.get("metafields.json",e.client).then(({data:r})=>r.metafields.find(n=>t.namespace===n.namespace&&t.key===n.key)).catch(r=>{console.log(r)})}async function la(e,t){return arguments.length===1?r=>la(e,r):(t.type="json",t.namespace="email",t.value_type="json_string",t.key="eng",pa.post("metafields.json",{metafield:t},e.client).then(({data:r})=>(console.log("created",r),r.metafield)).catch(r=>{if(console.log(r),!e.queue)return Qe(t.namespace,r.response);if(Mr(r.response.status)){te.add(()=>la(e,t));return}else return Qe(e.store,r.response)}))}async function fa(e,t,r){return is(arguments.length,1)?(n,s)=>fa(e,n,s):pa.put(`metafields/${t}.json`,{metafield:r},e.client).then(n=>(console.log("created"),n.data.metafield)).catch(n=>{if(!e.queue)return Qe(r.namespace,n.response);if(Mr(n.response.status))te.add(()=>fa(e,t,r));else return Qe(e.store,n.response)})}async function di(e,t){if(is(arguments.length,1))return n=>di(e,n);let r=await Bl(e,t);return r?fa(e,r.id,ee(t,{id:r.id,type:"json"})).catch(n=>{if(!e.queue)return Qe(t.namespace,n.response);if(Mr(n.response.status))te.add(()=>di(e,t));else return Qe(e.store,n.response)}):la(e,t)}function gi({stores:e,themes:t}){return{assets:async(r,n,s)=>{let o=me(s)?{method:r,params:{"asset[key]":n.key}}:{method:r,data:{asset:{key:n.key,value:s}}};await te.add(()=>Xt(t,async a=>{i.mode.upload&&A.start(n.uuid),await ss(a,n,ee({url:a.url},e[a.sidx].client,o))}))},pages:async(r,n,s)=>{await te.add(()=>Xt(e,async o=>{i.mode.upload&&A.start(),console.log(s)}))},metafields:r=>te.add(function(){return gc(async function(n){await di(n,r)},e)})}}l();import{join as yi,parse as ha,relative as _l,basename as Vh}from"pathe";l();import{join as lr,dirname as Nl,basename as Uh}from"pathe";l();import{join as hi,dirname as Ll,resolve as EC}from"pathe";function Er(e){return L(e)?e.filter(t=>/\*/.test(t)):/\*/.test(e)?e:null}function St(e){if(L(e))return e.map(St);if(e.indexOf("/")===-1)return e;let t=e.endsWith("/")?Ll(e.slice(0,-1)):Ll(e),r=t.lastIndexOf("/")+1;return t.slice(r)}function ma(e){if(L(e))return e.map(ma);let t=e.lastIndexOf("/");if(t===-1)return e;let r=e.indexOf("*");return r===-1?e.slice(0,t):e.slice(0,r)}function yn(e,t=null){let r=new RegExp(`^\\.?\\/?${e}\\/`);return function n(s){if(L(s))return s.map(n);let o=s.charCodeAt(0)===33;if(o&&(s=s.slice(1)),r.test(s))return o?"!"+s:s;if(s.charCodeAt(0)===46&&s.charCodeAt(1)===46&&s.charCodeAt(2)===47&&We(`Invalid path defined at: ${N} ${Q(`"${s}"`)}`,["Paths must be relative to source"]),t!==null){let a=hi(t,s);return(o?"!":"")+(a.startsWith(e)?a:hi(e,s))}else return(o?"!":"")+hi(e,s)}}var Rl=e=>t=>{if(t.indexOf("*")!==-1&&We(`Base directory path cannot contain glob${N} ${Q(`"${t}"`)}`,["Ensure that path you are resolving is correctly formed"]),t.charCodeAt(0)===46){if(t.length===1)return e+"/";t.charCodeAt(1)===47?t=t.slice(1):We(`Directory path is invalid at${N} ${Q(`"${t}"`)}`,["Ensure that path you are resolving is correctly formed"])}if(t.charCodeAt(0)===47){if(t.length===1)return e+"/";t=t.slice(1)}if(/^[a-zA-Z0-9_-]+/.test(t))return t=hi(e,t),bc(t).charCodeAt(0)===47?t:t+"/";We(`Directory path is invalid at${N} ${Q(`"${t}"`)}`,["Ensure that path you are resolving is correctly formed"])};function kl(e){let t=i.svg.filter(r=>r.input.has(e.input)?!0:r.match(e.input)?(r.input.add(e.input),!0):!1);return me(t)||tt(e,"data",{get(){return t}}),e}function os(e){let t=i.style.find(r=>r.watch(e.input));return me(t)||(tt(e,"data",{get(){return t}}),t.snippet?(e.namespace="snippets",e.key=lr("snippets",t.rename)):e.key=lr("assets",t.rename),e.output?e.data.rename!==Uh(e.output)&&(t.snippet?e.output=lr(i.dirs.output,e.key):e.output=lr(ma(e.output),e.data.rename)):e.output=lr(i.dirs.output,e.key)),e}function as(e){let t=i.script.filter(r=>r.watch.has(e.input));return t.length===0||tt(e,"data",{get(){return t}}),e}function da(e,t){return tt(t,"data",{get(){return e}}),t}function ga(e){if(i.section.prefixDir){if(e.base.endsWith("-group.json")||ur(i.section.global)&&i.section.global.test(e.input))return e;let t=St(e.input);if(i.section.baseDir.has(t))return e;let r=St(e.input)+i.section.separator+e.base;e.name=r,e.key=lr(e.namespace,r),e.output=lr(Nl(e.output),r)}return e}function Pl(e){if(i.snippet.prefixDir){if(ur(i.snippet.global)&&i.snippet.global.test(e.input))return e;let t=St(e.input);if(i.snippet.baseDir.has(t))return e;let r=t+i.snippet.separator+e.base;e.name=r,e.key=lr(e.namespace,r),e.output=lr(Nl(e.output),r)}return e}function Jh(e){switch(e){case".liquid":return"Liquid";case".json":return"JSON";case".html":return"HTML";case".md":return"Markdown";case".js":case".mjs":return"JavaScript";case".jsx":return"JSX";case".ts":return"TypeScript";case".tsx":return"TSX";case".svg":return"SVG";case".css":return"CSS";case".scss":return"SCSS";case".sass":return"SASS";case".mov":case".mp4":case".webm":case".ogg":return"Video";case".ico":case".jpg":case".png":case".gif":case".pjpg":case".webp":return"Image";case".eot":case".ttf":case".woff":case".woff2":return"Font";case".pdf":return"PDF";case".yaml":case".yml":return"YAML"}return"Unknown"}function cs({name:e,dir:t,ext:r,namespace:n},s){let o=s;return/\[dir\]/.test(o)&&(o=o.replace(/\[dir\]/g,t)),/\[file\]/.test(o)&&(o=o.replace(/\[file\]/g,e)),/\[ext\]/.test(o)&&(o=o.replace(/\[ext\]/g,r)),n==="snippets"&&s.endsWith(".liquid")===!1?o+".liquid":!s.endsWith(".[ext]")||!s.endsWith(r)?/\.[a-z]+$/.test(s)?o:o+r:o}function Il(e,t,r){return e.size=NaN,function(n,s,o){let a;return s===15||s===16?(a=yi(St(e.dir),e.base),r=null):(a=yi(n,e.base),r=yi(r,a)),o===-1&&(t=i.cache.paths[t]),e.uuid=It(),e.type=s,e.key=a,e.namespace=n,e.kind=o,e.input=t,e.output=r,e.relative=_l(i.cwd,t),e}}function Yh(e,t){let r=e;return(n,s)=>ee({},r,{uuid:It(),key:n,namespace:s,output:t,kind:Jh(r.ext),relative:_l(i.cwd,t)})}function jl(e){return ls(i.paths,i.dirs.output)(e)}function ls(e,t){return function r(n){let s=new mn(ha(n)),o=Il(s,n,t);if(s.ext===".liquid"){if(e.sections.match(n))return ga(o("sections",4,"Liquid"));if(e.snippets.match(n))return Pl(o("snippets",3,"Liquid"));if(e.layout.match(n))return o("layout",2,"Liquid");if(e.templates.match(n))return o("templates",1,"Liquid");if(e.customers.match(n))return o("templates/customers",1,"Liquid");if(e.metaobject.match(n))return o("templates/metaobject",1,"Liquid");if(e.transforms.has(n)&&e.transforms.get(n)===9)return os(o("snippets",9,"CSS"))}else{if(s.ext===".schema"&&e.schema.match(n))return da(r,o("schema",5,"JSON"));if(s.ext===".json"){if(e.metafields.match(n))return o("metafields",15,"JSON");if(e.sections.match(n))return ga(o("sections",4,"JSON"));if(e.templates.match(n))return o("templates",1,"JSON");if(e.config.match(n))return o("config",7,"JSON");if(e.locales.match(n))return o("locales",8,"JSON");if(e.customers.match(n))return o("templates/customers",1,"JSON");if(e.metaobject.match(n))return o("templates/metaobject",1,"JSON");if(e.schema.match(n))return da(r,o("schema",5,"JSON"))}}switch(s.ext){case".js":case".mjs":return as(o("assets",10,"JavaScript"));case".ts":return as(o("assets",10,"TypeScript"));case".tsx":return as(o("assets",10,"TSX"));case".jsx":return as(o("assets",10,"JSX"));case".svg":return kl(o("assets",11,"SVG"));case".css":return os(o("assets",9,"CSS"));case".scss":return os(o("assets",9,"SCSS"));case".sass":return os(o("assets",9,"SASS"));case".md":return o("pages",16,"Markdown");case".html":return o("pages",16,"HTML")}if(e.assets.match(n)){if(i.spawn.invoked)return o("assets",17);switch(s.ext){case".json":return o("assets",14,"JSON");case".svg":return o("assets",14,"SVG");case".css":return o("assets",14,"CSS");case".ico":case".jpg":case".png":case".gif":case".webp":case".pjpg":return o("assets",14,"Image");case".mov":case".mp4":case".webm":case".ogg":return o("assets",14,"Video");case".pdf":return o("assets",14,"PDF");case".eot":case".ttf":case".woff":case".woff2":return o("assets",14,"Font")}}}}function Wl(e,t){let r=yi(t,e),n=new mn(ha(r)),s=Yh(n,r);if(e.startsWith("sections/"))return s(e,"sections");if(e.startsWith("snippets/"))return s(e,"snippets");if(e.startsWith("layout/"))return s(e,"layout");if(e.startsWith("customers/",10))return s(e,"templates/customers");if(e.startsWith("metaobject/",10))return s(e,"templates/metaobject");if(e.startsWith("templates/"))return s(e,"templates");if(e.startsWith("config/"))return s(e,"config");if(e.startsWith("locales/"))return s(e,"locales");if(e.startsWith("assets/"))return s(e,"assets")}var Ml=e=>t=>{let r=new mn(ha(t)),n=Il(r,t,e);switch(Vh(r.dir)){case"sections":return n("sections",4,-1);case"snippets":return n("snippets",3,-1);case"layout":return n("layout",2);case"templates":return n("templates",1,-1);case"customers":return n("templates/customers",1,-1);case"metaobject":return n("templates/metaobject",1,-1);case"config":return n("config",7,-1);case"locales":return n("locales",8,-1);case"assets":return n("assets",14,-1)}};l();import Kh from"node:zlib";var ql=["b","kb","mb","gb","tb"];function Mt(e){return Dt(e)?tr(e):tr(et(e))}function et(e){return I(e)?cn(e).toString().length:e.toString().length}function tr(e){if(e===0)return`${g("0")}b`;let t=parseInt(String(Math.floor(Math.log(e)/Math.log(1024))),10);return t===0?`${g(`${e}`)}${ql[t]}`:`${g((e/1024**t).toFixed(1))}${ql[t]}`}function At(e,t){let r=et(e);return{isSmaller:r>t||r===t,gzip:tr(Kh.gzipSync(e).length),before:tr(t),after:tr(r),saved:tr(t-r)}}l();async function Gl(e,t,r,n){return me(r)||r===!1?n("put",e,t):I(r)?n("put",e,r):ct(r)?n("put",e,r.toString()):n("put",e,t)}l();import{pathExists as Hl,readFile as ya,writeFile as Xh}from"fs-extra";import{basename as zl}from"pathe";var fs=/{%-?\s*render\s+['"]hot\.js['"]/;async function Ul(){let e="snippets/hot.js.liquid",[t]=i.sync.themes,r=await ya(i.hot.snippet),n=await mi(r.toString(),{theme:t,key:e});return ye(ne(m(` ${X} ${ue(e)} uploaded snippet injection`))),n}function Dn(e){return fs.test(e)}function Vl(e){if(!Dn(e))return Jl(e)}function bn(e){let t=e.search(fs);if(t>-1){let r=e.slice(0,t),n=e.slice(e.indexOf("%}")+2);return r+n}return e}function Jl(e){let t=e.indexOf("<head>")+6;return e.slice(0,t)+`
`+i.hot.renderer+`
`+e.slice(t)}async function Da(e){if(!await Hl(e))return null;let n=(await ya(e)).toString(),[s]=i.sync.themes,o=zl(e),a=`layout/${o}`,u=await ns(`layout/${o}`,s);if(I(u))return fs.test(u)?(n=bn(n),await mi(n,{theme:s,key:a})):!0}async function Yl(e){if(!await Hl(e))return null;let n=(await ya(e)).toString();fs.test(n)||(n=Jl(n),await Xh(e,n),ye(ne(m(` ${X} injected render tag in output layout`))));let[s]=i.sync.themes,o=zl(e),a=`layout/${o}`,u=await ns(`layout/${o}`,s);if(I(u))return fs.test(u)&&(n=bn(n)),await mi(n,{theme:s,key:a})?(ye(ne(m(` ${X} uploaded and inject render tag`))),!0):!1}function r0(e){e===0&&We("Empty output directory",[`There are no files within ${ue(e0(i.cwd,i.dirs.output)+"/**")}`,`You may need to run the ${ue.bold("syncify build")} command and try again.`]);let t=new Map,r=0;for(let n of i.sync.themes){n.target.length>r&&(r=n.target.length);let s=`${n.store}:${n.target}`;t.has(s)||t.set(s,{active:t.size===0,log:null,size:e,processed:"",failed:0,success:0,retry:0,progress:Qn(e),get theme(){return n},errors:{remote:new Map,retry:new Set}})}return t}async function Kl(e){pt("Upload"),Rt("Preparing",{style:"spinning"}),A.start("upload");let t=gi(i.sync),r=ze(e),n=Ml(i.dirs.output),s=Qh.sync(`${i.dirs.output}/**`).sort(),o=r0(s.length),a=null;await rt(500);function u(p){let d=p.toRaw();a!==null&&(clearInterval(a),a=null),ye(p.toString()),a=setInterval(()=>{d[3]=ne(m(k("Elapsed",j.bold(A.now("upload")))))+`
`,ye(ce(d))},100)}function c(p){Rt.stop();let{file:d,theme:w}=p,b=`${w.store}:${w.target}`,h=o.get(b),v=V().NL.Line(wr(d.namespace),g.whiteBright).NL.Line(k("Elapsed",j.bold(A.now("upload"))),m).Line(k("Duration",j(A.stop(d.uuid))),m).Line(k("Size",j(Mt(d.size))),m).Newline();p.status===0?(h.errors.retry.has(d.input)&&(h.retry-=1,h.errors.retry.delete(d.input)),h.success+=1,h.progress.increment(1),h.processed=ue(d.key)):p.status===1?(h.errors.retry.has(d.input)||(h.retry+=1,h.errors.retry.add(d.input)),h.processed=nt(d.key)):p.status===2&&(h.errors.retry.has(d.output)&&(h.retry-=1,h.errors.retry.delete(d.output)),h.errors.remote.has(d.output)||(h.failed+=1,h.progress.increment(1),h.errors.remote.set(d.output,p),h.processed=ie(d.key)));for(let[W,{success:G,size:Y,failed:H,retry:Z,progress:K,processed:Ie}]of o){let[qe,J]=W.split(":"),De=`${g(`${G}`)} ${E("of")} ${g(`${Y}`)}`,Ye=g(`${Z}`),C=g(`${H}`);v.Line(`${g(J.toUpperCase())}  ${q}  ${qe}`,j).NL.Line(Ie).NL.Line(k("uploaded",De),j).Line(k("retrying",Ye),Z>0?nt:j).Line(k("failures",C),H>0?ie:j).NL.Insert(K.render()).Newline()}u(v)}ht.on("upload",c),await rt(500);for(let p of s){let d=n(p),w;try{if(w=(await t0(d.output)).toString(),d.namespace==="layout"&&Dn(w)&&(w=bn(w)),d.size=et(w),!r)await t.assets("put",d,w);else{let h=e.apply({...d},w);await Gl(d,w,h,t.assets)}}catch(b){je("Error reading output file",{file:d.key,source:d.relative})(b)}}await te.onIdle(),clearInterval(a),ye.clear(),pt("Errors");let f=!1;for(let{errors:p,theme:d,failed:w,success:b,size:h}of o.values())if(p.remote.size>0){let v=g(`${d.target.toUpperCase()} THEME`),W=g(`${w}`),G=`${g(`${b}`)} ${E("of")} ${g(`${h}`)}`;T(V().Line(`${v}  ${q}  ${d.store}`).NL.Line(k("uploaded",G),xe).Line(k("failures",W),ie).NL.toString());let Y=1;for(let H of p.remote.values()){let Z=`${(Y<10?"0":"")+Y++}`;ke(),Ue(ie.bold(`ERROR ${Z}`)),Qe(H.file.input,H.error)}ui(),f=!0}await rt(500),f||T(Zt(m("No errors!"))),ye(Zt("Uploaded Completed")),process.exit(0)}l();var um=Pt(Kr());import OD from"fast-glob";l();import{readFile as W0,writeFile as M0}from"fs-extra";import{basename as $f}from"pathe";function q0(e,t){let{type:r,relative:n,kind:s,key:o,output:a}=e;return async function(u){r!==17&&(i.mode.watch&&i.watch.unwatch(a),await M0(a,u).catch(je("Error writing asset to output directory",{file:n,source:n}))),i.mode.hot&&(Me(o,{hot:!0}),s==="JavaScript"?i.wss.script(e.uuid,$f(o)):s==="CSS"&&i.wss.stylesheet(e.uuid,$f(o))),i.env.sync!==0&&i.mode.build===!1&&await t("put",e,u)}}async function Si(e,t,r){let n=q0(e,t),s=await W0(e.input).catch(je("Error reading asset file",{file:e.relative,source:e.relative}));if(s){let o=s.toString();if(cc(o))return i.mode.watch&&Wt(e,"empty file"),null;if(!ze(r))return n(o);let a=r.apply({...e},o);if(me(a)||a===!1)return n(o);if(pn(a))return n(a);if(ct(a))return n(a.toString());await n(o)}return null}l();import{minify as Zy}from"html-minifier-terser";import{relative as Mp}from"pathe";import{readFile as Qy,writeFile as Za}from"fs-extra";l();import{readFile as kp}from"fs-extra";l();var Bp=Pt(Ep(),1);l();var Ap=(e,t,r)=>r<0?-1:e.lastIndexOf(t,r);function jy(e,t){let r=Ap(e,`
`,t-1),n=t-r-1,s=0;for(let o=r;o>=0;o=Ap(e,`
`,o-1))s++;return{line:s,column:n}}function Ri(e,t,{oneBased:r=!1}={}){if(t<0||t>=e.length&&e.length>0)throw new RangeError("Index out of bounds");let n=jy(e,t);return r?{line:n.line+1,column:n.column+1}:n}var Wy=e=>`\\u{${e.codePointAt(0).toString(16)}}`,sr=class e extends Error{name="JSONError";fileName;codeFrame;rawCodeFrame;#n;constructor(t){super(),this.#n=t,Error.captureStackTrace?.(this,e)}get message(){let{fileName:t,codeFrame:r}=this;return`${this.#n}${t?` in ${t}`:""}${r?`

${r}
`:""}`}set message(t){this.#n=t}},Tp=(e,t,r=!0)=>(0,Bp.codeFrameColumns)(e,{start:t},{highlightCode:r}),My=(e,t)=>{let r=t.match(/in JSON at position (?<index>\d+)(?: \(line (?<line>\d+) column (?<column>\d+)\))?$/);if(!r)return;let{index:n,line:s,column:o}=r.groups;if(s&&o)return{line:Number(s),column:Number(o)};if(n=Number(n),n===e.length){let{line:a,column:u}=Ri(e,e.length-1,{oneBased:!0});return{line:a,column:u+1}}return Ri(e,n,{oneBased:!0})},qy=e=>e.replace(/(?<=^Unexpected token )(?<quote>')?(.)\k<quote>/,(t,r,n)=>`"${n}"(${Wy(n)})`);function Ar(e,t,r){typeof t=="string"&&(r=t,t=void 0);let n;try{return JSON.parse(e,t)}catch(a){n=a.message}let s;e?(s=My(e,n),n=qy(n)):n+=" while parsing empty string";let o=new sr(n);throw o.fileName=r,s&&(o.codeFrame=Tp(e,s),o.rawCodeFrame=Tp(e,s,!1)),o}l();function za(e,t){if(i.warnings.has(t)){let r=i.warnings.get(t);return r.has(e)?r.get(e):r.set(e,new Set).get(e)}return i.warnings.set(t,new Map([[e,new Set]])).get(t).get(e)}function Qr(e,t){let r=za("Shared Schema",e.input),n=V({type:"warning"}).NL.Wrap(t.message,Q).NL.Context({stack:!1,type:"warning",entries:{reference:t.$ref,schema:t.schema,section:e.relative,shared:t.shared}});r.add(n.toString())}var Lp=e=>(t,r)=>{let n=za("sass",e.input),s=V({type:"warning"}).NL.Wrap(t,Q);if(x("span",r)){if(me(r.span))return;let{span:a}=r,f=(x("context",a)?a.context:a.text).slice(a.start.offset,a.end.offset).split(`
`);if(f.length<15){let p=Fe(a.end.line).length,d=a.start.line+1;for(let w of f){let b=Fe(d++),h=p-b.length,v=h===0?"":" ".repeat(h);s.Trim(`   ${v+P(b)} ${$.trim} ${w}`)}}}let o=s.NL.Wrap(r.stack,Q).NL.Context({stack:!1,entries:{source:e.relative,deprecated:r.deprecation?"Yes":"No"}}).toString();n.has(o)||n.add(o),i.mode.build||T(vr(Q(k("warning",fe(Fe(n.size),yt("warning",n.size)))+Vr.warning)))};function Rp(e,t){let r=za("postcss",e.input),n=ce(Xc(t.node.toString(),{line:"yellow",span:Dt(t.endLine)?{start:t.line,end:t.endLine}:{start:t.line,end:t.endLine}}),Io({stack:!1,entries:{column:t.column,file:e.relative,plugin:t.plugin}}));r.has(n)||(r.add(n),an(n))}l();function Np(e){return i.terser.liquid.minifySchema===!1?i.processor.json.useTab?JSON.stringify(e,null,"	".repeat(i.processor.json.indent)):JSON.stringify(e,null,i.processor.json.indent):JSON.stringify(e,null,0)}async function Gy(e){let r=(await kp(e.input)).toString(),n=r.search(/{%-?\s*schema/);if(n<0)return[r,null,null];let s=r.indexOf("%}",n+2)+2,o=r.slice(s),a=s+o.search(/{%-?\s*endschema/);if(a<0)return Se("Missing {% endschema %} tag in file.",{suffix:e.relative,notify:{title:"Invalid Syntax",message:"Missing {% endschema %} tag in file."}}),null;try{let u=Ar(r.slice(s,a));return[r.slice(0,s),u,r.slice(a)]}catch(u){return Se(e.relative,{notify:{title:"JSON Error",message:`Error when parsing ${e.base} in ExtractSchema`}}),u instanceof sr&&Yr(u,e),null}}function Hy(e,t){let r=[];for(let n=0,s=t.length;n<s;n++){if(!x("$ref",t[n])){r.push(t[n]);continue}let[o,a]=t[n].$ref.split(".");if(i.section.shared.has(o)){let u=i.section.shared.get(o);x(a,u.schema)?L(u.schema[a])?r.push(...u.schema[a]):O(u.schema[a])&&(x("settings",u.schema[a])?r.push(...u.schema[a].settings):r.push(u.schema[a])):i.mode.build?Qr(e,{shared:u.uri,$ref:t[n].$ref,schema:"settings",message:[`An unknown Shared Schema reference key of ${g(t[n].$ref)} was provided.`,`There is no such key ${g(a)} within the shared schema.`]}):Ze(`undefined $ref ${g(a)} in ${g(o)} `,e.base)}else i.mode.build?Qr(e,{shared:a,$ref:t[n].$ref,schema:"settings",message:[`An unknown Shared Schema file reference ${g(t[n].$ref)} was provided`,`to ${g("settings")} within section file ${g(e.base)}. There is no known shared`,"schema file using that name."]}):Ze(`unknown $ref ${g(t[n].$ref)} `,e.base)}return r}function zy(e,t){let r=[];for(let n=0,s=t.length;n<s;n++)if(x("$ref",t[n])){let[o,a]=t[n].$ref.split(".");if(i.section.shared.has(o)){let u=i.section.shared.get(o);x(a,u.schema)?L(u.schema[a])?r.push(...u.schema[a]):r.push(u.schema[a]):i.mode.build?Qr(e,{shared:a,$ref:t[n].$ref,schema:"blocks",message:[`An unknown Shared Schema key reference of ${g(t[n].$ref)} was provided`,`to the ${g("blocks")} within section file ${g(e.base)}. The shared schema`,`file exists, but the key ${g(a)} does not.`]}):Ze(`undefined $ref ${g(a)} in ${g(o)} `,e.base)}else i.mode.build?Qr(e,{shared:a,$ref:t[n].$ref,schema:"blocks",message:[`An unknown Shared Schema file reference ${g(t[n].$ref)} was provided`,`to ${g("blocks")} within section file ${g(e.base)}. There is no known shared`,"schema file using that name."]}):Ze(`unknown $ref ${g(t[n].$ref)} `,e.base)}else{let o={};for(let a in t[n])a!=="settings"&&(o[a]=t[n][a]);if(o.settings=[],x("settings",t[n]))for(let a of t[n].settings)if(x("$ref",a)){let[u,c]=a.$ref.split(".");if(i.section.shared.has(u)){let f=i.section.shared.get(u);x(c,f.schema)?L(f.schema[c])?o.settings.push(...f.schema[c]):O(f.schema[c])&&(x("settings",f.schema[c])?o.settings.push(...f.schema[c].settings):o.settings.push(f.schema[c])):i.mode.build?Qr(e,{shared:c,$ref:t[n].$ref,schema:`blocks ${q} settings`,message:[`An unknown Shared Schema key reference of ${g(t[n].$ref)} was provided`,`to the ${g("blocks")} schema id ${g(a.id)} within section file`,`${g(e.base)}. The shared schema file exists, but the key ${g(c)} does not.`]}):Ze(`undefined $ref ${g(c)} in ${g(u)} `,e.base)}else i.mode.build?Qr(e,{shared:c,$ref:t[n].$ref,schema:`blocks ${q} settings`,message:[`An unknown Shared Schema file reference ${g(t[n].$ref)} was provided`,`to ${g("blocks")} schema id ${g(a.id)} within section file ${g(e.base)}.`,"There is no known shared schema file using that name."]}):Ze(`unknown $ref ${g(a.$ref)} `,e.base)}else o.settings.push(a);r.push(o)}return r}async function Uy(e){try{let t=await kp(e.input),r=Jt(t);if(x(e.input,i.cache.schema)&&i.cache.checksum[e.input]===r&&i.section.shared.has(e.name))return i.section.shared.get(e.name);i.cache.checksum[e.input]=r;let n=t.toString();if(n.trim().length===0)return Ze("empty file","no shared schema defined"),null;let s=Ar(n.toString());x("$schema",s)&&delete s.$schema,x("$description",s)&&delete s.$description;for(let o in s)if(O(s[o]))x("$description",s[o])&&delete s[o].$description;else if(L(s[o]))for(let a of s[o])x("$description",a)&&delete a.$description;return i.section.shared.set(e.name,{uri:e.input,schema:s}).get(e.name)}catch(t){return Se(e.relative,{notify:{title:"JSON Error",message:`Error when parsing ${e.base}`}}),t instanceof sr&&Yr(t,e),null}}async function Va(e){let t=await Gy(e);if(t===null)return null;let[r,n,s]=t;if(n===null)return r;let o=Ae(n);return o("settings")&&(n.settings=Hy(e,n.settings)),o("blocks")&&(n.blocks=zy(e,n.blocks)),ce(r.trimEnd(),`
`,Np(n),`
`,s.trimStart())}async function Pp(e,t,r){let n=await Uy(e);if(n===null)return null;let s=br(i.cache.schema[n.uri]),o=await Xt(s,a=>tt(e.data(a),"data",{get(){return i.cache.sections[a]}}));Nt("Shared Schema",`${o.length} ${yt("section",o.length)}`);for(let a of o){let u=await Va(a);Me(a.key),await t("put",a,u),i.mode.hot&&(e.type===4?i.wss.section(a.name):a.type!==10&&a.type!==9&&await te.onIdle().then(()=>i.wss.replace()))}}l();import{basename as Vy,join as Jy,relative as Op}from"pathe";import{readFile as Yy,writeFile as _p}from"fs-extra";import Ip from"postcss";var Ja=null,Ya=null;async function Xa(e){if(e==="sass")return Ja=Xe("sass"),pe(Ja)===!1;if(e==="tailwind")return Ya=Xe("tailwindcss"),pe(Ya)===!1}function jp(e,t,r){let n=ze(r)?{...e}:!1;return async function(s){if(pe(s))return null;let o;if(n!==!1){let u=r.apply({...e},cn(s));me(u)||u===!1?o=s:(I(u)||ct(u))&&(o=Fe(u))}else o=s;i.cache.checksum[e.input]=Jt(o),_p(e.output,o).catch(je("Error writing stylesheet to output",{input:e.relative,output:Op(i.cwd,e.output)}));let a=At(s,e.size);if(a.isSmaller?e.kind==="SCSS"||e.kind==="SASS"||e.kind==="Tailwind"?Ve(e.kind,g("CSS"),a.before,A.stop(e.uuid)):Ve("CSS",a.before,`gzip ${a.gzip}`):e.kind==="Tailwind"?Et("Tailwind",a.before,a.after,a.saved):Et("CSS",a.before,a.after,a.saved),i.mode.hot&&i.wss.stylesheet(e.uuid,Vy(e.key)),e.kind!=="Tailwind"&&Me(e.key),t===null)return o;await t("put",e,o)}}async function Ky(e){let{data:t}=e;if(he(t.sass)&&t.sass===!1||me(t))return Ni(e);let r=O(t.sass)?Re(i.processor.sass.config,t.sass):i.processor.sass.config;if(e.ext===".scss"||e.ext===".sass"){i.mode.watch&&A.start();try{let{css:n,sourceMap:s}=Ja.compile(t.input,{loadPaths:r.include,sourceMapIncludeSources:t.postcss,sourceMap:r.sourcemap,style:r.style,alertColor:!1,alertAscii:!1,quietDeps:r.quietDeps,charset:t.snippet===!1,logger:{debug:o=>console.log("DEBUG",o),warn:Lp(e)}});if(r.sourcemap){let o=Jy(i.dirs.sourcemaps.styles,e.base+".map");_p(o,JSON.stringify(s)).catch(je("Error writing SASS Source Map file to the cache directory",{file:Op(i.cwd,o),source:e.relative}))}return Nt("SASS Dart",A.stop()),e.size=et(n),{css:n,map:s}}catch(n){return i.mode.watch&&(A.clear(),Se(e.relative,{notify:{title:"SCSS Transform Error",message:`SASS Dart failed to process ${e.base}`}}),yl(e,n)),null}}return Ni(e)}async function ki(e,t){for(let r in i.processor.tailwind.map)if(i.processor.tailwind.map[r].has(e.input)){let n=jl(i.style[r].input);if(me(n))continue;A.start(n.uuid),n.kind="Tailwind";let s=await Xy(n);I(s)&&t.push([n,s])}return t}async function Xy(e){i.mode.hot&&A.start(e.uuid);let t=jp(e,null,null),r=await Ni(e),n=await Wp(e,r.css,r.map);return n===null?null:e.data.snippet?t(Ka(n,e.data.attrs)):t(n)}async function Ni(e){try{let t=await Yy(e.input);return e.size=et(t),{css:t.toString(),map:null}}catch(t){return A.clear(),Se(e.relative,{notify:{title:"Read Error",message:`File ${e.base} could not be read`}}),Ct(t,{source:e.relative,transform:"style"}),null}}async function Wp(e,t,r){let{data:n}=e,o=he(n.tailwind)===!1&&n.tailwind?[Ya(n.tailwind)].concat(n.postcss):n.postcss;try{i.mode.watch&&e.kind!=="Tailwind"&&A.start();let a=await Ip(o).process(t,{from:n.rename,to:n.rename,map:r?{prev:r,inline:!1,absolute:!0}:null});i.mode.watch&&e.kind!=="Tailwind"&&Nt("PostCSS",A.stop());let u=a.warnings();if(u.length>0)for(let c of u)Rp(e,c);return a.css.toString()}catch(a){return i.mode.watch&&(A.clear(),Se(e.relative,{notify:{title:"PostCSS Transform Error",message:`PostCSS failed to process ${e.base}`}}),bl(e,a)),null}}function Ka(e,t){return t.length>0?`<style ${t.join(" ")}>${e}</style>`:`<style>${e}</style>`}async function Pi(e,t,r){i.mode.watch&&A.start(),i.mode.hot&&A.start(e.uuid);let n=jp(e,t,r);try{let s=await Ky(e);if(s===null)return null;if(pe(Ip)||!e.data.postcss&&!e.data.snippet)return n(s.css);if(e.data.postcss){let o=await Wp(e,s.css,s.map);return o===null?null:e.data.snippet?n(Ka(o,e.data.attrs)):n(o)}return e.data.snippet?n(Ka(s.css,e.data.attrs)):n(s.css)}catch(s){return console.log(s),null}}var eD=/{%-?\s*#[\s\S]+?%}/g,tD=/{%-?\s*comment\s*-?%}[\s\S]+?{%-?\s*endcomment\s*-?%}/g,rD=/{%-?\s*liquid[\s\S]+?%}/g,nD=/[^,:'"a-zA-Z0-9=] +[^'"a-zA-Z0-9=}{]/g;function Oi(e){return i.terser.liquid.removeComments?e.replace(tD,"").replace(eD,""):e}function sD(e){return e.replace(rD,t=>`
`+t.replace(/#.*?$/gm,"")+`
`)}function iD(e,t){if(!i.terser.liquid.minifySchema)return Oi(t);let r=t.search(/{%-?\s*schema/);if(r>-1){let n=t.indexOf("%}",r+2)+2,s=t.slice(n),o=n+s.search(/{%-?\s*endschema/);if(o>-1){let a=JSON.parse(t.slice(n,o)),u=JSON.stringify(a,null,0),c=t.slice(0,n)+u+t.slice(o);return Oi(c)}er(e.relative)}return Oi(t)}function oD(e){return i.terser.liquid.stripDashes,e}async function aD(e,t){try{return await Zy(t,i.terser.markup)}catch(r){return er(e.relative),console.error(r),null}}var uD=e=>async t=>{if(e.type===2&&i.mode.hot&&Dn(t)===!1&&(t=Vl(t)),!i.mode.terse)return Za(e.output,t).catch(je("Error writing liquid file to output",{input:e.relative,output:Mp(i.cwd,e.output)})),Ve(e.kind,wr(e.namespace),tr(e.size),A.now()),t;let r;if(e.base.endsWith(".js.liquid"))r=t.replace(nD,"").replace(/(?<=[:,]) +(?=['"{[])/g,"").replace(/{{%/g,"{ {%").replace(/%}}/g,"%} }").replace(/(?<=[%}]})\s+(?=[\]}])/g," ").replace(/>\s+(?=[{[])/,">").replace(/(?<=[}\]])\s<\//g,"</");else if(e.base.endsWith(".json.liquid"))r=JSON.stringify(JSON.parse(t),null,0);else{let o=e.type===4?iD(e,t):Oi(t),a=await aD(e,o);r=sD(a)}if(Nt("HTML Terser",A.now()),pe(r))return Za(e.output,t).catch(je("Error writing liquid file to output",{input:e.relative,output:Mp(i.cwd,e.output)})),t;let n=oD(r).replace(/^\s+/gm,"");Za(e.output,n);let s=At(t,e.size);return s.isSmaller?Ve(`${e.namespace} ${s.before} \u2192 gzip ${s.gzip}`):Et("Liquid",s.before,s.after,s.saved),n};async function pr(e,t,r){i.mode.watch&&A.start();let s=(await Qy(e.input)).toString();if(i.mode.build&&e.namespace==="layout"&&Dn(s)&&(s=bn(s)),e.type===4){let u=await Va(e);if(u===null)return null;s=u}e.size=et(s);let o=uD(e),a;if(ze(r)){let u=r.apply({...e},s);me(u)||u===!1?a=await o(s):I(u)?a=await o(u):ct(u)&&(a=await o(u.toString()))}else a=await o(s);if(i.cache.checksum[e.input]=Jt(a),i.processor.tailwind.map!==null&&e.type!==9){let u=await ki(e,[[e,a]]);for(let c of u)await t("put",c[0],c[1]),Me(c[0].key)}else Me(e.key),await t("put",e,a);i.mode.hot&&(e.type===4?i.wss.section(e.name):await te.onIdle().then(()=>i.wss.replace()))}l();import{readFile as cD,writeFile as lD}from"fs-extra";function Qa(e,t){try{return Ar(t)}catch(r){return Se(e.relative,{notify:{title:"JSON Error",message:`Error when parsing ${e.base}`}}),r instanceof sr&&Yr(r,e),null}}function fD(e,t=0){try{return JSON.stringify(e,null,t)}catch(r){return console.log(r),null}}async function bs(e,t,r=0){let n=fD(t,r);if(Dc(n))return i.mode.watch&&A.stop(),t;if(r===0){let s=At(n,e.size);Et("JSON",s.before,s.after,s.saved)}else Ve("JSON",e.namespace,tr(e.size),A.now());return e.type===15||lD(e.output,n).catch(je("Error writing JSON",{file:e.relative})),n}async function mr(e,t,r){i.mode.watch&&A.start();let n=await cD(e.input).catch(je("Error reading JSON file",{file:e.relative}));if(ct(n)){let s=n.toString();if(e.size=et(s),s.trim().length===0)return Wt(e,"empty file"),null;if(e.type===7&&e.name==="settings_data")for(let c of i.sync.themes){let f=await ns("config/settings_data.json",c)}let o=Qa(e,s);if(o===null)return null;if(oe(o))return Wt(e,"empty file"),null;let a=i.processor.json.indent;i.mode.terse&&(e.type===14?i.terser.json.assets&&(a=0):e.type===8?i.terser.json.locales&&(a=0):e.type===1?i.terser.json.templates&&(a=0):e.type===15?i.terser.json.metafields&&(a=0):e.type===6?i.terser.json.metaobject&&(a=0):e.type===4?i.terser.json.groups&&(a=0):e.type===7&&i.terser.json.config&&(a=0));let u;if(ze(r)){let c=r.apply({...e},o);me(c)?u=await bs(e,o,a):L(c)||O(c)?u=await bs(e,Fe(c),a):I(c)?u=await bs(e,Qa(e,c),a):ct(c)&&(u=await bs(e,Qa(e,c.toString()),a))}else u=await bs(e,o,a);if(i.cache.checksum[e.input]=Jt(u),i.processor.tailwind.map!==null&&e.type!==9){let c=await ki(e,[[e,u]]);for(let f of c)await t("put",f[0],f[1]),Me(f[0].key)}else Me(e.key),await t("put",e,u);i.mode.hot&&await te.onIdle().then(()=>i.wss.replace())}}l();import{writeFile as eu}from"fs-extra";import Gp from"esbuild";import{basename as pD,join as Hp,relative as qp}from"pathe";async function zp(e){e.watch.clear();let t=await Gp.build(e.esbuild);i.mode.terse&&i.mode.build&&(e.size=et(t.outputFiles[0].text)),i.mode.watch?await Up(e,t.metafile.inputs):(e.watch.has(e.input)||e.watch.add(e.input),i.watch.has(e.input)||i.watch.add(e.input))}async function Up(e,t){let r=[],{cwd:n,watch:s,mode:o}=i;for(let a in t){if(a.indexOf("/node_modules/")>-1)continue;let u=Hp(n,a);e.watch.has(u)||e.watch.add(u),s.has(u)||s.add(u),o.watch&&r.push(u)}o.watch&&await ac().then(()=>{for(let a of e.watch)a.indexOf("/node_modules/")>-1||e.watchCustom!==null&&e.watchCustom(a)||x(a.slice(n.length+1),t)||(e.watch.delete(a),s.unwatch(a))})}function mD(e,t){return t.length>0?`<script ${t.join(" ")}>${e}</script>`:`<script>${e}</script>`}function dD(e){return pn("Function",e)?function(t,r){let n=e.apply({...t},r);return n===!1?(Ue("cancelled"),null):pn("String",n)?(Ue("augment"),n):ct(n)?(Ue("augment"),n.toString()):r}:!1}async function _i(e,t,r){if(!e.data)return;i.mode.watch&&A.start(),i.mode.hot&&A.start(e.uuid);let n=dD(r),s=e.data.length;for(let o of e.data){let{key:a,input:u,output:c,snippet:f,attrs:p,esbuild:{format:d}}=o;try{let{metafile:w,outputFiles:b,warnings:h}=await Gp.build(o.esbuild);s>1&&(ke(),Ue(qp(i.cwd,u))),i.mode.watch&&await Up(o,w.inputs),h.length>0&&void 0;for(let{text:v,path:W}of b)if(W.endsWith(".map")){let G=Hp(i.dirs.sourcemaps.scripts,`${e.base}.map`);eu(G,v).catch(je("Error writing JavaScript Source Map to cache",{file:qp(i.cwd,G),source:e.relative}))}else{if(i.mode.terse)if(isNaN(o.size))Ve(e.kind,`${g(d.toUpperCase())} bundle`),Et(Mt(v));else{let{before:Y,after:H,saved:Z}=At(v,o.size);Ve(`${g(d.toUpperCase())} bundle \u2192 ${g(Mt(v))}`),Et(null,Y,H,Z)}else Ve(`${g(d.toUpperCase())} bundle \u2192 ${g(Mt(v))}`);let G;if(f){if(G=mD(v,p),n&&(G=n(e,G),G===null))continue;await eu(c,G).catch(je("Error writing inline <script> snippet",{file:e.relative})),Tl("script","snippet")}else{if(G=v,n&&(G=n(e,G),G===null))continue;await eu(c,G).catch(je("Error writing JavaScript asset",{file:e.relative}))}i.mode.hot?(Me(a,{hot:!0}),i.wss.script(e.uuid,pD(a)),await t("put",o,G)):i.mode.build||(Me(a),await t("put",o,G))}}catch(w){x("errors",w)&&(A.clear(),Se(e.relative,{notify:{title:"JavaScript Error",message:`Transform failed for ${e.base}`}}),i.errors.add(u),w.errors.forEach(Dl))}}s>1&&ke()}l();import gD from"svgo";import hD from"svg-sprite";import{join as Tr,relative as yD}from"pathe";import{readFile as Vp,writeFile as Jp}from"fs-extra";async function DD(e){let t=await Vp(e);return[e,t.toString(),et(t)]}function bD(e){return new Promise(function(t,r){e.compile((n,s)=>{if(n)return r(n);for(let o in s)for(let a in s[o])t(s[o][a].contents.toString())})})}function wD(e,t,r){async function n(s){let o=ee({},e);i.mode.watch&&A.start(),o.kind="Sprite",s.snippet?(o.namespace="snippets",o.key=Tr("snippets",cs(o,s.rename)),o.output=Tr(i.dirs.output,o.key)):(o.key=Tr("assets",cs(o,s.rename)),o.output=Tr(i.dirs.output,o.key));let a=s.sprite===!0?i.processor.sprite:s.sprite,u=new hD(a),c=await Xt(br(s.input),DD).catch(je("Error reading an SVG file",{file:o.base,source:o.relative}));if(c){let f=c.filter(([b,h])=>Yp(h)?(Wt(yD(i.cwd,b),"Liquid Detected"),!1):!0);o.size=0;for(let[b,h,v]of f)u.add(b,null,h),o.size=o.size+v;let p=await bD(u),d=f.length;Nt("SVG Sprite",`${d} ${yt("SVG",d)}`,A.stop()),await Jp(o.output,p).catch(je("Error writing SVG Sprite",{file:o.key,caller:e.relative}));let w=At(p,o.size);w.isSmaller?Ve(`${o.kind} ${w.before}`,`gzip ${w.gzip}`):Et(o.kind,w.before,w.after,w.saved),t&&(Me(o.key),await t("put",o,p))}}return n}function Yp(e){return/^(?:{{[\s\S]+?}}|{%[\s\S]+?%})|[^"'](?:{{[\s\S]+?}}|{%[\s\S]+?%})[^'"]/m.test(e)}function xD(e){if(/<path[^>]*[a-zA-Z"'\s](>)(?!\s*<\/path>)/g.test(e)){let r=`${m(`<${E("path")}>`)}`,n=`${xe(`<${E("path")} />`)}`;return Ve("SVG",r,n,"patched solidus"),e.replace(/(<path[^>]*[a-zA-Z"'\s])(>)(?!\s*<\/path>)/g,"$1 /$2")}return e}function SD(e,t,r){let n=ee({},e);async function s(o){i.mode.watch&&A.start(),o.snippet?(n.namespace="snippets",n.key=Tr("snippets",cs(n,o.rename)),n.output=Tr(i.dirs.output,n.key)):(n.key=Tr("assets",cs(n,o.rename)),n.output=Tr(i.dirs.output,n.key));let a=o.svgo===!0?i.processor.svgo:o.svgo,c=(await Vp(n.input)).toString();if(Yp(c))return Wt(n,"Liquid Detected"),null;let f=xD(c);n.size=et(f);let p;try{p=gD.optimize(f,a)}catch(b){return Se(n.relative,{notify:{title:"Transform Error",message:`SVGO failed to optimize ${n.key}`}}),Ct(b,{source:n.relative,output:n.key,processor:"SVGO"}),null}Nt("SVGO",A.stop());let{data:d}=p,w=At(d,n.size);w.isSmaller?Ve(`${n.kind} ${w.before} \u2192 gzip ${w.gzip}`):Et(n.kind,w.before,w.after,w.saved),await Jp(n.output,d).catch(je("Error writing SVG",{file:n.key,caller:e.relative})),t&&(Me(n.key),await t("put",n,d))}return s}async function Ii(e,t,r){i.mode.watch&&A.start();let n=wD(e,t,r),s=SD(e,t,r),o=e.data.length;for(let a=0;a<o;a++){let u=e.data[a];a>0&&i.mode.watch&&ci(e),u.format==="sprite"?await n(u):u.format==="file"&&await s(u)}}l();import{join as lu}from"pathe";import{existsSync as fu,mkdirSync as tm,readFileSync as ND}from"fs-extra";var sm=Pt(em());import rm from"node:zlib";import nm from"cbor";var Gt=new jr;function kD(e){let t=ND(e),r=rm.gunzipSync(t);return nm.decode(r)}function Lr(e,t){return async()=>{let r=await nm.encodeAsync(t,{omitUndefinedProperties:!0,canonical:!0}),n=rm.gzipSync(r);return n[9]=3,(0,sm.default)(e,n)}}async function im(e){i.cache.uri=Or(null);let t=lu(i.cwd,"node_modules",".cache");fu(t)||tm(t);let r=lu(t,"syncify");fu(r)||tm(r);for(let n of Ys)i.cache.uri[n]=lu(r,`${n}.bin`),fu(i.cache.uri[n])?i.cache[n]=kD(i.cache.uri[n]):(i.cache[n]={},Gt.add(Lr(i.cache.uri[n],i.cache[n])));if(x("hotSnippet",i.cache.build)||(i.cache.build.hotSnippet=[]),e.cache)return PD()}function PD(e=null){if(e===null){for(let t of Ys)Ir(i.cache[t])||(i.cache[t]={},Gt.add(Lr(i.cache.uri[t],i.cache[t])));return Gt.onIdle()}return i.cache[e]={},Gt.add(Lr(i.cache.uri[e],i.cache[e]))}function om(){return Gt.onIdle()}function $n(e=null){if(e===null){for(let t of Ys)Ir(i.cache[t])||Gt.add(Lr(i.cache.uri[t],i.cache[t]));return Gt.onIdle()}else return Gt.add(Lr(i.cache.uri[e],i.cache[e]))}function am(e,t=NaN){let r=e.endsWith(".myshopify.com")?e.slice(0,e.indexOf(".myshopify.com")).toLowerCase():e.toLowerCase();return isNaN(t)===!1?Lt(`${r}.${t}`,i.cache.pages)?i.cache.pages[r][t]:(x(r,i.cache.pages)?i.cache.pages[r][t]={}:i.cache.pages[r]={[t]:{}},Gt.add(Lr(i.cache.uri.pages,i.cache.pages)),i.cache.pages[r][t]):(x(r,i.cache.pages)||(i.cache.pages[r]={},Gt.add(Lr(i.cache.uri.pages,i.cache.pages))),i.cache.pages[r])}function xs(e,t){let r=e.endsWith(".myshopify.com")?e.slice(0,e.indexOf(".myshopify.com")).toLowerCase():e.toLowerCase();return x(r,i.cache.pages)?i.cache.pages[r][t.id]=t:i.cache.pages[r]={[t.id]:t},Gt.add(Lr(i.cache.uri.pages,i.cache.pages)),i.cache.pages[r][t.id]}function _D(){let e=R({stats:R({total:0,errors:0,skipped:0,bundled:0})});for(let t of["styles","scripts","svgs","sections","layouts","metaobject","templates","snippets","locales","configs","schema","pages","metafields","assets"])e[t]=R({group:t,time:"",size:0,files:[],report:null});return e}async function Hi(e){A.start("build"),i.mode.export||(Cl("Build"),ke());let t=V({type:"error"}),r=V().Newline(),n=new Set,s=_D(),o=oe(i.filters)===!1,a=ls(i.paths,i.dirs.output),u=(0,um.default)(br(i.watch.values())),c=await OD("**",{absolute:!0,cwd:i.dirs.input}),f=i.cache.paths;for(let w of c.filter(u)){let b=a(w);if(!me(b))switch(b.type){case 9:s.styles.files.push(b);break;case 10:s.scripts.files.push(b);break;case 4:s.sections.files.push(b);break;case 2:s.layouts.files.push(b);break;case 3:s.snippets.files.push(b);break;case 8:s.locales.files.push(b);break;case 7:s.configs.files.push(b);break;case 1:s.templates.files.push(b);break;case 16:s.pages.files.push(b);break;case 14:s.assets.files.push(b);break;case 15:s.metafields.files.push(b);break;case 11:for(let{uuid:h,format:v,input:W}of b.data)if(!n.has(h))if(n.add(h),v==="sprite")s.svgs.files.push(b);else for(let G of W)s.svgs.files.push(a(G));break}}function p(w,b){return A.start(w.group),async function(h){A.start(h.uuid),s.stats.total+=1;try{f[h.output]=h.input;let v=h.ext===".json"?await mr(h,e):await b(h,e);return v===null||isNaN(h.size)?(s.stats.skipped+=1,R({name:h.base,input:h.relative,time:A.stop(h.uuid),output:h.key,error:"Skipped File"})):(s.stats.bundled+=1,R({name:h.base,input:h.relative,output:h.key,error:null,time:A.stop(h.uuid),size:At(v,h.size)}))}catch(v){return s.stats.errors+=1,t.Line(v.message),R({name:h.base,input:h.relative,output:h.key,time:A.stop(h.uuid),error:v.message})}}}async function d(w,b){let h=o&&x(w,i.filters)?i.filters[w]:null;if(h&&h.includes(w)===!1)return 0;let v=s[w];v.size=v.files.length,v.report=await Xt(v.files,p(v,b),{stopOnError:!0}),v.time=A.stop(w);let W=v.report.length,G=g(W<10?` ${W}`:`${W}`);r.Line(k(w,`${G} ${yt("file",W)} ${Te(v.time)}`))}if(await d("svgs",Ii),await d("layouts",pr),await d("templates",pr),await d("sections",pr),await d("snippets",pr),await d("locales",mr),await d("configs",mr),await d("assets",Si),await d("styles",Pi),await d("scripts",_i),await $n(),i.mode.export===!1&&i.mode.publish===!1){if(r.NL.Dash("Completed",m).NL.Line(k("version",`${i.vc.number}`)).Line(k("processed",`${g(`${s.stats.total}`)} files`)).Line(k("bundled",`${g(`${s.stats.bundled}`)} files`)).Line(k("skipped",`${g(`${s.stats.skipped}`)} files`)).Line(k("duration",A.now("build"))).Line(k("warnings",g(`${i.warnings.size}`))).Line(k("errors",g(`${s.stats.errors}`))),i.warnings.size>0){r.NL.Dash("Warnings",m).Newline();let w,b=0;for(let h of i.warnings.keys())for(let[v,W]of i.warnings.get(h)){w!==v?(b=1,w=v):(b=b+1,r.Ruler()),r.Warn(`${g("WARNING")} ${Xu}${g(`${b}`)}`,Q).Newline("yellow").Warn(w,Q);for(let G of W)r.Insert(G)}T(r.NL.End(i.log.group).BR.toString(j))}else T(r.NL.End(i.log.group).BR.toString(j));process.exit(0)}}l();l();import{readFile as WD,writeFile as MD}from"fs-extra";import qD,{stringify as GD}from"gray-matter";import Vi from"prompts";import HD from"markdown-it";import{Turndown as zD,GithubFlavor as UD}from"@syncify/turndown";l();function ID(e){return e==="boolean"||e==="color"||e==="date"||e==="date_time"||e==="dimension"||e==="json"||e==="money"||e==="multi_line_text_field"||e==="number_decimal"||e==="number_integer"||e==="rating"||e==="rich_text_field"||e==="single_line_text_field"||e==="url"||e==="volume"||e==="weight"}function cm(e,t){for(let r of t)for(let n of["key","type","value","namespace","description"]){if(n!=="description"&&!_e(n,r))return er(e.relative,[`Missing ${P.bold(n)} property key value in a ${Q.bold("metafields")}`,"value of page frontmatter. Frontmatter metafields require you provide the following keys:","",`${m("-")} ${E("key")}`,`${m("-")} ${E("type")}`,`${m("-")} ${E("value")}`,`${m("-")} ${E("namespace")}`,"",`${m("Update the metafield entry to include")} ${E(n)}`]),!1;if(n==="type"){let s=r[n];if(!ID(s))return er(e.relative,[`Invalid type ${P.bold(s)} provided in a page frontmatter ${Q.bold("metafields")}`,`value. Frontmatter metafields ${g("must")} be one of following types:`,"",`${m("-")} ${E("boolean")}`,`${m("-")} ${E("color")}`,`${m("-")} ${E("date")}`,`${m("-")} ${E("date_time")}`,`${m("-")} ${E("dimension")}`,`${m("-")} ${E("json")}`,`${m("-")} ${E("money")}`,`${m("-")} ${E("multi_line_text_field")}`,`${m("-")} ${E("number_decimal")}`,`${m("-")} ${E("number_integer")}`,`${m("-")} ${E("rating")}`,`${m("-")} ${E("rich_text_field")}`,`${m("-")} ${E("single_line_text_field")}`,`${m("-")} ${E("url")}`,`${m("-")} ${E("volume")}`,`${m("-")} ${E("weigh")}`,"",`${m("Update the metafield entry to an accepted")} ${E("type")}`]),!1}}return!0}l();import zi from"axios";async function lm(e){return zi.get("pages.json",e.client).then(({data:t})=>t.pages).catch(t=>Qe(e.store,t.response))}async function fm(e,t){if(Kt(_e("handle",t),_e("title",t))){console.log("invalid fields");return}return zi.get("pages.json",e.client).then(({data:r})=>_e("handle",t)&&_e("title",t)?r.pages.find(n=>t.title===n.title&&t.handle===n.handle):_e("handle",t)?r.pages.find(n=>t.handle===n.handle):_e("title",t)?r.pages.find(n=>t.title===n.title):void 0).catch(r=>{console.log(r)})}async function Ui(e,t){i.mode.upload||A.start();let r=await zi.post("/pages.json",{page:t},e.client).then(({data:n})=>(sa("page",e),n.page)).catch(n=>{Mr(n.response.status)?te.add(()=>Ui(e,t)):Lt("response.data",n.response)&&Qe(t.title,n.response)});if(r)return xs(e.domain,r),r}async function pu(e,t,r){let{mode:n}=i;n.upload||A.start();let s=`pages/${r.id}.json`,o=await zi.put(s,{page:r},e.client).then(({data:a})=>(n.watch?sa("page",e):n.upload&&ht.emit("upload","uploaded",r,{key:t.key,namespace:t.namespace,fileSize:Mt(r.body_html)}),a.page)).catch(a=>{Mr(a.response.status)?te.add(()=>pu(e,t,r)):console.log(a)});if(o)return o}function VD(e){return new zD(i.page.import).use(UD).turndown(e)}async function JD(e){let t=ts("No matching pages, select an option",{title:"No matching pages",message:"Open CLI and select an option"}),r=await Vi({type:"select",name:"action",message:"Page Resources",hint:" ",instructions:!1,choices:[{title:"Create Page",description:`Create a new page on ${e.domain}`,value:1},{title:"Select Page",description:`Select a page to overwrite on ${e.domain}`,value:2},{title:"Cancel",description:"Cancel, and skip this sync operation",value:4}]});return{resume:t,action:r.action}}async function YD(e){let t=await lm(e);if(!t)return;let r=t.map(s=>({title:s.title,description:`https://admin.shopify.com/store/${e.store.toLowerCase()}/pages/${s.id}`,value:s.id}));return r.push({title:tui.hr(20,!1),disabled:!0,selected:!1},{title:"Create New Page",description:`Create a new page on ${e.domain}`,value:1},{title:"Cancel",description:"Cancel, and skip this sync operation",value:4}),(await Vi({type:"select",name:"action",message:"Choose Page",hint:" ",instructions:!1,choices:r})).action}async function KD(e){let t=[{title:"View Source",description:"Prints the page source in the CLI",value:5},{title:"Update Local",description:"Update the local source with remote version",value:3},{title:"Overwrite Remote",description:"Overwrite the remote version with local source",value:6},{title:"Cancel",description:"Cancel, and skip this sync operation",value:4}],r=ts("Remote version is newer than local version",{title:"Remote \u2192 Local",message:"Remote version has changed"}),n=await Vi({type:"select",name:"action",message:"Page Resources",hint:" ",instructions:!1,choices:t});if(n.action===5){ke(""),T(e.body_html),ke("");let s=await Vi({type:"select",name:"action",message:"Page Resources",hint:" ",instructions:!1,choices:t.slice(1)});return{resume:r,action:s.action}}else return{resume:r,action:n.action}}function XD(e,t){let r={};if(x("title",t)?r.title=`${t.title}`:r.title=wr(e.name.replace(/[._-]/g," ")),x("handle",t)){let n,s=t.handle;/^[./]{1,2}/.test(s)&&(n=s,s=s.replace(/^[./]{1,2}/,""),Ze(`handle ${or} ${n} ${q} ${s}`,"fixed start")),/^pages\//.test(s)&&(n=s,s=s.replace(/^pages\//,""),Ze(`handle ${or} ${n} ${q} ${s}`,"fixed sub-path")),/[_/]/.test(t.handle)&&(n=s,s=s.replace(/[_/]/g,"-"),Ze(`handle ${or} ${n} ${q} ${s}`,"fixed invalid characters")),r.handle=s}else x("title",t)?r.handle=uc(t.title):r.handle=e.name.toLowerCase();if(x("author",t)&&i.page.author!==""){let n,s=t.author;/\//.test(t.author)&&(n=t.author,s=n.replace(/\//g," "),Ze(`author ${or} ${n} ${q} ${s}`,"fixed invalid characters")),r.author=s}else t.author=i.page.author;return x("published",t)?he(t.published)?r.published=t.published:(Ze(`published ${or} expected boolean, got ${typeof t.published}`,"defaulted to false"),r.published=!1):r.published=!0,x("template_suffix",t)&&(x("template",t)?(Ze("duplicate template_suffix references","using template"),delete t.template_suffix):(t.template=t.template_suffix,delete t.template_suffix)),x("template",t)?r.template_suffix=t.template:i.page.suffixDir&&ur(i.page.global)&&i.page.global.test(e.input)!==!1&&(r.template_suffix=St(e.input)),x("metafield",t)&&(Ze("use metafields instead of metafield","sync will still process"),t.metafields=t.metafield,delete t.metafield),x("metafields",t)?O(t.metafields)&&(r.metafields=[t.metafields]):r.metafields=void 0,r}async function pm(e,t){if(i.sync.stores.length>1)return Wt(e,"pages do not support multistore sync"),null;let r=await WD(e.input);if(Ir(r.toString()))return i.mode.watch&&Wt(e,"empty file"),null;let n=qD(r),{data:s,content:o}={...n},a=XD(e,s);if(L(a.metafields)&&!cm(e,a.metafields))return null;e.kind==="Markdown"?(A.start(),a.body_html=HD(i.page.export).render(o),Ve(`${g("Markdown")} ${q} ${g("HTML")} ${X} ${A.stop()}`)):(Ve("HTML"),a.body_html=o);let u=i.sync.stores[0],c=u.store.toLowerCase(),f=await fm(u,{handle:a.handle});if(L(f))return er(e.relative,[`Multiple pages returned when matching on handle ${P.bold(a.handle)}`,"Syncify is unsure of to handle this request and has cancelled the sync. Please","check the provided handle in your webshop."]),null;let p=am(c);if(O(f)&&(a.id=f.id,p=xs(c,f)),me(f)&&i.page.safeSync){let w=await JD(u);if(w.action===2){let b=await YD(u);if(b===4)return w.resume();if(b===1)return w.resume(),Me(`/pages/${a.handle} ${q} ${a.title} ${m(`${X} ${e.relative}`)}`),Ui(u,a);a.id=b,w.resume()}else return w.action===1?(w.resume(),Me(`/pages/${a.handle} ${q} ${a.title} ${m(`${X} ${e.relative}`)}`),Ui(u,a)):w.resume()}if(i.page.safeSync&&O(f)){let w=new Date(f.updated_at).getTime(),b=new Date(p.updated_at).getTime();if(w>b&&f.body_html!==a.body_html){let h=await KD(f);if(h.action===3){h.resume();let v=f.body_html;if(i.page.language==="markdown"){let W=VD(v);Ve(`${e.name}.html ${q} ${e.base}`),v=GD(`
`+W,n.data)}i.watch.unwatch(e.input),await MD(e.input,v),xs(u.domain,f),i.watch.add(e.input)}else{if(h.action===4)return h.resume();h.action===6&&h.resume()}}}if(i.mode.build)return a.body_html;Me(`/pages/${a.handle} ${q} ${a.title} ${m(`${X} ${e.relative}`)}`),await pu(u,e,a)&&await $n("pages")}function mm(e){let t=gi(i.sync),r=ls(i.paths,i.dirs.output);i.mode.hot&&i.wss.connected(),i.watch.on("all",n);function n(o,a){let u=r(a);if(!me(u)&&u.base!==i.file.base){if(u.type!==17&&ci(u),o==="change"||o==="add")s(u);else if(o==="unlink")return u.type===16?t.pages("delete",u):t.assets("delete",u)}}async function s(o){try{switch(o.type){case 10:return _i(o,t.assets,e);case 16:return pm(o,e);case 11:return Ii(o,t.assets,e);case 14:case 17:return Si(o,t.assets,e);case 5:return Pp(o,t.assets,e);case 9:return Pi(o,t.assets,e);case 2:case 3:return pr(o,t.assets,e);case 4:return o.kind==="JSON"?mr(o,t.assets,e):pr(o,t.assets,e);case 6:case 1:return o.kind==="JSON"?mr(o,t.assets,e):pr(o,t.assets,e);case 7:case 8:return mr(o,t.assets,e);case 15:return mr(o,t.metafields,e)}}catch(a){console.error(a),Se(a)}}}l();l();import ZD from"axios";async function Ji(e){return ZD.get("themes.json",e.client).then(({data:t})=>t.themes).catch(t=>Qe(e.store,t.response))}import{prompt as Yi}from"enquirer";var Cn={pointer(e,t){let r=this.state.index===t?U("\u251C "):U("\u2502 ");return t===0?U("\u2502 ")+`
`+r:r},prefix:U("\u2502 "),styles:{primary:xe,success:xe,danger:re.bold,warning:Q,muted:m,disabled:m,typing:m},symbols:{ellipsisLarge:"",ellipsisSmall:"",prefix:{pending:"",submitted:"\u2713",cancelled:"\u{10102}"},separator:{pending:"",submitted:" \u2192 ",cancelled:" \u{10102} "}}};async function dm(e){let t=0,n=(await Ji(e)).filter(({role:b})=>b!=="demo"),s=$t(n,"name"),o=n.map(b=>(b.name.length>t&&(t=b.name.length),{name:b.name,message:b.name,hint:`${s(b.name)} ${X} ${m(b.role)}`,value:b}));o.push({role:"separator",message:U("\u2500".repeat(t))},{name:"create",message:"Create Theme"},{name:"create",message:"Remove Theme"}),i.sync.stores.length>1&&o.push({role:"separator",message:U("\u2500".repeat(t))},{name:"store",message:"Select Stores",hint:`${s("Select Stores")} ${X} ${m("go back and choose store")}`});let{targets:a}=await Yi({name:"targets",type:"select",multiple:!0,message:"Select Themes",hint:"Press spacebar to select",theme:Cn,choices:o,result(b){return un(this.map(b))},format(b){if(L(b)&&b.length>0)return ue(`${b.join(j(", "))}`)}}),u={domain:e.store.toLowerCase(),themes:{}},c=[];for(let b of a)u.themes["${"+b.name+"}"]=b.id,c.push({name:b.name,message:b.name,validate(h,v,W){if(W&&W.name===b.name){if(/[A-Z]/.test(h))return`
`+dt.redBright("  Target name must be lowercase");if(/[0-9]/.test(h))return`
`+dt.redBright("  Target name cannot contain numbers");if(/[ ]/.test(h))return`
`+dt.redBright("  Target name cannot contain spaces");if(/-/.test(h))return`
`+dt.redBright("  Target name cannot contain dashes")}return!0}});Cn.styles.primary=ue.italic,Cn.styles.typing=xe;let f=JSON.stringify(u,null,2),p=await Yi({name:"stores",type:"snippet",required:a.map(({name:b})=>b),message:"Theme Targets",newline:`
`,format(){return this.state.submitted===!0&&this.state.completed!==100?xe(`${this.state.completed}% completed`):` ${q}  ${nt(`${this.state.completed}% completed`)}`},theme:Cn,fields:c,template:f}),d={syncify:JSON.parse(p.stores.result)},w=await Yi({name:"save",type:"confirm",message:"Save Settings",theme:Cn,initial:!0,newline:`
`,format(){return/^[ty1]/i.test(this.input)?"Yes":"No"},footer:$.line+["",m("The following store and theme references will be saved"),m("to your package.json file on the syncify key property."),"",JSON.stringify(d.syncify,null,2).split(`
`).join(`
`+$.line),""].join(`
`+$.line)});console.log(w)}async function QD(){let e=$t(i.sync.stores,"store"),t=i.sync.stores.map(n=>({name:n.domain,message:n.store,hint:`${e(n.store)} ${X} ${m(`https://${n.domain}`)}`,value:n})),{store:r}=await Yi({name:"store",type:"select",message:"Select Stores",choices:t,theme:Cn,result(){return this.focused.value},format(n){return xe(n)}});return dm(r)}async function gm(){return i.sync.stores.length>1?QD():dm(i.sync.stores[0])}l();import{join as e1,relative as t1}from"pathe";import{writeFileSync as hm}from"fs-extra";async function r1(){let e=new Map,t=0;for(let r of i.sync.themes){r.target.length>t&&(t=r.target.length);let n=i.sync.stores[r.sidx],s=`${r.store}:${r.target}`,{assets:o}=await ua(r,n.client);e.has(s)||e.set(s,{active:e.size===0,log:null,number:e.size+1,size:o.length,transfers:0,warning:0,failed:0,success:0,retry:0,progress:Qn(o.length),get files(){return o},get theme(){return r},errors:{local:new Map,remote:new Map,retry:new Set}})}return e}function n1(e,t,r){let n=`${g(`${e.success}`)} ${E("of")} ${g(`${e.size}`)}`,s=g(`${e.failed}`),o=g(`${e.theme.target.toUpperCase()}`);return V().Line(k(o,q),ue).NL.Line(`completed in ${m(r)}`).NL.Line(k("synced",n),j).Line(k("errors",s),e.failed>0?ie:j).Line(k("location",m.underline(t))).NL.Insert(e.progress.render()).Line.toString()}function s1(e){return V().Line(`${g(e.theme.target.toUpperCase())}  ${q}  ${e.theme.store}`,m.dim).NL.Line(`${g(Ms(e.number))} in queue`,ho).NL.Line(k("synced",`${g("0")} ${E("of")} ${g(`${e.size}`)}`),m.dim).Line(k("retry",g("0")),m.dim).Line(k("errors",g("0")),m.dim).NL.Insert(e.progress.render(m.dim)).NL.toString()}async function ym(e){let t=0,r=0;A.start("import"),pt("Import"),Rt("Preparing",{style:"spinning"});let n=await r1();await rt(500);function s(o){Rt.stop();let{theme:a,file:u}=o,c=`${a.store}:${a.target}`,f=n.get(c),p=`https://${a.store}?preview_theme_id=${a.id}`,d=V().NL.Line(k("Duration",j(A.now("import"))),m).Line(k("Transfers",j(`${r++}`)),m).Line(k("Syncing",_t(`${g(a.target)}  ${q}  ${a.store}`)),m).Line(k("Preview",Vt(p)),m).Ruler(),w="";if(o.status===3)hm(u.output,""),f.warning+=1,f.transfers+=1,f.progress.increment(1),w=Q(u.key);else if(o.status===0){f.errors.retry.has(u.output)&&(f.retry-=1,f.errors.retry.delete(u.output)),f.success+=1,f.transfers+=1,f.progress.increment(1);let Z=Buffer.from(o.data.value||null,"utf8");hm(u.output,Z),w=xe(u.key)}else o.status===1?(f.errors.retry.has(u.output)||(f.retry+=1,f.errors.retry.add(u.output)),w=nt(u.key)):o.status===2&&(f.errors.retry.has(u.output)&&(f.retry-=1,f.errors.retry.delete(u.output)),f.errors.remote.has(u.output)||(f.failed+=1,f.transfers+=1,f.progress.increment(1),f.errors.remote.set(u.output,o)),w=ie(u.key));let b=`${g(`${f.success}`)} ${E("of")} ${g(`${f.size}`)}`,h=g(`${f.retry}`),v=g(`${f.failed}`),W=g(`${f.warning}`),G=V().NL.Line(`${g(f.theme.target.toUpperCase())}  ${q}  ${f.theme.store}`,ue).NL.Line(w).NL.Line(k("synced",b),j).Line(k("retry",h),f.retry>0?nt:j).Line(k("warning",W),f.warning>0?Q:j).Line(k("failed",v),f.failed>0?ie:j).NL.Insert(f.progress.render()).NL.Ruler(),Y=[d.toString()],H=0;for(let Z of n.values())Z.active?Y.push(G.toString()):Z.log===null?(H=H+1,Z.number=H,Y.push(s1(Z))):Y.push(Z.log);ye(ce(Y))}ht.on("import",s),t=n.size-1;for(let[o,a]of n){let[u,c]=o.split(":"),f=e1(i.dirs.import,u,c);A.start(o),a.active=!0;for(let{key:p}of a.files){let d=Wl(p,f),w=ee({url:a.theme.url,method:"get",params:{"asset[key]":d.key}},i.sync.stores[a.theme.sidx].client);await te.add(()=>ss(a.theme,d,w))}await te.onIdle(),t=t-1,a.active=!1,a.log=n1(n.get(o),t1(i.cwd,f),A.stop(o))}for(let{errors:o}of n.values())o.remote.size>0}l();import{mkdir as yu,pathExists as Qi,statSync as v1}from"fs-extra";import{basename as $1,join as C1,relative as km}from"pathe";import{glob as E1}from"fast-glob";import A1 from"adm-zip";l();import{join as Ki,parse as Dm,relative as i1}from"pathe";import{glob as o1}from"fast-glob";import bm from"prompts";async function wm(e){let t=await o1("templates/*",{cwd:e,absolute:!0}),r=new Set,n=new Set;for(let a of t){let{name:u}=Dm(a);t.filter(f=>Dm(f).name===u).length>1&&!n.has(u)&&n.add(u)}if(n.size===0)return 1;n.size>1?Ue(`${g(`${n.size}`)} mismatch template files`,{suffix:"error",type:"error"}):Ue(`${g(`${n.size}`)} mismatch template file`,{suffix:"error",type:"error"});let s=ts(`select ${g(".json")} or ${g(".liquid")} template`,{title:"Export Error",message:"Multiple templates detected"}),{action:o}=await bm([{name:"action",type:"select",message:"Select an Option",hint:" ",instructions:!1,choices:[{title:"Select Templates",description:"Choose which templates to export",value:"select"},{title:"Export .json Templates",description:"Exports the .json templates",value:"json"},{title:"Export .liquid Templates",description:"Exports the .liquid templates",value:"liquid"},{title:"Cancel Export",value:"cancel"}]}]);if(o==="select"){let a=[];for(let u of n)a.push({name:"choice",type:"toggle",message:"templates",hint:" ",active:`${u}.json`,inactive:`${u}.liquid`,onState:({value:c})=>{c?r.add(Ki(e,"templates",`${u}.liquid`)):r.add(Ki(e,"templates",`${u}.json`))}});return await bm(a).then(()=>s()),r}else if(o==="json"){for(let a of n)r.add(Ki(e,"templates",`${a}.json`));return s(),r}else if(o==="liquid"){for(let a of n)r.add(Ki(e,"templates",`${a}.liquid`));return s(),r}else o==="cancel"&&s();return 2}function xm(e){e.assets===0&&e.config===0&&e.templates===0&&e.layout===0&&e.snippets===0&&e.sections===0&&We("Empty output directory",[`There are no files within ${ue(i1(i.cwd,i.dirs.output)+"/**")}`,`You may need to run the ${ue.bold("syncify build")} command and try again.`])}l();import Cm from"dotenv";import{join as En,relative as Em,basename as Am,extname as S1}from"pathe";import{pathExists as Fs,readFile as Tm,readJson as Bm,writeFile as F1}from"fs-extra";l();import{pathToFileURL as Fm}from"node:url";import{readFile as a1,unlink as u1,existsSync as Ss,readFileSync as c1,writeFileSync as l1}from"fs-extra";import{isAbsolute as mu,dirname as du,extname as gu,join as Xi,parse as f1,resolve as p1}from"pathe";import{build as m1}from"esbuild";function vm(e,t,r=f1(t).root){let n=t;for(;n!==r;){let s=Xi(n,e);if(Ss(s))return s;if(gu(s)!==".json"){let o=s+".json";if(Ss(o))return o}n=du(n)}return null}function d1(e,t){return Ss(Xi(e,t))?mu(t)?Ss(t)?t:null:vm(t,e):null}function g1(e,t){return mu(t)?Ss(t)?t:null:t.startsWith(".")?vm(t,e):Xe.resolve(t,{paths:[e]})}function $m(e=process.cwd(),t="tsconfig.json",r=!1){e=p1(e);let n=r?g1(e,t):d1(e,t);if(!n)return null;let s=Ws(c1(n,"utf-8")),o=du(n);_e("baseURL",s.compilerOptions)&&(s.compilerOptions.baseUrl=Xi(o,s.compilerOptions.baseUrl));let a=[];if(s.extends){let u=L(s.extends)?s.extends:[s.extends],c={};for(let f of u){let p=$m(o,f,!0);p&&(ee(c,{...p?.data,compilerOptions:{...c.compilerOptions,...p?.data?.compilerOptions}}),a.push(...p.files))}ee(s,{...c,...s,compilerOptions:{...c.compilerOptions,...s.compilerOptions}})}return delete s.extends,{path:n,data:s,files:[...a,n]}}function h1(e,t){return $m(e,t)}function y1(e,t){return e.replace(Ks,`.bundled_${It()}.${t==="esm"?"mjs":"cjs"}`)}function D1(e){if(typeof jest>"u")return"cjs";let t=gu(e);return t===".js"?i.pkg.type==="module"?"esm":"cjs":t===".ts"||t===".mjs"?"esm":"cjs"}function b1(e){return e===null?null:Bt(e||{}).map(t=>new RegExp(`^${t.replace(/\*/,".*")}$`))}function Sm(e,t){return t?t.some(r=>ur(r)?r.test(e):e===r||e.startsWith(r+"/")):!1}function w1({external:e,notExternal:t}={}){return{name:"bundle-require:external",setup({onResolve:r}){r({filter:/.*/},async n=>{if(!(n.path.charCodeAt(0)===46||mu(n.path))){if(Sm(n.path,e))return{external:!0};if(!Sm(n.path,t))return{external:!0}}})}}}function x1(){return{name:"bundle-require:inject-file-scope",setup(e){e.initialOptions.define={...e.initialOptions.define,__dirname:"__injected_dirname__",__filename:"__injected_filename__","import.meta.url":"__injected_import_meta_url__"},e.onLoad({filter:Ks},async t=>{let r=await a1(t.path,"utf-8"),n=[`const __injected_filename__ = ${JSON.stringify(t.path)};`,`const __injected_dirname__ = ${JSON.stringify(du(t.path))};`,`const __injected_import_meta_url__ = ${JSON.stringify(Fm(t.path).href)};`];return{contents:ce(n)+r,loader:ic(gu(t.path))}})}}}async function Zi(e){if(!Ks.test(e.filepath))throw new Error(`${e.filepath} is not a valid JS file`);let t=e.preserveTemporaryFile??!!process.env.BUNDLE_REQUIRE_PRESERVE,r=e.cwd||i.cwd,n=e.format??D1(e.filepath),s=e.tsconfig===null?null:h1(r,e.tsconfig),o=b1(s?.data.compilerOptions?.paths||{});async function a(f){if(!f.outputFiles)throw new Error("[bundle-require] no output files");let{text:p}=f.outputFiles[0],d=e.getOutputFile||y1,w=Xi(i.dirs.cache,d(e.filepath,n));l1(w,p,"utf8");let b,h=e.require||sc;try{b=await h(n==="esm"?Fm(w).href:w,{format:n})}finally{t||await u1(w)}return{mod:b,dependencies:f.metafile?Bt(f.metafile.inputs):[]}}let u=await m1({...e.esbuildOptions,entryPoints:[e.filepath],absWorkingDir:r,outfile:"out.js",format:n,write:!1,platform:"node",sourcemap:"inline",bundle:!0,metafile:!0,plugins:[..._e("plugins",e.esbuildOptions)?e.esbuildOptions.plugins:[],w1({external:e.external,notExternal:o}),x1()]});return await a(u)}async function Lm(e){let t=null;for(let r of["syncify.config.js","syncify.config.mjs","syncify.config.cjs","syncify.config.ts","syncify.config.json"]){if(t=En(e,r),await Fs(t))break;t=null}if(t===null)return null;try{if(S1(t)===".json"){i.file.path=t,i.file.relative=Em(e,t),i.file.base=Am(t);let r=await Tm(t);return Ws(r.toString())}else{i.file.path=t,i.file.relative=Em(e,t),i.file.base=Am(t);let r=await Zi({cwd:e,filepath:t});return r.mod.syncify||r.mod.default||r.mod}}catch(r){console.log(r);let n=En(e,"syncify.config.json");return await Fs(n)?Bm(n):null}}async function hu(e){let t=En(e.cwd,"package.json");if(!await Fs(t))throw new Error('Missing "package.json" file');try{i.pkg=await Bm(t),Lt("syncify.stores",i.pkg)?L(i.pkg.syncify.stores)?i.stores=i.pkg.syncify.stores:O(i.pkg.syncify.stores)&&oe(i.pkg.syncify.stores)===!1&&(i.stores=[i.pkg.syncify.stores]):e.strap===null&&Sl(e.cwd)}catch(n){throw new Error(n)}}async function Rm(e,t){let r=En(i.cwd,"package.json");try{let s=(await Tm(r)).toString(),o=s.indexOf('"version"'),a=s.indexOf('"',o+10)+1,u=s.indexOf('"',a+1);return s.slice(a,u)===e?(await F1(r,`${s.slice(0,a)}${t}${s.slice(u)}`),await hu(i.cli),!0):!1}catch(n){throw new Error(n)}}async function Nm(e){let t=En(e.cwd,".env");if(await Fs(t)){let r=Cm.config({path:t});if(r.error)return Ct(r.error,{path:t}),null;i.env.file=t,i.env.vars=r.parsed}else if(t=En(e.cwd,"syncify.env"),await Fs(t)){let r=Cm.config({path:t});if(r.error)return Ct(r.error.message,{path:t}),null;i.env.file=t,i.env.vars=r.parsed}else e.setup===!1&&e.strap===null&&ai(e.cwd)}async function eo(e){let{themeVersion:t}=i.cache.build;A.start("export"),i.mode.build?(pt("Build"),await Hi(e)):xm(i.stats);let r=await wm(i.dirs.output);if(r===2)return;r===1&&i.mode.build&&A.stop("build"),i.mode.publish?li("Exporting"):pt("Export"),ke(),await Qi(i.dirs.export)||await yu(i.dirs.export);let n=new A1;for(let o of Hr){let a=C1(i.dirs.output,o);if(await Qi(a)){let c=await E1("*",{cwd:a,absolute:!0});for(let f of c){let p=`${o}/${$1(f)}`;v1(f).size===0?(n.addFile(p,cn(" ")),Ze(p,"empty file")):(r===1||r.has(f)===!1)&&n.addLocalFile(f,o)}}}let s=et(n.toBuffer());if(i.vc.update!==null){await Qi(i.vc.update.dir)||await yu(i.vc.update.dir),pi(i.vc,"bump"),aa(Mt(s),km(i.cwd,i.vc.update.zip));try{await n.writeZipPromise(i.vc.update.zip),t=i.vc.update.number}catch(o){return Ct(o,{file:i.vc.zip,details:"Failed to write zip file"})}}else{await Qi(i.vc.dir)?pi(i.vc,"overwrite"):(await yu(i.vc.dir),pi(i.vc,"created")),aa(Mt(s),km(i.cwd,i.vc.zip));try{await n.writeZipPromise(i.vc.zip)}catch(o){return Ct(o,{file:i.vc.zip,details:"Failed to write zip file"})}}i.pkg.version!==t&&(await Rm(i.pkg.version,t)?(Nt("package.json","version bumped"),i.cache.build.themeVersion=t,await $n("build")):Ze("package.json version failed to bump","manual increment required")),A.stop("export"),i.mode.publish===!1&&(pt(),ke(""),process.exit(0))}l();import T1 from"node:http";import B1 from"serve-static";import L1 from"finalhandler";import Pm from"ngrok";import R1 from"prompts";async function Om(e){await eo(e),A.start("publish"),li("Publishing");let t=B1(i.vc.dir),r=T1.createServer((u,c)=>t(u,c,L1(u,c))),n=u=>{if(u.code==="EADDRINUSE")return Se("EADDRINUSE"),null},s=()=>{r.removeListener("error",n),r.removeListener("connect",s)};r.on("error",n),r.on("connect",s),r.listen(i.publish.tunnelPort),await rt(500),A.start("ngrok");let a=`${await Pm.connect({addr:i.publish.tunnelPort,onStatusChange(u){u==="closed"?Ue("disconnect",{prefix:"ngrok"}):Ue(`${g("connected")} PORT${N}${i.publish.tunnelPort}`,{prefix:"ngrok",suffix:A.stop("ngrok")})}})}/${i.vc.number}.zip`;Ue(m(a),{prefix:"server"});for(let u of i.sync.stores)A.start(u.domain),Ue(u.domain,{prefix:"webshop",color:ue}),Ue(`${g("role")} ${q} ${i.publish.publishRole}`,{prefix:"publish"}),Ue(g(`v${i.vc.number}`),{prefix:"version",color:Ns}),ke(),await rt(1e3),Rt("uploading",{style:"spinning",color:xe}),await rt(2e3),Rt.update("dispatched"),await rt(2e3),Rt.update("extracting"),await rt(2e3),Rt.update("processing"),await rt(1e3),Rt.stop("done"),Ue(`${g("published")} ${q} ${u.domain}`,{prefix:"status",color:xe,suffix:A.now(u.domain)});r.close(),await Pm.disconnect(),ke(),pt(),ke(),await R1([{name:"action",hint:" ",type:"select",message:"Post-Publishing",choices:[{title:"Update Config",value:"config"},{title:"Publish Themes",value:"publish"},{title:"Delete Themes",value:"delete"}]}])}l();import N1 from"node:http";import k1 from"serve-static";import P1 from"finalhandler";import O1 from"fast-glob";import{pathExists as _1,readFile as I1,writeFile as j1}from"fs-extra";import{join as W1,basename as jm,relative as M1}from"pathe";import{Server as q1}from"ws";l();var _m=!1,Im=!1,Du=new Set;function to(e,t){if(!_m){_m=!0;for(let r of Du)r();e&&process.exit(128+t)}}function ro(e){return Du.add(e),Im||(Im=!0,process.once("exit",to),process.once("SIGINT",to.bind(void 0,!0,2)),process.once("SIGTERM",to.bind(void 0,!0,15)),process.on("message",t=>{t==="shutdown"&&to(!0,-128)})),()=>Du.delete(e)}var tn={enable:!0,output:[]};async function G1(){if(ye(ne(m("validating snippet injection"))),await Ul()){ye(ne(m("validating layouts")));for(let t in i.hot.alive){if(!await _1(t)){ye(ne(m("layout has not yet been bundled, building now...")));let n=O1.sync(i.config.paths.layout,{cwd:i.dirs.input,absolute:!0});for(let s of n)if(jm(s)===jm(t)){let o=await I1(s);await j1(t,o)}ye(ne(m("layout was bundled from source, injecting hot snippet")))}try{await Yl(t)||(ye.clear(),Se("Failed to inject hot reload render tag",{notify:{title:"HOT Reloading Failed",message:"HOT Reloading is disabled"}}))}catch(n){console.log(n)}}ye.clear()}else ye.clear(),Se("Failed to upload snippet")}async function Wm(){if(!tn.enable)return tn.output.push($.red,$.red+ie("Change the socket port address or kill the session occupying it."),$.red+ie("This error typically occurs when multiple Syncify instances are active.")),Se(ie(`${g("ERROR")} on ${g(`${i.hot.method==="hot"?"HOT":"LIVE"} Reload:`)}`)),T(tn.output.join(`
`)),null;T(ne(g(`${i.hot.method==="hot"?"HOT Reload":"LIVE Reload"}${N}`))),ye(ne("configuring HOT Reload")),await G1();function e(c){c.setHeader("Access-Control-Allow-Origin","*"),c.setHeader("Cache-Control","public, max-age=0")}let t=k1(W1(i.dirs.output,"assets"),{setHeaders:e}),r=N1.createServer((c,f)=>t(c,f,P1(c,f))),n=`http://localhost:${i.hot.server}`,s=c=>{if(c.code==="EADDRINUSE")return tn.output.push($.red+ie(`${g("EADDRINUSE")} ${q} ${n}`),$.red,$.red+ie.bold(`Server Port ${i.hot.server} address already in use`),$.red,$.red+ie("Change the server port address or kill the session occupying it."),$.red+ie("This error typically occurs when multiple Syncify instances are active.")),ye.clear(),T(tn.output.join(`
`)),i.wss.http.close(),null},o=()=>{ye.done(),i.wss.connected(),r.removeListener("error",s),r.removeListener("connect",o)};r.on("error",s),r.on("connect",o),r.listen(i.hot.server);let a=`${m("PORT")}  ${q} ${_t(`${i.hot.server}`)}`,u=`${m("PORT")}  ${q} ${_t(`${i.hot.socket}`)}`;ye(ne(`${ue("server")}  ${q}  ${a}`)),T(ne(`${ue("socket")}  ${q}  ${u}`));for(let c in i.hot.alive)T(ne(`${ue("layout")}  ${q}  ${m(M1(i.cwd,c))}`));ke()}function Mm(){if(i.mode.hot===!1)return;let e=new q1({port:i.hot.socket,path:"/ws",skipUTF8Validation:!0});ro(()=>{e.emit("disconnect"),e.close()});let t=s=>{s.code==="EADDRINUSE"&&(e.close(),tn.enable=!1,tn.output.push($.red+ie(`${g("EADDRINUSE")} ${q} ws://localhost:${i.hot.server}`),$.red,$.red+ie.bold(`Socket Port ${i.hot.server} address already in use`)))},r=()=>{e.removeAllListeners("script"),e.removeAllListeners("stylesheet"),e.removeAllListeners("section"),e.removeAllListeners("svg"),e.removeAllListeners("assets"),e.removeAllListeners("reload"),e.removeAllListeners("replace")},n=s=>{e.removeListener("error",t),e.prependListener("script",o=>s.send(`script,${o}`)),e.prependListener("stylesheet",o=>s.send(`stylesheet,${o}`)),e.prependListener("section",o=>s.send(`section,${o}`)),e.prependListener("svg",o=>s.send(`svg,${o}`)),e.prependListener("assets",()=>s.send("assets")),e.prependListener("reload",()=>s.send("reload")),e.prependListener("replace",()=>s.send("replace")),e.prependListener("connected",()=>s.send("connected")),e.prependListener("disconnect",()=>s.send("disconnect")),s.addEventListener("message",({data:o})=>fi(o))};return e.on("close",r),e.on("error",t),e.on("connection",n),{get http(){return e},script:(s,o)=>e.emit("script",`${o},${s}`),stylesheet:(s,o)=>e.emit("stylesheet",`${o},${s}`),section:s=>e.emit("section",s),svg:s=>e.emit("svg",s),assets:()=>e.emit("assets"),reload:()=>e.emit("reload"),replace:()=>e.emit("replace"),connected:()=>e.emit("connected"),disconnect:()=>e.emit("disconnected")}}l();function qm(e){let t=e.toString().trim().toLowerCase();if(t==="v"){let r=Bt(i.errors);for(let n=0,s=r.length;n<s;n++){let o=r[n];if(i.errors[o].size!==0){n>0&&ui(),Ue(g.whiteBright(o));for(let a of i.errors[o].values())I(a)&&a.length>0&&be(a);i.errors[o].clear()}}i.mode.upload&&(pt(),process.exit(0))}else if(t==="s"){for(let r of i.errors)I(r)&&r.length>0&&be(r);i.errors.clear()}else if(t==="w"){let r=i.warnings[i.log.uri];for(let n of r.keys()){let s=r.get(n);if(s.size===0)continue;let o=V({type:"warning"}).Newline("yellow").Ruler().Newline("yellow").Line(n.toUpperCase(),g.yellow).Newline("yellow");for(let a of s.values())I(a)&&a.length>0&&o.Line(a);an(o.toString()),s.clear()}}}l();function Gm(e){T(Ju);let t=U("-".repeat(80)),r=`
    ${g("SYNCIFY CLI  "+q+j("  v0.3.0-beta"))}

    ${j("Please provide a command argument.")}

    ${g("USAGE"+N)}

    $ syncify                    ${m.italic("Show this screen")}
    $ syncify {store} [theme]    ${m.italic("Store and theme targeting")}

    ${g("HELP"+N)}

    -h, --help                   ${m.italic("Print a list of all available commands")}
    -h, --help examples          ${m.italic("Print a list of command examples")}

  `;if(e.help===null)return T(r);let n=`
    ${g("SYNCIFY CLI  "+q+j("  v0.3.0-beta"))}

    Below are some usage examples for working with the Syncify CLI.
    The ${m("=")} character is optional and samples are using the ${m("$ sy")} alias.

    ${g("TARGETING"+N)}

    ${m("Target 1 store and 1 theme")}:
    $ sy your-store${m("=")}theme-1

    ${m("Target 1 store and 2 theme")}:
    $ sy your-store${m("=")}theme-1,some-theme,test-theme

    ${m("Target 2 stores and 1 theme")}:
    $ sy ---your-store${m("=")}theme-1 --another-store${m("=")}some-theme

    ${m("Target 2 stores and 4 theme")}:
    $ sy --your-store${m("=")}theme-1,theme-2 --another-store${m("=")}some-theme,test-theme

  ${t}

    ${g("BUILDING"+N)}

    ${m("Build theme from source")}:
    $ sy --build

    ${m("Build theme with terse minification")}:
    $ sy --build --terse

    ${m("Build theme and clean")}:
    $ sy --build --clean --terse

  ${t}

    ${g("WATCHING"+N)}

    ${m("Watch 1 store and 1 theme")}:
    $ sy your-store${m("=")}theme-1 --watch

    ${m("Watch 1 store and 2 themes with hot reloading")}:
    $ sy your-store${m("=")}theme-1,theme-2 --watch --hot

    ${m("Watch 2 stores and 1 theme")}:
    $ sy --your-store${m("=")}theme-1 --another-store${m("=")}some-theme --watch

    ${m("Watch 2 stores and 2 themes")}:
    $ sy --your-store${m("=")}theme-1,theme-2 --another-store${m("=")}some-theme,test-theme --watch

    ${m("Watch 1 store with 2 themes and clean mode with hot live reloads")}:
    $ sy your-store${m("=")}theme-1,theme-2 --watch --clean --hot

    ${m("Watch 1 store with 2 themes in production mode")}:
    $ sy your-store${m("=")}theme-1,theme-2 --prod --watch

  `,s=`
    ${g("SYNCIFY CLI  "+q+j("  v0.3.0-beta"))}

    Welcome to the Syncify CLI. The command line utility assumes that you have
    defined stores, themes and setup credentials within a ${m(".env")} file.

    ${g("ALIASES"+N)}

      $ sy                         ${m.italic("Shorthand for syncify")}

    ${g("COMMANDS"+N)}

      $ syncify                    ${m.italic("Show this screen")}
      $ syncify {store} [theme]    ${m.italic("Store and theme targeting")}

    ${g("THEMES"+N)}

        --{store} [theme]          ${m.italic("A store reference command (run examples)")}
      -t, --theme [theme]          ${m.italic("A comma seprated list of themes")}

    ${g("PATHS"+N)}

      -c, --config    <path>       ${m.italic("Set config directory path")}
      -i, --input     <path>       ${m.italic("Set input directory path")}
      -o, --output    <path>       ${m.italic("Set output directory path")}

    ${g("MODES"+N)}

      -w, --watch                  ${m.italic("Run watch mode")}
      -b, --build                  ${m.italic("Run build mode from input")}
      -u, --upload                 ${m.italic("Run upload mode theme to stores")}
      -d, --import                 ${m.italic("Run download mode from theme and stores")}
      -e, --export                 ${m.italic("Run export mode and generate theme zip")}
      -p, --publish                ${m.italic("Run publish and create a release")}
      -r, --resource               ${m.italic("Run resource mode, resource name expected")}

    ${g("RESOURCES"+N)}

      -r, --resource themes        ${m.italic("Run the themes resource")}
      -r, --resource assets        ${m.italic("Run the theme assets resource")}
      -r, --resource pages         ${m.italic("Run the pages resource")}
      -r, --resource metafields    ${m.italic("Run the metafields resource")}
      -r, --resource redirects     ${m.italic("Run the redirects resource")}
      -r, --resource files         ${m.italic("Run the files resource")}

    ${g("ENVIRONMENT"+N)}

      --dev                       ${m.italic("Build in development mode (default)")}
      --prod                      ${m.italic("Build in production mode")}
      --hot                       ${m.italic("Run watch with hot-reloads")}

    ${g("OPERATIONS"+N)}

      --clean                     ${m.italic("Clean the output, use with modes")}
      --silent                    ${m.italic("Silent logging, only errors will print")}
      --cache                     ${m.italic("Purges the local .cache references")}

    ${g("TRIGGERS"+N)}

      --spawn  [list]             ${m.italic("Invoke a defined spawn child process/s")}
      --delete [list]             ${m.italic("Delete a remote and local file")}
      --terse  [list]             ${m.italic("invoke minify mode, accepts resource/s")}

    ${g("TRANSFORMS"+N)}

      --script                    ${m.italic("Run the script transform in isolation")}
      --style                     ${m.italic("Run the style transform in isolation")}
      --svg                       ${m.italic("Run the svg transform in isolation")}
      --image                     ${m.italic("Run the image transform in isolation")}

    ${g("UTILITY"+N)}

      -f, --filter <path>         ${m.italic("Filter operation to be used with modes")}

    ${g("VERSIONING"+N)}

      --bump patch                ${m.italic("Apply a patch version bump, use in export mode")}
      --bump minor                ${m.italic("Apply a minor version bump, use in export mode")}
      --bump major                ${m.italic("Apply a major version bump, use in export mode")}

    ${g("STRAPS"+N)}

      --strap dusk                ${m.italic("Import and generate a dusk strap")}
      --strap dawn                ${m.italic("Import and generate a dawn strap")}
      --strap silk                ${m.italic("Import and generate a silk strap")}

    ${g("HELP"+N)}

      -h, --help                  ${m.italic("Print this screen")}
      -h, --help examples         ${m.italic("Print a list of command examples")}

    ${t}

    ${m("BY \u039D\u0399\u039A\u039F\u039B\u0391\u03A3 \u03A3\u0391\u0392\u0392\u0399\u0394\u0397\u03A3")}

    ${m.underline("https://github.com/panoply")}
    ${m.underline("https://x.com/niksavvidis")}

  `;T(e.help==="examples"?n:s)}l();import{FSWatcher as ab}from"chokidar";l();import{mkdir as An,emptyDir as Hm,pathExists as Tn,readdirSync as H1}from"fs-extra";import{join as rn}from"pathe";async function zm(){let{dirs:e}=i;return await no(e.cache),await no(e.sourcemaps.root),Promise.all([no(e.sourcemaps.scripts),no(e.sourcemaps.styles)])}async function bu(e){if(e||(e=i.dirs.output),await Tn(e)){if(i.mode.clean)try{await Hm(e)}catch(r){console.error(r)}}else try{await An(e)}catch(r){throw new Error(r)}for(let r of Hr){let n=rn(e,r),s=await Tn(n),o=r.startsWith("templates/")?r.slice(10):r;if(s)i.stats[o]=H1(n).length;else try{await An(n),i.stats[o]=0}catch(a){throw new Error(a)}}}function Um(e){let t=Rl(i.cwd);for(let[r,n]of Ec){let s;if(r==="cache"){i.dirs[r]=rn(i.cwd,n,".syncify"),i.dirs.sourcemaps=Or(null),i.dirs.sourcemaps.root=rn(i.dirs[r],"sourcemaps"),i.dirs.sourcemaps.scripts=rn(i.dirs.sourcemaps.root,"scripts"),i.dirs.sourcemaps.styles=rn(i.dirs.sourcemaps.root,"styles");continue}if(r==="import"){i.mode.import?x("output",e)?i.dirs[r]=t(e.output):i.dirs[r]=t(i.config.import):i.dirs[r]=t(i.config.import);continue}else if(r==="export"){i.mode.export?x("output",e)?i.dirs[r]=t(e.output):i.dirs[r]=t(i.config.export):i.dirs[r]=t(i.config.export);continue}else if(x(r,e)&&e[r]===n)if(i.config[r]===n){i.dirs[r]=t(e[r]);continue}else s=i.config[r];else I(e[r])?s=e[r]:s=i.config[r];I(s)?i.dirs[r]=t(s):z({option:"config",name:r,provided:s,expects:"string"})}i.watch.add(i.file.path)}async function Vm(){let{dirs:e,sync:t,mode:r}=i;if(!r.import)return;if(!await Tn(e.import))try{await An(e.import)}catch(s){throw new Error(s)}for(let s in t.themes){let{store:o,target:a}=t.themes[s],u=rn(e.import,o);if(await Tn(u)){if(r.clean)try{await Hm(u)}catch(f){console.error(f)}}else try{await An(u)}catch(f){throw new Error(f)}await bu(rn(u,a))}}async function no(e){if(L(e)){for(let t of e)if(!await Tn(t))try{await An(t)}catch(n){throw new Error(n)}}else if(!await Tn(e))try{await An(e)}catch(r){throw new Error(r)}}l();var Jm=Pt(Kr());function Ym(){if(!x("processors",i.config)||!x("json",i.config.processors))return;let{json:e}=i.config.processors;if(!pe(e)&&!(O(e)&&oe(e))){O(e)||z({option:"processors",name:"json",expects:"{}",provided:typeof e});for(let t in e){if(t==="indent")if(Dt(e[t])){i.processor.json[t]=e[t];continue}else z({option:"json",name:t,provided:e[t],expects:"number"});if(t==="useTab")if(he(e[t])){i.processor.json[t]=e[t];continue}else z({option:"json",name:t,provided:e[t],expects:"boolean"});if(t==="exclude"){let r=I(e[t])?[e[t]]:e[t];if(L(r)){i.processor.json[t]=(0,Jm.default)(r);continue}else z({option:"json",name:t,provided:r[t],expects:"string | string[]"})}}}}l();function Km(e){let t=bt(e.pages,e.metafields,e.redirects),r=bt(e.style,e.script,e.image,e.svg),n=bt(t,e.upload,e.import)?!1:e.watch;if(i.mode=ee(i.mode,{watch:n,dev:!e.prod,prod:e.prod,setup:e.setup,strap:e.strap!==null,hot:qs(e.watch,e.hot),interactive:e.interactive,redirects:e.redirects,metafields:e.metafields,pages:e.pages,pull:e.pull,cache:qs(e.build,e.cache),force:e.force,views:e.views,script:r?e.script:!1,style:r?e.style:!1,image:r?e.image:!1,svg:r?e.svg:!1,terse:bt(e.terse,e.prod),clean:bt(t,r,e.upload)?!1:qs(e.export,e.build)||e.clean,build:bt(e.watch,e.import)?!1:e.build,upload:bt(r,n)?!1:e.upload,export:e.export,import:bt(t,r,e.upload,e.watch,e.build)?!1:e.import,publish:e.publish,release:I(e.release),themes:e._[0]==="themes"}),i.mode.themes){e._=[];return}z1(i.mode,e),i.mode.release&&(i.mode.clean=!0,i.mode.build=!0,i.mode.export=!0,i.mode.publish=!0),i.mode.build&&Kt(i.mode.script,i.mode.style,i.mode.svg,i.mode.pages,i.mode.metafields,i.mode.image)&&(i.mode.script=!0,i.mode.style=!0,i.mode.svg=!0,i.mode.image=!0,i.mode.views=!0)}function z1(e,t){if(t.cache&&t.build===!1&&Qt({expected:"-b, --build",message:["Cache resets can only be executed along side build operations"],fix:[`Attempting to purge cache outside ${g("build")} mode Syncify requires you to pass`,"the build mode flags when executing a cache reset, for example:",`

`,`${j("$")} ${E(`syncify ${i.argv} ${P("-b --cache")}`)}`,`

`,`Run ${m("syncify --help")} for more information, or pass an execution`,`operation mode as per the ${j("expected")} value.`,`

`]}),un(e).every(r=>r===!1)&&Qt({expected:"--<cmd>",message:["Execution is unclear, you have not provided Syncify with a valid operation","mode to execute"],fix:["Syncify requires that you provide an operation. In most cases, this","error occurs when you have forgotten to pass the mode, for example:",`

`,`${j("$")} ${j(`syncify ${Is}${le("mode")}${js}`)}`,`

`,`Run ${P("syncify --help")} for more information`]}),e.export){let r=Bt(e);r.push("filter","delete","spawn","resource");for(let n of r)if(!(n==="build"||n==="clean"||n==="cache"||n==="export")&&e[n]){let s=r.filter(c=>c!=="build"&&c!=="clean"&&c!=="export");s.push("f\\b","u\\b","w\\b","s\\b","d\\b","r\\b");let o=s.map(c=>c==="filter"||c==="f"||c==="resource"||c==="-r"?`--?${c}.*?(?=(--?${s.join("|--?")}))`:`--?${c}`).join("|"),a=new RegExp(`(--?${s.join("|--?")})`,"g"),u=new RegExp(`(${o})`,"g");return Qt({message:[`Bad command ${Os}argv${_s} sequence passed with ${P("export")} mode.`,"Theme exports are performed in isolation. You command includes","execution modes that cannot be run when exporting theme/s"],provided:i.argv.replace(a,re("$1")).replace(/(--export)/,P("$1")),expected:i.argv.replace(u,"").replace(/(--export)/,P("$1")),fix:[`Removed the flags marked ${re("red")} as shown in provided aboved.`]})}}}l();function Xm(){if(!x("snippets",i.config.views))return;let{snippets:e}=i.config.views;if(!pe(e)&&!(O(e)&&oe(e))){O(e)||z({option:"views",name:"snippets",expects:"{}",provided:typeof e});for(let t in i.snippet){if(t==="prefixDir")if(he(e[t])){i.snippet[t]=e[t];continue}else z({option:"views.snippets",name:t,provided:e[t],expects:"boolean"});if(t==="separator")if(I(e[t]))if(/[.@:_-]/.test(e[t])){i.section[t]=e[t];continue}else Be({option:"views.snippets",name:t,value:e[t],expects:"@ | _ | : | - | ."});else z({option:"views.snippets",name:t,provided:e[t],expects:"string"});if(t==="global"){let r=I(e[t])?[e[t]]:e[t];if(L(r)){if(r.length>0){i.snippet[t]=new RegExp(`${r.join("|")}`);continue}}else z({option:"views.snippets",name:t,provided:e[t],expects:"string | string[]"})}}}}l();import{basename as wu,extname as U1,relative as so}from"pathe";import{readFile as Zm}from"fs-extra";async function Qm(){if(!x("sections",i.config.views))return;let{sections:e}=i.config.views;if(!pe(i.config.views.sections)&&!(O(e)&&oe(e))){O(e)||z({option:"views",name:"sections",expects:"{}",provided:typeof e});for(let t in i.section){if(t==="prefixDir")if(he(e[t])){i.section[t]=e[t];continue}else z({option:"views.sections",name:t,provided:e[t],expects:"boolean"});if(t==="separator")if(I(e[t]))if(/[@:_-]/.test(e[t])){i.section[t]=e[t];continue}else Be({option:"view.sections",name:t,value:e[t],expects:"@ | _ | : | -"});else z({option:"views.sections",name:t,provided:e[t],expects:"string"});if(t==="global"){let r=I(e[t])?[e[t]]:e[t];if(L(r)){if(r.length>0){i.section[t]=new RegExp(`${r.join("|")}`);continue}}else z({option:"views.sections",name:t,provided:e[t],expects:"string | string[]"})}t==="shared"&&i.paths.schema.input!==null&&i.paths.schema.input.size>0&&(await V1(),await J1(),tt(i.section,"schema",{get(){return i.cache.schema}}))}}}async function V1(){for(let e of i.paths.schema.input){let t=U1(e),r=wu(e,t);i.section.shared.has(r)&&We(`Duplicated shared schema file name ${g.yellow(r+t)} detected.`,["Shared Schema JSON file names must be unique across the workspace.","Update the file name and try again."]);try{let s=(await Zm(e)).toString();if(s.trim().length===0)continue;let o=Ar(s.toString());x("$schema",o)&&delete o.$schema,x("$description",o)&&delete o.$description;for(let a in o)if(O(o[a]))x("$description",o[a])&&delete o[a].$description;else if(L(o[a]))for(let u of o[a])x("$description",u)&&delete u.$description;i.cache.schema[e]=new Set,i.section.shared.set(r,{uri:e,schema:o})}catch(n){return Se(so(i.cwd,e),{notify:{title:"JSON Error (setSharedSchema)",message:`Error when parsing ${wu(e)}`}}),n instanceof sr&&Yr(n,{relative:so(i.cwd,e),base:wu(e)}),null}}}async function J1(){let{shared:e}=i.section,t=wt("Section Schema");for(let r of i.paths.sections.input){let n=await Zm(r),s=Jt(n);if(x(r,i.cache.schema)&&i.cache.checksum[r]===s)continue;i.cache.checksum[r]=s;let o=n.toString(),a=o.search(/{%-?\s*schema/);if(a<0)continue;let u=o.indexOf("%}",a+2)+2,c=o.slice(u),f=u+c.search(/{%-?\s*endschema/);if(f<0){t("Liquid Parse Error",so(i.cwd,r));continue}try{let p=JSON.parse(o.slice(u,f)),d=Ae(p);if(d("settings")){for(let w of p.settings)if(x("$ref",w)){let b=w.$ref.split(".")[0];e.has(b)&&i.cache.schema[e.get(b).uri].add(r)}}if(d("blocks"))for(let w of p.blocks){let b=Ae(w);if(b("$ref")){let h=w.$ref.split(".")[0];e.has(h)&&i.cache.schema[e.get(h).uri].add(r)}if(b("settings")){for(let h of w.settings)if(x("$ref",h)){let v=h.$ref.split(".")[0];e.has(v)&&i.cache.schema[e.get(v).uri].add(r)}}}}catch{x(r,i.cache.sections)&&delete i.cache.sections[r],t("JSON Parse Error",so(i.cwd,r))}}}l();l();var xu=Pt(Kr());import{basename as nn,extname as Y1}from"pathe";import ed from"fast-glob";import{pathExists as K1}from"fs-extra";function td(){let e=[],t=new Set;for(let r in i.env.vars){let n=r.toLowerCase();if(n.endsWith("_api_token"))e.push({domain:`${n.slice(0,n.indexOf("_api_token"))}`,themes:{}});else if(n.endsWith("_api_key")){let s=`${n.slice(0,n.indexOf("_api_key"))}`;t.has(s)||(e.push({domain:s,themes:{}}),t.add(s))}else if(n.endsWith("_api_secret")){let s=`${n.slice(0,n.indexOf("_api_secret"))}`;t.has(s)||(e.push({domain:s,themes:{}}),t.add(s))}}if(e.length>0)return e;ai(i.cwd)}function rd(e){let t=e+"_api_token";if(x(t,i.env.vars)||(t=t.toUpperCase()),x(t,i.env.vars))return{baseURL:`https://${e}.myshopify.com/admin`,headers:{"X-Shopify-Access-Token":i.env.vars[t]}};let r=e+"_api_key",n=e+"_api_secret";if(x(r,i.env.vars)||(r=r.toUpperCase()),x(n,i.env.vars)||(n=n.toUpperCase()),x(r,i.env.vars)&&x(n,i.env.vars))return{baseURL:`https://${e}.myshopify.com/admin`,auth:{username:i.env.vars[r],password:i.env.vars[n]}};We(`Invalid or missing ${le(e+".myshopify.com")} credentials`,[`Your shop credentials in the ${le.bold(nn(i.env.file))} file could`,"not be read correctly or are missing. Please check your environment file and ensure","you have provided authorization."])}function Ht(e,t){let{cwd:r}=i,n=ze(t)?[]:!1,s=wt("Path Resolver"),o=yn(i.dirs.input,i.cwd);if(L(e)){let a=[];for(let u of e){let c=o(u),f=ed.sync(c,{cwd:r,absolute:!0});if(n){let p=t(c);I(p)?n.push(p):L(p)&&n.push(...p)}f.length===0?s("No files can be resolved in",u):a.push(...f)}return n===!1?a:{paths:a,match:(0,xu.default)(n)}}if(I(e)){let a=o(e),u=ed.sync(a,{cwd:r});if(u.length===0&&s("No files can be resolved in",e),n){let c=t(a);I(c)?n.push(c):L(c)&&n.push(...c)}return n===!1?u:{paths:u,match:(0,xu.default)(n)}}z({option:"uri",name:"uri/path",provided:e,expects:"string | string[]"})}function Bn(e,t){if(x("assertSnippet",t)||(t.assertSnippet=!0),I(e)){let{paths:r,match:n}=Ht(e,s=>(t.addWatch&&i.watch.add(s),Er(s)));if(r)return t.flatten?r.map(s=>t.assertSnippet?{input:s,rename:nn(s),snippet:!1}:{input:s,rename:nn(s)}):t.assertSnippet?{input:r,rename:"[name].[ext]",snippet:!1,match:n}:{input:r,rename:"[name].[ext]",match:n}}else if(L(e)){if(e.every(I)){let{paths:r,match:n}=Ht(e,s=>(t.addWatch&&i.watch.add(s),Er(s)));return t.flatten?r.map(s=>t.assertSnippet?{input:s,rename:nn(s),snippet:!1}:{input:s,rename:nn(s)}):t.assertSnippet?{input:r,rename:"[name].[ext]",snippet:!1,match:n}:{input:r,rename:"[name].[ext]",match:n}}else if(e.every(O))return e.map(r=>{x("input",r)||Be({option:"tranform",name:"input",value:r,expects:"{ input: string | string[] }"});let{paths:n,match:s}=Ht(r.input,o=>(t.addWatch&&i.watch.add(o),Er(o)));return r.match=s,r.input=n[0],t.assertSnippet&&!x("snippet",r)&&(r.snippet=!1),x("rename",r)||(r.rename=r.snippet?"[name].liquid":"[name].[ext]"),r})}else if(O(e)){let r=[];if(x("input",e)){let n=Re(e),{paths:s,match:o}=Ht(n.input,a=>(t.addWatch&&i.watch.add(a),Er(a)));if(t.assertSnippet&&!x("snippet",n)&&(n.snippet=!1),x("rename",n)||(n.rename=n.snippet?"[name].liquid":"[name].[ext]"),t.flatten)for(let a of s)r.push(ee(n,{input:a}));else n.input=s,n.match=o,r.push(n)}else for(let n in e){let s={snippet:n.startsWith("snippets/")},o=n.startsWith("assets/"),a=e[n],u=o||s.snippet;if(I(a)){u&&(s.rename=o?n.slice(7):n.slice(9));let{paths:c,match:f}=Ht(a,p=>(t.addWatch&&i.watch.add(p),Er(p)));if(c)if(t.flatten)for(let p of c)r.push(ee({},s,{input:p}));else r.push(ee({},s,{input:c,match:f}))}else if(O(a)){x("input",a)||Be({option:"tranform",name:n,value:a,expects:"{ input: string | string[] }"});let{paths:c,match:f}=Ht(a.input,p=>(t.addWatch&&i.watch.add(p),Er(p)));if(c){let p=u?ee({},a,s,{rename:o?n.slice(7):n.slice(9)}):ee({},s,a);if(t.flatten)for(let d of c)r.push(ee({},p,{input:d}));else r.push(ee(p,{input:c,match:f}))}}else if(L(a))if(a.every(I)){let{paths:c,match:f}=Ht(a,p=>(t.addWatch&&i.watch.add(p),Er(p)));if(Z1(n)&&(s.rename=nn(n)),c)if(t.flatten)for(let p of c)r.push(ee({},s,{input:p}));else r.push(ee({},s,{input:c,match:f}))}else z({option:"transform",name:n,provided:a,expects:"string[]"})}return r}}function Su(e,t){return!!(x("devDependencies",e)&&x(t,e.devDependencies)||x("dependencies",e)&&x(t,e.dependencies)||x("peerDependencies",e)&&x(t,e.peerDependencies)||x("optionalDependencies",e)&&x(t,e.peerDependencies))}async function X1(e){for(let t of Ac){let r=`${e}.${t}`;if(await K1(r))return r}return null}async function Fu(e,t){try{let r=await X1(e);if(r!==null){let n=await Zi({cwd:i.cwd,filepath:r,...t||{}});return{path:r,config:n.mod.syncify||n.mod.default||n.mod}}return null}catch{return null}}function Z1(e){return/\[(?:file|dir|ext)\]/.test(e)}function vs(e,t){let r=t,n=St(e),s=Y1(e),o=nn(e,s);return me(t)?{dir:n,ext:s,file:o,name:o}:(/(\[dir\])/.test(r)&&(r=r.replace("[dir]",n)),/(\[file\])/.test(r)&&(r=r.replace("[file]",o)),/(\.?\[ext\])/.test(r)&&(r=r.replace(/\.?\[ext\]/,s)),{ext:s,file:o,dir:n,name:t.replace(t,r)})}l();import{prompt as vu}from"enquirer";var $s={prefix:U("\u2502 "),styles:{primary:xe,success:xe,danger:re.bold,warning:Q,muted:m,disabled:m,typing:m},symbols:{ellipsisLarge:"",ellipsisSmall:"",prefix:{pending:"",submitted:"\u2713",cancelled:"\u{10102}"},separator:{pending:"",submitted:" \u2192 ",cancelled:" \u{10102} "}},pointer(e,t){let r=this.state.index===t?$.stub.trimEnd()+" ":$.trim+" ";return t===0?$.trim+`
`+r:r}};async function nd(e){let t=0,r={...$s},s=(await Ji(e)).filter(({role:h})=>h!=="demo"),o=$t(s,"name"),a=s.map(h=>(h.name.length>t&&(t=h.name.length),{name:h.name,message:h.name,hint:`${o(h.name)} ${X} ${m(h.role)}`,value:h}));a.push({role:"separator",message:U("\u2500".repeat(t))},{name:"create",message:"Create Theme",value:"create"});let{targets:u}=await vu({name:"targets",type:"select",multiple:!0,message:"Select Themes",hint:"Press spacebar to select",theme:r,choices:a,result(h){return un(this.map(h))},format(h){if(L(h)&&h.length>0)return ue(`${h.join(j(", "))}`)}}),c={domain:e.store.toLowerCase(),themes:{}},f=[];for(let h of u)c.themes["${"+h.name+"}"]=h.id,f.push({name:h.name,message:h.name,validate(v,W,G){if(G&&G.name===h.name){if(/[A-Z]/.test(v))return`
`+dt.redBright("  Target name must be lowercase");if(/[0-9]/.test(v))return`
`+dt.redBright("  Target name cannot contain numbers");if(/[ ]/.test(v))return`
`+dt.redBright("  Target name cannot contain spaces");if(/-/.test(v))return`
`+dt.redBright("  Target name cannot contain dashes")}return!0}});r.styles.primary=ue.italic,r.styles.typing=xe;let p=JSON.stringify(c,null,2),d=await vu({name:"stores",type:"snippet",required:u.map(({name:h})=>h),message:"Theme Targets",newline:`
`,theme:r,fields:f,template:p,format(){return this.state.submitted===!0&&this.state.completed!==100?xe(`${this.state.completed}% completed`):` ${q}  ${nt(`${this.state.completed}% completed`)}`}}),w={syncify:JSON.parse(d.stores.result)},b=await vu({name:"save",type:"confirm",message:"Save Settings",theme:r,initial:!0,newline:`
`,format(){return/^[ty1]/i.test(this.input)?"Yes":"No"},footer:$.line+["",m("The following store and theme references will be saved"),m("to your package.json file on the syncify key property."),"",JSON.stringify(w.syncify,null,2).split(`
`).join(`
`+$.line),""].join(`
`+$.line)});console.log(b)}async function sd(e){let t=bt(i.mode.metafields,i.mode.pages,i.mode.redirects,i.mode.release,i.mode.publish,i.mode.themes),r=bt(i.mode.watch,i.mode.upload,i.mode.import),n,s=[],o=!1;e._.length===0&&t&&Qt({expected:"syncify <store>",message:["You have not provided store to target, which is required","when running in a resource mode that syncs to a remote source"],fix:["Provide the store target name as the first command argument","followed by themes target/s and other flags."]}),i.mode.themes&&i.stores.length>0?s=td():(n=e._.length===0?i.stores.map(({domain:a})=>a):e._[0].split(","),s=i.stores.filter(({domain:a})=>xo(a,n)),o=s.length>1);for(let a of s){let u=`${a.domain}.myshopify.com`.toLowerCase(),c=rd(a.domain),f=i.sync.stores.push({store:a.domain,domain:u,client:c,queue:o})-1;if(i.mode.themes)continue;if(i.mode.metafields||i.mode.pages)return;let p=[];x("theme",e)?p=e.theme.split(","):x(a.domain,e)?p=e[a.domain].split(","):x("themes",a)&&(p=Bt(a.themes)),p.length===0&&await nd(i.sync.stores[f]);for(let d of p)x(d,a.themes)||wl({type:"theme",expected:Bt(a.themes).join(","),provided:d,message:[`Unknown theme target (${P(d)}) provided to ${P(a.domain)} store`,`Your ${P(i.file.base)} file contains no such theme using this name.`],fix:[`Provide an ${P("expected")} theme target or update/add an existing target.`,`You have ${P(`${p.length}`)} theme targets defined for ${P(a.domain)}:`,`

`,`${ar} ${p.join(`
${ar} `)}`,`

`]}),i.sync.themes.push({target:d,sidx:f,store:u,id:a.themes[d],url:`/themes/${a.themes[d]}/assets.json`})}if(t&&i.sync.stores.length===0)return Qt({expected:"syncify <store>",message:["You have not provided store to target, which is required","when running in a resource mode that syncs to a remote source"],fix:["Provide the store target name as the first command argument followed by themes","target/s and other flags. Based on your current configuration:",`

`,`${ar} ${E("$")} syncify ${i.stores.join(`
${ar} ${E("$")} syncify `)}`,`

`]});if(i.sync.themes.length===0&&r)return Qt({expected:"-t <theme>",message:["You have not provided a theme to target, which is required","when running this resource mode."],fix:[`Provide a theme name to target following a ${P("-t")} or ${P("--theme")} flag.`,"Theme targets should be passed as the 2nd argument, the 1st argument should be store name/s."]});i.sync.stores.length===0&&We("Unknown, missing or invalid store/theme targets",["Check your store config"]),i.sync.stores.length===1&&i.sync.themes.length===1?i.env.sync=1:(i.sync.stores.length>1||i.sync.themes.length>1)&&(i.env.sync=2)}l();var od=Pt(Kr());import Q1 from"fast-glob";import{dirname as id,join as $u}from"pathe";async function ad(){let e=yn(i.dirs.input),t=Ae(i.config.paths);for(let r of Gr){let n;if(r==="customers")n=t(r)?L(i.config.paths[r])?i.config.paths[r].map(e):[e(i.config.paths[r])]:[e("templates/customers/*")];else if(r==="metaobject")n=t(r)?L(i.config.paths[r])?i.config.paths[r].map(e):[e(i.config.paths[r])]:[e("templates/metaobject/*")];else if(r==="schema")n=t(r)?L(i.config.paths[r])?i.config.paths[r].map(e):[e(i.config.paths[r])]:[e("schema/*")];else if(t(r))if(n=L(i.config.paths[r])?i.config.paths[r].map(e):[e(i.config.paths[r])],r==="snippets")for(let s of n)i.snippet.baseDir.add(St(id(s)));else if(r==="sections")for(let s of n)i.section.baseDir.add(St(id(s)));else r==="assets"&&n.push($u(i.dirs.output,"assets/*"));else r==="redirects"&&t(r)?n=[$u(i.cwd,i.config.paths[r])]:n=[e(r)];for(let s of n){if(r!=="metafields"&&r!=="redirects"){let o=await Q1(s,{cwd:i.cwd});if(o.length===0){if(r==="assets"&&s===$u(i.dirs.output,"assets/*"))continue}else{if(i.paths[r].input===null)i.paths[r].input=new Set(o);else for(let a of o)i.paths[r].input.add(a);i.watch.add(s)}}i.paths[r].match=(0,od.default)(n)}}}l();import{join as Rr}from"pathe";function Cu(e){let t=e.match(/^(\d{1,2})\.(\d{1,2})\.(\d{1,2})$/);if(!t)throw new Error("Unable to parse: "+e);return{patch:parseInt(t[3],10),minor:parseInt(t[2],10),major:parseInt(t[1],10)}}function ud(e){if(x("syncifyVersion",i.cache.build)||(i.cache.build.syncifyVersion=i.version),x("themeVersion",i.cache.build)||(i.cache.build.themeVersion=i.pkg.version),i.cache.build.themeVersion!==i.pkg.number){i.vc.update=Cu(i.pkg.version),i.vc.update.number=i.pkg.version,i.vc.update.dir=Rr(i.dirs.export,`v${i.vc.major}`),i.vc.update.zip=Rr(i.vc.update.dir,`${i.vc.number}.zip`);let{patch:t,minor:r,major:n}=Cu(i.cache.build.themeVersion);i.vc.number=i.cache.build.themeVersion,i.vc.patch=t,i.vc.minor=r,i.vc.major=n,i.vc.dir=Rr(i.dirs.export,`v${i.vc.major}`),i.vc.zip=Rr(i.vc.dir,`${i.vc.number}.zip`)}else{let{patch:t,minor:r,major:n}=Cu(i.pkg.version);i.vc.number=i.pkg.version,i.vc.patch=t,i.vc.minor=r,i.vc.major=n,i.vc.dir=Rr(i.dirs.export,`v${i.vc.major}`),i.vc.zip=Rr(i.vc.dir,`${i.vc.number}.zip`)}e.release!==null&&(i.vc.update=R(i.vc),e.release==="patch"?(i.vc.update.patch=i.vc.patch+1,i.vc.update.bump="patch"):e.release==="minor"?(i.vc.update.minor=i.vc.minor+1,i.vc.update.bump="minor"):e.release==="major"&&(i.vc.update.major=i.vc.major+1,i.vc.update.bump="major",i.vc.update.dir=Rr(i.dirs.export,`v${i.vc.update.major}`)),i.vc.update.number=`${i.vc.update.major}.${i.vc.update.minor}.${i.vc.update.patch}`,i.vc.update.zip=Rr(i.vc.update.dir,`${i.vc.update.number}.zip`))}l();var gd=Pt(dd());l();import{spawn as tb}from"cross-spawn";function Au(e,t,r){let n=tb(t.cmd,t.args,{stdio:"pipe"});t.pid=n.pid,async function s(){if(i.env.ready===!1)return await rt(100),s();n.stdio[0].on("data",r.bind({name:e,type:"stdin"})),n.stdio[0].on("data",r.bind({name:e,type:"stdout"})),n.stdio[2].on("data",r.bind({name:e,type:"stderr"})),i.spawn.streams.set(e,n)}()}function hd(){let{mode:e,spawn:t,config:r}=i;if(!x("spawn",r)||pe(r.spawn))return;O(r.spawn)||z({option:"config",name:"spawn",provided:r.spawn,expects:"{ build: {}, watch: {} }"});let n=Ae(r.spawn),s=null;if(e.build&&n("build")&&(s="build"),e.watch&&n("watch")&&(s="watch"),!(pe(e)||pe(r.spawn[s]))&&(O(r.spawn[s])||z({option:"spawn",name:s,provided:r.spawn[s],expects:"{ build: {}, watch: {} }"}),!oe(r.spawn[s]))){for(let o in r.spawn[s]){let a=r.spawn[s][o];if(I(a)){i.spawn.commands[o]=R();let u=a.trimStart().indexOf(" ")>-1?a.trimStart().split(" "):[a];i.spawn.commands[o].cmd=u.shift().trim(),i.spawn.commands[o].args=u,i.spawn.commands[o].pid=NaN,Au(o,i.spawn.commands[o],ia(o))}else if(L(a)){let u=a.shift().trim();i.spawn.commands[o]=R({cmd:u,args:a,pid:NaN}),Au(o,i.spawn.commands[o],ia(o))}else z({option:"spawn",name:s,provided:r.spawn[s],expects:"string | string[]"})}xt.spawns(i),ro(()=>{te.pause(),te.clear(),ke(""),t.streams.forEach((o,a)=>{T(`- ${m(`pid: #${o.pid} (${a}) process exited`)}`),(0,gd.default)(o.pid)}),ke(""),t.streams.clear(),process.exit(0)})}}l();var Dd=Pt(Kr());import{join as yd}from"pathe";async function bd(){if(!x("script",i.config.transform)||!i.config.transform.script||oe(i.config.transform.script))return;let e=wt("Script Transform");x("entryPoints",i.processor.esbuild)&&(e("processor option is not allowed and was omitted","entryPoints"),delete i.processor.esbuild.entryPoints);let t=Bn(i.config.transform.script,{addWatch:!1,flatten:!0}),r=So(["input","watch","rename","snippet"]);x("absWorkingDir",i.processor.esbuild)||(i.processor.esbuild.absWorkingDir=i.cwd);for(let n of t){let s=n.snippet?"snippets":"assets",{name:o}=vs(n.input,n.rename),a;o.endsWith(".js")===!1&&o.endsWith(".mjs")===!1?a=o+".js":o.endsWith(".cjs")?Be({option:"transform.script",name:"rename",value:o,expects:".js | .mjs",reason:["You cannot use cjs extensions in web environments"]}):a=o,n.snippet===!0&&a.endsWith(".liquid")===!1&&(a=a+".liquid");let u=Ae(n),c=R();if(n.snippet){if(c.snippet=!0,c.namespace="snippets",c.type=3,u("attrs")&&oe(n.attrs)===!1)if(L(n.attrs))for(let f=0;f<n.attrs.length;f++){let p=n.attrs[f];L(p)?c.attrs.push(p.join("")):z({option:"style",name:`attrs[${f}]`,provided:p,expects:"string[]"})}else z({option:"style",name:"attrs",provided:n.attrs,expects:"[ string[] ]"})}else c.snippet=!1,c.namespace="assets",c.type=10;if(c.uuid=It(),c.snippet=n.snippet,c.input=n.input,c.output=yd(i.dirs.output,s,a),c.key=yd(s,a),c.attrs=[],c.size=NaN,c.watch=null,c.watchCustom=null,c.esbuild=null,i.processor.esbuild.outfile=c.output,i.mode.watch&&i.watch.unwatch(c.output),u("esbuild"))if(he(n.esbuild)||pe(n.esbuild))oe(r)?c.esbuild=i.processor.esbuild:c.esbuild=Re(i.processor.esbuild,r);else if(O(n.esbuild)){let f=Ae(n.esbuild);for(let p in["entryPoints","outdir","watch","absWorkingDir","watch","write","logLevel","incremental"])p==="entryPoints"&&f(p)?e('Option is not allowed, use Syncify "input" instead',p):p==="outdir"&&f(p)?e("Option is not allowed, Syncify will handle output",p):p==="watch"&&f(p)?e("Option is not allowed, declare watch using Syncify",p):f(p)&&e("Option is not allowed and will be ignored",p);f("plugins")&&x("plugins",i.processor.esbuild)&&n.esbuild.plugins.unshift(...i.processor.esbuild.plugins),oe(r)?c.esbuild=Re(i.processor.esbuild,n.esbuild):c.esbuild=Re(i.processor.esbuild,n.esbuild,r)}else z({option:"script",name:"esbuild",provided:typeof n.esbuild,expects:"boolean | null | {}"});else oe(r)?c.esbuild=i.processor.esbuild:c.esbuild=Re(i.processor.esbuild,r);if(c.esbuild.entryPoints=[c.input],i.mode.watch)if(!u("watch"))c.watch=new Set;else{L(n.watch)||z({option:"script",name:"watch",provided:n.watch,expects:"string[]"});let f=Ht(n.watch);c.watchCustom=(0,Dd.default)(f),c.watch=new Set(f)}else c.watch=new Set;try{await zp(c)}catch(f){vl(f,{message:["Syncify has failed to initialize due to a script prebuild error.","Script transforms execute runtime builds but the compile process did not complete.","This is typically due to invalid JavaScript syntax but may also be caused due to invalid","transform options being passed."],solution:["You will need to correct the error encountered. Alternatively you can skip Syncify","from applying the transform by excluding the file. "],entries:{processor:"ESBuild"}})}i.mode.terse&&(c.esbuild=Re(c.esbuild,i.terser.script,{exclude:void 0})),i.script.push(c)}}l();var Tu=Pt(Kr());import wd from"fast-glob";import{join as sn,extname as rb}from"pathe";import{exists as xd}from"fs-extra";async function nb(){let e=await Fu("postcss.config",{tsconfig:null});if(e!==null&&(i.processor.postcss.file=e.path,i.processor.postcss.config=e.config,i.watch.add(e.path)),i.processor.tailwind.installed=Su(i.pkg,"tailwindcss"),i.processor.tailwind.installed){await Xa("tailwind")||We("Unable to dynamically import TailwindCSS",["Ensure you have installed tailwindcss"]);let r=await Fu("tailwind.config",{tsconfig:null});r!==null&&(i.processor.tailwind.file=r.path,i.processor.tailwind.config=r.config,i.watch.add(r.path))}i.processor.sass.installed=Su(i.pkg,"sass"),i.processor.sass.installed&&(await Xa("sass")||We("Unable to dynamically import SASS",["Ensure you have installed sass"]))}async function Sd(){if(!x("style",i.config.transform)||!i.config.transform.style||oe(i.config.transform.style))return;await nb();let e=wt("Style Transform"),t=Bn(i.config.transform.style,{addWatch:!1,flatten:!0}),r=yn(i.config.input);for(let n=0;n<t.length;n++){let s=t[n],o=Ae(s),a=R();if(a.uuid=It(),a.input=s.input,a.watch=null,a.attrs=[],a.postcss=null,a.sass=!1,a.tailwind=null,o("postcss")?L(s.postcss)&&s.postcss.length>0?tt(a,"postcss",{get(){return s.postcss}}):he(s.postcss)&&s.postcss!==!1&&pe(s.postcss)===!1?tt(a,"postcss",{get(){return Re(i.processor.postcss.config)}}):z({option:"style",name:"postcss",provided:a.postcss,expects:"boolean | []"}):tt(a,"postcss",{get(){return Re(i.processor.postcss.config)}}),o("tailwind")){i.processor.tailwind.installed||ta("tailwindcss");let f=O(s.tailwind);if(f||he(s.tailwind)&&s.tailwind!==!1&&pe(s.tailwind)===!1){let p=Re(f?s.tailwind:i.processor.tailwind.config);if(L(p.content)&&oe(p.content)&&(p.content=[sn(i.dirs.input,"**","*.{js,ts,jsx,tsx,vue,svelte,liquid,json,schema}")]),tt(a,"tailwind",{get(){return p}}),i.mode.watch&&L(a.tailwind.content)){let d=await wd(a.tailwind.content);i.processor.tailwind.map===null&&(i.processor.tailwind.map=R()),i.processor.tailwind.map[n]=new Set(d)}}else z({option:"style",name:"tailwind",provided:a.tailwind,expects:"boolean | {}"})}if(o("sass")&&s.sass!==!1&&i.processor.sass.installed===!0){let f=O(s.sass);if((he(s.sass)||f)&&pe(s.sass)===!1)if(i.processor.sass.installed||ta("sass"),f===!1)tt(a,"sass",{get(){return s.sass}});else{a.sass=Re(i.processor.sass.config,s.sass);for(let p in s.sass)if(p==="sourcemap"||p==="warnings"||p==="quietDeps")he(s.sass[p])?a.sass[p]=s.sass[p]:z({option:"sass",name:p,provided:s.sass[p],expects:"boolean"});else if(p==="style")I(s.sass[p])===!1&&z({option:"sass",name:p,provided:s.sass[p],expects:"string"}),s.sass[p]==="expanded"||s.sass[p]==="compressed"?a.sass[p]=s.sass[p]:Be({option:"sass",name:p,value:s.sass[p],expects:"expanded | compressed"});else if(p==="includePaths")if(L(s.sass[p])){let d=[];for(let w of s.sass[p]){let b=sn(i.cwd,w);await xd(b)?d.push(b):e("Cannot resolve sass includePath entry",w)}a.sass[p]=d}else z({option:"sass",name:p,provided:s.sass[p],expects:"string[]"})}else z({option:"style",name:"sass",provided:s.sass,expects:"boolean | {}"});s.snippet===!1&&!/\.s[ac]ss/.test(rb(a.input))&&e("Input is not a sass file",a.input)}let u=vs(s.rename);o("rename")&&pe(s)===!1&&(I(s.rename)===!1&&z({option:"styles",name:"rename",provided:s.rename,expects:"string"}),u=vs(a.input,s.rename),/[a-zA-Z0-9_.-]+/.test(u.name)===!1&&z({option:"sass",name:"rename",provided:u,expects:"Characters: [a-zA-Z0-9_.-]"}),u.name.endsWith(".css")?a.rename=u.name:u.name.endsWith(".scss")?u.name=u.name.replace(".scss",".css"):u.name.endsWith(".sass")?u.name=u.name.replace(".sass",".css"):u.name.endsWith(".liquid")||(u.name=u.name+".css"));let c=[];if(i.mode.watch&&o("watch")){L(s.watch)||z({option:"styles",name:"watch",provided:s.watch,expects:"string[]"});for(let f of s.watch){let p=await wd(sn(i.cwd,r(f)));p.length===0&&f[0]!=="!"&&e("Cannot resolve watch glob/path uri",f);for(let d of p)await xd(d)?c.push(d):e("No file exists in path",d)}c.push(a.input);for(let f of c)i.watch.add(f);a.watch=(0,Tu.default)(c)}else a.watch=(0,Tu.default)([a.input]),i.watch.add(a.input);if(O(a.sass)&&(a.sass.include.unshift(i.cwd,sn(i.cwd,u.dir)),Lt("sass.include",s)&&(a.sass.include=s.sass.include.map(f=>sn(i.cwd,f)))),o("snippet")&&(he(s.snippet)||z({option:"styles",name:"snippet",provided:s.snippet,expects:"boolean"}),a.snippet=s.snippet,a.snippet===!0&&o("attrs")&&oe(s.attrs)===!1))if(L(s.attrs))for(let f=0;f<s.attrs.length;f++){let p=s.attrs[f];L(p)?a.attrs.push(p.join("")):z({option:"style",name:`attrs[${f}]`,provided:p,expects:"string[]"})}else z({option:"style",name:"attrs",provided:s.attrs,expects:"[ string[] ]"});a.snippet?(x("rename",a)||(a.rename=u.name),(u.name.endsWith(".liquid")===!1||a.rename.endsWith(".liquid")===!1)&&(a.rename=u.name+".liquid"),i.paths.transforms.set(a.input,9),i.mode.watch&&i.watch.unwatch(sn(i.dirs.output,"snippets",a.rename))):(a.rename=u.name,i.mode.watch&&i.watch.unwatch(sn(i.dirs.output,"assets",u.name))),i.style.push(a)}}l();import{extname as sb,relative as ib}from"pathe";async function Fd(){if(!x("svg",i.config.transform)||!i.config.transform.svg||oe(i.config.transform.svg))return;let e=wt("SVG Transform"),t=Bn(i.config.transform.svg,{addWatch:!0,flatten:!1});for(let r of t){let n=r.input.filter(a=>sb(a)===".svg"?!0:(e("Excluded file which is not an SVG type",ib(i.cwd,a)),!1));if(n.length===0){e("No SVG file paths were resolved");continue}let s=Ae(r),o=R();o.uuid=It(),o.input=new Set(n),o.format=null,o.match=r.match,o.rename=r.rename,o.snippet=r.snippet,s("svgo")&&s("sprite")&&Be({option:"transform",name:"svg",value:"svgo AND sprite",expects:"svgo OR sprite"}),s("format")?r.format==="file"||r.format==="sprite"?(o.format=r.format,r.format==="file"?o.svgo=!0:o.sprite=!0):Be({option:"transform > svg",name:"format",value:r.format,expects:'"sprite" | "file"'}):s("svgo")?(o.format="file",o.svgo=O(r.svgo)?Re(i.processor.svgo,r.svgo):!0):s("sprite")?(o.format="sprite",o.sprite=O(r.sprite)?Re(i.processor.sprite,r.sprite):!0):xl({option:"transform.svg",key:"format",expects:"sprite | file",reason:[`SVG transforms require you to define ${le("format")} Syncify needs to knows how`,"it should handle the input and which processor to use for the transform."]}),i.svg.push(o)}}l();import{join as io}from"pathe";async function vd(){if(i.mode.watch!==!0){if(i.cache.build.hotSnippet.length>0){for(let r of i.cache.build.hotSnippet)await Da(r);i.cache.build.hotSnippet=[]}return}if(i.mode.hot===!1&&i.config.hot===!1){if(i.cache.build.hotSnippet.length>0){for(let r of i.cache.build.hotSnippet)await Da(r);i.cache.build.hotSnippet=[]}return}i.mode.hot===!1&&i.config.hot===!0&&(i.mode.hot=!0);let e=wt("HOT Reloads");if(i.env.sync>1){e("HOT Reloads can only be used on 1 store");return}else if(i.sync.themes.length>1){e("HOT Reloads can only be used on 1 theme");return}if(Kt(O(i.config.hot),he(i.config.hot),pe(i.config.hot))&&z({option:"config",name:"hot",provided:i.config.hot,expects:"boolean | {}"}),O(i.config.hot)&&oe(i.config.hot)===!1){let r=Ae(i.hot);for(let n in i.config.hot)r(n)||Cr(`hot.${n}`,i.config.hot[n]),n==="label"?i.config.hot[n]==="visible"||i.config.hot[n]==="hidden"?i.hot[n]=i.config.hot[n]:Be({option:"hot",name:n,value:i.config.hot[n],expects:"visible | hidden"}):n==="strategy"?i.config.hot[n]==="hydrate"||i.config.hot[n]==="replace"?i.hot[n]=i.config.hot[n]:Be({option:"hot",name:n,value:i.config.hot[n],expects:"hydrate | replace"}):n==="method"?i.config.hot[n]==="hot"||i.config.hot[n]==="refresh"?i.hot[n]=i.config.hot[n]:Be({option:"hot",name:n,value:i.config.hot[n],expects:"hot | refresh"}):n==="scroll"?i.config.hot[n]==="preserved"||i.config.hot[n]==="top"?i.hot[n]=i.config.hot[n]:Be({option:"hot",name:n,value:i.config.hot[n],expects:"preserved | top"}):typeof i.hot[n]==typeof i.config.hot[n]?i.hot[n]=i.config.hot[n]:z({option:"hot",name:n,provided:i.config.hot[n],expects:typeof i.hot[n]})}i.hot.snippet=io(i.cwd,"node_modules","@syncify/cli","hot.js.liquid"),i.hot.output=io(i.dirs.output,"snippets","hot.js.liquid");let t=io(i.dirs.output,"layout");for(let r of i.hot.layouts){let n=io(t,r);i.hot.alive[n]=!1,i.cache.build.hotSnippet.includes(t)||i.cache.build.hotSnippet.push(t)}i.hot.renderer="{% render 'hot.js'"+["",`server: ${i.hot.server}`,`socket: ${i.hot.socket}`,`strategy: "${i.hot.strategy}"`,`scroll: "${i.hot.scroll}"`,`label: "${i.hot.label}"`,`history: "${i.hot.history}`,`method: "${i.hot.method}"`].join(", ")+" %}",i.wss=Mm()}l();import{join as ob}from"pathe";function Bu(e,t){let r=[],n=R();i.mode.upload?(n.base="output",n.from="output",n.dirs=Hr.map(s=>`${E("-")} ${P(s)}`),n.fix=[`The ${P("--filter")} (or ${P("-f")}) flag command argument expects you`,"provide a theme output directory as the starting point. Filtering begins with","a Shopify output directory name, for example:","",`${E("$")} ${E(`syncify --filter ${P("sections/file.liquid")}`)}`,`${E("$")} ${E(`syncify --filter ${P("snippets/*")}`)}`,`${E("$")} ${E(`syncify --filter ${P("templates/*.json")}`)}`,`${E("$")} ${E(`syncify --filter ${P("!assets/some-file.ext")}`)}`,"",`Syncify will automatically resolve files from within your defined ${g(n.base)} directory`,"based on the starting point directory name. You can pass glob star matches following the",`directory namespace or starting point ignores (${P("!")}) as long the directory can match.`]):(n.base="input",n.from="paths",n.dirs=Gr.map(s=>`${E("-")} ${P(s)}`),n.fix=[`The ${P("--filter")} (or ${P("-f")}) flag command argument expects you`,`provide a ${Ot.bold("paths")} key name as the starting point. Filtering begins with`,"a Shopify output directory name, for example:","",`${E("$")} ${E(`syncify --filter ${P("sections/file.liquid")}`)}`,`${E("$")} ${E(`syncify --filter ${P("snippets/*")}`)}`,`${E("$")} ${E(`syncify --filter ${P("templates/*.json")}`)}`,`${E("$")} ${E(`syncify --filter ${P("!assets/some-file.ext")}`)}`,"",`Syncify will automatically resolve files from within your defined ${g(n.base)} directory`,`based on the starting point ${g("paths")} name. You can pass glob star matches following the`,`starting point or ignores (${P("!")}) as long the reference can match.`]),e==="pattern"?(r.push(`Invalid ${P("--filter")} pattern provided. You cannot pass starting point`),t[0]==="*"?r.push(`glob (${P("*")}) stars as filters, Syncify does not support this.`):t[0]==="/"?r.push(`path (${P("/")}) roots as filters, Syncify does not support this.`):t[0]==="."&&r.push(`dot paths (${P(".")})  as filters, Syncify does not support this.`),r.push(`Use a starting point reference name based on the ${P(n.from)} key property`,`in your ${P(i.file.base)} file.`)):r.push(`Invalid directory provided. The ${P("--filter")} pattern expects the starting point`,"directory path be one of the following:","",...n.dirs,""),Qt({message:r,expected:"--filter <dir>",fix:n.fix})}function $d(e,t,r){if((t[0]==="*"||t[0]==="/"||t[0]===".")&&Bu("pattern",t),t[0]==="!"){r.test(t.slice(1))||Bu("dir",t);return}r.test(t)||Bu("dir",t);let n=t.slice(0,t.indexOf("/"));L(i.filters[n])||(i.filters[n]=[]),i.filters[n].push(ob(e,t))}function Cd(e){if(!x("filter",e))return;let t=i.mode.upload?i.dirs.output:i.dirs.input,r=e.filter.replace(/\s+/g," ").trim(),n=i.mode.upload?new RegExp(`^(${Hr.join("|")})`):new RegExp(`^(${Gr.join("|")})`);if(r.indexOf(",")>-1){let s=r.split(",").filter(Boolean).map(o=>o.trim());for(let o of s)$d(t,o,n)}else $d(t,r,n)}l();function Ed(){let{terser:e,mode:t}=i;if(he(i.config.terser)){if(t.terse===!1&&i.config.terser===!1)return;t.terse===!1&&i.config.terser===!0&&(t.terse=!0)}let r=wt("terser configuration");if(typeof i.config.terser=="object")for(let n in i.config.terser){if(i.config.terser[n]===!1||pe(i.config.terser[n])){i.mode.terse===!0&&(i.terse[n]=!0);continue}if(n==="script"&&i.processor.esbuild.installed===!1&&(O(i.config.terser[n])&&oe(i.config.terser[n])===!1||he(i.config.terser[n])&&i.config.terser[n]===!0)&&We("esbuild is not installed",Tc),he(i.config.terser[n]))i.terser[n]=i.config.terser[n];else if(O(e[n])){if(oe(e[n]))continue;for(let s in i.config.terser[n]){if(s==="exclude"){oe(i.config.terser[n][s])||(e[n][s]=Ht(i.config.terser[n][s]));continue}x(s,e[n])||Cr(`terser.${n}`,s),s==="mangleProps"?!pe(i.config.terser[n][s])&&!ur(e[n][s])&&z({option:`terser.${n}`,name:s,provided:`${typeof i.config.terser[n][s]} (${i.config.terser[n][s]})`,expects:"Regex | string | undefined"}):!pe(i.config.terser[n][s])&&typeof e[n][s]!=typeof i.config.terser[n][s]&&z({option:`terser.${n}`,name:s,provided:typeof i.config.terser[n][s],expects:typeof e[n][s]}),s==="collapseWhitespace"?e.markup.collapseWhitespace=i.config.terser[n][s]:e[n][s]=i.config.terser[n][s]}}else r("unkown option provided",n)}}l();function Ad(){if(!Ae(i.config.views)("pages"))return;let{pages:e}=i.config.views;if(!O(e)&&!pe(e)&&z({option:"views",name:"pages",provided:typeof e,expects:"{}"}),oe(e))return;let t=Ae(e);for(let r in e)if(t(r)||Cr("pages",r),r==="language")I(e[r])?e[r]==="markdown"||e[r]==="html"?i.page[r]=e[r]:Be({option:"views.pages",name:r,value:e[r],expects:"markdown | html"}):z({option:"views.pages",name:r,provided:e[r],expects:"markdown | html"});else if(r==="author"){if(pe(e[r]))continue;I(e[r])?i.page[r]=e[r]:z({option:"views.pages",name:r,provided:e[r],expects:"string"})}else if(r==="suffixDir"||r==="safeSync"){if(pe(e[r]))continue;he(e[r])?i.page[r]=e[r]:z({option:"views.pages",name:r,provided:e[r],expects:"object"})}else if(r==="global"){if(pe(e[r]))continue;if(L(e[r])){if(e[r].length>0){i.page[r]=new RegExp(`${e[r].join("|")}`);continue}}else z({option:"views.pages",name:r,provided:e[r],expects:"string | string[]"})}}l();async function Td(){if(O(i.config.publish)&&oe(i.config.publish)===!1)for(let e in i.config.publish)x(e,i.publish)||Cr(`publish.${e}`,i.config.publish[e]),e==="tunnelPort"?Dt(i.config.publish[e])&&isNaN(i.config.publish[e])===!1?i.publish[e]=i.config.publish[e]:Be({option:"publish",name:e,value:i.config.hot[e],expects:"visible | hidden"}):e==="publishRole"?i.config.publish[e]==="main"||i.config.publish[e]==="unpublished"||i.config.publish[e]==="development"?i.publish[e]=i.config.publish[e]:Be({option:"publish",name:e,value:i.config.hot[e],expects:"main | unpublished | development"}):e==="bindVersion"?he(i.config.publish[e])?i.publish[e]=i.config.publish[e]:z({option:"bindVersion",name:e,provided:i.config.publish[e],expects:typeof i.publish[e]}):e==="themeLimit"&&(Dt(i.config.publish[e])?i.config.publish[e]>5?Be({option:"publish",name:e,value:i.config.hot[e],expects:"1 - 5",reason:["Syncify requries a theme limit between 1 and 5."]}):i.publish[e]=i.config.publish[e]:z({option:"themeLimit",name:e,provided:i.config.publish[e],expects:typeof i.publish[e]}));(i.mode.publish===!0||i.mode.release===!0)&&(x("ngrok_auth_token",i.env.vars)||We("Missing ngrok auth token",["Theme publishing requires an ngrok authorisation token",`This is easy to obtain, visit ${Vt("https://ngrok.com")}`,`and create a ${g("free")} account to get a token.`,"",`Once you have obtained an auth token, provide it in your ${m(".env")}`,"file, use the following environment variable name:","",`${j('ngrok_auth_token = ""')}`]))}async function Bd(e,t){if(A.start("runtime"),xt(i),await Nm(e),await hu(e),await pb(e),await im(e),ub(e),Km(e),i.mode.setup||i.mode.strap||(process.env.SYNCIFY_ENV=i.env.dev?"dev":"prod",process.env.SYNCIFY_WATCH=String(i.mode.watch),Um(e),ud(e),Cd(e),xt.modes(i),await sd(e),cb(e.watch||e.upload),lb(),Td(),hd(),await Promise.all([zm(),bu(),Vm(),ad()]).catch(n=>{Ct(n,{details:"Directory and path generation error"})}),i.mode.themes))return;Ad(),Ym(),Xm(),fb(),i.mode.build||xt.stores(i),await Qm(),await bd(),await Fd(),await Sd(),Ed();let r=await Promise.all([vd(),om()]).catch(n=>{Ct(n,{details:"Runtime error"})});return xt.warnings(i),i.mode.build||xt.time(),r}function ub(e){i.restart=!1,i.cli=e,i.cwd=e.cwd,i.env.cli=e.cli,i.env.prod=e.prod,i.env.dev=e.dev&&!e.prod,i.terminal.wrap=Math.round(i.terminal.cols-i.terminal.cols/3);let t=Ae(i.config.log);t("silent")&&(i.log.config.silent=i.config.log.silent),t("clear")&&(i.log.config.clear=i.config.log.clear),t("stats")&&(i.log.config.stats=i.config.log.stats),t("warnings")&&(i.log.config.warnings=i.config.log.warnings)}function cb(e){e&&(i.watch=new ab({persistent:!0,ignoreInitial:!0,usePolling:!0,interval:75,binaryInterval:100,ignored:["**/*.map"],ignorePermissionErrors:!0}),i.watch=Object.defineProperties(i.watch,{has:{value(t,r=i.cwd){return i.watch._watched.has(r)?i.watch._watched.get(r).items.has(t):!1}},paths:{get(){return br(this._closers.keys())}},watching:{get(){return i.watch._watched}}}))}function lb(){if(x("processors",i.config)&&O(process.config))for(let e in i.config.processors)oe(i.config.processors[e])||(L(i.config.processors[e])?i.processor[e].config=i.config.processors[e]:O(i.config.processors[e])&&(e==="esbuild"?i.processor[e]=Re(i.processor[e],i.config.processors[e]):i.processor[e].config=Re(i.processor[e].config,i.config.processors[e])))}function fb(){if(x("plugins",i.config)&&L(i.config.plugins))for(let e of i.config.plugins)x("onInit",e)&&e.onInit.call({...i},i.config),x("onChange",e)&&i.plugins.onChange.push([e.name,e.onChange]),x("onTransform",e)&&i.plugins.onTransform.push([e.name,e.onTransform]),i.mode.watch&&(x("onWatch",e)&&i.plugins.onWatch.push([e.name,e.onWatch]),x("onReload",e)&&i.plugins.onReload.push([e.name,e.onReload])),i.mode.build&&x("onBuild",e)&&i.plugins.onBuild.push([e.name,e.onBuild])}async function pb(e){let t=await Lm(e.cwd);t!==null?i.config=t:x("syncify",i.pkg)&&(x("config",i.pkg.syncify)?i.config=i.pkg.syncify.config:x("stores",i.pkg.syncify)||e.setup===!1&&e.strap===null&&Fl(e.cwd))}l();import{prompt as Lu}from"enquirer";l();async function Ld(e){return Wr.get("/oauth/access_scopes.json",e).then(({data:t})=>t).catch(t=>!1)}async function Rd(){let e=V({type:"info"}),t={store:null,domain:null,token:null,ngrok:null,version:null,scopes:{read_content:!1,read_files:!1,read_online_store_pages:!1,read_themes:!1,write_content:!1,write_files:!1,write_online_store_pages:!1,write_themes:!1}},r=ee({},$s,{pointer(f,p){return this.state.index===p?$.stub.trimEnd()+" ":$.trim+" "}}),n=[`Existing Setup${N}  `,`Shopify Domain${N}  `,`Admin API Token${N} `,`Ngrok API Token${N} `];if(i.env.file!==null)return T(e.Line("Environment references exist, setup can only be used for new installations.").NL.End(i.log.group).BR.toString());let{domain:s}=await Lu({type:"input",name:"domain",message:n[1],required:!0,format(f){return f+".myshopify.com"},validate(f){return this.state.symbols.pointer="  ",f===".myshopify.com"||f.length===0?"Enter myshopify.com domain name":!0},theme:r}),{token:o}=await Lu({type:"input",name:"token",required:!0,message:n[2],theme:r,validate(f){return this.state.symbols.pointer="  ",!f||f.length<10?"Invalid Admin API Token":!0}}),{ngrok:a}=await Lu({type:"input",name:"ngrok",required:!0,message:n[3],theme:r,validate(f){return this.state.symbols.pointer="  ",!f||f.length<10?"Invalid Ngrok API Token":!0}}),u=await Ld({baseURL:`https://${s}.myshopify.com/admin`,headers:{"X-Shopify-Access-Token":o.trim()}});if(he(u))return T(e.NL.Wrap(`Connection failed on ${le(`${s}.myshopify.com`)}. Please check the API Access Token`,"is correct and you have set the correct scopes, then try again.",re).NL.End(i.log.group).BR.toString());for(let{handle:f}of u.access_scopes)f in t.scopes&&(t.scopes[f]=!0,e.Line(`${Zu} ${f}`));let c=0;for(let f in t.scopes)t.scopes[f]===!1&&(e.Line(`${Dr} ${f}`,re),c=c+1);if(c>0)return T(e.NL.Wrap("Syncify requires read and write access to all the above resources.","Provide access to all scopes listed in red (above) and try again.",re).NL.End(i.log.group).BR.toString());T(e.toLine()),t.store=s,t.domain=`${s}.myshopify.com`,t.token=o.trim(),t.ngrok=a.trim()}l();import{prompt as db}from"enquirer";import{copy as gb}from"fs-extra";import{join as oo}from"pathe";async function Nd(){let e=oo(i.cwd,"node_modules","@syncify/cli","straps"),t={dawn:oo(e,"dawn"),dusk:oo(e,"dusk"),silk:oo(e,"silk")},r=ee({},$s,{pointer(s,o){return this.state.index===o?$.stub.trimEnd()+" ":$.trim+" "}}),{template:n}=await db({type:"select",name:"template",message:`Choose Strap${N}    `,required:!0,theme:r,choices:[{name:"dusk",message:"Dusk  ",hint:"Stripped theme"},{name:"dawn",message:"Dawn  ",hint:"Shopify Slop"},{name:"silk",message:"Silk  ",hint:"Custom theme"}]});gb(t[n],i.cwd)}async function Ln(e,t,r){if(_e("_",e)&&(e._=e._.slice(1)),hb.slice(2).length===0||e.help==="examples"||I(e.help)&&e.help.length===0)return Gm(e);if(await Bd(e,t),i.mode.setup)return Rd();if(i.mode.strap)return Nd();if(i.mode.themes)return gm();process.stdin.on("data",qm),i.mode.hot&&await Wm();try{if(i.env.ready=!0,i.mode.build&&i.mode.export===!1)return Hi(r);if(i.mode.watch)return mm(r);if(i.mode.upload)return Kl(r);if(i.mode.import)return ym(r);if(i.mode.export&&i.mode.publish===!1)return eo(r);if(i.mode.publish)return Om(r);if(i.mode.interactive)return console.log("TODO: --interactive is not yet supported");if(i.mode.metafields)return console.log("TODO: --metafields is not yet supported")}catch(n){console.log(n)}}var _9=e=>e;function yb(e,t){if(I(e)){if(e==="watch"||e==="build"||e==="export"||e==="import"||e==="upload"||e==="watch")return r=>Ln({cli:!1,[e]:!0},t,r);throw new Error(["Invalid Resource, available resource modes via API:","",'- "watch"','- "build"','- "export"','- "import"','- "upload"',""].join(`
`))}else if(O(e)){if(!me(t))throw new Error("You cannot provide options when running instance");return{watch:r=>Ln({cli:!1,watch:!0},t,r),build:r=>Ln({cli:!1,build:!0},t,r),download:r=>Ln({cli:!1,import:!0},t,r),upload:r=>Ln({cli:!1,upload:!0},t,r)}}}var I9=yb;export{i as $,I9 as default,_9 as defineConfig};
/*! Bundled license information:

normalize-path/index.js:
  (*!
   * normalize-path <https://github.com/jonschlinkert/normalize-path>
   *
   * Copyright (c) 2014-2018, Jon Schlinkert.
   * Released under the MIT License.
   *)

imurmurhash/imurmurhash.js:
  (**
   * @preserve
   * JS Implementation of incremental MurmurHash3 (r150) (as of May 10, 2013)
   *
   * @author <a href="mailto:jensyt@gmail.com">Jens Taylor</a>
   * @see http://github.com/homebrewing/brauhaus-diff
   * @author <a href="mailto:gary.court@gmail.com">Gary Court</a>
   * @see http://github.com/garycourt/murmurhash-js
   * @author <a href="mailto:aappleby@gmail.com">Austin Appleby</a>
   * @see http://sites.google.com/site/murmurhash/
   *)
*/
