var fg=Object.create;var ai=Object.defineProperty;var pg=Object.getOwnPropertyDescriptor;var mg=Object.getOwnPropertyNames;var dg=Object.getPrototypeOf,hg=Object.prototype.hasOwnProperty;var gg=(e,t)=>()=>(e&&(t=e(e=0)),t);var ie=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),ra=(e,t)=>{for(var r in t)ai(e,r,{get:t[r],enumerable:!0})},Nc=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of mg(t))!hg.call(e,s)&&s!==r&&ai(e,s,{get:()=>t[s],enumerable:!(n=pg(t,s))||n.enumerable});return e};var Y=(e,t,r)=>(r=e!=null?fg(dg(e)):{},Nc(t||!e||!e.__esModule?ai(r,"default",{value:e,enumerable:!0}):r,e)),yg=e=>Nc(ai({},"__esModule",{value:!0}),e);var Dg,D,l=gg(()=>{Dg=()=>typeof document>"u"?new URL(`file:${__filename}`).href:document.currentScript&&document.currentScript.src||new URL("main.js",document.baseURI).href,D=Dg()});var Vc=ie((fw,aa)=>{"use strict";l();var vg=Object.prototype.hasOwnProperty,xt="~";function os(){}Object.create&&(os.prototype=Object.create(null),new os().__proto__||(xt=!1));function Cg(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function zc(e,t,r,n,s){if(typeof r!="function")throw new TypeError("The listener must be a function");var o=new Cg(r,n||e,s),a=xt?xt+t:t;return e._events[a]?e._events[a].fn?e._events[a]=[e._events[a],o]:e._events[a].push(o):(e._events[a]=o,e._eventsCount++),e}function fi(e,t){--e._eventsCount===0?e._events=new os:delete e._events[t]}function yt(){this._events=new os,this._eventsCount=0}yt.prototype.eventNames=function(){var t=[],r,n;if(this._eventsCount===0)return t;for(n in r=this._events)vg.call(r,n)&&t.push(xt?n.slice(1):n);return Object.getOwnPropertySymbols?t.concat(Object.getOwnPropertySymbols(r)):t};yt.prototype.listeners=function(t){var r=xt?xt+t:t,n=this._events[r];if(!n)return[];if(n.fn)return[n.fn];for(var s=0,o=n.length,a=new Array(o);s<o;s++)a[s]=n[s].fn;return a};yt.prototype.listenerCount=function(t){var r=xt?xt+t:t,n=this._events[r];return n?n.fn?1:n.length:0};yt.prototype.emit=function(t,r,n,s,o,a){var u=xt?xt+t:t;if(!this._events[u])return!1;var c=this._events[u],f=arguments.length,p,d;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),f){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,r),!0;case 3:return c.fn.call(c.context,r,n),!0;case 4:return c.fn.call(c.context,r,n,s),!0;case 5:return c.fn.call(c.context,r,n,s,o),!0;case 6:return c.fn.call(c.context,r,n,s,o,a),!0}for(d=1,p=new Array(f-1);d<f;d++)p[d-1]=arguments[d];c.fn.apply(c.context,p)}else{var g=c.length,b;for(d=0;d<g;d++)switch(c[d].once&&this.removeListener(t,c[d].fn,void 0,!0),f){case 1:c[d].fn.call(c[d].context);break;case 2:c[d].fn.call(c[d].context,r);break;case 3:c[d].fn.call(c[d].context,r,n);break;case 4:c[d].fn.call(c[d].context,r,n,s);break;default:if(!p)for(b=1,p=new Array(f-1);b<f;b++)p[b-1]=arguments[b];c[d].fn.apply(c[d].context,p)}}return!0};yt.prototype.on=function(t,r,n){return zc(this,t,r,n,!1)};yt.prototype.once=function(t,r,n){return zc(this,t,r,n,!0)};yt.prototype.removeListener=function(t,r,n,s){var o=xt?xt+t:t;if(!this._events[o])return this;if(!r)return fi(this,o),this;var a=this._events[o];if(a.fn)a.fn===r&&(!s||a.once)&&(!n||a.context===n)&&fi(this,o);else{for(var u=0,c=[],f=a.length;u<f;u++)(a[u].fn!==r||s&&!a[u].once||n&&a[u].context!==n)&&c.push(a[u]);c.length?this._events[o]=c.length===1?c[0]:c:fi(this,o)}return this};yt.prototype.removeAllListeners=function(t){var r;return t?(r=xt?xt+t:t,this._events[r]&&fi(this,r)):(this._events=new os,this._eventsCount=0),this};yt.prototype.off=yt.prototype.removeListener;yt.prototype.addListener=yt.prototype.on;yt.prefixed=xt;yt.EventEmitter=yt;typeof aa<"u"&&(aa.exports=yt)});var Bs=ie((XC,qf)=>{"use strict";l();var ay=require("path"),wr="\\\\/",If=`[^${wr}]`,Lr="\\.",uy="\\+",cy="\\?",Ji="\\/",ly="(?=.)",jf="[^/]",Za=`(?:${Ji}|$)`,Mf=`(?:^|${Ji})`,Qa=`${Lr}{1,2}${Za}`,fy=`(?!${Lr})`,py=`(?!${Mf}${Qa})`,my=`(?!${Lr}{0,1}${Za})`,dy=`(?!${Qa})`,hy=`[^.${Ji}]`,gy=`${jf}*?`,Wf={DOT_LITERAL:Lr,PLUS_LITERAL:uy,QMARK_LITERAL:cy,SLASH_LITERAL:Ji,ONE_CHAR:ly,QMARK:jf,END_ANCHOR:Za,DOTS_SLASH:Qa,NO_DOT:fy,NO_DOTS:py,NO_DOT_SLASH:my,NO_DOTS_SLASH:dy,QMARK_NO_DOT:hy,STAR:gy,START_ANCHOR:Mf},yy={...Wf,SLASH_LITERAL:`[${wr}]`,QMARK:If,STAR:`${If}*?`,DOTS_SLASH:`${Lr}{1,2}(?:[${wr}]|$)`,NO_DOT:`(?!${Lr})`,NO_DOTS:`(?!(?:^|[${wr}])${Lr}{1,2}(?:[${wr}]|$))`,NO_DOT_SLASH:`(?!${Lr}{0,1}(?:[${wr}]|$))`,NO_DOTS_SLASH:`(?!${Lr}{1,2}(?:[${wr}]|$))`,QMARK_NO_DOT:`[^.${wr}]`,START_ANCHOR:`(?:^|[${wr}])`,END_ANCHOR:`(?:[${wr}]|$)`},Dy={alnum:"a-zA-Z0-9",alpha:"a-zA-Z",ascii:"\\x00-\\x7F",blank:" \\t",cntrl:"\\x00-\\x1F\\x7F",digit:"0-9",graph:"\\x21-\\x7E",lower:"a-z",print:"\\x20-\\x7E ",punct:"\\-!\"#$%&'()\\*+,./:;<=>?@[\\]^_`{|}~",space:" \\t\\r\\n\\v\\f",upper:"A-Z",word:"A-Za-z0-9_",xdigit:"A-Fa-f0-9"};qf.exports={MAX_LENGTH:1024*64,POSIX_REGEX_SOURCE:Dy,REGEX_BACKSLASH:/\\(?![*+?^${}(|)[\]])/g,REGEX_NON_SPECIAL_CHARS:/^[^@![\].,$*+?^{}()|\\/]+/,REGEX_SPECIAL_CHARS:/[-*+?.^${}(|)[\]]/,REGEX_SPECIAL_CHARS_BACKREF:/(\\?)((\W)(\3*))/g,REGEX_SPECIAL_CHARS_GLOBAL:/([-*+?.^${}(|)[\]])/g,REGEX_REMOVE_BACKSLASH:/(?:\[.*?[^\\]\]|\\(?=.))/g,REPLACEMENTS:{"***":"*","**/**":"**","**/**/**":"**"},CHAR_0:48,CHAR_9:57,CHAR_UPPERCASE_A:65,CHAR_LOWERCASE_A:97,CHAR_UPPERCASE_Z:90,CHAR_LOWERCASE_Z:122,CHAR_LEFT_PARENTHESES:40,CHAR_RIGHT_PARENTHESES:41,CHAR_ASTERISK:42,CHAR_AMPERSAND:38,CHAR_AT:64,CHAR_BACKWARD_SLASH:92,CHAR_CARRIAGE_RETURN:13,CHAR_CIRCUMFLEX_ACCENT:94,CHAR_COLON:58,CHAR_COMMA:44,CHAR_DOT:46,CHAR_DOUBLE_QUOTE:34,CHAR_EQUAL:61,CHAR_EXCLAMATION_MARK:33,CHAR_FORM_FEED:12,CHAR_FORWARD_SLASH:47,CHAR_GRAVE_ACCENT:96,CHAR_HASH:35,CHAR_HYPHEN_MINUS:45,CHAR_LEFT_ANGLE_BRACKET:60,CHAR_LEFT_CURLY_BRACE:123,CHAR_LEFT_SQUARE_BRACKET:91,CHAR_LINE_FEED:10,CHAR_NO_BREAK_SPACE:160,CHAR_PERCENT:37,CHAR_PLUS:43,CHAR_QUESTION_MARK:63,CHAR_RIGHT_ANGLE_BRACKET:62,CHAR_RIGHT_CURLY_BRACE:125,CHAR_RIGHT_SQUARE_BRACKET:93,CHAR_SEMICOLON:59,CHAR_SINGLE_QUOTE:39,CHAR_SPACE:32,CHAR_TAB:9,CHAR_UNDERSCORE:95,CHAR_VERTICAL_LINE:124,CHAR_ZERO_WIDTH_NOBREAK_SPACE:65279,SEP:ay.sep,extglobChars(e){return{"!":{type:"negate",open:"(?:(?!(?:",close:`))${e.STAR})`},"?":{type:"qmark",open:"(?:",close:")?"},"+":{type:"plus",open:"(?:",close:")+"},"*":{type:"star",open:"(?:",close:")*"},"@":{type:"at",open:"(?:",close:")"}}},globChars(e){return e===!0?yy:Wf}}});var Yi=ie(kt=>{"use strict";l();var by=require("path"),wy=process.platform==="win32",{REGEX_BACKSLASH:xy,REGEX_REMOVE_BACKSLASH:Sy,REGEX_SPECIAL_CHARS:Fy,REGEX_SPECIAL_CHARS_GLOBAL:vy}=Bs();kt.isObject=e=>e!==null&&typeof e=="object"&&!Array.isArray(e);kt.hasRegexChars=e=>Fy.test(e);kt.isRegexChar=e=>e.length===1&&kt.hasRegexChars(e);kt.escapeRegex=e=>e.replace(vy,"\\$1");kt.toPosixSlashes=e=>e.replace(xy,"/");kt.removeBackslashes=e=>e.replace(Sy,t=>t==="\\"?"":t);kt.supportsLookbehinds=()=>{let e=process.version.slice(1).split(".").map(Number);return e.length===3&&e[0]>=9||e[0]===8&&e[1]>=10};kt.isWindows=e=>e&&typeof e.windows=="boolean"?e.windows:wy===!0||by.sep==="\\";kt.escapeLast=(e,t,r)=>{let n=e.lastIndexOf(t,r);return n===-1?e:e[n-1]==="\\"?kt.escapeLast(e,t,n-1):`${e.slice(0,n)}\\${e.slice(n)}`};kt.removePrefix=(e,t={})=>{let r=e;return r.startsWith("./")&&(r=r.slice(2),t.prefix="./"),r};kt.wrapOutput=(e,t={},r={})=>{let n=r.contains?"":"^",s=r.contains?"":"$",o=`${n}(?:${e})${s}`;return t.negated===!0&&(o=`(?:^(?!${o}).*$)`),o}});var Kf=ie((tE,Yf)=>{"use strict";l();var Hf=Yi(),{CHAR_ASTERISK:eu,CHAR_AT:Cy,CHAR_BACKWARD_SLASH:Ls,CHAR_COMMA:Ey,CHAR_DOT:tu,CHAR_EXCLAMATION_MARK:ru,CHAR_FORWARD_SLASH:Jf,CHAR_LEFT_CURLY_BRACE:nu,CHAR_LEFT_PARENTHESES:su,CHAR_LEFT_SQUARE_BRACKET:$y,CHAR_PLUS:Ay,CHAR_QUESTION_MARK:Gf,CHAR_RIGHT_CURLY_BRACE:Ty,CHAR_RIGHT_PARENTHESES:Uf,CHAR_RIGHT_SQUARE_BRACKET:By}=Bs(),zf=e=>e===Jf||e===Ls,Vf=e=>{e.isPrefix!==!0&&(e.depth=e.isGlobstar?1/0:1)},Ly=(e,t)=>{let r=t||{},n=e.length-1,s=r.parts===!0||r.scanToEnd===!0,o=[],a=[],u=[],c=e,f=-1,p=0,d=0,g=!1,b=!1,y=!1,v=!1,M=!1,I=!1,ee=!1,W=!1,Z=!1,Q=!1,We=0,Pe,K,de={value:"",depth:0,isGlob:!1},ke=()=>f>=n,F=()=>c.charCodeAt(f+1),Le=()=>(Pe=K,c.charCodeAt(++f));for(;f<n;){K=Le();let ot;if(K===Ls){ee=de.backslashes=!0,K=Le(),K===nu&&(I=!0);continue}if(I===!0||K===nu){for(We++;ke()!==!0&&(K=Le());){if(K===Ls){ee=de.backslashes=!0,Le();continue}if(K===nu){We++;continue}if(I!==!0&&K===tu&&(K=Le())===tu){if(g=de.isBrace=!0,y=de.isGlob=!0,Q=!0,s===!0)continue;break}if(I!==!0&&K===Ey){if(g=de.isBrace=!0,y=de.isGlob=!0,Q=!0,s===!0)continue;break}if(K===Ty&&(We--,We===0)){I=!1,g=de.isBrace=!0,Q=!0;break}}if(s===!0)continue;break}if(K===Jf){if(o.push(f),a.push(de),de={value:"",depth:0,isGlob:!1},Q===!0)continue;if(Pe===tu&&f===p+1){p+=2;continue}d=f+1;continue}if(r.noext!==!0&&(K===Ay||K===Cy||K===eu||K===Gf||K===ru)===!0&&F()===su){if(y=de.isGlob=!0,v=de.isExtglob=!0,Q=!0,K===ru&&f===p&&(Z=!0),s===!0){for(;ke()!==!0&&(K=Le());){if(K===Ls){ee=de.backslashes=!0,K=Le();continue}if(K===Uf){y=de.isGlob=!0,Q=!0;break}}continue}break}if(K===eu){if(Pe===eu&&(M=de.isGlobstar=!0),y=de.isGlob=!0,Q=!0,s===!0)continue;break}if(K===Gf){if(y=de.isGlob=!0,Q=!0,s===!0)continue;break}if(K===$y){for(;ke()!==!0&&(ot=Le());){if(ot===Ls){ee=de.backslashes=!0,Le();continue}if(ot===By){b=de.isBracket=!0,y=de.isGlob=!0,Q=!0;break}}if(s===!0)continue;break}if(r.nonegate!==!0&&K===ru&&f===p){W=de.negated=!0,p++;continue}if(r.noparen!==!0&&K===su){if(y=de.isGlob=!0,s===!0){for(;ke()!==!0&&(K=Le());){if(K===su){ee=de.backslashes=!0,K=Le();continue}if(K===Uf){Q=!0;break}}continue}break}if(y===!0){if(Q=!0,s===!0)continue;break}}r.noext===!0&&(v=!1,y=!1);let $e=c,lr="",x="";p>0&&(lr=c.slice(0,p),c=c.slice(p),d-=p),$e&&y===!0&&d>0?($e=c.slice(0,d),x=c.slice(d)):y===!0?($e="",x=c):$e=c,$e&&$e!==""&&$e!=="/"&&$e!==c&&zf($e.charCodeAt($e.length-1))&&($e=$e.slice(0,-1)),r.unescape===!0&&(x&&(x=Hf.removeBackslashes(x)),$e&&ee===!0&&($e=Hf.removeBackslashes($e)));let S={prefix:lr,input:e,start:p,base:$e,glob:x,isBrace:g,isBracket:b,isGlob:y,isExtglob:v,isGlobstar:M,negated:W,negatedExtglob:Z};if(r.tokens===!0&&(S.maxDepth=0,zf(K)||a.push(de),S.tokens=a),r.parts===!0||r.tokens===!0){let ot;for(let me=0;me<o.length;me++){let $t=ot?ot+1:p,Gt=o[me],P=e.slice($t,Gt);r.tokens&&(me===0&&p!==0?(a[me].isPrefix=!0,a[me].value=lr):a[me].value=P,Vf(a[me]),S.maxDepth+=a[me].depth),(me!==0||P!=="")&&u.push(P),ot=Gt}if(ot&&ot+1<e.length){let me=e.slice(ot+1);u.push(me),r.tokens&&(a[a.length-1].value=me,Vf(a[a.length-1]),S.maxDepth+=a[a.length-1].depth)}S.slashes=o,S.parts=u}return S};Yf.exports=Ly});var Qf=ie((nE,Zf)=>{"use strict";l();var Ki=Bs(),Wt=Yi(),{MAX_LENGTH:Xi,POSIX_REGEX_SOURCE:Ry,REGEX_NON_SPECIAL_CHARS:Py,REGEX_SPECIAL_CHARS_BACKREF:ky,REPLACEMENTS:Xf}=Ki,Ny=(e,t)=>{if(typeof t.expandRange=="function")return t.expandRange(...e,t);e.sort();let r=`[${e.join("-")}]`;try{new RegExp(r)}catch{return e.map(s=>Wt.escapeRegex(s)).join("..")}return r},In=(e,t)=>`Missing ${e}: "${t}" - use "\\\\${t}" to match literal characters`,iu=(e,t)=>{if(typeof e!="string")throw new TypeError("Expected a string");e=Xf[e]||e;let r={...t},n=typeof r.maxLength=="number"?Math.min(Xi,r.maxLength):Xi,s=e.length;if(s>n)throw new SyntaxError(`Input length: ${s}, exceeds maximum allowed length: ${n}`);let o={type:"bos",value:"",output:r.prepend||""},a=[o],u=r.capture?"":"?:",c=Wt.isWindows(t),f=Ki.globChars(c),p=Ki.extglobChars(f),{DOT_LITERAL:d,PLUS_LITERAL:g,SLASH_LITERAL:b,ONE_CHAR:y,DOTS_SLASH:v,NO_DOT:M,NO_DOT_SLASH:I,NO_DOTS_SLASH:ee,QMARK:W,QMARK_NO_DOT:Z,STAR:Q,START_ANCHOR:We}=f,Pe=B=>`(${u}(?:(?!${We}${B.dot?v:d}).)*?)`,K=r.dot?"":M,de=r.dot?W:Z,ke=r.bash===!0?Pe(r):Q;r.capture&&(ke=`(${ke})`),typeof r.noext=="boolean"&&(r.noextglob=r.noext);let F={input:e,index:-1,start:0,dot:r.dot===!0,consumed:"",output:"",prefix:"",backtrack:!1,negated:!1,brackets:0,braces:0,parens:0,quotes:0,globstar:!1,tokens:a};e=Wt.removePrefix(e,F),s=e.length;let Le=[],$e=[],lr=[],x=o,S,ot=()=>F.index===s-1,me=F.peek=(B=1)=>e[F.index+B],$t=F.advance=()=>e[++F.index]||"",Gt=()=>e.slice(F.index+1),P=(B="",ae=0)=>{F.consumed+=B,F.index+=ae},G=B=>{F.output+=B.output!=null?B.output:B.value,P(B.value)},ue=()=>{let B=1;for(;me()==="!"&&(me(2)!=="("||me(3)==="?");)$t(),F.start++,B++;return B%2===0?!1:(F.negated=!0,F.start++,!0)},he=B=>{F[B]++,lr.push(B)},Ie=B=>{F[B]--,lr.pop()},z=B=>{if(x.type==="globstar"){let ae=F.braces>0&&(B.type==="comma"||B.type==="brace"),E=B.extglob===!0||Le.length&&(B.type==="pipe"||B.type==="paren");B.type!=="slash"&&B.type!=="paren"&&!ae&&!E&&(F.output=F.output.slice(0,-x.output.length),x.type="star",x.value="*",x.output=ke,F.output+=x.output)}if(Le.length&&B.type!=="paren"&&(Le[Le.length-1].inner+=B.value),(B.value||B.output)&&G(B),x&&x.type==="text"&&B.type==="text"){x.value+=B.value,x.output=(x.output||"")+B.value;return}B.prev=x,a.push(B),x=B},ze=(B,ae)=>{let E={...p[ae],conditions:1,inner:""};E.prev=x,E.parens=F.parens,E.output=F.output;let J=(r.capture?"(":"")+E.open;he("parens"),z({type:B,value:ae,output:F.output?"":y}),z({type:"paren",extglob:!0,value:$t(),output:J}),Le.push(E)},ss=B=>{let ae=B.close+(r.capture?")":""),E;if(B.type==="negate"){let J=ke;if(B.inner&&B.inner.length>1&&B.inner.includes("/")&&(J=Pe(r)),(J!==ke||ot()||/^\)+$/.test(Gt()))&&(ae=B.close=`)$))${J}`),B.inner.includes("*")&&(E=Gt())&&/^\.[^\\/.]+$/.test(E)){let Ce=iu(E,{...t,fastpaths:!1}).output;ae=B.close=`)${Ce})${J})`}B.prev.type==="bos"&&(F.negatedExtglob=!0)}z({type:"paren",extglob:!0,value:S,output:ae}),Ie("parens")};if(r.fastpaths!==!1&&!/(^[*!]|[/()[\]{}"])/.test(e)){let B=!1,ae=e.replace(ky,(E,J,Ce,Ve,Re,Qt)=>Ve==="\\"?(B=!0,E):Ve==="?"?J?J+Ve+(Re?W.repeat(Re.length):""):Qt===0?de+(Re?W.repeat(Re.length):""):W.repeat(Ce.length):Ve==="."?d.repeat(Ce.length):Ve==="*"?J?J+Ve+(Re?ke:""):ke:J?E:`\\${E}`);return B===!0&&(r.unescape===!0?ae=ae.replace(/\\/g,""):ae=ae.replace(/\\+/g,E=>E.length%2===0?"\\\\":E?"\\":"")),ae===e&&r.contains===!0?(F.output=e,F):(F.output=Wt.wrapOutput(ae,F,t),F)}for(;!ot();){if(S=$t(),S==="\0")continue;if(S==="\\"){let E=me();if(E==="/"&&r.bash!==!0||E==="."||E===";")continue;if(!E){S+="\\",z({type:"text",value:S});continue}let J=/^\\+/.exec(Gt()),Ce=0;if(J&&J[0].length>2&&(Ce=J[0].length,F.index+=Ce,Ce%2!==0&&(S+="\\")),r.unescape===!0?S=$t():S+=$t(),F.brackets===0){z({type:"text",value:S});continue}}if(F.brackets>0&&(S!=="]"||x.value==="["||x.value==="[^")){if(r.posix!==!1&&S===":"){let E=x.value.slice(1);if(E.includes("[")&&(x.posix=!0,E.includes(":"))){let J=x.value.lastIndexOf("["),Ce=x.value.slice(0,J),Ve=x.value.slice(J+2),Re=Ry[Ve];if(Re){x.value=Ce+Re,F.backtrack=!0,$t(),!o.output&&a.indexOf(x)===1&&(o.output=y);continue}}}(S==="["&&me()!==":"||S==="-"&&me()==="]")&&(S=`\\${S}`),S==="]"&&(x.value==="["||x.value==="[^")&&(S=`\\${S}`),r.posix===!0&&S==="!"&&x.value==="["&&(S="^"),x.value+=S,G({value:S});continue}if(F.quotes===1&&S!=='"'){S=Wt.escapeRegex(S),x.value+=S,G({value:S});continue}if(S==='"'){F.quotes=F.quotes===1?0:1,r.keepQuotes===!0&&z({type:"text",value:S});continue}if(S==="("){he("parens"),z({type:"paren",value:S});continue}if(S===")"){if(F.parens===0&&r.strictBrackets===!0)throw new SyntaxError(In("opening","("));let E=Le[Le.length-1];if(E&&F.parens===E.parens+1){ss(Le.pop());continue}z({type:"paren",value:S,output:F.parens?")":"\\)"}),Ie("parens");continue}if(S==="["){if(r.nobracket===!0||!Gt().includes("]")){if(r.nobracket!==!0&&r.strictBrackets===!0)throw new SyntaxError(In("closing","]"));S=`\\${S}`}else he("brackets");z({type:"bracket",value:S});continue}if(S==="]"){if(r.nobracket===!0||x&&x.type==="bracket"&&x.value.length===1){z({type:"text",value:S,output:`\\${S}`});continue}if(F.brackets===0){if(r.strictBrackets===!0)throw new SyntaxError(In("opening","["));z({type:"text",value:S,output:`\\${S}`});continue}Ie("brackets");let E=x.value.slice(1);if(x.posix!==!0&&E[0]==="^"&&!E.includes("/")&&(S=`/${S}`),x.value+=S,G({value:S}),r.literalBrackets===!1||Wt.hasRegexChars(E))continue;let J=Wt.escapeRegex(x.value);if(F.output=F.output.slice(0,-x.value.length),r.literalBrackets===!0){F.output+=J,x.value=J;continue}x.value=`(${u}${J}|${x.value})`,F.output+=x.value;continue}if(S==="{"&&r.nobrace!==!0){he("braces");let E={type:"brace",value:S,output:"(",outputIndex:F.output.length,tokensIndex:F.tokens.length};$e.push(E),z(E);continue}if(S==="}"){let E=$e[$e.length-1];if(r.nobrace===!0||!E){z({type:"text",value:S,output:S});continue}let J=")";if(E.dots===!0){let Ce=a.slice(),Ve=[];for(let Re=Ce.length-1;Re>=0&&(a.pop(),Ce[Re].type!=="brace");Re--)Ce[Re].type!=="dots"&&Ve.unshift(Ce[Re].value);J=Ny(Ve,r),F.backtrack=!0}if(E.comma!==!0&&E.dots!==!0){let Ce=F.output.slice(0,E.outputIndex),Ve=F.tokens.slice(E.tokensIndex);E.value=E.output="\\{",S=J="\\}",F.output=Ce;for(let Re of Ve)F.output+=Re.output||Re.value}z({type:"brace",value:S,output:J}),Ie("braces"),$e.pop();continue}if(S==="|"){Le.length>0&&Le[Le.length-1].conditions++,z({type:"text",value:S});continue}if(S===","){let E=S,J=$e[$e.length-1];J&&lr[lr.length-1]==="braces"&&(J.comma=!0,E="|"),z({type:"comma",value:S,output:E});continue}if(S==="/"){if(x.type==="dot"&&F.index===F.start+1){F.start=F.index+1,F.consumed="",F.output="",a.pop(),x=o;continue}z({type:"slash",value:S,output:b});continue}if(S==="."){if(F.braces>0&&x.type==="dot"){x.value==="."&&(x.output=d);let E=$e[$e.length-1];x.type="dots",x.output+=S,x.value+=S,E.dots=!0;continue}if(F.braces+F.parens===0&&x.type!=="bos"&&x.type!=="slash"){z({type:"text",value:S,output:d});continue}z({type:"dot",value:S,output:d});continue}if(S==="?"){if(!(x&&x.value==="(")&&r.noextglob!==!0&&me()==="("&&me(2)!=="?"){ze("qmark",S);continue}if(x&&x.type==="paren"){let J=me(),Ce=S;if(J==="<"&&!Wt.supportsLookbehinds())throw new Error("Node.js v10 or higher is required for regex lookbehinds");(x.value==="("&&!/[!=<:]/.test(J)||J==="<"&&!/<([!=]|\w+>)/.test(Gt()))&&(Ce=`\\${S}`),z({type:"text",value:S,output:Ce});continue}if(r.dot!==!0&&(x.type==="slash"||x.type==="bos")){z({type:"qmark",value:S,output:Z});continue}z({type:"qmark",value:S,output:W});continue}if(S==="!"){if(r.noextglob!==!0&&me()==="("&&(me(2)!=="?"||!/[!=<:]/.test(me(3)))){ze("negate",S);continue}if(r.nonegate!==!0&&F.index===0){ue();continue}}if(S==="+"){if(r.noextglob!==!0&&me()==="("&&me(2)!=="?"){ze("plus",S);continue}if(x&&x.value==="("||r.regex===!1){z({type:"plus",value:S,output:g});continue}if(x&&(x.type==="bracket"||x.type==="paren"||x.type==="brace")||F.parens>0){z({type:"plus",value:S});continue}z({type:"plus",value:g});continue}if(S==="@"){if(r.noextglob!==!0&&me()==="("&&me(2)!=="?"){z({type:"at",extglob:!0,value:S,output:""});continue}z({type:"text",value:S});continue}if(S!=="*"){(S==="$"||S==="^")&&(S=`\\${S}`);let E=Py.exec(Gt());E&&(S+=E[0],F.index+=E[0].length),z({type:"text",value:S});continue}if(x&&(x.type==="globstar"||x.star===!0)){x.type="star",x.star=!0,x.value+=S,x.output=ke,F.backtrack=!0,F.globstar=!0,P(S);continue}let B=Gt();if(r.noextglob!==!0&&/^\([^?]/.test(B)){ze("star",S);continue}if(x.type==="star"){if(r.noglobstar===!0){P(S);continue}let E=x.prev,J=E.prev,Ce=E.type==="slash"||E.type==="bos",Ve=J&&(J.type==="star"||J.type==="globstar");if(r.bash===!0&&(!Ce||B[0]&&B[0]!=="/")){z({type:"star",value:S,output:""});continue}let Re=F.braces>0&&(E.type==="comma"||E.type==="brace"),Qt=Le.length&&(E.type==="pipe"||E.type==="paren");if(!Ce&&E.type!=="paren"&&!Re&&!Qt){z({type:"star",value:S,output:""});continue}for(;B.slice(0,3)==="/**";){let Tr=e[F.index+4];if(Tr&&Tr!=="/")break;B=B.slice(3),P("/**",3)}if(E.type==="bos"&&ot()){x.type="globstar",x.value+=S,x.output=Pe(r),F.output=x.output,F.globstar=!0,P(S);continue}if(E.type==="slash"&&E.prev.type!=="bos"&&!Ve&&ot()){F.output=F.output.slice(0,-(E.output+x.output).length),E.output=`(?:${E.output}`,x.type="globstar",x.output=Pe(r)+(r.strictSlashes?")":"|$)"),x.value+=S,F.globstar=!0,F.output+=E.output+x.output,P(S);continue}if(E.type==="slash"&&E.prev.type!=="bos"&&B[0]==="/"){let Tr=B[1]!==void 0?"|$":"";F.output=F.output.slice(0,-(E.output+x.output).length),E.output=`(?:${E.output}`,x.type="globstar",x.output=`${Pe(r)}${b}|${b}${Tr})`,x.value+=S,F.output+=E.output+x.output,F.globstar=!0,P(S+$t()),z({type:"slash",value:"/",output:""});continue}if(E.type==="bos"&&B[0]==="/"){x.type="globstar",x.value+=S,x.output=`(?:^|${b}|${Pe(r)}${b})`,F.output=x.output,F.globstar=!0,P(S+$t()),z({type:"slash",value:"/",output:""});continue}F.output=F.output.slice(0,-x.output.length),x.type="globstar",x.output=Pe(r),x.value+=S,F.output+=x.output,F.globstar=!0,P(S);continue}let ae={type:"star",value:S,output:ke};if(r.bash===!0){ae.output=".*?",(x.type==="bos"||x.type==="slash")&&(ae.output=K+ae.output),z(ae);continue}if(x&&(x.type==="bracket"||x.type==="paren")&&r.regex===!0){ae.output=S,z(ae);continue}(F.index===F.start||x.type==="slash"||x.type==="dot")&&(x.type==="dot"?(F.output+=I,x.output+=I):r.dot===!0?(F.output+=ee,x.output+=ee):(F.output+=K,x.output+=K),me()!=="*"&&(F.output+=y,x.output+=y)),z(ae)}for(;F.brackets>0;){if(r.strictBrackets===!0)throw new SyntaxError(In("closing","]"));F.output=Wt.escapeLast(F.output,"["),Ie("brackets")}for(;F.parens>0;){if(r.strictBrackets===!0)throw new SyntaxError(In("closing",")"));F.output=Wt.escapeLast(F.output,"("),Ie("parens")}for(;F.braces>0;){if(r.strictBrackets===!0)throw new SyntaxError(In("closing","}"));F.output=Wt.escapeLast(F.output,"{"),Ie("braces")}if(r.strictSlashes!==!0&&(x.type==="star"||x.type==="bracket")&&z({type:"maybe_slash",value:"",output:`${b}?`}),F.backtrack===!0){F.output="";for(let B of F.tokens)F.output+=B.output!=null?B.output:B.value,B.suffix&&(F.output+=B.suffix)}return F};iu.fastpaths=(e,t)=>{let r={...t},n=typeof r.maxLength=="number"?Math.min(Xi,r.maxLength):Xi,s=e.length;if(s>n)throw new SyntaxError(`Input length: ${s}, exceeds maximum allowed length: ${n}`);e=Xf[e]||e;let o=Wt.isWindows(t),{DOT_LITERAL:a,SLASH_LITERAL:u,ONE_CHAR:c,DOTS_SLASH:f,NO_DOT:p,NO_DOTS:d,NO_DOTS_SLASH:g,STAR:b,START_ANCHOR:y}=Ki.globChars(o),v=r.dot?d:p,M=r.dot?g:p,I=r.capture?"":"?:",ee={negated:!1,prefix:""},W=r.bash===!0?".*?":b;r.capture&&(W=`(${W})`);let Z=K=>K.noglobstar===!0?W:`(${I}(?:(?!${y}${K.dot?f:a}).)*?)`,Q=K=>{switch(K){case"*":return`${v}${c}${W}`;case".*":return`${a}${c}${W}`;case"*.*":return`${v}${W}${a}${c}${W}`;case"*/*":return`${v}${W}${u}${c}${M}${W}`;case"**":return v+Z(r);case"**/*":return`(?:${v}${Z(r)}${u})?${M}${c}${W}`;case"**/*.*":return`(?:${v}${Z(r)}${u})?${M}${W}${a}${c}${W}`;case"**/.*":return`(?:${v}${Z(r)}${u})?${a}${c}${W}`;default:{let de=/^(.*?)\.(\w+)$/.exec(K);if(!de)return;let ke=Q(de[1]);return ke?ke+a+de[2]:void 0}}},We=Wt.removePrefix(e,ee),Pe=Q(We);return Pe&&r.strictSlashes!==!0&&(Pe+=`${u}?`),Pe};Zf.exports=iu});var tp=ie((iE,ep)=>{"use strict";l();var Oy=require("path"),_y=Kf(),ou=Qf(),au=Yi(),Iy=Bs(),jy=e=>e&&typeof e=="object"&&!Array.isArray(e),Ke=(e,t,r=!1)=>{if(Array.isArray(e)){let p=e.map(g=>Ke(g,t,r));return g=>{for(let b of p){let y=b(g);if(y)return y}return!1}}let n=jy(e)&&e.tokens&&e.input;if(e===""||typeof e!="string"&&!n)throw new TypeError("Expected pattern to be a non-empty string");let s=t||{},o=au.isWindows(t),a=n?Ke.compileRe(e,t):Ke.makeRe(e,t,!1,!0),u=a.state;delete a.state;let c=()=>!1;if(s.ignore){let p={...t,ignore:null,onMatch:null,onResult:null};c=Ke(s.ignore,p,r)}let f=(p,d=!1)=>{let{isMatch:g,match:b,output:y}=Ke.test(p,a,t,{glob:e,posix:o}),v={glob:e,state:u,regex:a,posix:o,input:p,output:y,match:b,isMatch:g};return typeof s.onResult=="function"&&s.onResult(v),g===!1?(v.isMatch=!1,d?v:!1):c(p)?(typeof s.onIgnore=="function"&&s.onIgnore(v),v.isMatch=!1,d?v:!1):(typeof s.onMatch=="function"&&s.onMatch(v),d?v:!0)};return r&&(f.state=u),f};Ke.test=(e,t,r,{glob:n,posix:s}={})=>{if(typeof e!="string")throw new TypeError("Expected input to be a string");if(e==="")return{isMatch:!1,output:""};let o=r||{},a=o.format||(s?au.toPosixSlashes:null),u=e===n,c=u&&a?a(e):e;return u===!1&&(c=a?a(e):e,u=c===n),(u===!1||o.capture===!0)&&(o.matchBase===!0||o.basename===!0?u=Ke.matchBase(e,t,r,s):u=t.exec(c)),{isMatch:!!u,match:u,output:c}};Ke.matchBase=(e,t,r,n=au.isWindows(r))=>(t instanceof RegExp?t:Ke.makeRe(t,r)).test(Oy.basename(e));Ke.isMatch=(e,t,r)=>Ke(t,r)(e);Ke.parse=(e,t)=>Array.isArray(e)?e.map(r=>Ke.parse(r,t)):ou(e,{...t,fastpaths:!1});Ke.scan=(e,t)=>_y(e,t);Ke.compileRe=(e,t,r=!1,n=!1)=>{if(r===!0)return e.output;let s=t||{},o=s.contains?"":"^",a=s.contains?"":"$",u=`${o}(?:${e.output})${a}`;e&&e.negated===!0&&(u=`^(?!${u}).*$`);let c=Ke.toRegex(u,t);return n===!0&&(c.state=e),c};Ke.makeRe=(e,t={},r=!1,n=!1)=>{if(!e||typeof e!="string")throw new TypeError("Expected a non-empty string");let s={negated:!1,fastpaths:!0};return t.fastpaths!==!1&&(e[0]==="."||e[0]==="*")&&(s.output=ou.fastpaths(e,t)),s.output||(s=ou(e,t)),Ke.compileRe(s,t,r,n)};Ke.toRegex=(e,t)=>{try{let r=t||{};return new RegExp(e,r.flags||(r.nocase?"i":""))}catch(r){if(t&&t.debug===!0)throw r;return/$^/}};Ke.constants=Iy;ep.exports=Ke});var np=ie((aE,rp)=>{"use strict";l();rp.exports=tp()});var ip=ie((cE,sp)=>{l();sp.exports=function(e,t){if(typeof e!="string")throw new TypeError("expected path to be a string");if(e==="\\"||e==="/")return"/";var r=e.length;if(r<=1)return e;var n="";if(r>4&&e[3]==="\\"){var s=e[2];(s==="?"||s===".")&&e.slice(0,2)==="\\\\"&&(e=e.slice(2),n="//")}var o=e.split(/[/\\]+/);return t!==!1&&o[o.length-1]===""&&o.pop(),n+o.join("/")}});var Gr=ie((cp,lp)=>{"use strict";l();Object.defineProperty(cp,"__esModule",{value:!0});var up=np(),My=ip(),op="!",Wy={returnIndex:!1},qy=e=>Array.isArray(e)?e:[e],Hy=(e,t)=>{if(typeof e=="function")return e;if(typeof e=="string"){let r=up(e,t);return n=>e===n||r(n)}return e instanceof RegExp?r=>e.test(r):r=>!1},ap=(e,t,r,n)=>{let s=Array.isArray(r),o=s?r[0]:r;if(!s&&typeof o!="string")throw new TypeError("anymatch: second argument must be a string: got "+Object.prototype.toString.call(o));let a=My(o,!1);for(let c=0;c<t.length;c++){let f=t[c];if(f(a))return n?-1:!1}let u=s&&[a].concat(r.slice(1));for(let c=0;c<e.length;c++){let f=e[c];if(s?f(...u):f(a))return n?c:!0}return n?-1:!1},uu=(e,t,r=Wy)=>{if(e==null)throw new TypeError("anymatch: specify first argument");let n=typeof r=="boolean"?{returnIndex:r}:r,s=n.returnIndex||!1,o=qy(e),a=o.filter(c=>typeof c=="string"&&c.charAt(0)===op).map(c=>c.slice(1)).map(c=>up(c,n)),u=o.filter(c=>typeof c!="string"||typeof c=="string"&&c.charAt(0)!==op).map(c=>Hy(c,n));return t==null?(c,f=!1)=>ap(u,a,c,typeof f=="boolean"?f:!1):ap(u,a,t,s)};uu.default=uu;lp.exports=uu});var Lp=ie(to=>{l();Object.defineProperty(to,"__esModule",{value:!0});to.default=/((['"])(?:(?!\2|\\).|\\(?:\r\n|[\s\S]))*(\2)?|`(?:[^`\\$]|\\[\s\S]|\$(?!\{)|\$\{(?:[^{}]|\{[^}]*\}?)*\}?)*(`)?)|(\/\/.*)|(\/\*(?:[^*]|\*(?!\/))*(\*\/)?)|(\/(?!\*)(?:\[(?:(?![\]\\]).|\\.)*\]|(?![\/\]\\]).|\\.)+\/(?:(?!\s*(?:\b|[\u0080-\uFFFF$\\'"~({]|[+\-!](?!=)|\.?\d))|[gmiyus]{1,6}\b(?![\u0080-\uFFFF$\\]|\s*(?:[+\-*%&|^<>!=?({]|\/(?![\/*])))))|(0[xX][\da-fA-F]+|0[oO][0-7]+|0[bB][01]+|(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?)|((?!\d)(?:(?!\s)[$\w\u0080-\uFFFF]|\\u[\da-fA-F]{4}|\\u\{[\da-fA-F]+\})+)|(--|\+\+|&&|\|\||=>|\.{3}|(?:[+\-\/%&|^]|\*{1,2}|<{1,2}|>{1,3}|!=?|={1,2})=?|[?~.,:;[\](){}])|(\s+)|(^$|[\s\S])/g;to.matchToToken=function(e){var t={type:"invalid",value:e[0],closed:void 0};return e[1]?(t.type="string",t.closed=!!(e[3]||e[4])):e[5]?t.type="comment":e[6]?(t.type="comment",t.closed=!!e[7]):e[8]?t.type="regex":e[9]?t.type="number":e[10]?t.type="name":e[11]?t.type="punctuator":e[12]&&(t.type="whitespace"),t}});var Op=ie(_s=>{"use strict";l();Object.defineProperty(_s,"__esModule",{value:!0});_s.isIdentifierChar=Np;_s.isIdentifierName=uD;_s.isIdentifierStart=kp;var bu="\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC",Rp="\xB7\u0300-\u036F\u0387\u0483-\u0487\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u0669\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u06F0-\u06F9\u0711\u0730-\u074A\u07A6-\u07B0\u07C0-\u07C9\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0897-\u089F\u08CA-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0966-\u096F\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09E6-\u09EF\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A66-\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AE6-\u0AEF\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B66-\u0B6F\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0BE6-\u0BEF\u0C00-\u0C04\u0C3C\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C66-\u0C6F\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0CE6-\u0CEF\u0CF3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D66-\u0D6F\u0D81-\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0E50-\u0E59\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0ED0-\u0ED9\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1040-\u1049\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F-\u109D\u135D-\u135F\u1369-\u1371\u1712-\u1715\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u17E0-\u17E9\u180B-\u180D\u180F-\u1819\u18A9\u1920-\u192B\u1930-\u193B\u1946-\u194F\u19D0-\u19DA\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AB0-\u1ABD\u1ABF-\u1ACE\u1B00-\u1B04\u1B34-\u1B44\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BB0-\u1BB9\u1BE6-\u1BF3\u1C24-\u1C37\u1C40-\u1C49\u1C50-\u1C59\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DFF\u200C\u200D\u203F\u2040\u2054\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\u30FB\uA620-\uA629\uA66F\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA82C\uA880\uA881\uA8B4-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F1\uA8FF-\uA909\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9D0-\uA9D9\uA9E5\uA9F0-\uA9F9\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA50-\uAA59\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uABF0-\uABF9\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFF10-\uFF19\uFF3F\uFF65",iD=new RegExp("["+bu+"]"),oD=new RegExp("["+bu+Rp+"]");bu=Rp=null;var Pp=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,4,51,13,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,39,27,10,22,251,41,7,1,17,2,60,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,31,9,2,0,3,0,2,37,2,0,26,0,2,0,45,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,200,32,32,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,26,3994,6,582,6842,29,1763,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,433,44,212,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,42,9,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,229,29,3,0,496,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],aD=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,7,9,32,4,318,1,80,3,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,68,8,2,0,3,0,2,3,2,4,2,0,15,1,83,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,7,19,58,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,343,9,54,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,10,5350,0,7,14,11465,27,2343,9,87,9,39,4,60,6,26,9,535,9,470,0,2,54,8,3,82,0,12,1,19628,1,4178,9,519,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,245,1,2,9,726,6,110,6,6,9,4759,9,787719,239];function Du(e,t){let r=65536;for(let n=0,s=t.length;n<s;n+=2){if(r+=t[n],r>e)return!1;if(r+=t[n+1],r>=e)return!0}return!1}function kp(e){return e<65?e===36:e<=90?!0:e<97?e===95:e<=122?!0:e<=65535?e>=170&&iD.test(String.fromCharCode(e)):Du(e,Pp)}function Np(e){return e<48?e===36:e<58?!0:e<65?!1:e<=90?!0:e<97?e===95:e<=122?!0:e<=65535?e>=170&&oD.test(String.fromCharCode(e)):Du(e,Pp)||Du(e,aD)}function uD(e){let t=!0;for(let r=0;r<e.length;r++){let n=e.charCodeAt(r);if((n&64512)===55296&&r+1<e.length){let s=e.charCodeAt(++r);(s&64512)===56320&&(n=65536+((n&1023)<<10)+(s&1023))}if(t){if(t=!1,!kp(n))return!1}else if(!Np(n))return!1}return!t}});var Mp=ie(Dn=>{"use strict";l();Object.defineProperty(Dn,"__esModule",{value:!0});Dn.isKeyword=mD;Dn.isReservedWord=_p;Dn.isStrictBindOnlyReservedWord=jp;Dn.isStrictBindReservedWord=pD;Dn.isStrictReservedWord=Ip;var wu={keyword:["break","case","catch","continue","debugger","default","do","else","finally","for","function","if","return","switch","throw","try","var","const","while","with","new","this","super","class","extends","export","import","null","true","false","in","instanceof","typeof","void","delete"],strict:["implements","interface","let","package","private","protected","public","static","yield"],strictBind:["eval","arguments"]},cD=new Set(wu.keyword),lD=new Set(wu.strict),fD=new Set(wu.strictBind);function _p(e,t){return t&&e==="await"||e==="enum"}function Ip(e,t){return _p(e,t)||lD.has(e)}function jp(e){return fD.has(e)}function pD(e,t){return Ip(e,t)||jp(e)}function mD(e){return cD.has(e)}});var Wp=ie(Fr=>{"use strict";l();Object.defineProperty(Fr,"__esModule",{value:!0});Object.defineProperty(Fr,"isIdentifierChar",{enumerable:!0,get:function(){return xu.isIdentifierChar}});Object.defineProperty(Fr,"isIdentifierName",{enumerable:!0,get:function(){return xu.isIdentifierName}});Object.defineProperty(Fr,"isIdentifierStart",{enumerable:!0,get:function(){return xu.isIdentifierStart}});Object.defineProperty(Fr,"isKeyword",{enumerable:!0,get:function(){return Is.isKeyword}});Object.defineProperty(Fr,"isReservedWord",{enumerable:!0,get:function(){return Is.isReservedWord}});Object.defineProperty(Fr,"isStrictBindOnlyReservedWord",{enumerable:!0,get:function(){return Is.isStrictBindOnlyReservedWord}});Object.defineProperty(Fr,"isStrictBindReservedWord",{enumerable:!0,get:function(){return Is.isStrictBindReservedWord}});Object.defineProperty(Fr,"isStrictReservedWord",{enumerable:!0,get:function(){return Is.isStrictReservedWord}});var xu=Op(),Is=Mp()});var Fu=ie((k$,Su)=>{l();var qp=process.argv||[],ro=process.env,dD=!("NO_COLOR"in ro||qp.includes("--no-color"))&&("FORCE_COLOR"in ro||qp.includes("--color")||process.platform==="win32"||require!=null&&require("tty").isatty(1)&&ro.TERM!=="dumb"||"CI"in ro),hD=(e,t,r=e)=>n=>{let s=""+n,o=s.indexOf(t,e.length);return~o?e+gD(s,t,r,o)+t:e+s+t},gD=(e,t,r,n)=>{let s="",o=0;do s+=e.substring(o,n)+r,o=n+t.length,n=e.indexOf(t,o);while(~n);return s+e.substring(o)},Hp=(e=dD)=>{let t=e?hD:()=>String;return{isColorSupported:e,reset:t("\x1B[0m","\x1B[0m"),bold:t("\x1B[1m","\x1B[22m","\x1B[22m\x1B[1m"),dim:t("\x1B[2m","\x1B[22m","\x1B[22m\x1B[2m"),italic:t("\x1B[3m","\x1B[23m"),underline:t("\x1B[4m","\x1B[24m"),inverse:t("\x1B[7m","\x1B[27m"),hidden:t("\x1B[8m","\x1B[28m"),strikethrough:t("\x1B[9m","\x1B[29m"),black:t("\x1B[30m","\x1B[39m"),red:t("\x1B[31m","\x1B[39m"),green:t("\x1B[32m","\x1B[39m"),yellow:t("\x1B[33m","\x1B[39m"),blue:t("\x1B[34m","\x1B[39m"),magenta:t("\x1B[35m","\x1B[39m"),cyan:t("\x1B[36m","\x1B[39m"),white:t("\x1B[37m","\x1B[39m"),gray:t("\x1B[90m","\x1B[39m"),bgBlack:t("\x1B[40m","\x1B[49m"),bgRed:t("\x1B[41m","\x1B[49m"),bgGreen:t("\x1B[42m","\x1B[49m"),bgYellow:t("\x1B[43m","\x1B[49m"),bgBlue:t("\x1B[44m","\x1B[49m"),bgMagenta:t("\x1B[45m","\x1B[49m"),bgCyan:t("\x1B[46m","\x1B[49m"),bgWhite:t("\x1B[47m","\x1B[49m"),blackBright:t("\x1B[90m","\x1B[39m"),redBright:t("\x1B[91m","\x1B[39m"),greenBright:t("\x1B[92m","\x1B[39m"),yellowBright:t("\x1B[93m","\x1B[39m"),blueBright:t("\x1B[94m","\x1B[39m"),magentaBright:t("\x1B[95m","\x1B[39m"),cyanBright:t("\x1B[96m","\x1B[39m"),whiteBright:t("\x1B[97m","\x1B[39m"),bgBlackBright:t("\x1B[100m","\x1B[49m"),bgRedBright:t("\x1B[101m","\x1B[49m"),bgGreenBright:t("\x1B[102m","\x1B[49m"),bgYellowBright:t("\x1B[103m","\x1B[49m"),bgBlueBright:t("\x1B[104m","\x1B[49m"),bgMagentaBright:t("\x1B[105m","\x1B[49m"),bgCyanBright:t("\x1B[106m","\x1B[49m"),bgWhiteBright:t("\x1B[107m","\x1B[49m")}};Su.exports=Hp();Su.exports.createColors=Hp});var Up=ie((O$,Gp)=>{"use strict";l();var yD=/[|\\{}()[\]^$+*?.]/g;Gp.exports=function(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(yD,"\\$&")}});var Vp=ie((I$,zp)=>{"use strict";l();zp.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}});var vu=ie((M$,Xp)=>{l();var bn=Vp(),Kp={};for(no in bn)bn.hasOwnProperty(no)&&(Kp[bn[no]]=no);var no,j=Xp.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(Ct in j)if(j.hasOwnProperty(Ct)){if(!("channels"in j[Ct]))throw new Error("missing channels property: "+Ct);if(!("labels"in j[Ct]))throw new Error("missing channel labels property: "+Ct);if(j[Ct].labels.length!==j[Ct].channels)throw new Error("channel and label counts mismatch: "+Ct);Jp=j[Ct].channels,Yp=j[Ct].labels,delete j[Ct].channels,delete j[Ct].labels,Object.defineProperty(j[Ct],"channels",{value:Jp}),Object.defineProperty(j[Ct],"labels",{value:Yp})}var Jp,Yp,Ct;j.rgb.hsl=function(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,s=Math.min(t,r,n),o=Math.max(t,r,n),a=o-s,u,c,f;return o===s?u=0:t===o?u=(r-n)/a:r===o?u=2+(n-t)/a:n===o&&(u=4+(t-r)/a),u=Math.min(u*60,360),u<0&&(u+=360),f=(s+o)/2,o===s?c=0:f<=.5?c=a/(o+s):c=a/(2-o-s),[u,c*100,f*100]};j.rgb.hsv=function(e){var t,r,n,s,o,a=e[0]/255,u=e[1]/255,c=e[2]/255,f=Math.max(a,u,c),p=f-Math.min(a,u,c),d=function(g){return(f-g)/6/p+1/2};return p===0?s=o=0:(o=p/f,t=d(a),r=d(u),n=d(c),a===f?s=n-r:u===f?s=1/3+t-n:c===f&&(s=2/3+r-t),s<0?s+=1:s>1&&(s-=1)),[s*360,o*100,f*100]};j.rgb.hwb=function(e){var t=e[0],r=e[1],n=e[2],s=j.rgb.hsl(e)[0],o=1/255*Math.min(t,Math.min(r,n));return n=1-1/255*Math.max(t,Math.max(r,n)),[s,o*100,n*100]};j.rgb.cmyk=function(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,s,o,a,u;return u=Math.min(1-t,1-r,1-n),s=(1-t-u)/(1-u)||0,o=(1-r-u)/(1-u)||0,a=(1-n-u)/(1-u)||0,[s*100,o*100,a*100,u*100]};function DD(e,t){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)+Math.pow(e[2]-t[2],2)}j.rgb.keyword=function(e){var t=Kp[e];if(t)return t;var r=1/0,n;for(var s in bn)if(bn.hasOwnProperty(s)){var o=bn[s],a=DD(e,o);a<r&&(r=a,n=s)}return n};j.keyword.rgb=function(e){return bn[e]};j.rgb.xyz=function(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255;t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92,r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92,n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92;var s=t*.4124+r*.3576+n*.1805,o=t*.2126+r*.7152+n*.0722,a=t*.0193+r*.1192+n*.9505;return[s*100,o*100,a*100]};j.rgb.lab=function(e){var t=j.rgb.xyz(e),r=t[0],n=t[1],s=t[2],o,a,u;return r/=95.047,n/=100,s/=108.883,r=r>.008856?Math.pow(r,1/3):7.787*r+16/116,n=n>.008856?Math.pow(n,1/3):7.787*n+16/116,s=s>.008856?Math.pow(s,1/3):7.787*s+16/116,o=116*n-16,a=500*(r-n),u=200*(n-s),[o,a,u]};j.hsl.rgb=function(e){var t=e[0]/360,r=e[1]/100,n=e[2]/100,s,o,a,u,c;if(r===0)return c=n*255,[c,c,c];n<.5?o=n*(1+r):o=n+r-n*r,s=2*n-o,u=[0,0,0];for(var f=0;f<3;f++)a=t+1/3*-(f-1),a<0&&a++,a>1&&a--,6*a<1?c=s+(o-s)*6*a:2*a<1?c=o:3*a<2?c=s+(o-s)*(2/3-a)*6:c=s,u[f]=c*255;return u};j.hsl.hsv=function(e){var t=e[0],r=e[1]/100,n=e[2]/100,s=r,o=Math.max(n,.01),a,u;return n*=2,r*=n<=1?n:2-n,s*=o<=1?o:2-o,u=(n+r)/2,a=n===0?2*s/(o+s):2*r/(n+r),[t,a*100,u*100]};j.hsv.rgb=function(e){var t=e[0]/60,r=e[1]/100,n=e[2]/100,s=Math.floor(t)%6,o=t-Math.floor(t),a=255*n*(1-r),u=255*n*(1-r*o),c=255*n*(1-r*(1-o));switch(n*=255,s){case 0:return[n,c,a];case 1:return[u,n,a];case 2:return[a,n,c];case 3:return[a,u,n];case 4:return[c,a,n];case 5:return[n,a,u]}};j.hsv.hsl=function(e){var t=e[0],r=e[1]/100,n=e[2]/100,s=Math.max(n,.01),o,a,u;return u=(2-r)*n,o=(2-r)*s,a=r*s,a/=o<=1?o:2-o,a=a||0,u/=2,[t,a*100,u*100]};j.hwb.rgb=function(e){var t=e[0]/360,r=e[1]/100,n=e[2]/100,s=r+n,o,a,u,c;s>1&&(r/=s,n/=s),o=Math.floor(6*t),a=1-n,u=6*t-o,o&1&&(u=1-u),c=r+u*(a-r);var f,p,d;switch(o){default:case 6:case 0:f=a,p=c,d=r;break;case 1:f=c,p=a,d=r;break;case 2:f=r,p=a,d=c;break;case 3:f=r,p=c,d=a;break;case 4:f=c,p=r,d=a;break;case 5:f=a,p=r,d=c;break}return[f*255,p*255,d*255]};j.cmyk.rgb=function(e){var t=e[0]/100,r=e[1]/100,n=e[2]/100,s=e[3]/100,o,a,u;return o=1-Math.min(1,t*(1-s)+s),a=1-Math.min(1,r*(1-s)+s),u=1-Math.min(1,n*(1-s)+s),[o*255,a*255,u*255]};j.xyz.rgb=function(e){var t=e[0]/100,r=e[1]/100,n=e[2]/100,s,o,a;return s=t*3.2406+r*-1.5372+n*-.4986,o=t*-.9689+r*1.8758+n*.0415,a=t*.0557+r*-.204+n*1.057,s=s>.0031308?1.055*Math.pow(s,1/2.4)-.055:s*12.92,o=o>.0031308?1.055*Math.pow(o,1/2.4)-.055:o*12.92,a=a>.0031308?1.055*Math.pow(a,1/2.4)-.055:a*12.92,s=Math.min(Math.max(0,s),1),o=Math.min(Math.max(0,o),1),a=Math.min(Math.max(0,a),1),[s*255,o*255,a*255]};j.xyz.lab=function(e){var t=e[0],r=e[1],n=e[2],s,o,a;return t/=95.047,r/=100,n/=108.883,t=t>.008856?Math.pow(t,1/3):7.787*t+16/116,r=r>.008856?Math.pow(r,1/3):7.787*r+16/116,n=n>.008856?Math.pow(n,1/3):7.787*n+16/116,s=116*r-16,o=500*(t-r),a=200*(r-n),[s,o,a]};j.lab.xyz=function(e){var t=e[0],r=e[1],n=e[2],s,o,a;o=(t+16)/116,s=r/500+o,a=o-n/200;var u=Math.pow(o,3),c=Math.pow(s,3),f=Math.pow(a,3);return o=u>.008856?u:(o-16/116)/7.787,s=c>.008856?c:(s-16/116)/7.787,a=f>.008856?f:(a-16/116)/7.787,s*=95.047,o*=100,a*=108.883,[s,o,a]};j.lab.lch=function(e){var t=e[0],r=e[1],n=e[2],s,o,a;return s=Math.atan2(n,r),o=s*360/2/Math.PI,o<0&&(o+=360),a=Math.sqrt(r*r+n*n),[t,a,o]};j.lch.lab=function(e){var t=e[0],r=e[1],n=e[2],s,o,a;return a=n/360*2*Math.PI,s=r*Math.cos(a),o=r*Math.sin(a),[t,s,o]};j.rgb.ansi16=function(e){var t=e[0],r=e[1],n=e[2],s=1 in arguments?arguments[1]:j.rgb.hsv(e)[2];if(s=Math.round(s/50),s===0)return 30;var o=30+(Math.round(n/255)<<2|Math.round(r/255)<<1|Math.round(t/255));return s===2&&(o+=60),o};j.hsv.ansi16=function(e){return j.rgb.ansi16(j.hsv.rgb(e),e[2])};j.rgb.ansi256=function(e){var t=e[0],r=e[1],n=e[2];if(t===r&&r===n)return t<8?16:t>248?231:Math.round((t-8)/247*24)+232;var s=16+36*Math.round(t/255*5)+6*Math.round(r/255*5)+Math.round(n/255*5);return s};j.ansi16.rgb=function(e){var t=e%10;if(t===0||t===7)return e>50&&(t+=3.5),t=t/10.5*255,[t,t,t];var r=(~~(e>50)+1)*.5,n=(t&1)*r*255,s=(t>>1&1)*r*255,o=(t>>2&1)*r*255;return[n,s,o]};j.ansi256.rgb=function(e){if(e>=232){var t=(e-232)*10+8;return[t,t,t]}e-=16;var r,n=Math.floor(e/36)/5*255,s=Math.floor((r=e%36)/6)/5*255,o=r%6/5*255;return[n,s,o]};j.rgb.hex=function(e){var t=((Math.round(e[0])&255)<<16)+((Math.round(e[1])&255)<<8)+(Math.round(e[2])&255),r=t.toString(16).toUpperCase();return"000000".substring(r.length)+r};j.hex.rgb=function(e){var t=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!t)return[0,0,0];var r=t[0];t[0].length===3&&(r=r.split("").map(function(u){return u+u}).join(""));var n=parseInt(r,16),s=n>>16&255,o=n>>8&255,a=n&255;return[s,o,a]};j.rgb.hcg=function(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,s=Math.max(Math.max(t,r),n),o=Math.min(Math.min(t,r),n),a=s-o,u,c;return a<1?u=o/(1-a):u=0,a<=0?c=0:s===t?c=(r-n)/a%6:s===r?c=2+(n-t)/a:c=4+(t-r)/a+4,c/=6,c%=1,[c*360,a*100,u*100]};j.hsl.hcg=function(e){var t=e[1]/100,r=e[2]/100,n=1,s=0;return r<.5?n=2*t*r:n=2*t*(1-r),n<1&&(s=(r-.5*n)/(1-n)),[e[0],n*100,s*100]};j.hsv.hcg=function(e){var t=e[1]/100,r=e[2]/100,n=t*r,s=0;return n<1&&(s=(r-n)/(1-n)),[e[0],n*100,s*100]};j.hcg.rgb=function(e){var t=e[0]/360,r=e[1]/100,n=e[2]/100;if(r===0)return[n*255,n*255,n*255];var s=[0,0,0],o=t%1*6,a=o%1,u=1-a,c=0;switch(Math.floor(o)){case 0:s[0]=1,s[1]=a,s[2]=0;break;case 1:s[0]=u,s[1]=1,s[2]=0;break;case 2:s[0]=0,s[1]=1,s[2]=a;break;case 3:s[0]=0,s[1]=u,s[2]=1;break;case 4:s[0]=a,s[1]=0,s[2]=1;break;default:s[0]=1,s[1]=0,s[2]=u}return c=(1-r)*n,[(r*s[0]+c)*255,(r*s[1]+c)*255,(r*s[2]+c)*255]};j.hcg.hsv=function(e){var t=e[1]/100,r=e[2]/100,n=t+r*(1-t),s=0;return n>0&&(s=t/n),[e[0],s*100,n*100]};j.hcg.hsl=function(e){var t=e[1]/100,r=e[2]/100,n=r*(1-t)+.5*t,s=0;return n>0&&n<.5?s=t/(2*n):n>=.5&&n<1&&(s=t/(2*(1-n))),[e[0],s*100,n*100]};j.hcg.hwb=function(e){var t=e[1]/100,r=e[2]/100,n=t+r*(1-t);return[e[0],(n-t)*100,(1-n)*100]};j.hwb.hcg=function(e){var t=e[1]/100,r=e[2]/100,n=1-r,s=n-t,o=0;return s<1&&(o=(n-s)/(1-s)),[e[0],s*100,o*100]};j.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]};j.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]};j.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]};j.gray.hsl=j.gray.hsv=function(e){return[0,0,e[0]]};j.gray.hwb=function(e){return[0,100,e[0]]};j.gray.cmyk=function(e){return[0,0,0,e[0]]};j.gray.lab=function(e){return[e[0],0,0]};j.gray.hex=function(e){var t=Math.round(e[0]/100*255)&255,r=(t<<16)+(t<<8)+t,n=r.toString(16).toUpperCase();return"000000".substring(n.length)+n};j.rgb.gray=function(e){var t=(e[0]+e[1]+e[2])/3;return[t/255*100]}});var Qp=ie((q$,Zp)=>{l();var so=vu();function bD(){for(var e={},t=Object.keys(so),r=t.length,n=0;n<r;n++)e[t[n]]={distance:-1,parent:null};return e}function wD(e){var t=bD(),r=[e];for(t[e].distance=0;r.length;)for(var n=r.pop(),s=Object.keys(so[n]),o=s.length,a=0;a<o;a++){var u=s[a],c=t[u];c.distance===-1&&(c.distance=t[n].distance+1,c.parent=n,r.unshift(u))}return t}function xD(e,t){return function(r){return t(e(r))}}function SD(e,t){for(var r=[t[e].parent,e],n=so[t[e].parent][e],s=t[e].parent;t[s].parent;)r.unshift(t[s].parent),n=xD(so[t[s].parent][s],n),s=t[s].parent;return n.conversion=r,n}Zp.exports=function(e){for(var t=wD(e),r={},n=Object.keys(t),s=n.length,o=0;o<s;o++){var a=n[o],u=t[a];u.parent!==null&&(r[a]=SD(a,t))}return r}});var tm=ie((G$,em)=>{l();var Cu=vu(),FD=Qp(),Mn={},vD=Object.keys(Cu);function CD(e){var t=function(r){return r==null?r:(arguments.length>1&&(r=Array.prototype.slice.call(arguments)),e(r))};return"conversion"in e&&(t.conversion=e.conversion),t}function ED(e){var t=function(r){if(r==null)return r;arguments.length>1&&(r=Array.prototype.slice.call(arguments));var n=e(r);if(typeof n=="object")for(var s=n.length,o=0;o<s;o++)n[o]=Math.round(n[o]);return n};return"conversion"in e&&(t.conversion=e.conversion),t}vD.forEach(function(e){Mn[e]={},Object.defineProperty(Mn[e],"channels",{value:Cu[e].channels}),Object.defineProperty(Mn[e],"labels",{value:Cu[e].labels});var t=FD(e),r=Object.keys(t);r.forEach(function(n){var s=t[n];Mn[e][n]=ED(s),Mn[e][n].raw=CD(s)})});em.exports=Mn});var nm=ie((z$,rm)=>{"use strict";l();var Wn=tm(),io=(e,t)=>function(){return`\x1B[${e.apply(Wn,arguments)+t}m`},oo=(e,t)=>function(){let r=e.apply(Wn,arguments);return`\x1B[${38+t};5;${r}m`},ao=(e,t)=>function(){let r=e.apply(Wn,arguments);return`\x1B[${38+t};2;${r[0]};${r[1]};${r[2]}m`};function $D(){let e=new Map,t={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],gray:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};t.color.grey=t.color.gray;for(let s of Object.keys(t)){let o=t[s];for(let a of Object.keys(o)){let u=o[a];t[a]={open:`\x1B[${u[0]}m`,close:`\x1B[${u[1]}m`},o[a]=t[a],e.set(u[0],u[1])}Object.defineProperty(t,s,{value:o,enumerable:!1}),Object.defineProperty(t,"codes",{value:e,enumerable:!1})}let r=s=>s,n=(s,o,a)=>[s,o,a];t.color.close="\x1B[39m",t.bgColor.close="\x1B[49m",t.color.ansi={ansi:io(r,0)},t.color.ansi256={ansi256:oo(r,0)},t.color.ansi16m={rgb:ao(n,0)},t.bgColor.ansi={ansi:io(r,10)},t.bgColor.ansi256={ansi256:oo(r,10)},t.bgColor.ansi16m={rgb:ao(n,10)};for(let s of Object.keys(Wn)){if(typeof Wn[s]!="object")continue;let o=Wn[s];s==="ansi16"&&(s="ansi"),"ansi16"in o&&(t.color.ansi[s]=io(o.ansi16,0),t.bgColor.ansi[s]=io(o.ansi16,10)),"ansi256"in o&&(t.color.ansi256[s]=oo(o.ansi256,0),t.bgColor.ansi256[s]=oo(o.ansi256,10)),"rgb"in o&&(t.color.ansi16m[s]=ao(o.rgb,0),t.bgColor.ansi16m[s]=ao(o.rgb,10))}return t}Object.defineProperty(rm,"exports",{enumerable:!0,get:$D})});var im=ie((J$,sm)=>{"use strict";l();sm.exports=(e,t)=>{t=t||process.argv;let r=e.startsWith("-")?"":e.length===1?"-":"--",n=t.indexOf(r+e),s=t.indexOf("--");return n!==-1&&(s===-1?!0:n<s)}});var am=ie((K$,om)=>{"use strict";l();var AD=require("os"),sr=im(),wt=process.env,qn;sr("no-color")||sr("no-colors")||sr("color=false")?qn=!1:(sr("color")||sr("colors")||sr("color=true")||sr("color=always"))&&(qn=!0);"FORCE_COLOR"in wt&&(qn=wt.FORCE_COLOR.length===0||parseInt(wt.FORCE_COLOR,10)!==0);function TD(e){return e===0?!1:{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}function BD(e){if(qn===!1)return 0;if(sr("color=16m")||sr("color=full")||sr("color=truecolor"))return 3;if(sr("color=256"))return 2;if(e&&!e.isTTY&&qn!==!0)return 0;let t=qn?1:0;if(process.platform==="win32"){let r=AD.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(r[0])>=10&&Number(r[2])>=10586?Number(r[2])>=14931?3:2:1}if("CI"in wt)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(r=>r in wt)||wt.CI_NAME==="codeship"?1:t;if("TEAMCITY_VERSION"in wt)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(wt.TEAMCITY_VERSION)?1:0;if(wt.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in wt){let r=parseInt((wt.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(wt.TERM_PROGRAM){case"iTerm.app":return r>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(wt.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(wt.TERM)||"COLORTERM"in wt?1:(wt.TERM==="dumb",t)}function Eu(e){let t=BD(e);return TD(t)}om.exports={supportsColor:Eu,stdout:Eu(process.stdout),stderr:Eu(process.stderr)}});var pm=ie((Z$,fm)=>{"use strict";l();var LD=/(?:\\(u[a-f\d]{4}|x[a-f\d]{2}|.))|(?:\{(~)?(\w+(?:\([^)]*\))?(?:\.\w+(?:\([^)]*\))?)*)(?:[ \t]|(?=\r?\n)))|(\})|((?:.|[\r\n\f])+?)/gi,um=/(?:^|\.)(\w+)(?:\(([^)]*)\))?/g,RD=/^(['"])((?:\\.|(?!\1)[^\\])*)\1$/,PD=/\\(u[a-f\d]{4}|x[a-f\d]{2}|.)|([^\\])/gi,kD=new Map([["n",`
`],["r","\r"],["t","	"],["b","\b"],["f","\f"],["v","\v"],["0","\0"],["\\","\\"],["e","\x1B"],["a","\x07"]]);function lm(e){return e[0]==="u"&&e.length===5||e[0]==="x"&&e.length===3?String.fromCharCode(parseInt(e.slice(1),16)):kD.get(e)||e}function ND(e,t){let r=[],n=t.trim().split(/\s*,\s*/g),s;for(let o of n)if(!isNaN(o))r.push(Number(o));else if(s=o.match(RD))r.push(s[2].replace(PD,(a,u,c)=>u?lm(u):c));else throw new Error(`Invalid Chalk template style argument: ${o} (in style '${e}')`);return r}function OD(e){um.lastIndex=0;let t=[],r;for(;(r=um.exec(e))!==null;){let n=r[1];if(r[2]){let s=ND(n,r[2]);t.push([n].concat(s))}else t.push([n])}return t}function cm(e,t){let r={};for(let s of t)for(let o of s.styles)r[o[0]]=s.inverse?null:o.slice(1);let n=e;for(let s of Object.keys(r))if(Array.isArray(r[s])){if(!(s in n))throw new Error(`Unknown Chalk style: ${s}`);r[s].length>0?n=n[s].apply(n,r[s]):n=n[s]}return n}fm.exports=(e,t)=>{let r=[],n=[],s=[];if(t.replace(LD,(o,a,u,c,f,p)=>{if(a)s.push(lm(a));else if(c){let d=s.join("");s=[],n.push(r.length===0?d:cm(e,r)(d)),r.push({inverse:u,styles:OD(c)})}else if(f){if(r.length===0)throw new Error("Found extraneous } in Chalk template literal");n.push(cm(e,r)(s.join(""))),s=[],r.pop()}else s.push(p)}),n.push(s.join("")),r.length>0){let o=`Chalk template literal is missing ${r.length} closing bracket${r.length===1?"":"s"} (\`}\`)`;throw new Error(o)}return n.join("")}});var ym=ie((e3,Ms)=>{"use strict";l();var Au=Up(),tt=nm(),$u=am().stdout,_D=pm(),dm=process.platform==="win32"&&!(process.env.TERM||"").toLowerCase().startsWith("xterm"),hm=["ansi","ansi","ansi256","ansi16m"],gm=new Set(["gray"]),Hn=Object.create(null);function mm(e,t){t=t||{};let r=$u?$u.level:0;e.level=t.level===void 0?r:t.level,e.enabled="enabled"in t?t.enabled:e.level>0}function js(e){if(!this||!(this instanceof js)||this.template){let t={};return mm(t,e),t.template=function(){let r=[].slice.call(arguments);return MD.apply(null,[t.template].concat(r))},Object.setPrototypeOf(t,js.prototype),Object.setPrototypeOf(t.template,t),t.template.constructor=js,t.template}mm(this,e)}dm&&(tt.blue.open="\x1B[94m");for(let e of Object.keys(tt))tt[e].closeRe=new RegExp(Au(tt[e].close),"g"),Hn[e]={get(){let t=tt[e];return uo.call(this,this._styles?this._styles.concat(t):[t],this._empty,e)}};Hn.visible={get(){return uo.call(this,this._styles||[],!0,"visible")}};tt.color.closeRe=new RegExp(Au(tt.color.close),"g");for(let e of Object.keys(tt.color.ansi))gm.has(e)||(Hn[e]={get(){let t=this.level;return function(){let n={open:tt.color[hm[t]][e].apply(null,arguments),close:tt.color.close,closeRe:tt.color.closeRe};return uo.call(this,this._styles?this._styles.concat(n):[n],this._empty,e)}}});tt.bgColor.closeRe=new RegExp(Au(tt.bgColor.close),"g");for(let e of Object.keys(tt.bgColor.ansi)){if(gm.has(e))continue;let t="bg"+e[0].toUpperCase()+e.slice(1);Hn[t]={get(){let r=this.level;return function(){let s={open:tt.bgColor[hm[r]][e].apply(null,arguments),close:tt.bgColor.close,closeRe:tt.bgColor.closeRe};return uo.call(this,this._styles?this._styles.concat(s):[s],this._empty,e)}}}}var ID=Object.defineProperties(()=>{},Hn);function uo(e,t,r){let n=function(){return jD.apply(n,arguments)};n._styles=e,n._empty=t;let s=this;return Object.defineProperty(n,"level",{enumerable:!0,get(){return s.level},set(o){s.level=o}}),Object.defineProperty(n,"enabled",{enumerable:!0,get(){return s.enabled},set(o){s.enabled=o}}),n.hasGrey=this.hasGrey||r==="gray"||r==="grey",n.__proto__=ID,n}function jD(){let e=arguments,t=e.length,r=String(arguments[0]);if(t===0)return"";if(t>1)for(let s=1;s<t;s++)r+=" "+e[s];if(!this.enabled||this.level<=0||!r)return this._empty?"":r;let n=tt.dim.open;dm&&this.hasGrey&&(tt.dim.open="");for(let s of this._styles.slice().reverse())r=s.open+r.replace(s.closeRe,s.open)+s.close,r=r.replace(/\r?\n/g,`${s.close}$&${s.open}`);return tt.dim.open=n,r}function MD(e,t){if(!Array.isArray(t))return[].slice.call(arguments,1).join(" ");let r=[].slice.call(arguments,2),n=[t.raw[0]];for(let s=1;s<t.length;s++)n.push(String(r[s-1]).replace(/[{}\\]/g,"\\$&")),n.push(String(t.raw[s]));return _D(e,n.join(""))}Object.defineProperties(js.prototype,Hn);Ms.exports=js();Ms.exports.supportsColor=$u;Ms.exports.default=Ms.exports});var Cm=ie(Ws=>{"use strict";l();Object.defineProperty(Ws,"__esModule",{value:!0});Ws.default=JD;Ws.shouldHighlight=vm;var Dm=Lp(),bm=Wp(),Bu=WD(Fu(),!0);function xm(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,r=new WeakMap;return(xm=function(n){return n?r:t})(e)}function WD(e,t){if(!t&&e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var r=xm(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(o!=="default"&&{}.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}var Sm=typeof process=="object"&&(process.env.FORCE_COLOR==="0"||process.env.FORCE_COLOR==="false")?(0,Bu.createColors)(!1):Bu.default,wm=(e,t)=>r=>e(t(r)),qD=new Set(["as","async","from","get","of","set"]);function HD(e){return{keyword:e.cyan,capitalized:e.yellow,jsxIdentifier:e.yellow,punctuator:e.yellow,number:e.magenta,string:e.green,regex:e.magenta,comment:e.gray,invalid:wm(wm(e.white,e.bgRed),e.bold)}}var GD=/\r\n|[\n\r\u2028\u2029]/,UD=/^[()[\]{}]$/,Fm;{let e=/^[a-z][\w-]*$/i,t=function(r,n,s){if(r.type==="name"){if((0,bm.isKeyword)(r.value)||(0,bm.isStrictReservedWord)(r.value,!0)||qD.has(r.value))return"keyword";if(e.test(r.value)&&(s[n-1]==="<"||s.slice(n-2,n)==="</"))return"jsxIdentifier";if(r.value[0]!==r.value[0].toLowerCase())return"capitalized"}return r.type==="punctuator"&&UD.test(r.value)?"bracket":r.type==="invalid"&&(r.value==="@"||r.value==="#")?"punctuator":r.type};Fm=function*(r){let n;for(;n=Dm.default.exec(r);){let s=Dm.matchToToken(n);yield{type:t(s,n.index,r),value:s.value}}}}function zD(e,t){let r="";for(let{type:n,value:s}of Fm(t)){let o=e[n];o?r+=s.split(GD).map(a=>o(a)).join(`
`):r+=s}return r}function vm(e){return Sm.isColorSupported||e.forceColor}var Tu;function VD(e){if(e){var t;return(t=Tu)!=null||(Tu=(0,Bu.createColors)(!0)),Tu}return Sm}function JD(e,t={}){if(e!==""&&vm(t)){let r=HD(VD(t.forceColor));return zD(r,e)}else return e}{let e,t;Ws.getChalk=({forceColor:r})=>{var n;if((n=e)!=null||(e=ym()),r){var s;return(s=t)!=null||(t=new e.constructor({enabled:!0,level:1})),t}return e}}});var Rm=ie(co=>{"use strict";l();Object.defineProperty(co,"__esModule",{value:!0});co.codeFrameColumns=Lm;co.default=e1;var Em=Cm(),Ru=YD(Fu(),!0);function Bm(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,r=new WeakMap;return(Bm=function(n){return n?r:t})(e)}function YD(e,t){if(!t&&e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var r=Bm(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(o!=="default"&&{}.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}var KD=typeof process=="object"&&(process.env.FORCE_COLOR==="0"||process.env.FORCE_COLOR==="false")?(0,Ru.createColors)(!1):Ru.default,$m=(e,t)=>r=>e(t(r)),Lu;function XD(e){if(e){var t;return(t=Lu)!=null||(Lu=(0,Ru.createColors)(!0)),Lu}return KD}var Am=!1;function ZD(e){return{gutter:e.gray,marker:$m(e.red,e.bold),message:$m(e.red,e.bold)}}var Tm=/\r\n|[\n\r\u2028\u2029]/;function QD(e,t,r){let n=Object.assign({column:0,line:-1},e.start),s=Object.assign({},n,e.end),{linesAbove:o=2,linesBelow:a=3}=r||{},u=n.line,c=n.column,f=s.line,p=s.column,d=Math.max(u-(o+1),0),g=Math.min(t.length,f+a);u===-1&&(d=0),f===-1&&(g=t.length);let b=f-u,y={};if(b)for(let v=0;v<=b;v++){let M=v+u;if(!c)y[M]=!0;else if(v===0){let I=t[M-1].length;y[M]=[c,I-c+1]}else if(v===b)y[M]=[0,p];else{let I=t[M-v].length;y[M]=[0,I]}}else c===p?c?y[u]=[c,0]:y[u]=!0:y[u]=[c,p-c];return{start:d,end:g,markerLines:y}}function Lm(e,t,r={}){let n=(r.highlightCode||r.forceColor)&&(0,Em.shouldHighlight)(r),s=XD(r.forceColor),o=ZD(s),a=(v,M)=>n?v(M):M,u=e.split(Tm),{start:c,end:f,markerLines:p}=QD(t,u,r),d=t.start&&typeof t.start.column=="number",g=String(f).length,y=(n?(0,Em.default)(e,r):e).split(Tm,f).slice(c,f).map((v,M)=>{let I=c+1+M,W=` ${` ${I}`.slice(-g)} |`,Z=p[I],Q=!p[I+1];if(Z){let We="";if(Array.isArray(Z)){let Pe=v.slice(0,Math.max(Z[0]-1,0)).replace(/[^\t]/g," "),K=Z[1]||1;We=[`
 `,a(o.gutter,W.replace(/\d/g," "))," ",Pe,a(o.marker,"^").repeat(K)].join(""),Q&&r.message&&(We+=" "+a(o.message,r.message))}return[a(o.marker,">"),a(o.gutter,W),v.length>0?` ${v}`:"",We].join("")}else return` ${a(o.gutter,W)}${v.length>0?` ${v}`:""}`}).join(`
`);return r.message&&!d&&(y=`${" ".repeat(g+1)}${r.message}
${y}`),n?s.reset(y):y}function e1(e,t,r,n={}){if(!Am){Am=!0;let o="Passing lineNumber and colNumber is deprecated to @babel/code-frame. Please use `codeFrameColumns`.";if(process.emitWarning)process.emitWarning(o,"DeprecationWarning");else{let a=new Error(o);a.name="DeprecationWarning",console.warn(new Error(o))}}return r=Math.max(r,0),Lm(e,{start:{column:r,line:t}},n)}});var Jm=ie((kA,Uu)=>{l();(function(){var e;function t(r,n){var s=this instanceof t?this:e;if(s.reset(n),typeof r=="string"&&r.length>0&&s.hash(r),s!==this)return s}t.prototype.hash=function(r){var n,s,o,a,u;switch(u=r.length,this.len+=u,s=this.k1,o=0,this.rem){case 0:s^=u>o?r.charCodeAt(o++)&65535:0;case 1:s^=u>o?(r.charCodeAt(o++)&65535)<<8:0;case 2:s^=u>o?(r.charCodeAt(o++)&65535)<<16:0;case 3:s^=u>o?(r.charCodeAt(o)&255)<<24:0,s^=u>o?(r.charCodeAt(o++)&65280)>>8:0}if(this.rem=u+this.rem&3,u-=this.rem,u>0){for(n=this.h1;s=s*11601+(s&65535)*3432906752&4294967295,s=s<<15|s>>>17,s=s*13715+(s&65535)*461832192&4294967295,n^=s,n=n<<13|n>>>19,n=n*5+3864292196&4294967295,!(o>=u);)s=r.charCodeAt(o++)&65535^(r.charCodeAt(o++)&65535)<<8^(r.charCodeAt(o++)&65535)<<16,a=r.charCodeAt(o++),s^=(a&255)<<24^(a&65280)>>8;switch(s=0,this.rem){case 3:s^=(r.charCodeAt(o+2)&65535)<<16;case 2:s^=(r.charCodeAt(o+1)&65535)<<8;case 1:s^=r.charCodeAt(o)&65535}this.h1=n}return this.k1=s,this},t.prototype.result=function(){var r,n;return r=this.k1,n=this.h1,r>0&&(r=r*11601+(r&65535)*3432906752&4294967295,r=r<<15|r>>>17,r=r*13715+(r&65535)*461832192&4294967295,n^=r),n^=this.len,n^=n>>>16,n=n*51819+(n&65535)*2246770688&4294967295,n^=n>>>13,n=n*44597+(n&65535)*3266445312&4294967295,n^=n>>>16,n>>>0},t.prototype.reset=function(r){return this.h1=typeof r=="number"?r:0,this.rem=this.k1=this.len=0,this},e=new t,typeof Uu<"u"?Uu.exports=t:this.MurmurHash3=t})()});var Ym=ie(Sn=>{"use strict";l();Object.defineProperty(Sn,"__esModule",{value:!0});Sn.signals=void 0;Sn.signals=[];Sn.signals.push("SIGHUP","SIGINT","SIGTERM");process.platform!=="win32"&&Sn.signals.push("SIGALRM","SIGABRT","SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT");process.platform==="linux"&&Sn.signals.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT")});var Km=ie(Cr=>{"use strict";l();var wo;Object.defineProperty(Cr,"__esModule",{value:!0});Cr.unload=Cr.load=Cr.onExit=Cr.signals=void 0;var xo=Ym();Object.defineProperty(Cr,"signals",{enumerable:!0,get:function(){return xo.signals}});var So=e=>!!e&&typeof e=="object"&&typeof e.removeListener=="function"&&typeof e.emit=="function"&&typeof e.reallyExit=="function"&&typeof e.listeners=="function"&&typeof e.kill=="function"&&typeof e.pid=="number"&&typeof e.on=="function",zu=Symbol.for("signal-exit emitter"),Vu=globalThis,A1=Object.defineProperty.bind(Object),Ju=class{emitted={afterExit:!1,exit:!1};listeners={afterExit:[],exit:[]};count=0;id=Math.random();constructor(){if(Vu[zu])return Vu[zu];A1(Vu,zu,{value:this,writable:!1,enumerable:!1,configurable:!1})}on(t,r){this.listeners[t].push(r)}removeListener(t,r){let n=this.listeners[t],s=n.indexOf(r);s!==-1&&(s===0&&n.length===1?n.length=0:n.splice(s,1))}emit(t,r,n){if(this.emitted[t])return!1;this.emitted[t]=!0;let s=!1;for(let o of this.listeners[t])s=o(r,n)===!0||s;return t==="exit"&&(s=this.emit("afterExit",r,n)||s),s}},Fo=class{},T1=e=>({onExit(t,r){return e.onExit(t,r)},load(){return e.load()},unload(){return e.unload()}}),Yu=class extends Fo{onExit(){return()=>{}}load(){}unload(){}},Ku=class extends Fo{#n=Xu.platform==="win32"?"SIGINT":"SIGHUP";#t=new Ju;#e;#a;#o;#i={};#r=!1;constructor(t){super(),this.#e=t,this.#i={};for(let r of xo.signals)this.#i[r]=()=>{let n=this.#e.listeners(r),{count:s}=this.#t,o=t;if(typeof o.__signal_exit_emitter__=="object"&&typeof o.__signal_exit_emitter__.count=="number"&&(s+=o.__signal_exit_emitter__.count),n.length===s){this.unload();let a=this.#t.emit("exit",null,r),u=r==="SIGHUP"?this.#n:r;a||t.kill(t.pid,u)}};this.#o=t.reallyExit,this.#a=t.emit}onExit(t,r){if(!So(this.#e))return()=>{};this.#r===!1&&this.load();let n=r?.alwaysLast?"afterExit":"exit";return this.#t.on(n,t),()=>{this.#t.removeListener(n,t),this.#t.listeners.exit.length===0&&this.#t.listeners.afterExit.length===0&&this.unload()}}load(){if(!this.#r){this.#r=!0,this.#t.count+=1;for(let t of xo.signals)try{let r=this.#i[t];r&&this.#e.on(t,r)}catch{}this.#e.emit=(t,...r)=>this.#s(t,...r),this.#e.reallyExit=t=>this.#c(t)}}unload(){this.#r&&(this.#r=!1,xo.signals.forEach(t=>{let r=this.#i[t];if(!r)throw new Error("Listener not defined for signal: "+t);try{this.#e.removeListener(t,r)}catch{}}),this.#e.emit=this.#a,this.#e.reallyExit=this.#o,this.#t.count-=1)}#c(t){return So(this.#e)?(this.#e.exitCode=t||0,this.#t.emit("exit",this.#e.exitCode,null),this.#o.call(this.#e,this.#e.exitCode)):0}#s(t,...r){let n=this.#a;if(t==="exit"&&So(this.#e)){typeof r[0]=="number"&&(this.#e.exitCode=r[0]);let s=n.call(this.#e,t,...r);return this.#t.emit("exit",this.#e.exitCode,null),s}else return n.call(this.#e,t,...r)}},Xu=globalThis.process;wo=T1(So(Xu)?new Ku(Xu):new Yu),Cr.onExit=wo.onExit,Cr.load=wo.load,Cr.unload=wo.unload});var Zm=ie((MA,Gs)=>{"use strict";l();Gs.exports=O1;Gs.exports.sync=_1;Gs.exports._getTmpname=Zu;Gs.exports._cleanupOnExit=Qu;var Me=require("fs"),B1=Jm(),{onExit:Xm}=Km(),L1=require("path"),{promisify:Xt}=require("util"),Kr={},R1=function(){try{return require("worker_threads").threadId}catch{return 0}}(),P1=0;function Zu(e){return e+"."+B1(__filename).hash(String(process.pid)).hash(String(R1)).hash(String(++P1)).result()}function Qu(e){return()=>{try{Me.unlinkSync(typeof e=="function"?e():e)}catch{}}}function k1(e){return new Promise(t=>{Kr[e]||(Kr[e]=[]),Kr[e].push(t),Kr[e].length===1&&t()})}function vo(e){return e.code==="ENOSYS"||(!process.getuid||process.getuid()!==0)&&(e.code==="EINVAL"||e.code==="EPERM")}async function N1(e,t,r={}){typeof r=="string"&&(r={encoding:r});let n,s,o=Xm(Qu(()=>s)),a=L1.resolve(e);try{await k1(a);let u=await Xt(Me.realpath)(e).catch(()=>e);if(s=Zu(u),!r.mode||!r.chown){let c=await Xt(Me.stat)(u).catch(()=>{});c&&(r.mode==null&&(r.mode=c.mode),r.chown==null&&process.getuid&&(r.chown={uid:c.uid,gid:c.gid}))}n=await Xt(Me.open)(s,"w",r.mode),r.tmpfileCreated&&await r.tmpfileCreated(s),ArrayBuffer.isView(t)?await Xt(Me.write)(n,t,0,t.length,0):t!=null&&await Xt(Me.write)(n,String(t),0,String(r.encoding||"utf8")),r.fsync!==!1&&await Xt(Me.fsync)(n),await Xt(Me.close)(n),n=null,r.chown&&await Xt(Me.chown)(s,r.chown.uid,r.chown.gid).catch(c=>{if(!vo(c))throw c}),r.mode&&await Xt(Me.chmod)(s,r.mode).catch(c=>{if(!vo(c))throw c}),await Xt(Me.rename)(s,u)}finally{n&&await Xt(Me.close)(n).catch(()=>{}),o(),await Xt(Me.unlink)(s).catch(()=>{}),Kr[a].shift(),Kr[a].length>0?Kr[a][0]():delete Kr[a]}}async function O1(e,t,r,n){r instanceof Function&&(n=r,r={});let s=N1(e,t,r);if(n)try{let o=await s;return n(o)}catch(o){return n(o)}return s}function _1(e,t,r){typeof r=="string"?r={encoding:r}:r||(r={});try{e=Me.realpathSync(e)}catch{}let n=Zu(e);if(!r.mode||!r.chown)try{let c=Me.statSync(e);r=Object.assign({},r),r.mode||(r.mode=c.mode),!r.chown&&process.getuid&&(r.chown={uid:c.uid,gid:c.gid})}catch{}let s,o=Qu(n),a=Xm(o),u=!0;try{if(s=Me.openSync(n,"w",r.mode||438),r.tmpfileCreated&&r.tmpfileCreated(n),ArrayBuffer.isView(t)?Me.writeSync(s,t,0,t.length,0):t!=null&&Me.writeSync(s,String(t),0,String(r.encoding||"utf8")),r.fsync!==!1&&Me.fsyncSync(s),Me.closeSync(s),s=null,r.chown)try{Me.chownSync(n,r.chown.uid,r.chown.gid)}catch(c){if(!vo(c))throw c}if(r.mode)try{Me.chmodSync(n,r.mode)}catch(c){if(!vo(c))throw c}Me.renameSync(n,e),u=!1}finally{if(s)try{Me.closeSync(s)}catch{}a(),u&&o()}}});var Hd=ie((gB,qd)=>{"use strict";l();var Wd=require("child_process"),Id=Wd.spawn,eb=Wd.exec;qd.exports=function(e,t,r){if(typeof t=="function"&&r===void 0&&(r=t,t=void 0),e=parseInt(e),Number.isNaN(e)){if(r)return r(new Error("pid must be a number"));throw new Error("pid must be a number")}var n={},s={};switch(n[e]=[],s[e]=1,process.platform){case"win32":eb("taskkill /pid "+e+" /T /F",r);break;case"darwin":cc(e,n,s,function(o){return Id("pgrep",["-P",o])},function(){jd(n,t,r)});break;default:cc(e,n,s,function(o){return Id("ps",["-o","pid","--no-headers","--ppid",o])},function(){jd(n,t,r)});break}};function jd(e,t,r){var n={};try{Object.keys(e).forEach(function(s){e[s].forEach(function(o){n[o]||(Md(o,t),n[o]=1)}),n[s]||(Md(s,t),n[s]=1)})}catch(s){if(r)return r(s);throw s}if(r)return r()}function Md(e,t){try{process.kill(parseInt(e,10),t)}catch(r){if(r.code!=="ESRCH")throw r}}function cc(e,t,r,n,s){var o=n(e),a="";o.stdout.on("data",function(f){var f=f.toString("ascii");a+=f});var u=function(c){if(delete r[e],c!=0){Object.keys(r).length==0&&s();return}a.match(/\d+/g).forEach(function(f){f=parseInt(f,10),t[e].push(f),t[f]=[],r[f]=1,cc(f,t,r,n,s)})};o.on("close",u)}});var fh=ie((_L,lh)=>{"use strict";l();lh.exports=e=>{if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}});var mh=ie((jL,ph)=>{l();var Xs=1e3,Zs=Xs*60,Qs=Zs*60,ei=Qs*24,sb=ei*365.25;ph.exports=function(e,t){t=t||{};var r=typeof e;if(r==="string"&&e.length>0)return ib(e);if(r==="number"&&isNaN(e)===!1)return t.long?ab(e):ob(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function ib(e){if(e=String(e),!(e.length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]),n=(t[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*sb;case"days":case"day":case"d":return r*ei;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Qs;case"minutes":case"minute":case"mins":case"min":case"m":return r*Zs;case"seconds":case"second":case"secs":case"sec":case"s":return r*Xs;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function ob(e){return e>=ei?Math.round(e/ei)+"d":e>=Qs?Math.round(e/Qs)+"h":e>=Zs?Math.round(e/Zs)+"m":e>=Xs?Math.round(e/Xs)+"s":e+"ms"}function ab(e){return Mo(e,ei,"day")||Mo(e,Qs,"hour")||Mo(e,Zs,"minute")||Mo(e,Xs,"second")||e+" ms"}function Mo(e,t,r){if(!(e<t))return e<t*1.5?Math.floor(e/t)+" "+r:Math.ceil(e/t)+" "+r+"s"}});var xc=ie((ve,dh)=>{l();ve=dh.exports=wc.debug=wc.default=wc;ve.coerce=pb;ve.disable=lb;ve.enable=cb;ve.enabled=fb;ve.humanize=mh();ve.names=[];ve.skips=[];ve.formatters={};var bc;function ub(e){var t=0,r;for(r in e)t=(t<<5)-t+e.charCodeAt(r),t|=0;return ve.colors[Math.abs(t)%ve.colors.length]}function wc(e){function t(){if(t.enabled){var r=t,n=+new Date,s=n-(bc||n);r.diff=s,r.prev=bc,r.curr=n,bc=n;for(var o=new Array(arguments.length),a=0;a<o.length;a++)o[a]=arguments[a];o[0]=ve.coerce(o[0]),typeof o[0]!="string"&&o.unshift("%O");var u=0;o[0]=o[0].replace(/%([a-zA-Z%])/g,function(f,p){if(f==="%%")return f;u++;var d=ve.formatters[p];if(typeof d=="function"){var g=o[u];f=d.call(r,g),o.splice(u,1),u--}return f}),ve.formatArgs.call(r,o);var c=t.log||ve.log||console.log.bind(console);c.apply(r,o)}}return t.namespace=e,t.enabled=ve.enabled(e),t.useColors=ve.useColors(),t.color=ub(e),typeof ve.init=="function"&&ve.init(t),t}function cb(e){ve.save(e),ve.names=[],ve.skips=[];for(var t=(typeof e=="string"?e:"").split(/[\s,]+/),r=t.length,n=0;n<r;n++)t[n]&&(e=t[n].replace(/\*/g,".*?"),e[0]==="-"?ve.skips.push(new RegExp("^"+e.substr(1)+"$")):ve.names.push(new RegExp("^"+e+"$")))}function lb(){ve.enable("")}function fb(e){var t,r;for(t=0,r=ve.skips.length;t<r;t++)if(ve.skips[t].test(e))return!1;for(t=0,r=ve.names.length;t<r;t++)if(ve.names[t].test(e))return!0;return!1}function pb(e){return e instanceof Error?e.stack||e.message:e}});var yh=ie((Et,gh)=>{l();Et=gh.exports=xc();Et.log=hb;Et.formatArgs=db;Et.save=gb;Et.load=hh;Et.useColors=mb;Et.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:yb();Et.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function mb(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}Et.formatters.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}};function db(e){var t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+Et.humanize(this.diff),!!t){var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var n=0,s=0;e[0].replace(/%[a-zA-Z%]/g,function(o){o!=="%%"&&(n++,o==="%c"&&(s=n))}),e.splice(s,0,r)}}function hb(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function gb(e){try{e==null?Et.storage.removeItem("debug"):Et.storage.debug=e}catch{}}function hh(){var e;try{e=Et.storage.debug}catch{}return!e&&typeof process<"u"&&"env"in process&&(e=process.env.DEBUG),e}Et.enable(hh());function yb(){try{return window.localStorage}catch{}}});var xh=ie((lt,wh)=>{l();var Dh=require("tty"),ti=require("util");lt=wh.exports=xc();lt.init=vb;lt.log=xb;lt.formatArgs=wb;lt.save=Sb;lt.load=bh;lt.useColors=bb;lt.colors=[6,2,3,4,5,1];lt.inspectOpts=Object.keys(process.env).filter(function(e){return/^debug_/i.test(e)}).reduce(function(e,t){var r=t.substring(6).toLowerCase().replace(/_([a-z])/g,function(s,o){return o.toUpperCase()}),n=process.env[t];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),e[r]=n,e},{});var Yn=parseInt(process.env.DEBUG_FD,10)||2;Yn!==1&&Yn!==2&&ti.deprecate(function(){},"except for stderr(2) and stdout(1), any other usage of DEBUG_FD is deprecated. Override debug.log if you want to use a different log function (https://git.io/debug_fd)")();var Db=Yn===1?process.stdout:Yn===2?process.stderr:Fb(Yn);function bb(){return"colors"in lt.inspectOpts?!!lt.inspectOpts.colors:Dh.isatty(Yn)}lt.formatters.o=function(e){return this.inspectOpts.colors=this.useColors,ti.inspect(e,this.inspectOpts).split(`
`).map(function(t){return t.trim()}).join(" ")};lt.formatters.O=function(e){return this.inspectOpts.colors=this.useColors,ti.inspect(e,this.inspectOpts)};function wb(e){var t=this.namespace,r=this.useColors;if(r){var n=this.color,s="  \x1B[3"+n+";1m"+t+" \x1B[0m";e[0]=s+e[0].split(`
`).join(`
`+s),e.push("\x1B[3"+n+"m+"+lt.humanize(this.diff)+"\x1B[0m")}else e[0]=new Date().toUTCString()+" "+t+" "+e[0]}function xb(){return Db.write(ti.format.apply(ti,arguments)+`
`)}function Sb(e){e==null?delete process.env.DEBUG:process.env.DEBUG=e}function bh(){return process.env.DEBUG}function Fb(e){var t,r=process.binding("tty_wrap");switch(r.guessHandleType(e)){case"TTY":t=new Dh.WriteStream(e),t._type="tty",t._handle&&t._handle.unref&&t._handle.unref();break;case"FILE":var n=require("fs");t=new n.SyncWriteStream(e,{autoClose:!1}),t._type="fs";break;case"PIPE":case"TCP":var s=require("net");t=new s.Socket({fd:e,readable:!1,writable:!0}),t.readable=!1,t.read=null,t._type="pipe",t._handle&&t._handle.unref&&t._handle.unref();break;default:throw new Error("Implement me. Unknown stream file type!")}return t.fd=e,t._isStdio=!0,t}function vb(e){e.inspectOpts={};for(var t=Object.keys(lt.inspectOpts),r=0;r<t.length;r++)e.inspectOpts[t[r]]=lt.inspectOpts[t[r]]}lt.enable(bh())});var Sh=ie((GL,Sc)=>{l();typeof process<"u"&&process.type==="renderer"?Sc.exports=yh():Sc.exports=xh()});var Rh=ie((YL,Lh)=>{"use strict";l();var Bh=require("fs"),Cc;function Ab(){try{return Bh.statSync("/.dockerenv"),!0}catch{return!1}}function Tb(){try{return Bh.readFileSync("/proc/self/cgroup","utf8").includes("docker")}catch{return!1}}Lh.exports=()=>(Cc===void 0&&(Cc=Ab()||Tb()),Cc)});var Nh=ie((XL,Ec)=>{"use strict";l();var Bb=require("os"),Lb=require("fs"),Ph=Rh(),kh=()=>{if(process.platform!=="linux")return!1;if(Bb.release().toLowerCase().includes("microsoft"))return!Ph();try{return Lb.readFileSync("/proc/version","utf8").toLowerCase().includes("microsoft")?!Ph():!1}catch{return!1}};process.env.__IS_WSL_TEST__?Ec.exports=kh:Ec.exports=kh()});var r2={};ra(r2,{$:()=>i,defineConfig:()=>e2,env:()=>t2,run:()=>ag});module.exports=yg(r2);l();var ii=Y(require("process"));l();var $p=Y(require("fast-glob")),Ap=require("path"),Tp=require("fs-extra");l();l();async function fr(e,t,{concurrency:r=Number.POSITIVE_INFINITY,stopOnError:n=!0,signal:s}={}){return new Promise((o,a)=>{if(e[Symbol.iterator]===void 0&&e[Symbol.asyncIterator]===void 0)throw new TypeError(`Expected \`input\` to be either an \`Iterable\` or \`AsyncIterable\`, got (${typeof e})`);if(typeof t!="function")throw new TypeError("Mapper function is required");if(!(Number.isSafeInteger(r)&&r>=1||r===Number.POSITIVE_INFINITY))throw new TypeError(`Expected \`concurrency\` to be an integer from 1 and up or \`Infinity\`, got \`${r}\` (${typeof r})`);let u=[],c=[],f=new Map,p=!1,d=!1,g=!1,b=0,y=0,v=e[Symbol.iterator]===void 0?e[Symbol.asyncIterator]():e[Symbol.iterator](),M=ee=>{p=!0,d=!0,a(ee)};s&&(s.aborted&&M(s.reason),s.addEventListener("abort",()=>{M(s.reason)}));let I=async()=>{if(d)return;let ee=await v.next(),W=y;if(y++,ee.done){if(g=!0,b===0&&!d){if(!n&&c.length>0){M(new AggregateError(c));return}if(d=!0,f.size===0){o(u);return}let Z=[];for(let[Q,We]of u.entries())f.get(Q)!==ui&&Z.push(We);o(Z)}return}b++,(async()=>{try{let Z=await ee.value;if(d)return;let Q=await t(Z,W);Q===ui&&f.set(W,Q),u[W]=Q,b--,await I()}catch(Z){if(n)M(Z);else{c.push(Z),b--;try{await I()}catch(Q){M(Q)}}}})()};(async()=>{for(let ee=0;ee<r;ee++){try{await I()}catch(W){M(W);break}if(g||p)break}})()})}var ui=Symbol("skip");l();l();l();function gt(e){if(e===null)return"Null";if(e===void 0)return"Undefined";if(Number.isNaN(e))return"NaN";let t=Object.prototype.toString.call(e).slice(8,-1);return t==="AsyncFunction"?"Promise":t}l();var{isArray:vn}=Array;function Cn(e){return vn(e)?e.length>0:gt(e)==="Object"?Object.keys(e).length>0:!!e}function kr(...e){let t=0;for(;t<e.length;){let r=e[t];if(gt(r)==="Function"){if(Cn(r()))return!1}else if(Cn(r))return!1;t++}return!0}l();function Oc(...e){let t=0;for(;t<e.length;){let r=e[t];if(gt(r)==="Function"){if(Cn(r()))return!0}else if(Cn(r))return!0;t++}return!1}l();l();function bg(e){return e<<0===e}var _c=Number.isInteger||bg;function ci(e,t="."){return typeof e=="string"?e.split(t).map(r=>_c(r)?Number(r):r):e}l();function wg(e,t){let r=t,n=0,s=ci(e);for(;n<s.length;){if(r==null||r[s[n]]===null)return;r=r[s[n]],n++}return r}function na(e,t){if(arguments.length===1)return r=>na(e,r);if(t!=null)return wg(e,t)}l();function sa(e,t){if(!vn(t))throw new Error(`Cannot read property 'indexOf' of ${t}`);let r=gt(e);if(!["Array","NaN","Object","RegExp"].includes(r))return t.indexOf(e);let n=-1,s=-1,{length:o}=t;for(;++n<o&&s===-1;)li(t[n],e)&&(s=n);return s}function Ic(e){let t=[],r;for(;!(r=e.next()).done;)t.push(r.value);return t}function xg(e,t){if(e.size!==t.size)return!1;let r=Ic(e.values()),n=Ic(t.values());return r.filter(o=>sa(o,n)===-1).length===0}function Sg(e,t){return e.message!==t.message||e.toString!==t.toString?!1:e.toString()===t.toString()}function jc(e){return e.toDateString?[!0,e.getTime()]:[!1]}function Mc(e){return e.constructor!==RegExp?[!1]:[!0,e.toString()]}function li(e,t){if(arguments.length===1)return u=>li(e,u);if(Object.is(e,t))return!0;let r=gt(e);if(r!==gt(t))return!1;if(r==="Function")return e.name===void 0?!1:e.name===t.name;if(["NaN","Null","Undefined"].includes(r))return!0;if(["BigInt","Number"].includes(r))return Object.is(-0,e)!==Object.is(-0,t)?!1:e.toString()===t.toString();if(["Boolean","String"].includes(r))return e.toString()===t.toString();if(r==="Array"){let u=Array.from(e),c=Array.from(t);if(u.toString()!==c.toString())return!1;let f=!0;return u.forEach((p,d)=>{f&&p!==c[d]&&!li(p,c[d])&&(f=!1)}),f}let n=Mc(e),s=Mc(t);if(n[0])return s[0]?n[1]===s[1]:!1;if(s[0])return!1;let o=jc(e),a=jc(t);if(o[0])return a[0]?o[1]===a[1]:!1;if(a[0])return!1;if(e instanceof Error)return t instanceof Error?Sg(e,t):!1;if(r==="Set")return xg(e,t);if(r==="Object"){let u=Object.keys(e);if(u.length!==Object.keys(t).length)return!1;let c=!0;return u.forEach(f=>{if(c){let p=e[f],d=t[f];p!==d&&!li(p,d)&&(c=!1)}}),c}return!1}l();var Fg="RAMBDAX_DELAY";function pt(e){return new Promise(t=>{setTimeout(()=>{t(Fg)},e)})}l();function ia(e,t){if(arguments.length===1)return r=>ia(e,r);if(typeof t=="string")return t.includes(e);if(!t)throw new TypeError(`Cannot read property 'indexOf' of ${t}`);return vn(t)?sa(e,t)>-1:!1}l();function En(e,t){return arguments.length===1?r=>En(e,r):gt(t)===e}l();async function Wc(e,t){let r=t.map((n,s)=>e(n,s));return Promise.all(r)}function qc(e,t){return arguments.length===1?async r=>Wc(e,r):new Promise((r,n)=>{Wc(e,t).then(r).catch(n)})}l();l();l();function Hc(e,t){return String(e)===String(t)}function Gc(e,t){let r=-1,{length:n}=t;for(;++r<n;)if(Hc(t[r],e))return!0;return!1}function oa(e,t){if(arguments.length===1)return s=>oa(e,s);if(t==null)return;let r=ci(e,","),n={};for(let s in t)Gc(s,r)||(n[s]=t[s]);return n}l();function Je(e,t){return arguments.length===1?r=>Je(e,r):t?t.hasOwnProperty(e):!1}l();function Ut(e,t){return arguments.length===1?r=>Ut(e,r):na(e,t)!==void 0}l();function nn(e){let t=gt(e);return["Undefined","NaN","Number","Null"].includes(t)?!1:e?t==="Object"?Object.keys(e).length===0:t==="Array"?e.length===0:!1:!0}l();function Uc(e){return e==null}l();l();l();var ua=Y(Vc(),1);l();var as=class extends Error{constructor(t){super(t),this.name="TimeoutError"}},ca=class extends Error{constructor(t){super(),this.name="AbortError",this.message=t}},Jc=e=>globalThis.DOMException===void 0?new ca(e):new DOMException(e),Yc=e=>{let t=e.reason===void 0?Jc("This operation was aborted."):e.reason;return t instanceof Error?t:Jc(t)};function la(e,t){let{milliseconds:r,fallback:n,message:s,customTimers:o={setTimeout,clearTimeout}}=t,a,c=new Promise((f,p)=>{if(typeof r!="number"||Math.sign(r)!==1)throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${r}\``);if(t.signal){let{signal:g}=t;g.aborted&&p(Yc(g)),g.addEventListener("abort",()=>{p(Yc(g))})}if(r===Number.POSITIVE_INFINITY){e.then(f,p);return}let d=new as;a=o.setTimeout.call(void 0,()=>{if(n){try{f(n())}catch(g){p(g)}return}typeof e.cancel=="function"&&e.cancel(),s===!1?f():s instanceof Error?p(s):(d.message=s??`Promise timed out after ${r} milliseconds`,p(d))},r),(async()=>{try{f(await e)}catch(g){p(g)}})()}).finally(()=>{c.clear()});return c.clear=()=>{o.clearTimeout.call(void 0,a),a=void 0},c}l();l();function fa(e,t,r){let n=0,s=e.length;for(;s>0;){let o=Math.trunc(s/2),a=n+o;r(e[a],t)<=0?(n=++a,s-=o+1):s=o}return n}var us=class{#n=[];enqueue(t,r){r={priority:0,...r};let n={priority:r.priority,run:t};if(this.size&&this.#n[this.size-1].priority>=r.priority){this.#n.push(n);return}let s=fa(this.#n,n,(o,a)=>a.priority-o.priority);this.#n.splice(s,0,n)}dequeue(){return this.#n.shift()?.run}filter(t){return this.#n.filter(r=>r.priority===t.priority).map(r=>r.run)}get size(){return this.#n.length}};var sn=class extends ua.default{#n;#t;#e=0;#a;#o;#i=0;#r;#c;#s;#h;#u=0;#f;#l;#g;timeout;constructor(t){if(super(),t={carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:us,...t},!(typeof t.intervalCap=="number"&&t.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${t.intervalCap?.toString()??""}\` (${typeof t.intervalCap})`);if(t.interval===void 0||!(Number.isFinite(t.interval)&&t.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${t.interval?.toString()??""}\` (${typeof t.interval})`);this.#n=t.carryoverConcurrencyCount,this.#t=t.intervalCap===Number.POSITIVE_INFINITY||t.interval===0,this.#a=t.intervalCap,this.#o=t.interval,this.#s=new t.queueClass,this.#h=t.queueClass,this.concurrency=t.concurrency,this.timeout=t.timeout,this.#g=t.throwOnTimeout===!0,this.#l=t.autoStart===!1}get#b(){return this.#t||this.#e<this.#a}get#w(){return this.#u<this.#f}#x(){this.#u--,this.#p(),this.emit("next")}#S(){this.#D(),this.#y(),this.#c=void 0}get#F(){let t=Date.now();if(this.#r===void 0){let r=this.#i-t;if(r<0)this.#e=this.#n?this.#u:0;else return this.#c===void 0&&(this.#c=setTimeout(()=>{this.#S()},r)),!0}return!1}#p(){if(this.#s.size===0)return this.#r&&clearInterval(this.#r),this.#r=void 0,this.emit("empty"),this.#u===0&&this.emit("idle"),!1;if(!this.#l){let t=!this.#F;if(this.#b&&this.#w){let r=this.#s.dequeue();return r?(this.emit("active"),r(),t&&this.#y(),!0):!1}}return!1}#y(){this.#t||this.#r!==void 0||(this.#r=setInterval(()=>{this.#D()},this.#o),this.#i=Date.now()+this.#o)}#D(){this.#e===0&&this.#u===0&&this.#r&&(clearInterval(this.#r),this.#r=void 0),this.#e=this.#n?this.#u:0,this.#m()}#m(){for(;this.#p(););}get concurrency(){return this.#f}set concurrency(t){if(!(typeof t=="number"&&t>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${t}\` (${typeof t})`);this.#f=t,this.#m()}async#v(t){return new Promise((r,n)=>{t.addEventListener("abort",()=>{n(t.reason)},{once:!0})})}async add(t,r={}){return r={timeout:this.timeout,throwOnTimeout:this.#g,...r},new Promise((n,s)=>{this.#s.enqueue(async()=>{this.#u++,this.#e++;try{r.signal?.throwIfAborted();let o=t({signal:r.signal});r.timeout&&(o=la(Promise.resolve(o),{milliseconds:r.timeout})),r.signal&&(o=Promise.race([o,this.#v(r.signal)]));let a=await o;n(a),this.emit("completed",a)}catch(o){if(o instanceof as&&!r.throwOnTimeout){n();return}s(o),this.emit("error",o)}finally{this.#x()}},r),this.emit("add"),this.#p()})}async addAll(t,r){return Promise.all(t.map(async n=>this.add(n,r)))}start(){return this.#l?(this.#l=!1,this.#m(),this):this}pause(){this.#l=!0}clear(){this.#s=new this.#h}async onEmpty(){this.#s.size!==0&&await this.#d("empty")}async onSizeLessThan(t){this.#s.size<t||await this.#d("next",()=>this.#s.size<t)}async onIdle(){this.#u===0&&this.#s.size===0||await this.#d("idle")}async#d(t,r){return new Promise(n=>{let s=()=>{r&&!r()||(this.off(t,s),n())};this.on(t,s)})}get size(){return this.#s.size}sizeBy(t){return this.#s.filter(t).length}get pending(){return this.#u}get isPaused(){return this.#l}};var Kc=Y(require("axios")),$n=Kc.default.create({responseType:"json",headers:{}}),re=new sn({interval:500,intervalCap:2});function on(e){return e===429||e===500?!0:(re.isPaused||re.pause(),!1)}l();var di=require("perf_hooks");l();var Xc=require("console"),pi=require("process"),Zc=require("events"),At=new Zc.EventEmitter,{error:xe,log:T,warn:An,clear:Bw}=new Xc.Console(pi.stdout,pi.stderr),{create:Tn,assign:oe,defineProperty:mt,defineProperties:Qc,keys:pr,values:mi,setPrototypeOf:Lw}=Object,Nr=Array.from,Bn=Buffer.from,{abs:an}=Math,{toString:Rw}=Object.prototype;var A=new class{marks=[];time={};cache={};now(t){return this.stop(t||!0)}sec(t){let r=this.stop(t||!0);return r.slice(0,r.lastIndexOf(" "))}pause(t){t in this.marks&&(this.cache[t]=this.stop(t||!0))}start(t){t?this.time[t]=di.performance.now():this.marks.push(di.performance.now())}clear(t){if(t){if(t in this.time){delete this.time[t];return}if(t in this.cache){delete this.cache[t];return}}for(;this.marks.length!==0;)this.marks.pop()}stop(t=!1,r=!1){let n;if(typeof t=="boolean")n=t?this.marks[this.marks.length-1]:this.marks.pop();else if(t){if(t in this.cache){let u=this.cache[t];return delete this.cache[t],u}r?(n=this.time[t],delete this.time[t]):n=this.time[t]}let s=di.performance.now()-n;if(s<1e3)return`${an(+s.toFixed(0))}ms`;let o=s/1e3;if(o<60)return`${an(+o.toFixed(0))}s ${an(+s.toFixed(0).slice(1,4))}ms`;let a=an(+(o/60).toFixed(0));return`${a}m ${an(+(o-60*Number(a)).toFixed(0))}s ${an(+s.toFixed(0).slice(1,4))}ms`}};l();var bl=require("crypto"),wl=require("module");l();var pa=Symbol("singleComment"),el=Symbol("multiComment"),$g=()=>"",Ag=(e,t,r)=>e.slice(t,r).replace(/\S/g," "),Tg=(e,t)=>{let r=t-1,n=0;for(;e[r]==="\\";)r-=1,n+=1;return!!(n%2)};function cs(e,{whitespace:t=!0,trailingCommas:r=!1}={}){if(typeof e!="string")throw new TypeError(`Expected argument \`jsonString\` to be a \`string\`, got \`${typeof e}\``);let n=t?Ag:$g,s=!1,o=!1,a=0,u="",c="",f=-1;for(let p=0;p<e.length;p++){let d=e[p],g=e[p+1];if(!o&&d==='"'&&(Tg(e,p)||(s=!s)),!s)if(!o&&d+g==="//")u+=e.slice(a,p),a=p,o=pa,p++;else if(o===pa&&d+g===`\r
`){p++,o=!1,u+=n(e,a,p),a=p;continue}else if(o===pa&&d===`
`)o=!1,u+=n(e,a,p),a=p;else if(!o&&d+g==="/*"){u+=e.slice(a,p),a=p,o=el,p++;continue}else if(o===el&&d+g==="*/"){p++,o=!1,u+=n(e,a,p+1),a=p+1;continue}else r&&!o&&(f!==-1?d==="}"||d==="]"?(u+=e.slice(a,p),c+=n(u,0,1)+u.slice(1),u="",a=p,f=-1):d!==" "&&d!=="	"&&d!=="\r"&&d!==`
`&&(u+=e.slice(a,p),a=p,f=-1):d===","&&(c+=u+e.slice(a,p),u="",a=p,f=p))}return c+u+(o?n(e.slice(a)):e.slice(a))}l();var Ye=require("process"),gl=require("child_process"),yl=require("url"),Di=require("path"),Bg=Object.create,rl=Object.defineProperty,Lg=Object.getOwnPropertyDescriptor,Rg=Object.getOwnPropertyNames,Pg=Object.getPrototypeOf,kg=Object.prototype.hasOwnProperty,Ng=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Og=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of Rg(t))!kg.call(e,s)&&s!==r&&rl(e,s,{get:()=>t[s],enumerable:!(n=Lg(t,s))||n.enumerable});return e},_g=(e,t,r)=>(r=e!=null?Bg(Pg(e)):{},Og(t||!e||!e.__esModule?rl(r,"default",{value:e,enumerable:!0}):r,e)),Ig=Ng((e,t)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var{round:r,floor:n,max:s}=Math,o=P=>{let[,G]=/([a-f\d]{3,6})/i.exec(P)||[],ue=G?G.length:0;if(ue===3)G=G[0]+G[0]+G[1]+G[1]+G[2]+G[2];else if(ue!==6)return[0,0,0];let he=parseInt(G,16);return[he>>16&255,he>>8&255,255&he]},a=(P,G,ue)=>P===G&&G===ue?P<8?16:P>248?231:r((P-8)/247*24)+232:16+36*r(P/51)+6*r(G/51)+r(ue/51),u=P=>{let G,ue,he,Ie,z,ze;return P<8?30+P:P<16?P-8+90:(P>=232?G=ue=he=(10*(P-232)+8)/255:(ze=(P-=16)%36,G=n(P/36)/5,ue=n(ze/6)/5,he=ze%6/5),Ie=2*s(G,ue,he),Ie===0?30:(z=30+(r(he)<<2|r(ue)<<1|r(G)),Ie===2?z+60:z))},c=(P,G,ue)=>u(a(P,G,ue)),f=(P=>{let G=rn=>!!B.find(ta=>rn.test(ta)),ue=globalThis,he=ue.Deno,Ie=he!=null,z=ue.process||he||{},ze=z.stdout,ss=(Ie?he.build.os:z.platform)==="win32",B=z.argv||z.args||[],ae=z.env||{},E=-1;if(Ie)try{ae=ae.toObject()}catch{E=0}let J="FORCE_COLOR",Ce=ae[J],Ve=parseInt(Ce),Re=Ce==="false"?0:isNaN(Ve)?3:Ve,Qt="NO_COLOR"in ae||Re===0||G(/^-{1,2}(no-color|color=(false|never))$/),Tr=J in ae&&Re||G(/^-{1,2}color=?(true|always)?$/),ug=(ae.NEXT_RUNTIME||"").indexOf("edge")>-1||"PM2_HOME"in ae&&"pm_id"in ae||(Ie?he.isatty(1):ze&&"isTTY"in ze);return Qt?0:(E<0&&(E=((rn,ta,cg)=>{let{TERM:oi,COLORTERM:kc}=rn;return"TF_BUILD"in rn?1:"TEAMCITY_VERSION"in rn?2:"CI"in rn?["GITHUB_ACTIONS","GITEA_ACTIONS"].some(lg=>lg in rn)?3:1:!ta||/-mono|dumb/i.test(oi)?0:cg||kc==="truecolor"||kc==="24bit"||oi==="xterm-kitty"?3:/-256(colou?r)?$/i.test(oi)?2:/^screen|^tmux|^xterm|^vt[1-5][0-9]([0-9])?|^ansi|color|cygwin|linux|mintty|rxvt/i.test(oi)?1:3})(ae,ug,ss)),Tr&&E===0?3:E)})(),p=f>0,d={open:"",close:""},g=p?(P,G)=>({open:`\x1B[${P}m`,close:`\x1B[${G}m`}):()=>d,b=39,y=49,v=P=>(G,ue,he)=>P(a(G,ue,he)),M=P=>G=>{let[ue,he,Ie]=o(G);return P(ue,he,Ie)},I=P=>g(`38;5;${P}`,b),ee=P=>g(`48;5;${P}`,y),W=(P,G,ue)=>g(`38;2;${P};${G};${ue}`,b),Z=(P,G,ue)=>g(`48;2;${P};${G};${ue}`,y);f===1?(I=P=>g(u(P),b),ee=P=>g(u(P)+10,y),W=(P,G,ue)=>g(c(P,G,ue),b),Z=(P,G,ue)=>g(c(P,G,ue)+10,y)):f===2&&(W=v(I),Z=v(ee));var Q,We,Pe={ansi256:I,bgAnsi256:ee,fg:I,bg:ee,rgb:W,bgRgb:Z,hex:M(W),bgHex:M(Z),visible:d,reset:g(0,0),inverse:g(7,27),hidden:g(8,28),bold:g(1,22),dim:g(2,22),italic:g(3,23),underline:g(4,24),strikethrough:g(9,29),strike:g(9,29),grey:g(90,b),gray:g(90,b),bgGrey:g(100,y),bgGray:g(100,y)},K=["black","red","green","yellow","blue","magenta","cyan","white"],de="Bright",ke=30;for(Q of K)We="bg"+Q[0].toUpperCase()+Q.slice(1),Pe[Q]=g(ke,b),Pe[Q+de]=g(ke+60,b),Pe[We]=g(ke+10,y),Pe[We+de]=g(ke+70,y),ke++;var{defineProperty:F,defineProperties:Le,setPrototypeOf:$e}=Object,lr=/[][[()#;?]*(?:[0-9]{1,4}(?:;[0-9]{0,4})*)?[0-9A-ORZcf-nqry=><]/g,x=/(\r?\n)/g,S={},ot=({_p:P},{open:G,close:ue})=>{let he=(ze,...ss)=>{if(!ze)return"";let B=he._p,{_a:ae,_b:E}=B,J=ze.raw!=null?String.raw(ze,...ss):""+ze;if(J.includes("\x1B"))for(;B!=null;){let Ce=B.close,Ve=Ce.length;if(Ve){let Re,Qt=0,Tr="";for(;~(Re=J.indexOf(Ce,Qt));)Tr+=J.slice(Qt,Re)+B.open,Qt=Re+Ve;Qt&&(J=Tr+J.slice(Qt))}B=B._p}return J.includes(`
`)&&(J=J.replace(x,E+"$1"+ae)),ae+J+E},Ie=G,z=ue;return P!=null&&(Ie=P._a+G,z=ue+P._b),$e(he,$t),he._p={open:G,close:ue,_a:Ie,_b:z,_p:P},he.open=Ie,he.close=z,he},me=function(){let P=G=>""+G;return P.isSupported=()=>p,P.strip=G=>G.replace(lr,""),P.extend=G=>{for(let ue in G){let he=G[ue],Ie=typeof he,z=Ie==="string"?W(...o(he)):he;S[ue]=Ie==="function"?{get(){return(...ze)=>ot(this,he(...ze))}}:{get(){let ze=ot(this,z);return F(this,ue,{value:ze}),ze}}}$t=Le({},S),$e(P,$t)},P.extend(Pe),P},$t,Gt=new me;t.exports=Gt,t.exports.Ansis=me}),ls=_g(Ig(),1),{ansi256:Mw,fg:Ww,bgAnsi256:qw,bg:Hw,rgb:Gw,bgRgb:Uw,hex:zw,bgHex:Vw,reset:Jw,inverse:Yw,hidden:Kw,visible:Xw,bold:Zw,dim:Qw,italic:ex,underline:tx,strikethrough:rx,strike:nx,black:sx,red:ix,green:ox,yellow:ax,blue:ux,magenta:cx,cyan:lx,white:fx,grey:px,gray:mx,blackBright:dx,redBright:hx,greenBright:gx,yellowBright:yx,blueBright:Dx,magentaBright:bx,cyanBright:wx,whiteBright:xx,bgBlack:Sx,bgRed:Fx,bgGreen:vx,bgYellow:Cx,bgBlue:Ex,bgMagenta:$x,bgCyan:Ax,bgWhite:Tx,bgGrey:Bx,bgGray:Lx,bgBlackBright:Rx,bgRedBright:Px,bgGreenBright:kx,bgYellowBright:Nx,bgBlueBright:Ox,bgMagentaBright:_x,bgCyanBright:Ix,bgWhiteBright:jx}=ls.default,nl="\x1B[H\x1B[2J";ls.default.extend({brown:"#c19a6b",pink:"#ff75d1",teal:"#91EBC2",lightGray:"#2a2a2e",orange:"#FFAB40",lavender:"#8080FF",neonGreen:"#56ef83",neonCyan:"#69d5fd",neonRouge:"#FF8095",neonMagenta:"#7b68ee"});var{cyan:we,red:le,green:jg,yellow:mr,magenta:ma,blue:O,white:$,gray:m,dim:Mx,cyanBright:Wx,redBright:Se,greenBright:qx,yellowBright:ne,magentaBright:gi,blueBright:sl,whiteBright:q,strip:il,underline:dr,bold:h,reset:Tt,lightGray:V,pink:zt,brown:Hx,teal:un,orange:Dt,lavender:Gx,neonGreen:Ee,neonCyan:ge,neonRouge:yi,neonMagenta:Ln}=ls.default,C={open:`${V.open}\u250C\u2500${V.close} `,stub:`${V.open}\u251C${V.close}  `,dash:`${V.open}\u251C\u2500${V.close} `,trim:`${V.open}\u2502${V.close}`,line:`${V.open}\u2502${V.close}  `,next:`
${V.open}\u2502${V.close}`,after:`${V.open}\u2502${V.close}`,wrap:`
${V.open}\u2502${V.close}
`,base:`${V.open}\u2514\u2500${V.close} `,red:`${le.dim.open}\u2502${le.dim.close}  `,redTrim:`${le.dim.open}\u2502${le.dim.close}`,yellow:`${mr.dim.open}\u2502${mr.dim.close}  `,yellowTrim:`${mr.dim.open}\u2502${mr.dim.close}`,indent:{edge:`${V.open}\u251C\u2500\u2500\u252C\u2500${V.close} `,fall:`${V.open}\u251C\u2500\u2500\u2510${V.close} `,line:`${V.open}\u2502  \u2502${V.close} `,stub:`${V.open}\u2502  \u251C${V.close} `,dash:`${V.open}\u2502  \u251C\u2500${V.close} `,base:`${V.open}\u2502  \u2514\u2500${V.close} `}},Ux=`${m.open}|${m.close}`,ol=`${m.open}#${m.close}`,zx=`${m.open}+${m.close}`,Vx=`${m.open}-${m.close}`,Jx=`${m.open},${m.close}`,al=`${Ee.open}\u2713${Ee.close}`,_r=`${Se.open}\u{10102}${Se.close}`,k=`${m.open}:${m.close}`,_=`${m.open}\u2192${m.close}`,Br=`${m.open}\u25B8${m.close}`,fs=`${m.open}\u2942${m.close}`,se=`${m.open}~${m.close}`,cn=`${m.open}\u2014${m.close}`,ul=`${m.open}(${m.close}`,cl=`${m.open})${m.close}`,ll=`${m.open}{${m.close}`,fl=`${m.open}}${m.close}`,pl=`${m.open}[${m.close}`,ml=`${m.open}]${m.close}`,dl=`${m.open}<${m.close}`,hl=`${m.open}>${m.close}`;function ps(e,t={}){let r=Object.assign({showPercentage:!0,barColor:"neonGreen",percentColor:"whiteBright",barSize:40,clearOnComplete:!1},t),n=0,s=u=>C.line+u+" ".repeat(Math.max(0,r.barSize-u.length)),o=(u,c=!1)=>(c?"\u25B1":"\u25B0").repeat(u),a=()=>{r.clearOnComplete&&console.clear()};return{stop:a,increment:(u=1)=>{let c=n+u;n=Math.min(c,e),n===e&&a()},decrement:(u=1)=>{let c=n-u;n=Math.max(c,0)},render:u=>{let c=Math.round(n/e*r.barSize),f=o(c),p=o(r.barSize-c,!0),d=ls.default[r.barColor](f)+V(p);return r.showPercentage&&(d+=(u||q)(` ${String(Math.round(n/e*100))}%`)),s(d)},get percent(){return n}}}function hi(e,t,r){return(0,gl.execFileSync)(e,t,{encoding:"utf8",shell:r,stdio:["ignore","pipe","ignore"]}).trim()}function tl(e,t){let r=(0,Di.dirname)((0,yl.fileURLToPath)(D));return hi((0,Di.join)(r,e),[],t).split(/\r?\n/)}function Or(e,t){let r=Number.parseInt(e,10);return{wrap:r>85?85:r,cols:Number.parseInt(e,10),rows:Number.parseInt(t,10)}}function Dl(){if(Ye.stdout&&Ye.stdout.columns&&Ye.stdout.rows)return Or(Ye.stdout.columns,Ye.stdout.rows);if(Ye.stderr&&Ye.stderr.columns&&Ye.stderr.rows)return Or(Ye.stderr.columns,Ye.stderr.rows);if(Ye.env.COLUMNS&&Ye.env.LINES)return Or(Ye.env.COLUMNS,Ye.env.LINES);if(Ye.platform==="win32")try{let e=tl("vendor/windows/term-size.exe",!1);if(e.length===2)return Or(e[0],e[1])}catch{}else{if(Ye.platform==="darwin")try{let e=tl("vendor/macos/term-size",!0);if(e.length===2)return Or(e[0],e[1])}catch{}try{let e=hi("resize",["-u"]).match(/\d+/g);if(e.length===2)return Or(e[0],e[1])}catch{}if(Ye.env.TERM)try{let e=hi("tput",["cols"]),t=hi("tput",["lines"]);if(e&&t)return Or(e,t)}catch{}}return Or(80,24)}var Yx=ls.Ansis;function De(e,...t){let r=L(e);return function n(s,o,a){let u=typeof a;if(a&&u==="object")if(L(a))for(let c of a)o=n(s,o,c);else for(let c in a){let f=a[c];Ze(f)?o[c]=f(o[c],De):f===void 0?s?o.splice(c,1):delete o[c]:f===null||N(f)===!1||L(f)?o[c]=f:typeof o[c]=="object"?o[c]=f===o[c]?f:De(o[c],f):o[c]=n(!1,{},f)}else u==="function"&&(o=a(o,De));return o}(r,r?e.slice():oe({},e),t)}function w(e,t){return N(t)?e in t:!1}function Xe(e){let t=N(e);return r=>t?r in e:!1}function H(e){return e?oe(Tn(null),e):Tn(null)}function xl(e,{onlyFirst:t=!1}={}){let r=e.match(new RegExp(["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-nq-uy=><~]))"].join("|"),t?void 0:"g"));return r!==null?r:!1}function bi(e){if(cs(e).trim()==="")return{};try{return new Function(`return ${cs(e).trim()}`)()}catch{return{}}}async function Sl(e,{format:t}){return t==="esm"?r=>import(r):Mg(e)}function Mg(e){return Ze(require)?require(e):(0,wl.createRequire)(D)(e)}function Fl(e){return e===".mjs"||e===".cjs"?"js":e.slice(1)}function Rn(){let e=new Date,t=e.getHours(),r=e.getMinutes(),n=e.getSeconds();return(t<10?`0${t}`:t)+k+(r<10?`0${r}`:r)+k+(n<10?`0${n}`:n)}function vl(e,t=2){return e.reduce((r,n,s)=>{let o=Math.floor(s/t);return r[o]||(r[o]=[]),r[o].push(n),r},[])}function Cl(){return new Promise(e=>{Ze(setImmediate)?setImmediate(e):setTimeout(e)})}function Te(e){return St(e)?e.toString():N(e)||L(e)?JSON.stringify(e):Ae(e)||Rt(e)?`${e}`:U(e)?e:String(e)}function hr(e){return(0,bl.createHash)("md5").update(e).digest("hex")}function El(e){return e.toLowerCase().replace(/[^a-z0-9_:]+/g,"-").replace(/-$/,"").replace(/^-/,"")}function Lt(e,t){return t>=2||t===0?e[e.length-1]!=="s"?`${e}s`:e:e[e.length-1]!=="s"?e:e.slice(0,-1)}function Ir(e){return e.charAt(0).toUpperCase()+e.slice(1)}function wi(e){let t=e%10,r=e%100;return e+(t===1&&r!==11?"st":t===2&&r!==12?"nd":t===3&&r!==13?"rd":"th")}function fe(...e){return e.join(" ")}function pe(...e){return L(e[0])?e[0].join(""):e.join("")}function jt(e,t=null){let r=0;if(L(e))for(let n of e)t?n[t].length>r&&(r=n[t].length):n.length>r&&(r=n.length);else for(let n in e)n.length>r&&(r=n.length);return r=r+1,function(s){let o=U(s)?r-s.length:r-s;return o<1?" ":" ".repeat(o)}}function er(){return Math.random().toString(36).slice(2)}function Ne(e){return e==null}function $l(e){return St(e)?e.toString().trim().length===0:e.trim().length===0}function ye(e){if(N(e)){for(let t in e)return!1;return!0}return L(e)?e.length===0:ce(e)||Rt(e)||Wg(e)||da(e)?!1:!e}function L(e){return Array.isArray(e)}function N(e){return Object.prototype.toString.call(e).slice(8,-1)==="Object"}function U(e){return typeof e=="string"}function xi(e){return Object.prototype.toString.call(e).slice(8,-1)==="RegExp"}function Ze(e){return typeof e=="function"}function Ae(e){return typeof e=="boolean"}function Rt(e){return typeof e=="number"}function da(e){return Number.isNaN(e)}function Wg(e){return e===null}function ce(e){return typeof e>"u"}function St(e){return Buffer.isBuffer(e)}l();var Ol=require("path"),vi=require("os");l();var Al=["script","stylesheet","section","svg","assets","reload","replace","connect","disconnect","connected"],Tl=["syncify.config.ts","syncify.config.js","syncify.config.mjs","syncify.config.cjs","syncify.config.json"],Si=["build","checksum","metafields","pages","paths","schema","sections","settings","templates"],Bl=["chrome"];var ln=["assets","config","layout","customers","locales","sections","schema","snippets","templates","metaobject","metafields","pages","redirects"],Ll=["styles","scripts","svgs","sections","layouts","metaobject","templates","snippets","locales","configs","schema","pages","metafields","assets"],fn=["templates","templates/customers","templates/metaobject","assets","config","layout","locales","sections","snippets"],Rl=["js","cjs","mjs","ts"];var ms=/([|,])/g,Fi=/\.(mjs|cjs|ts|js|tsx|jsx)$/;var ha={404:"The requested resource was not found.",400:"The request was not understood by the server, generally due to bad syntax or because the Content-Type header was not correctly set to application / json. This status is also returned when the request provides an invalid code parameter during the OAuth token exchange process.",303:"The response to the request can be found under a different URL in the Location header and can be retrieved using a GET method on that resource.",401:"The necessary authentication credentials are not present in the request or are incorrect",402:"The requested shop is currently frozen. The shop owner needs to log in to the shop's admin, and pay the outstanding balance to unfreeze the shop.",406:"The requested resource is only capable of generating content not acceptable according to the Accept headers sent in the request.",423:"The requested shop is currently locked. Shops are locked if they repeatedly exceed their API request limit. or if there is an issue with the account, such as a detected compromise or fraud risk.",403:"The server is refusing to respond to the request. This is generally because you have not requested the appropriate scope for this action.",501:"The requested endpoint is not available on that particular shop, e.g. requesting access to a Shopify Plus\u2013only API on a non-Plus shop. This response may also indicate that this endpoint is reserved for future use.",503:"The server is currently unavailable. Check the Shopify status page for reported service outages. See https://www.shopifystatus.com"};l();var Pl=()=>({input:"source",output:"theme",import:"import",export:"export",config:".",paths:{assets:"assets/*",config:"config/*.json",layout:"layout/*.liquid",locales:"locales/*.json",metafields:"metafields/**/*.json",redirects:"redirects.yaml",schema:"schema/*.{schema,json}",templates:"templates/*",customers:"templates/customers/*",metaobject:"templates/metaobject/*",pages:"pages/*",snippets:"snippets/**/*.liquid",sections:"sections/**/*.{liquid,json}"},transform:{svg:null,style:null,script:null,json:{indent:2,useTab:!1,crlf:!1,comments:!0,exclude:[],terse:!1},liquid:{terse:!1}},publish:{bindVersion:!1,publishRole:"unpublished",themeLimit:3,tunnelPort:80},spawn:{build:null,watch:null},hot:!1,log:{clear:!0,silent:!1,stats:!0,warnings:!0}});l();var kl=()=>({sharp:{installed:!1,required:!1,loaded:!1,file:!1,config:{}},tailwind:{installed:!1,loaded:!1,file:!1,map:null,config:null},sass:{installed:!1,loaded:!1,file:!1,config:{warnings:!0,style:"compressed",sourcemap:!0,quietDeps:!1,include:["node_modules"]}},esbuild:{tsconfig:void 0,bundle:!0,format:"esm",globalName:void 0,target:"es2016",metafile:!0,external:[],platform:"browser",splitting:!1,sourcemap:"linked",write:!1,logLevel:"silent",plugins:[]},postcss:{file:!1,config:[]},sprite:{mode:{inline:!0,symbol:{example:!1}},shape:{transform:["svgo"],id:{generator:"svg-%s"}},svg:{xmlDeclaration:!1,doctypeDeclaration:!1,dimensionAttributes:!1,namespaceClassnames:!1,namespaceIDs:!1}},svgo:{multipass:!0,js2svg:{indent:2,pretty:!0},plugins:["preset-default"]}});l();var Nl=()=>({onBuild:[],onChange:[],onReload:[],onTransform:[],onWatch:[]});var qg=()=>{let e=H();for(let t of ln)e[t]=H({input:new Set,match:null,config:null,rename:[]});return e.transforms=new Map,e},i=new class Vt{static defaults=Pl();static plugins=Nl();static processor=kl();static package=H();static cache=H();static watch=new Set;process;restart=!1;wss=null;stats=H();version="0.0.1-rc.1";cwd=process.cwd();cmd=null;argv=null;filters=H();errors=new Set;warnings=new Map;home=(0,Ol.join)((0,vi.homedir)()||(0,vi.tmpdir)(),".syncify");dirs=H({chrome:null,static:null,cache:null,config:null,export:null,import:null,input:null,output:null,sourcemaps:{root:null,scripts:null,styles:null}});file=H({base:null,path:null,relative:null});publish=H({ngrok:null,bindVersion:!1,publishRole:"unpublished",themeLimit:3,tunnelPort:80});vc=H({dir:null,number:null,zip:null,patch:0,major:0,minor:0,update:null});env=H({cli:!1,tree:!1,dev:!0,prod:!1,ready:!1,sync:0,file:null,vars:{}});hot=H({server:3e3,socket:8089,method:"hot",strategy:"hydrate",label:"visible",source:null,previewBar:!1,loadEventJS:"",chromeFlags:["--disable-gpu","--no-sandbox","--no-first-run","--no-default-browser-check","--disable-extensions","--disable-sync","--disable-password-manager","--disable-save-password-bubble","--disable-translate","--disable-features=TranslateUI","--disable-infobars","--disable-web-security","--test-type"]});log=H({idle:!1,group:"Syncify",title:"",uri:"",listen:null,thrown:null,queue:new Set,changes:H(),config:{clear:!0,silent:!1,stats:!0,warnings:!0}});mode=H({dev:!0,build:!1,interactive:!1,prod:!1,strap:!1,watch:!1,clean:!1,cache:!1,setup:!1,upload:!1,import:!1,metafields:!1,terse:!1,hot:!1,pages:!1,pull:!1,force:!1,script:!1,image:!1,style:!1,svg:!1,redirects:!1,export:!1,release:!1,publish:!1,themes:!1});files=new Map;stores=[];sync=H({themes:[],stores:[]});spawn=H({paths:new Set,streams:new Map,invoked:!1,commands:H()});section={schema:null,shared:new Map};paths=qg();page=H({safeSync:!0,author:"",global:null,language:"html",export:{quotes:"\u201C\u201D\u2018\u2019",html:!0,linkify:!1,typographer:!1,xhtmlOut:!1,breaks:!0,langPrefix:"language-"},import:{codeBlockStyle:"fenced",emDelimiter:"_",fence:"```",headingStyle:"atx",hr:"---",linkReferenceStyle:"full",linkStyle:"inlined",strongDelimiter:"**",bulletListMarker:"-"}});script=[];style=[];svg=[];liquid={terse:{enabled:!1,exclude:null,liquid:{minifySchema:!0},markup:{minifyCSS:!0,minifyJS:!0,collapseWhitespace:!0,removeComments:!0,caseSensitive:!1,collapseBooleanAttributes:!1,collapseInlineTagWhitespace:!1,conservativeCollapse:!1,keepClosingSlash:!1,noNewlinesBeforeTagClose:!1,preventAttributesEscaping:!1,removeEmptyAttributes:!1,removeEmptyElements:!1,removeOptionalTags:!1,removeRedundantAttributes:!1,removeScriptTypeAttributes:!0,removeStyleLinkTypeAttributes:!0,useShortDoctype:!1,continueOnParseError:!0,trimCustomFragments:!1,ignoreCustomFragments:[/(?<=\bstyle\b=["']\s?)[\s\S]*?(?="[\s\n>]?)/,/<style[\s\S]*?<\/style>/,/<script[\s\S]*?<\/script>/,/{%[\s\S]*?%}/]}}};json={crlf:!1,cache:null,comments:!1,exclude:null,indent:2,useTab:!1,terse:{enabled:!1,exclude:null,options:{assets:!0,config:!0,locales:!0,metafields:!0,metaobject:!0,groups:!0,templates:!0}}};image;get watch(){return Vt.watch}set watch(t){Vt.watch=t}get cache(){return Vt.cache}set cache(t){Vt.cache=t}get processor(){return Vt.processor}set config(t){Vt.defaults=De(Vt.defaults,t)}get config(){return Vt.defaults}set pkg(t){Vt.package=t}get pkg(){return Vt.package}get plugins(){return Vt.plugins}get terminal(){return Dl()}};l();l();var Pn=class{constructor({base:t,dir:r,ext:n,name:s,root:o}){this.base=t,this.dir=r,this.ext=n,this.name=s,this.root=o}data=void 0;hash;uuid;type;resource;root;dir;name;ext;base;relative;key;namespace;kind;input;output;size};l();var _i=require("readline"),sy=require("util"),Es=require("process"),Ii=Y(require("node-notifier"));l();var Hg=require("stream"),Gg=require("console");l();l();l();l();l();l();function ga({onlyFirst:e=!1}={}){let r=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?(?:\\u0007|\\u001B\\u005C|\\u009C))","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-nq-uy=><~]))"].join("|");return new RegExp(r,e?void 0:"g")}var Ug=ga();function pn(e){if(typeof e!="string")throw new TypeError(`Expected a \`string\`, got \`${typeof e}\``);return e.replace(Ug,"")}l();l();function _l(e){return e===161||e===164||e===167||e===168||e===170||e===173||e===174||e>=176&&e<=180||e>=182&&e<=186||e>=188&&e<=191||e===198||e===208||e===215||e===216||e>=222&&e<=225||e===230||e>=232&&e<=234||e===236||e===237||e===240||e===242||e===243||e>=247&&e<=250||e===252||e===254||e===257||e===273||e===275||e===283||e===294||e===295||e===299||e>=305&&e<=307||e===312||e>=319&&e<=322||e===324||e>=328&&e<=331||e===333||e===338||e===339||e===358||e===359||e===363||e===462||e===464||e===466||e===468||e===470||e===472||e===474||e===476||e===593||e===609||e===708||e===711||e>=713&&e<=715||e===717||e===720||e>=728&&e<=731||e===733||e===735||e>=768&&e<=879||e>=913&&e<=929||e>=931&&e<=937||e>=945&&e<=961||e>=963&&e<=969||e===1025||e>=1040&&e<=1103||e===1105||e===8208||e>=8211&&e<=8214||e===8216||e===8217||e===8220||e===8221||e>=8224&&e<=8226||e>=8228&&e<=8231||e===8240||e===8242||e===8243||e===8245||e===8251||e===8254||e===8308||e===8319||e>=8321&&e<=8324||e===8364||e===8451||e===8453||e===8457||e===8467||e===8470||e===8481||e===8482||e===8486||e===8491||e===8531||e===8532||e>=8539&&e<=8542||e>=8544&&e<=8555||e>=8560&&e<=8569||e===8585||e>=8592&&e<=8601||e===8632||e===8633||e===8658||e===8660||e===8679||e===8704||e===8706||e===8707||e===8711||e===8712||e===8715||e===8719||e===8721||e===8725||e===8730||e>=8733&&e<=8736||e===8739||e===8741||e>=8743&&e<=8748||e===8750||e>=8756&&e<=8759||e===8764||e===8765||e===8776||e===8780||e===8786||e===8800||e===8801||e>=8804&&e<=8807||e===8810||e===8811||e===8814||e===8815||e===8834||e===8835||e===8838||e===8839||e===8853||e===8857||e===8869||e===8895||e===8978||e>=9312&&e<=9449||e>=9451&&e<=9547||e>=9552&&e<=9587||e>=9600&&e<=9615||e>=9618&&e<=9621||e===9632||e===9633||e>=9635&&e<=9641||e===9650||e===9651||e===9654||e===9655||e===9660||e===9661||e===9664||e===9665||e>=9670&&e<=9672||e===9675||e>=9678&&e<=9681||e>=9698&&e<=9701||e===9711||e===9733||e===9734||e===9737||e===9742||e===9743||e===9756||e===9758||e===9792||e===9794||e===9824||e===9825||e>=9827&&e<=9829||e>=9831&&e<=9834||e===9836||e===9837||e===9839||e===9886||e===9887||e===9919||e>=9926&&e<=9933||e>=9935&&e<=9939||e>=9941&&e<=9953||e===9955||e===9960||e===9961||e>=9963&&e<=9969||e===9972||e>=9974&&e<=9977||e===9979||e===9980||e===9982||e===9983||e===10045||e>=10102&&e<=10111||e>=11094&&e<=11097||e>=12872&&e<=12879||e>=57344&&e<=63743||e>=65024&&e<=65039||e===65533||e>=127232&&e<=127242||e>=127248&&e<=127277||e>=127280&&e<=127337||e>=127344&&e<=127373||e===127375||e===127376||e>=127387&&e<=127404||e>=917760&&e<=917999||e>=983040&&e<=1048573||e>=1048576&&e<=1114109}function Il(e){return e===12288||e>=65281&&e<=65376||e>=65504&&e<=65510}function jl(e){return e>=4352&&e<=4447||e===8986||e===8987||e===9001||e===9002||e>=9193&&e<=9196||e===9200||e===9203||e===9725||e===9726||e===9748||e===9749||e>=9800&&e<=9811||e===9855||e===9875||e===9889||e===9898||e===9899||e===9917||e===9918||e===9924||e===9925||e===9934||e===9940||e===9962||e===9970||e===9971||e===9973||e===9978||e===9981||e===9989||e===9994||e===9995||e===10024||e===10060||e===10062||e>=10067&&e<=10069||e===10071||e>=10133&&e<=10135||e===10160||e===10175||e===11035||e===11036||e===11088||e===11093||e>=11904&&e<=11929||e>=11931&&e<=12019||e>=12032&&e<=12245||e>=12272&&e<=12287||e>=12289&&e<=12350||e>=12353&&e<=12438||e>=12441&&e<=12543||e>=12549&&e<=12591||e>=12593&&e<=12686||e>=12688&&e<=12771||e>=12783&&e<=12830||e>=12832&&e<=12871||e>=12880&&e<=19903||e>=19968&&e<=42124||e>=42128&&e<=42182||e>=43360&&e<=43388||e>=44032&&e<=55203||e>=63744&&e<=64255||e>=65040&&e<=65049||e>=65072&&e<=65106||e>=65108&&e<=65126||e>=65128&&e<=65131||e>=94176&&e<=94180||e===94192||e===94193||e>=94208&&e<=100343||e>=100352&&e<=101589||e>=101632&&e<=101640||e>=110576&&e<=110579||e>=110581&&e<=110587||e===110589||e===110590||e>=110592&&e<=110882||e===110898||e>=110928&&e<=110930||e===110933||e>=110948&&e<=110951||e>=110960&&e<=111355||e===126980||e===127183||e===127374||e>=127377&&e<=127386||e>=127488&&e<=127490||e>=127504&&e<=127547||e>=127552&&e<=127560||e===127568||e===127569||e>=127584&&e<=127589||e>=127744&&e<=127776||e>=127789&&e<=127797||e>=127799&&e<=127868||e>=127870&&e<=127891||e>=127904&&e<=127946||e>=127951&&e<=127955||e>=127968&&e<=127984||e===127988||e>=127992&&e<=128062||e===128064||e>=128066&&e<=128252||e>=128255&&e<=128317||e>=128331&&e<=128334||e>=128336&&e<=128359||e===128378||e===128405||e===128406||e===128420||e>=128507&&e<=128591||e>=128640&&e<=128709||e===128716||e>=128720&&e<=128722||e>=128725&&e<=128727||e>=128732&&e<=128735||e===128747||e===128748||e>=128756&&e<=128764||e>=128992&&e<=129003||e===129008||e>=129292&&e<=129338||e>=129340&&e<=129349||e>=129351&&e<=129535||e>=129648&&e<=129660||e>=129664&&e<=129672||e>=129680&&e<=129725||e>=129727&&e<=129733||e>=129742&&e<=129755||e>=129760&&e<=129768||e>=129776&&e<=129784||e>=131072&&e<=196605||e>=196608&&e<=262141}function zg(e){if(!Number.isSafeInteger(e))throw new TypeError(`Expected a code point, got \`${typeof e}\`.`)}function Ci(e,{ambiguousAsWide:t=!1}={}){return zg(e),Il(e)||jl(e)||t&&_l(e)?2:1}l();var Ml=()=>/[#*0-9]\uFE0F?\u20E3|[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23ED-\u23EF\u23F1\u23F2\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB\u25FC\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692\u2694-\u2697\u2699\u269B\u269C\u26A0\u26A7\u26AA\u26B0\u26B1\u26BD\u26BE\u26C4\u26C8\u26CF\u26D1\u26E9\u26F0-\u26F5\u26F7\u26F8\u26FA\u2702\u2708\u2709\u270F\u2712\u2714\u2716\u271D\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u27A1\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B55\u3030\u303D\u3297\u3299]\uFE0F?|[\u261D\u270C\u270D](?:\uD83C[\uDFFB-\uDFFF]|\uFE0F)?|[\u270A\u270B](?:\uD83C[\uDFFB-\uDFFF])?|[\u23E9-\u23EC\u23F0\u23F3\u25FD\u2693\u26A1\u26AB\u26C5\u26CE\u26D4\u26EA\u26FD\u2705\u2728\u274C\u274E\u2753-\u2755\u2795-\u2797\u27B0\u27BF\u2B50]|\u26D3\uFE0F?(?:\u200D\uD83D\uDCA5)?|\u26F9(?:\uD83C[\uDFFB-\uDFFF]|\uFE0F)?(?:\u200D[\u2640\u2642]\uFE0F?)?|\u2764\uFE0F?(?:\u200D(?:\uD83D\uDD25|\uD83E\uDE79))?|\uD83C(?:[\uDC04\uDD70\uDD71\uDD7E\uDD7F\uDE02\uDE37\uDF21\uDF24-\uDF2C\uDF36\uDF7D\uDF96\uDF97\uDF99-\uDF9B\uDF9E\uDF9F\uDFCD\uDFCE\uDFD4-\uDFDF\uDFF5\uDFF7]\uFE0F?|[\uDF85\uDFC2\uDFC7](?:\uD83C[\uDFFB-\uDFFF])?|[\uDFC4\uDFCA](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDFCB\uDFCC](?:\uD83C[\uDFFB-\uDFFF]|\uFE0F)?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDCCF\uDD8E\uDD91-\uDD9A\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF43\uDF45-\uDF4A\uDF4C-\uDF7C\uDF7E-\uDF84\uDF86-\uDF93\uDFA0-\uDFC1\uDFC5\uDFC6\uDFC8\uDFC9\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF8-\uDFFF]|\uDDE6\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF]|\uDDE7\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF]|\uDDE8\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF7\uDDFA-\uDDFF]|\uDDE9\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF]|\uDDEA\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA]|\uDDEB\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7]|\uDDEC\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE]|\uDDED\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA]|\uDDEE\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9]|\uDDEF\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5]|\uDDF0\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF]|\uDDF1\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE]|\uDDF2\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF]|\uDDF3\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF]|\uDDF4\uD83C\uDDF2|\uDDF5\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE]|\uDDF6\uD83C\uDDE6|\uDDF7\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC]|\uDDF8\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF]|\uDDF9\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF]|\uDDFA\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF]|\uDDFB\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA]|\uDDFC\uD83C[\uDDEB\uDDF8]|\uDDFD\uD83C\uDDF0|\uDDFE\uD83C[\uDDEA\uDDF9]|\uDDFF\uD83C[\uDDE6\uDDF2\uDDFC]|\uDF44(?:\u200D\uD83D\uDFEB)?|\uDF4B(?:\u200D\uD83D\uDFE9)?|\uDFC3(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?|\uDFF3\uFE0F?(?:\u200D(?:\u26A7\uFE0F?|\uD83C\uDF08))?|\uDFF4(?:\u200D\u2620\uFE0F?|\uDB40\uDC67\uDB40\uDC62\uDB40(?:\uDC65\uDB40\uDC6E\uDB40\uDC67|\uDC73\uDB40\uDC63\uDB40\uDC74|\uDC77\uDB40\uDC6C\uDB40\uDC73)\uDB40\uDC7F)?)|\uD83D(?:[\uDC3F\uDCFD\uDD49\uDD4A\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA\uDECB\uDECD-\uDECF\uDEE0-\uDEE5\uDEE9\uDEF0\uDEF3]\uFE0F?|[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC](?:\uD83C[\uDFFB-\uDFFF])?|[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4\uDEB5](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD74\uDD90](?:\uD83C[\uDFFB-\uDFFF]|\uFE0F)?|[\uDC00-\uDC07\uDC09-\uDC14\uDC16-\uDC25\uDC27-\uDC3A\uDC3C-\uDC3E\uDC40\uDC44\uDC45\uDC51-\uDC65\uDC6A\uDC79-\uDC7B\uDC7D-\uDC80\uDC84\uDC88-\uDC8E\uDC90\uDC92-\uDCA9\uDCAB-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDDA4\uDDFB-\uDE2D\uDE2F-\uDE34\uDE37-\uDE41\uDE43\uDE44\uDE48-\uDE4A\uDE80-\uDEA2\uDEA4-\uDEB3\uDEB7-\uDEBF\uDEC1-\uDEC5\uDED0-\uDED2\uDED5-\uDED7\uDEDC-\uDEDF\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB\uDFF0]|\uDC08(?:\u200D\u2B1B)?|\uDC15(?:\u200D\uD83E\uDDBA)?|\uDC26(?:\u200D(?:\u2B1B|\uD83D\uDD25))?|\uDC3B(?:\u200D\u2744\uFE0F?)?|\uDC41\uFE0F?(?:\u200D\uD83D\uDDE8\uFE0F?)?|\uDC68(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDC68\uDC69]\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFE])))?))?|\uDC69(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?[\uDC68\uDC69]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?|\uDC69\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?))|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFE])))?))?|\uDC6F(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDD75(?:\uD83C[\uDFFB-\uDFFF]|\uFE0F)?(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDE2E(?:\u200D\uD83D\uDCA8)?|\uDE35(?:\u200D\uD83D\uDCAB)?|\uDE36(?:\u200D\uD83C\uDF2B\uFE0F?)?|\uDE42(?:\u200D[\u2194\u2195]\uFE0F?)?|\uDEB6(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?)|\uD83E(?:[\uDD0C\uDD0F\uDD18-\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5\uDEC3-\uDEC5\uDEF0\uDEF2-\uDEF8](?:\uD83C[\uDFFB-\uDFFF])?|[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD\uDDCF\uDDD4\uDDD6-\uDDDD](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDDDE\uDDDF](?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD0D\uDD0E\uDD10-\uDD17\uDD20-\uDD25\uDD27-\uDD2F\uDD3A\uDD3F-\uDD45\uDD47-\uDD76\uDD78-\uDDB4\uDDB7\uDDBA\uDDBC-\uDDCC\uDDD0\uDDE0-\uDDFF\uDE70-\uDE7C\uDE80-\uDE89\uDE8F-\uDEC2\uDEC6\uDECE-\uDEDC\uDEDF-\uDEE9]|\uDD3C(?:\u200D[\u2640\u2642]\uFE0F?|\uD83C[\uDFFB-\uDFFF])?|\uDDCE(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?|\uDDD1(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1|\uDDD1\u200D\uD83E\uDDD2(?:\u200D\uD83E\uDDD2)?|\uDDD2(?:\u200D\uD83E\uDDD2)?))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFC-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFD-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFD\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFE]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?))?|\uDEF1(?:\uD83C(?:\uDFFB(?:\u200D\uD83E\uDEF2\uD83C[\uDFFC-\uDFFF])?|\uDFFC(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFD-\uDFFF])?|\uDFFD(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])?|\uDFFE(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFD\uDFFF])?|\uDFFF(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFE])?))?)/g;var Vg=new Intl.Segmenter,Jg=/^\p{Default_Ignorable_Code_Point}$/u;function mn(e,t={}){if(typeof e!="string"||e.length===0)return 0;let{ambiguousIsNarrow:r=!0,countAnsiEscapeCodes:n=!1}=t;if(n||(e=pn(e)),e.length===0)return 0;let s=0,o={ambiguousAsWide:!r};for(let{segment:a}of Vg.segment(e)){let u=a.codePointAt(0);if(!(u<=31||u>=127&&u<=159)&&!(u>=8203&&u<=8207||u===65279)&&!(u>=768&&u<=879||u>=6832&&u<=6911||u>=7616&&u<=7679||u>=8400&&u<=8447||u>=65056&&u<=65071)&&!(u>=55296&&u<=57343)&&!(u>=65024&&u<=65039)&&!Jg.test(a)){if(Ml().test(a)){s+=2;continue}s+=Ci(u,o)}}return s}l();var Wl=(e=0)=>t=>`\x1B[${t+e}m`,ql=(e=0)=>t=>`\x1B[${38+e};5;${t}m`,Hl=(e=0)=>(t,r,n)=>`\x1B[${38+e};2;${t};${r};${n}m`,je={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],gray:[90,39],grey:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgGray:[100,49],bgGrey:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}},jS=Object.keys(je.modifier),Yg=Object.keys(je.color),Kg=Object.keys(je.bgColor),MS=[...Yg,...Kg];function Xg(){let e=new Map;for(let[t,r]of Object.entries(je)){for(let[n,s]of Object.entries(r))je[n]={open:`\x1B[${s[0]}m`,close:`\x1B[${s[1]}m`},r[n]=je[n],e.set(s[0],s[1]);Object.defineProperty(je,t,{value:r,enumerable:!1})}return Object.defineProperty(je,"codes",{value:e,enumerable:!1}),je.color.close="\x1B[39m",je.bgColor.close="\x1B[49m",je.color.ansi=Wl(),je.color.ansi256=ql(),je.color.ansi16m=Hl(),je.bgColor.ansi=Wl(10),je.bgColor.ansi256=ql(10),je.bgColor.ansi16m=Hl(10),Object.defineProperties(je,{rgbToAnsi256:{value:(t,r,n)=>t===r&&r===n?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(r/255*5)+Math.round(n/255*5),enumerable:!1},hexToRgb:{value:t=>{let r=/[a-f\d]{6}|[a-f\d]{3}/i.exec(t.toString(16));if(!r)return[0,0,0];let[n]=r;n.length===3&&(n=[...n].map(o=>o+o).join(""));let s=Number.parseInt(n,16);return[s>>16&255,s>>8&255,s&255]},enumerable:!1},hexToAnsi256:{value:t=>je.rgbToAnsi256(...je.hexToRgb(t)),enumerable:!1},ansi256ToAnsi:{value:t=>{if(t<8)return 30+t;if(t<16)return 90+(t-8);let r,n,s;if(t>=232)r=((t-232)*10+8)/255,n=r,s=r;else{t-=16;let u=t%36;r=Math.floor(t/36)/5,n=Math.floor(u/6)/5,s=u%6/5}let o=Math.max(r,n,s)*2;if(o===0)return 30;let a=30+(Math.round(s)<<2|Math.round(n)<<1|Math.round(r));return o===2&&(a+=60),a},enumerable:!1},rgbToAnsi:{value:(t,r,n)=>je.ansi256ToAnsi(je.rgbToAnsi256(t,r,n)),enumerable:!1},hexToAnsi:{value:t=>je.ansi256ToAnsi(je.hexToAnsi256(t)),enumerable:!1}}),je}var Zg=Xg(),tr=Zg;var $i=new Set(["\x1B","\x9B"]),Qg=39,Da="\x07",zl="[",e0="]",Vl="m",Ei=`${e0}8;;`,Gl=e=>`${$i.values().next().value}${zl}${e}${Vl}`,Ul=e=>`${$i.values().next().value}${Ei}${e}${Da}`,t0=e=>e.split(" ").map(t=>mn(t)),ya=(e,t,r)=>{let n=[...t],s=!1,o=!1,a=mn(pn(e.at(-1)));for(let[u,c]of n.entries()){let f=mn(c);if(a+f<=r?e[e.length-1]+=c:(e.push(c),a=0),$i.has(c)&&(s=!0,o=n.slice(u+1,u+1+Ei.length).join("")===Ei),s){o?c===Da&&(s=!1,o=!1):c===Vl&&(s=!1);continue}a+=f,a===r&&u<n.length-1&&(e.push(""),a=0)}!a&&e.at(-1).length>0&&e.length>1&&(e[e.length-2]+=e.pop())},r0=e=>{let t=e.split(" "),r=t.length;for(;r>0&&!(mn(t[r-1])>0);)r--;return r===t.length?e:t.slice(0,r).join(" ")+t.slice(r).join("")},n0=(e,t,r={})=>{if(r.trim!==!1&&e.trim()==="")return"";let n="",s,o,a=t0(e),u=[""];for(let[d,g]of e.split(" ").entries()){r.trim!==!1&&(u[u.length-1]=u.at(-1).trimStart());let b=mn(u.at(-1));if(d!==0&&(b>=t&&(r.wordWrap===!1||r.trim===!1)&&(u.push(""),b=0),(b>0||r.trim===!1)&&(u[u.length-1]+=" ",b++)),r.hard&&a[d]>t){let y=t-b,v=1+Math.floor((a[d]-y-1)/t);Math.floor((a[d]-1)/t)<v&&u.push(""),ya(u,g,t);continue}if(b+a[d]>t&&b>0&&a[d]>0){if(r.wordWrap===!1&&b<t){ya(u,g,t);continue}u.push("")}if(b+a[d]>t&&r.wordWrap===!1){ya(u,g,t);continue}u[u.length-1]+=g}r.trim!==!1&&(u=u.map(d=>r0(d)));let c=u.join(`
`),f=[...c],p=0;for(let[d,g]of f.entries()){if(n+=g,$i.has(g)){let{groups:y}=new RegExp(`(?:\\${zl}(?<code>\\d+)m|\\${Ei}(?<uri>.*)${Da})`).exec(c.slice(p))||{groups:{}};if(y.code!==void 0){let v=Number.parseFloat(y.code);s=v===Qg?void 0:v}else y.uri!==void 0&&(o=y.uri.length===0?void 0:y.uri)}let b=tr.codes.get(Number(s));f[d+1]===`
`?(o&&(n+=Ul("")),s&&b&&(n+=Gl(b))):g===`
`&&(s&&b&&(n+=Gl(s)),o&&(n+=Ul(o))),p+=g.length}return n};function jr(e,t,r){return String(e).normalize().replaceAll(`\r
`,`
`).split(`
`).map(n=>n0(n,t,r)).join(`
`)}l();l();function ba(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}l();var Jl=Y(require("os"),1),s0=()=>Jl.default.homedir().replace(/\\/g,"/"),Yl=s0;var Kl=/\s+at.*[(\s](.*)\)?/,Xl=/^(?:(?:(?:node|node:[\w/]+|(?:(?:node:)?internal\/[\w/]*|.*node_modules\/(?:babel-polyfill|pirates)\/.*)?\w+)(?:\.js)?:\d+:\d+)|native)/;function ds(e,{pretty:t=!1,basePath:r,pathFilter:n}={}){let s=r&&new RegExp(`(file://)?${ba(r.replace(/\\/g,"/"))}/?`,"g"),o=t?Yl():"";if(typeof e=="string")return e.replace(/\\/g,"/").split(`
`).filter(a=>{let u=a.match(Kl);if(u===null||!u[1])return!0;let c=u[1];return c.includes(".app/Contents/Resources/electron.asar")||c.includes(".app/Contents/Resources/default_app.asar")||c.includes("node_modules/electron/dist/resources/electron.asar")||c.includes("node_modules/electron/dist/resources/default_app.asar")?!1:n?!Xl.test(c)&&n(c):!Xl.test(c)}).filter(a=>a.trim()!=="").map(a=>(s&&(a=a.replace(s,"")),t&&(a=a.replace(Kl,(u,c)=>u.replace(c,c.replace(o,"~")))),a)).join(`
`)}function R(e,...t){let r=e.length>9?"  ":" ".repeat(11-e.length),n=t.length>0?t.length===1?_+"  "+t[0]:t.length===2?_+"  "+t[0]+" "+_+" "+t[1]:_+"  "+t[0]+" "+_+" "+t[1]+" "+Oe(t[2]):"";return e+r+n}function Oe(e){return e?se+" "+Tt.gray(e):""}function xa(e,t,{spaced:r=!1}={}){let n=r?" ":"";switch(e){case"AN":return dl+n+t+n+hl;case"CB":return ll+n+t+n+fl;case"PR":return ul+n+t+n+cl;case"SB":return pl+n+t+n+ml}}var dn=H({warning:mr(` ${se} Type ${h("w")} and press ${h("enter")} to view`),error:le(` ${se} Type ${h("v")} and press ${h("enter")} to view`),stack:m(`Type ${h("s")} and press ${h("enter")} to view stack trace`)}),Zl=(e=i.terminal.wrap,t=!0)=>{let r="\u251C"+"\u2500".repeat(e-10);return t?`${V.open}
${r}
\u2502${V.close}`:`${V.open}${r}${V.close}`},gs=e=>C.open+Tt.gray(`${e} ~ ${Rn()}`);var hs=(...e)=>{let t=H({color:null,line:C.line}),r,n="";for(L(e[0])?(N(e[1])&&oe(t,e[1]),r=jr(e[0].join(" "),i.terminal.wrap).split(`
`)):(N(e[e.length-1])&&oe(t,e.pop()),r=jr(e.join(" "),i.terminal.wrap).split(`
`));r.length!==0;){let s=r.shift().trim();s.length>0?n+=t.line+(t.color?t.color(s):s)+`
`:n+=t.line+`
`}return n.trimEnd()},yr=e=>C.trim+`
`+C.line+e+`
`+C.trim;var be=e=>C.line+e,ys=e=>C.red+e,Mr=e=>C.yellow+e,Ql=e=>C.trim+`
`+C.line+e,ef=e=>C.line+e+`
`+C.line,Sa=e=>C.dash+e,Ds=e=>C.base+Tt.gray(`${e} ~ ${Rn()}`)+`
`;function Fa(e){let t=jt(e.entries),r=X({type:e.type||"error"});if(U(e.stack)){let n=e.cleanStack?ds(e.stack,{pretty:!0,basePath:i.cwd}):e.stack;r.Wrap(n.split(`
`),m).NL.Newline()}for(let n in e.entries){if(ce(e.entries[n]))continue;let s;if(Rt(e.entries[n])){if(da(e.entries[n]))continue;s=yi(Te(e.entries[n]))}else s=Te(e.entries[n]);if(s.length===0)continue;let o=e.type==="warning"?ne(n):Se(n);n==="source"||n==="output"||n==="input"||n==="file"?r.Line(o+k+" "+t(n)+dr(s),m):r.Line(o+k+" "+t(n)+s,m)}return e.stack===!0&&r.NL.Line(dn.stack),r.toString()}var wa=class{type="info";line;trim;text;constructor(t){if(N(t)){let r=Xe(t);this.type=r("type")?t.type:"info",this.text=r("text")?t.text:[],this.type==="error"?(this.line=C.red,this.trim=C.redTrim):this.type==="warning"?(this.line=C.yellow,this.trim=C.yellowTrim):this.type==="nil"?(this.line="",this.trim=""):(this.line=C.line,this.trim=C.trim)}else this.line=C.line,this.trim=C.trim,this.text=[]}toRaw(){return this.text}toLine(t){if(this.text.length===0)return"";this.text[this.text.length-1]=this.text[this.text.length-1].trimEnd();let r;return t?r=t(pe(this.text)):this.type==="info"?r=$(pe(this.text)):this.type==="error"?r=le(pe(this.text)):this.type==="warning"?r=ne(pe(this.text)):r=pe(this.text),this.text=[],r+`
`+this.trim}toString(t){if(this.text.length===0)return"";this.text[this.text.length-1]=this.text[this.text.length-1].trimEnd();let r;return t?r=t(pe(this.text)):this.type==="info"?r=$(pe(this.text)):this.type==="error"?r=le(pe(this.text)):this.type==="warning"?r=ne(pe(this.text)):r=pe(this.text),this.text=[],r}Get(t=this.text.length-1){return this.text[t]}Remove(t){return this.text.splice(t,1),this}Replace(t,r,n){return this.text[t]&&(this.text[t]=this.line+(n?n(r):r)+`
`),this}Ruler(t=i.terminal.wrap){return this.text.push(C.trim+`
`+V(`\u251C${"\u2500".repeat(t)}`)+`
`+C.trim+`
`),this}get NL(){return this.text.push(this.trim+`
`),this}get BR(){return this.text.push(`
`),this}Pop(){return this.text.pop(),this}Newline(t,r){if(Rt(t)){let n=this.trim+`
`;r&&(r==="yellow"?n=C.yellowTrim+`
`:r==="red"?n=C.redTrim+`
`:r===""&&(n=`
`));for(let s=0;s<t;s++)this.text.push(n)}else t===""?this.text.push(`
`):t==="line"?this.text.push(C.trim+`
`):t==="yellow"?this.text.push(C.yellowTrim+`
`):t==="red"?this.text.push(C.redTrim+`
`):this.text.push(this.trim+`
`);return this}Inline(t,r){let n=this.text.length;return n>0?this.text[n-1]=this.text[n-1].trimEnd()+" "+(r?r(t):t)+`
`:this.text.push(this.line+(r?r(t):t)+`
`),this}Trim(t,r){return this.text.push(this.line+(r?r(t):t)+`
`),this}Insert(t,r){return this.text.push((r?r(t):t)+`
`),this}Line(t,r){return this.type==="error"?this.Error(t,r):this.type==="warning"?this.Warn(t,r):(this.text.push(this.line+(r?r(t):t)+`
`),this)}Error(t,r){return this.text.push(C.red+(r?r(t):le(t))+`
`),this}Warn(t,r){return this.text.push(C.yellow+(r?r(t):mr(t))+`
`),this}Break(t,r){return this.text.push(this.trim+`
`+this.line+(r?r(t):t)+`
`+this.trim+`
`),this}Top(t){return this.text.push(gs(t)+`
`),this}End(t){return this.text.push(Ds(t)),this}Context(t){return this.text.push(Fa(t)+`
`),this}Dash(t,r){return this.text.push(C.dash+(r?r(t):t)+`
`),this}Multiline(t){let r=L(t)?t:t.split(`
`);for(;r.length!==0;)this.text.push(this.line+r.shift()+`
`);return this}Wrap(...t){let r=H({line:this.line});return this.type==="error"?r.color=le:this.type==="warning"?r.color=mr:r.color=q,L(t[0])?(Ze(t[1])&&(r.color=t.pop()),this.text.push(hs(t[0],r)+`
`)):(Ze(t[t.length-1])&&(r.color=t.pop()),this.text.push(hs(t,r)+`
`)),this}};function X(e){return i.env.tree===!1&&(N(e)?e.type="nil":e=H({type:"nil"})),new wa(e)}function Ai(e,{type:t="info"}={}){let r=X({type:t}),n=L(e)?e:e.split(`
`),s=t==="error"?"red":t==="warn"?"yellow":"line";for(;n.length!==0;){let o=n.shift();o.trim().length>0?r.Line(o.trimEnd()):r.Newline(s)}return r.Newline(s).toString()}function kn(e){let t=jt(e.entries),r=w("message",e);w("warning",e)||(e.warning=!1),r||(e.warning===!1?e.message=X({type:"error"}).NL:e.message=X({type:"warn"}).NL);for(let n in e.entries){let s=Te(e.entries[n]);n==="source"||n==="output"||n==="input"||n==="file"?e.message.Line($(n)+k+t(n)+se+dr(s),m):e.message.Line($(n)+k+t(n)+s,m)}return U(e.stack)&&(e.warning===!1&&i.errors.add(e.stack),e.message.Break(dn.stack)),e.message.toLine()}function tf(e,{line:t=C.line,span:r=null}={}){if(t==="red"?t=C.red:t==="yellow"&&(t=C.yellow),r!==null){let n=w("end",r)?r.end:r.start+1;return t+`
`+[t+O(`${r.start-1}`)+k,t+O(`${r.start}`)+k+e,t+O(`${n}`)+k].join(`
`)}return t+`
`+t+e}function rf(e,{type:t="info",color:r=$}={}){let n=t==="error"?"red":t==="warn"?"yellow":"line";return X({type:t}).Newline(n).Wrap(e,r).toLine()}l();l();var Ma=Y(require("process"),1);l();var Ss={};ra(Ss,{beep:()=>B0,clearScreen:()=>E0,clearTerminal:()=>$0,cursorBackward:()=>f0,cursorDown:()=>c0,cursorForward:()=>l0,cursorGetPosition:()=>d0,cursorHide:()=>y0,cursorLeft:()=>of,cursorMove:()=>u0,cursorNextLine:()=>h0,cursorPrevLine:()=>g0,cursorRestorePosition:()=>m0,cursorSavePosition:()=>p0,cursorShow:()=>D0,cursorTo:()=>a0,cursorUp:()=>sf,enterAlternativeScreen:()=>A0,eraseDown:()=>S0,eraseEndLine:()=>w0,eraseLine:()=>af,eraseLines:()=>b0,eraseScreen:()=>Ca,eraseStartLine:()=>x0,eraseUp:()=>F0,exitAlternativeScreen:()=>T0,iTerm:()=>P0,image:()=>R0,link:()=>L0,scrollDown:()=>C0,scrollUp:()=>v0});l();var Bi=Y(require("process"),1);l();var Ti=globalThis.window?.document!==void 0,yF=globalThis.process?.versions?.node!==void 0,DF=globalThis.process?.versions?.bun!==void 0,bF=globalThis.Deno?.version?.deno!==void 0,wF=globalThis.process?.versions?.electron!==void 0,xF=globalThis.navigator?.userAgent?.includes("jsdom")===!0,SF=typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope,FF=typeof DedicatedWorkerGlobalScope<"u"&&globalThis instanceof DedicatedWorkerGlobalScope,vF=typeof SharedWorkerGlobalScope<"u"&&globalThis instanceof SharedWorkerGlobalScope,CF=typeof ServiceWorkerGlobalScope<"u"&&globalThis instanceof ServiceWorkerGlobalScope,bs=globalThis.navigator?.userAgentData?.platform,EF=bs==="macOS"||globalThis.navigator?.platform==="MacIntel"||globalThis.navigator?.userAgent?.includes(" Mac ")===!0||globalThis.process?.platform==="darwin",$F=bs==="Windows"||globalThis.navigator?.platform==="Win32"||globalThis.process?.platform==="win32",AF=bs==="Linux"||globalThis.navigator?.platform?.startsWith("Linux")===!0||globalThis.navigator?.userAgent?.includes(" Linux ")===!0||globalThis.process?.platform==="linux",TF=bs==="iOS"||globalThis.navigator?.platform==="MacIntel"&&globalThis.navigator?.maxTouchPoints>1||/iPad|iPhone|iPod/.test(globalThis.navigator?.platform),BF=bs==="Android"||globalThis.navigator?.platform==="Android"||globalThis.navigator?.userAgent?.includes(" Android ")===!0||globalThis.process?.platform==="android";var Fe="\x1B[",xs="\x1B]",Nn="\x07",ws=";",nf=!Ti&&Bi.default.env.TERM_PROGRAM==="Apple_Terminal",i0=!Ti&&Bi.default.platform==="win32",o0=Ti?()=>{throw new Error("`process.cwd()` only works in Node.js, not the browser.")}:Bi.default.cwd,a0=(e,t)=>{if(typeof e!="number")throw new TypeError("The `x` argument is required");return typeof t!="number"?Fe+(e+1)+"G":Fe+(t+1)+ws+(e+1)+"H"},u0=(e,t)=>{if(typeof e!="number")throw new TypeError("The `x` argument is required");let r="";return e<0?r+=Fe+-e+"D":e>0&&(r+=Fe+e+"C"),t<0?r+=Fe+-t+"A":t>0&&(r+=Fe+t+"B"),r},sf=(e=1)=>Fe+e+"A",c0=(e=1)=>Fe+e+"B",l0=(e=1)=>Fe+e+"C",f0=(e=1)=>Fe+e+"D",of=Fe+"G",p0=nf?"\x1B7":Fe+"s",m0=nf?"\x1B8":Fe+"u",d0=Fe+"6n",h0=Fe+"E",g0=Fe+"F",y0=Fe+"?25l",D0=Fe+"?25h",b0=e=>{let t="";for(let r=0;r<e;r++)t+=af+(r<e-1?sf():"");return e&&(t+=of),t},w0=Fe+"K",x0=Fe+"1K",af=Fe+"2K",S0=Fe+"J",F0=Fe+"1J",Ca=Fe+"2J",v0=Fe+"S",C0=Fe+"T",E0="\x1Bc",$0=i0?`${Ca}${Fe}0f`:`${Ca}${Fe}3J${Fe}H`,A0=Fe+"?1049h",T0=Fe+"?1049l",B0=Nn,L0=(e,t)=>[xs,"8",ws,ws,t,Nn,e,xs,"8",ws,ws,Nn].join(""),R0=(e,t={})=>{let r=`${xs}1337;File=inline=1`;return t.width&&(r+=`;width=${t.width}`),t.height&&(r+=`;height=${t.height}`),t.preserveAspectRatio===!1&&(r+=";preserveAspectRatio=0"),r+":"+Buffer.from(e).toString("base64")+Nn},P0={setCwd:(e=o0())=>`${xs}50;CurrentDir=${e}${Nn}`,annotation(e,t={}){let r=`${xs}1337;`,n=t.x!==void 0,s=t.y!==void 0;if((n||s)&&!(n&&s&&t.length!==void 0))throw new Error("`x`, `y` and `length` must be defined when `x` or `y` is defined");return e=e.replaceAll("|",""),r+=t.isHidden?"AddHiddenAnnotation=":"AddAnnotation=",t.length>0?r+=(n?[e,t.length,t.x,t.y]:[t.length,e]).join("|"):r+=e,r+Nn}};l();var Pa=Y(require("process"),1);l();var Fs=Y(require("process"),1);l();l();var k0=(e,t,r,n)=>{if(r==="length"||r==="prototype"||r==="arguments"||r==="caller")return;let s=Object.getOwnPropertyDescriptor(e,r),o=Object.getOwnPropertyDescriptor(t,r);!N0(s,o)&&n||Object.defineProperty(e,r,o)},N0=function(e,t){return e===void 0||e.configurable||e.writable===t.writable&&e.enumerable===t.enumerable&&e.configurable===t.configurable&&(e.writable||e.value===t.value)},O0=(e,t)=>{let r=Object.getPrototypeOf(t);r!==Object.getPrototypeOf(e)&&Object.setPrototypeOf(e,r)},_0=(e,t)=>`/* Wrapped ${e}*/
${t}`,I0=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),j0=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name"),M0=(e,t,r)=>{let n=r===""?"":`with ${r.trim()}() `,s=_0.bind(null,n,t.toString());Object.defineProperty(s,"name",j0);let{writable:o,enumerable:a,configurable:u}=I0;Object.defineProperty(e,"toString",{value:s,writable:o,enumerable:a,configurable:u})};function Ea(e,t,{ignoreNonConfigurable:r=!1}={}){let{name:n}=e;for(let s of Reflect.ownKeys(t))k0(e,t,s,r);return O0(e,t),M0(e,t,n),e}var Li=new WeakMap,uf=(e,t={})=>{if(typeof e!="function")throw new TypeError("Expected a function");let r,n=0,s=e.displayName||e.name||"<anonymous>",o=function(...a){if(Li.set(o,++n),n===1)r=e.apply(this,a),e=void 0;else if(t.throw===!0)throw new Error(`Function \`${s}\` can only be called once`);return r};return Ea(o,e),Li.set(o,n),o};uf.callCount=e=>{if(!Li.has(e))throw new Error(`The given function \`${e.name}\` is not wrapped by the \`onetime\` package`);return Li.get(e)};var cf=uf;l();l();var hn=[];hn.push("SIGHUP","SIGINT","SIGTERM");process.platform!=="win32"&&hn.push("SIGALRM","SIGABRT","SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT");process.platform==="linux"&&hn.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT");var Ri=e=>!!e&&typeof e=="object"&&typeof e.removeListener=="function"&&typeof e.emit=="function"&&typeof e.reallyExit=="function"&&typeof e.listeners=="function"&&typeof e.kill=="function"&&typeof e.pid=="number"&&typeof e.on=="function",$a=Symbol.for("signal-exit emitter"),Aa=globalThis,W0=Object.defineProperty.bind(Object),Ta=class{emitted={afterExit:!1,exit:!1};listeners={afterExit:[],exit:[]};count=0;id=Math.random();constructor(){if(Aa[$a])return Aa[$a];W0(Aa,$a,{value:this,writable:!1,enumerable:!1,configurable:!1})}on(t,r){this.listeners[t].push(r)}removeListener(t,r){let n=this.listeners[t],s=n.indexOf(r);s!==-1&&(s===0&&n.length===1?n.length=0:n.splice(s,1))}emit(t,r,n){if(this.emitted[t])return!1;this.emitted[t]=!0;let s=!1;for(let o of this.listeners[t])s=o(r,n)===!0||s;return t==="exit"&&(s=this.emit("afterExit",r,n)||s),s}},Pi=class{},q0=e=>({onExit(t,r){return e.onExit(t,r)},load(){return e.load()},unload(){return e.unload()}}),Ba=class extends Pi{onExit(){return()=>{}}load(){}unload(){}},La=class extends Pi{#n=Ra.platform==="win32"?"SIGINT":"SIGHUP";#t=new Ta;#e;#a;#o;#i={};#r=!1;constructor(t){super(),this.#e=t,this.#i={};for(let r of hn)this.#i[r]=()=>{let n=this.#e.listeners(r),{count:s}=this.#t,o=t;if(typeof o.__signal_exit_emitter__=="object"&&typeof o.__signal_exit_emitter__.count=="number"&&(s+=o.__signal_exit_emitter__.count),n.length===s){this.unload();let a=this.#t.emit("exit",null,r),u=r==="SIGHUP"?this.#n:r;a||t.kill(t.pid,u)}};this.#o=t.reallyExit,this.#a=t.emit}onExit(t,r){if(!Ri(this.#e))return()=>{};this.#r===!1&&this.load();let n=r?.alwaysLast?"afterExit":"exit";return this.#t.on(n,t),()=>{this.#t.removeListener(n,t),this.#t.listeners.exit.length===0&&this.#t.listeners.afterExit.length===0&&this.unload()}}load(){if(!this.#r){this.#r=!0,this.#t.count+=1;for(let t of hn)try{let r=this.#i[t];r&&this.#e.on(t,r)}catch{}this.#e.emit=(t,...r)=>this.#s(t,...r),this.#e.reallyExit=t=>this.#c(t)}}unload(){this.#r&&(this.#r=!1,hn.forEach(t=>{let r=this.#i[t];if(!r)throw new Error("Listener not defined for signal: "+t);try{this.#e.removeListener(t,r)}catch{}}),this.#e.emit=this.#a,this.#e.reallyExit=this.#o,this.#t.count-=1)}#c(t){return Ri(this.#e)?(this.#e.exitCode=t||0,this.#t.emit("exit",this.#e.exitCode,null),this.#o.call(this.#e,this.#e.exitCode)):0}#s(t,...r){let n=this.#a;if(t==="exit"&&Ri(this.#e)){typeof r[0]=="number"&&(this.#e.exitCode=r[0]);let s=n.call(this.#e,t,...r);return this.#t.emit("exit",this.#e.exitCode,null),s}else return n.call(this.#e,t,...r)}},Ra=globalThis.process,{onExit:lf,load:zF,unload:VF}=q0(Ri(Ra)?new La(Ra):new Ba);var ff=Fs.default.stderr.isTTY?Fs.default.stderr:Fs.default.stdout.isTTY?Fs.default.stdout:void 0,H0=ff?cf(()=>{lf(()=>{ff.write("\x1B[?25h")},{alwaysLast:!0})}):()=>{},pf=H0;var ki=!1,On={};On.show=(e=Pa.default.stderr)=>{e.isTTY&&(ki=!1,e.write("\x1B[?25h"))};On.hide=(e=Pa.default.stderr)=>{e.isTTY&&(pf(),ki=!0,e.write("\x1B[?25l"))};On.toggle=(e,t)=>{e!==void 0&&(ki=e),ki?On.show(t):On.hide(t)};var ka=On;l();l();function Na(e){return Number.isInteger(e)?Ci(e)===2:!1}var G0=new Set([27,155]),U0="0".codePointAt(0),z0="9".codePointAt(0),_a=new Set,Oa=new Map;for(let[e,t]of tr.codes)_a.add(tr.color.ansi(t)),Oa.set(tr.color.ansi(e),tr.color.ansi(t));function V0(e){if(_a.has(e))return e;if(Oa.has(e))return Oa.get(e);e=e.slice(2),e.includes(";")&&(e=e[0]+"0");let t=tr.codes.get(Number.parseInt(e,10));return t?tr.color.ansi(t):tr.reset.open}function J0(e){for(let t=0;t<e.length;t++){let r=e.codePointAt(t);if(r>=U0&&r<=z0)return t}return-1}function Y0(e,t){e=e.slice(t,t+19);let r=J0(e);if(r!==-1){let n=e.indexOf("m",r);return n===-1&&(n=e.length),e.slice(0,n+1)}}function K0(e,t=Number.POSITIVE_INFINITY){let r=[],n=0,s=0;for(;n<e.length;){let o=e.codePointAt(n);if(G0.has(o)){let c=Y0(e,n);if(c){r.push({type:"ansi",code:c,endCode:V0(c)}),n+=c.length;continue}}let a=Na(o),u=String.fromCodePoint(o);if(r.push({type:"character",value:u,isFullWidth:a}),n+=u.length,s+=a?2:u.length,s>=t)break}return r}function mf(e){let t=[];for(let r of e)r.code===tr.reset.open?t=[]:_a.has(r.code)?t=t.filter(n=>n.endCode!==r.code):(t=t.filter(n=>n.endCode!==r.endCode),t.push(r));return t}function X0(e){return mf(e).map(({endCode:n})=>n).reverse().join("")}function Ia(e,t,r){let n=K0(e,r),s=[],o=0,a="",u=!1;for(let c of n){if(r!==void 0&&o>=r)break;c.type==="ansi"?(s.push(c),u&&(a+=c.code)):(!u&&o>=t&&(u=!0,s=mf(s),a=s.map(({code:f})=>f).join("")),u&&(a+=c.value),o+=c.isFullWidth?2:c.value.length)}return a+=X0(s),a}var Z0=24,ja=({columns:e=80})=>e,Q0=(e,t)=>{let r=e.rows??Z0,n=t.split(`
`),s=Math.max(0,n.length-r);return s?Ia(t,pn(n.slice(0,s).join(`
`)).length+1):t};function df(e,{showCursor:t=!1}={}){let r=0,n=ja(e),s="",o=()=>{s="",n=ja(e),r=0},a=(...u)=>{t||ka.hide();let c=Q0(e,u.join(" ")+`
`),f=ja(e);c===s&&n===f||(s=c,n=f,c=jr(c,f,{trim:!1,hard:!0,wordWrap:!1}),e.write(Ss.eraseLines(r)+c),r=c.split(`
`).length)};return a.clear=()=>{e.write(Ss.eraseLines(r)),o()},a.done=()=>{o(),t||ka.show()},a}var ey=df(Ma.default.stdout),rt=ey,hv=df(Ma.default.stderr);function hf(){let e,t=!1,r="",n=!0,s=H({arrows:H({interval:120,frames:["\u25B9\u25B9\u25B9\u25B9","\u25B8\u25B9\u25B9\u25B9","\u25B9\u25B8\u25B9\u25B9","\u25B9\u25B9\u25B8\u25B9","\u25B9\u25B9\u25B9\u25B8"]}),brielle:H({interval:50,frames:["\u280B","\u2819","\u2839","\u2838","\u283C","\u2834","\u2826","\u2827","\u2807","\u280F"]}),spinning:H({interval:60,frames:["\u25D0","\u25D3","\u25D1","\u25D2"]})}),o=H({label:"",line:!0,color:null,style:"brielle",action:null}),a=function(c,f){let p=H(o);N(c)?p=oe(p,c):U(c)&&(p.label=c,N(f)&&(p=oe(p,f))),t=!0,n=p.line;let d,g=0,b,y=0;p.action!==null?(p.style="arrows",d=w("color",p.action)?p.action.color:Ee,b=s.arrows.frames,y=b.length):(d=Ze(p.color)?p.color:zt,r=p.label,b=s[p.style].frames,y=b.length),rt.done(),e=setInterval(()=>{if(!t)return;let v;if(p.action!==null){let M=fe(h(p.action.before),b[g=++g%y],p.action.after);v=d(r!==""?R(r,M):M)}else v=d(fe(b[g=++g%y],r));rt(p.line?yr(v):v)},s[p.style].interval)};return a.update=function(u){r=u},a.stop=function(u){t!==!1&&(t=!1,u?(rt(n?yr(u):u),rt.done()):rt.clear(),clearInterval(e),e=void 0,r="")},mt(a,"active",{get(){return t}}),a}l();l();var gf=e=>Se(e.replace(/('[{}_\w\s.-]*?'|"[\w\s.-]*?")/g,Dt("$1")).replace(/({{2}-?[a-zA-Z0-9_\-.'"[\]]+-?}{2})/g,un("$1")).replace(/((?:www|http:|https:)+[^\s]+[\w])/g,dr("$1")).replace(/(\/)(.*?)(\/)/g,un("$1")+ge("$2")+un("$3")).replace(/(\\)(\W)/g,m("$1")+ge("$2")).replace(/(:)(?= )/g,m("$1")).replace(/(?<=Filename\s)([\w._-]+)(?=\salready)/,ge.bold("$1"))),yf=e=>e.replace(/({%|{%-}|-%}|%}|{{|{{-|}}|-}}|<\/?|>|:|,)/g,ge("$1")).replace(/(['"].*?['"])/g,m("$1")),ty=e=>{let t="",r=e.indexOf("- Valid syntax:");return r>-1?(t=`
`+e.slice(r).slice(1).replace(/(Valid syntax)(:)(.*)/,Se("$1")+m("$2")+un("$3")),e.slice(0,r)+t):e},Df=(e,t)=>{let r=[],n=/\(line \d+\):/,s=/'(.*?)'/,o="  ",a=i.terminal.cols-10,u=NaN,c=NaN,f=0;U(e);let p=[];for(let d=0,g=e.length;d<g;d++){let b=e[d];if(n.test(b)){let y=b.indexOf("):"),v=b.indexOf("(line");if(y>-1&&v>-1&&(r.unshift(pe(C.red,le.bold(b.slice(0,y+2)),`
`,C.redTrim)),u=Number(b.slice(v+6,y)),f=Te(u).length+3,b=ty(b.slice(y+2)),r.push(pe(gf(hs(b,{line:C.red,color:Se})),`
`,C.redTrim,`
`,C.redTrim)),t.length>1)){let M=pe(C.redTrim," ".repeat(f-Te(u-1).length),O(`${u-1}`)," ",C.trim),I=pe(C.redTrim," ",le.bold(">")," ",O(`${u}`)," ",C.trim),ee="",W=t[u-1].replace(/\t/g,"  ").trimEnd(),Z=W.match(/^\s*/)[0];s.test(b)&&(ee=b.match(s)[1],c=t[u-1].indexOf(ee),c<0&&(c=NaN));let Q=t[u-2].replace(/\t/g,"  ").trimEnd(),We=Q.match(/^\s*/)[0].length;Z.length===We?(Q="  "+Q.trimStart(),o="  "):Z.length<We?(Q="    "+Q.trimStart(),o="  "):(Q="  "+Q.trimStart(),o="    "),Q.length>a&&(Q=Q.slice(0,a-3)+"..."),p.push(M+m(Q)),W=o+W.trimStart(),W.length>a&&(W=W.slice(0,a-3)+"..."),isNaN(c)?p.push(pe(I,$(yf(W)),`
`,C.redTrim)):p.push(I+$(yf(W)),pe(C.redTrim," ".repeat(f-1),_r," ",C.redTrim," ".repeat(W.indexOf(ee)),Se("^".repeat(ee.length)),`
`+C.redTrim))}}else r.push(gf(hs(b,{line:C.red,color:Se})))}return{line:u,column:c,output:r.join(`
`)+`
`+p.join(`
`)}};function bf(e){let t=e.split(`
`).reduce((s,o)=>{let a=xl(o),u="",c="";if(a!==!1)if(a.length>2){let p=vl(a,a.length/2);u=pe(p[0]),c=pe(p[1]||"")}else u=a[0],c=a[1]||"";let f=o.trim().replace(new RegExp(i.cwd,"g"),"");if(f.length===0)s.push([C.trim]);else{let p=[],d=jr(f,i.terminal.wrap,{hard:!0}).split(`
`);for(;d.length!==0;){let g=d.shift();d.length!==0&&d[0].length===1&&(g=g+d.shift()),p.push(C.line+u+g+c)}s.push(p)}return s},[]),r=[],n=!1;for(;t.length!==0;){let s=t.shift();t.length!==0&&s.length>1?(r.length>0&&r[r.length-1]!==C.trim&&r.push(C.trim),r.push(s.join(`
`))):s===C.trim?n?n=!1:(n=!0,r.push(s[0])):r.push(s[0])}rt(r.join(`
`))}function dt(e,t,r){let s=oe({log:!0,store:!1},r);s.store===!0&&(s.data=H());let o=Ut("error.asset",t.data)?t.data.error.asset:Ut("errors.asset",t.data)?t.data.errors.asset:null;if(t.status===422){let{value:f}=JSON.parse(t.config.data).asset,{output:p,line:d,column:g}=Df(o,f.split(`
`)),b=H({stack:!1,entries:H({column:g,line:d,file:se+e,details:t.statusText,status:$(Te(t.status)),processor:Ln("SHOPIFY API")})}),y=X({type:"error"}).NL.Insert(p,m).NL.Context(b).toString();return s.store&&(s.data.message=p,s.data.rawMessage=il(p),s.data.context=b),s.log&&xe(y),s.store?s.data:y}if(t.status in ha){let f=X({type:"error"}).NL.Wrap(ha[t.status]).toLine(),p=H({stack:!1,entries:H({status:t.status,message:t.statusText,source:`${e}`})});s.store&&(s.data.message=f,s.data.context=p);let d=pe(C.red,`
`,f,kn(p));return s.log&&xe(d),s.store?s.data:d}let a=le("Unknown error has occured"),u={stack:!1,entries:{status:t.status,message:t.statusText,source:`${e}`}};s.store&&(s.data.message=a,s.data.context=u);let c=pe(C.red,`
`,a,kn({stack:!1,entries:H({status:t.status,message:t.statusText,source:`${e}`})}));return s.log&&xe(c),s.store?s.data:c}function Jt(e,t){let r={stack:!1,entries:{...t}},n=e instanceof Error?w("message",e)?e.message:e.toString():e;w("stack",e)&&(r.stack=e.stack),w("code",e)&&(r.entries.code=e.code),w("name",e)&&(r.entries.name=e.name),r.stack===!1?(xe(pe(Ai(n,{type:"error"}),kn(r))),process.exit(0)):i.errors.add(pe(Ai(n,{type:"error"}),kn(r)))}var He=(e,t)=>r=>{xe(pe(Ai(r.message,{type:"error"}),kn({stack:r.stack,entries:{...t,code:r.code,name:r.name,details:e}})))};function gn(e,t){e.fileName=t.base;let r=H(),n,s=X({type:"error"}).NL.Wrap(e.message.split(`
`)[0],le.bold).NL;if(w("codeFrame",e)){s.Newline();let u=e.codeFrame.split(`
`),c=e.rawCodeFrame.split(`
`),f=0;for(;u.length!==0;){if(w("line",r)===!1){let p=c[f].trimStart();if(p[0]===">"){let d=p.slice(1).trimStart().match(/^\d+/);d!==null&&(n=Number(d[0]))}}s.Line(u.shift()),f=f+1}s.Newline()}let o=[],a=e.stack.split(`
`);for(;a.length!==0;)o.push(C.red+a.shift());i.errors.add(o.join(`
`)),xe(s.NL.Context({stack:!0,entries:{line:n,name:e.name,file:se+t.relative,processor:Ln("JSON")}}).toString())}function wf(e,t){let r=X({type:"error"}).NL.Wrap(t.sassMessage,le.bold).Newline();if(w("span",t)){let{span:n}=t,s=w("context",n)?n.context:n.text;if(s.length===0)return"";r.Newline();let{start:o,end:a}=n,u=Te(a.line+1).length;if(o.line===a.line){let c=u-Te(a.line).length;o.line>1&&r.Line(`${" ".repeat(c)+O(`${a.line}`)} ${C.trim}`),c=u-Te(a.line+1).length,r.Line(`${" ".repeat(c)+O(`${a.line+1}`)} ${C.trim} ${s.trimEnd()}`),r.Line(`${" ".repeat(u-1)+_r} ${C.redTrim} ${" ".repeat(a.column)+h("^")}`)}else{let f=s.slice(n.start.offset,n.end.offset).split(`
`),p=n.start.line+1;for(let d of f){let g=Te(p++),b=u-g.length,y=b===0?"":" ".repeat(b);r.Line(`${y+O(g)} ${C.trim} ${d}`)}}}xe(r.NL.Context({stack:t.sassStack,entries:{line:t.span.start.line,name:t.name,input:e.input,cause:t.cause,processor:Ln("SASS Dart")}}).toString())}function xf(e){let t=X({type:"error"}).NL.Wrap(e.text,le.bold).Newline(),r=e.location,n=Te(r.line).length,s=n-Te(e.location.line).length;r.line>1&&t.Line(`${" ".repeat(s)+O(`${r.line-1}`)} ${C.trim}`),s=n-Te(r.line).length,xe(t.Line(`${" ".repeat(s)+O(`${r.line}`)} ${C.trim} ${r.lineText}`).Line(`${" ".repeat(n-1)+_r} ${C.redTrim} ${" ".repeat(r.column)+h("^")}`).NL.NL.Context({stack:!1,entries:{suggest:q(r.suggestion),line:e.location.line,column:e.location.column,plugin:e.pluginName,namespace:r.namespace,file:se+e.location.file,processor:Ln("ESBuild")}}).toString())}function Sf(e,t){let r=[],n=ds(t.stack,{pretty:!0,basePath:i.cwd}).split(`
`);for(;n.length!==0;)r.push(C.red+n.shift());i.errors.add(r.join(`
`)),xe(X({type:"error"}).NL.Wrap(`${t.name}${k} ${t.reason}`,le.bold).Newline().Multiline(t.showSourceCode(!0)).NL.NL.Context({stack:!0,entries:{line:t.line,column:t.column,source:e.input,file:e.input===t.file?void 0:t.file,plugin:O(t.plugin),processor:Ln("PostCSS")}}).toString())}l();var Bf=require("path");l();var Ff=require("process");var Wr={};function at(e){return Je(e,Wr)||(Wr[e]=[]),(t,r)=>{ce(r)?Wr[e].push(ne(t)):Wr[e].push(ne(t+k+" "+h(r)))}}function te({option:e,name:t,provided:r,expects:n}){xe(X({type:"error"}).Line("TYPE ERROR",h).NL.Line(`An invalid ${we(e)} type value was provided within your ${h(i.file.base)} file.`).Line(`The ${we(t)} option has an incorrect type. Syncify will not intialize until this is fixed.`).NL.Line(`provided${k} ${ne(gt(r).toLowerCase())}`).Line(`expected${k} ${O(n.replace(/([|,])/g,m("$1")))}`).Line(`location${k} ${se}${m.underline(i.file.base)}`).NL.Line("How to fix?",m.bold).Line(`You need to change the option value to use the ${O("expected")} type.`,m).Line(`Use the ${$("defineConfig")} named export for type checking`,m).End(i.log.group).BR.toString()),process.exit(0)}function vs({message:e,expected:t,provided:r=void 0,fix:n}){r?t=q(`syncify ${t}`):(r=Ff.argv.slice(2).join(" "),t=q(`syncify ${r} ${we(t.replace(/([|,-])/g,m("$1")))}`)),xe(X({type:"error"}).Line("COMMAND ERROR",h).NL.Wrap(e).NL.Line(`provided${k} ${q("$")} ${q("syncify "+r)}`).Line(`expected${k} ${q("$")} ${t}`).NL.Line("How to fix?",m.bold).Wrap(n,m).NL.End(i.log.group).BR.toString()),process.exit(0)}function vf({type:e,message:t,provided:r,expected:n,fix:s}){ms.test(r)&&(r=r.replace(ms,m("$1"))),ms.test(n)&&(n=n.replace(ms,m("$1"))),xe(X({type:"error"}).Line("INVALID TARGET",h).NL.Wrap(`Invalid ${we(e)} target provided. `,...t).NL.Line(`provided${k} ${ne(n)}`).Line(`expected${k} ${O(r)}`).NL.Line("How to fix?",m.bold).Wrap(s,m).End(i.log.group).BR.toString()),process.exit(0)}function Wa(e){let t=X({type:"error"}).Line("DEPENDENCY ERROR",h).NL;if(U(e))t.Wrap(`Missing ${we(e)} dependency. You need to install ${we(e)} to use it as a processor.`).NL.Line("How to fix?",m.bold).Line("Install the above module as a development dependency, for example:").NL.Line(`$ pnpm add ${e} -D`,q);else{let r=[`Missing ${we(`${e.length}`)} dependencies. You are attempting to use processor`,"(transforms) which are not yet installed. Install the below modules as development","dependencies or disable the transform:"];t.Wrap(r).Newline();for(let n of e)t.Line(`$ pnpm add ${n} -D`,q)}xe(t.NL.Wrap("If you are using a different package manager please consider adopting pnpm.",m).End(i.log.group).BR.toString()),process.exit(0)}function Cf({option:e,key:t,expects:r,reason:n}){e.indexOf(".")>-1&&(e=e.split(".").filter(Boolean).join(m(" \u2192 "))),xe(X({type:"error"}).Line("MISSING OPTION",h).NL.Wrap(`Missing ${xa("CB",we(e))} config option. The ${we(t)} option must be defined`).NL.Line(`expected${k} ${O(r.replace(/([|,])/g,m("$1")))}`).Line(`location${k} ${m.underline(i.file.base)}`).NL.Line("Why?",m.bold).Wrap(n,m).End(i.log.group).BR.toString()),process.exit(0)}function nt({option:e,name:t,value:r,expects:n,reason:s=[""]}){e.indexOf(".")>-1&&(e=e.split(".").filter(Boolean).join(m(" \u2192 "))),xe(X({type:"error"}).Line("INVALID ERROR",h).NL.Wrap(`Invalid ${we(e)} configuration. The ${we(t)} option is invalid. `,...s).NL.Line(`provided${k} ${ne(r)}`).Line(`expected${k} ${O(n.replace(/([|,])/g,m("$1")))}`).NL.Line("How to fix?",m.bold).Line("You need to update the option and use one of the expected values.",m).Line(`Use the ${$("defineConfig")} named export for type checking`,m).End(i.log.group).BR.toString(le)),process.exit(0)}function Ef(e){xe(X({type:"error"}).Line("MISSING REFERENCE",h).NL.Line(`You have not provided any ${h("stores")} within your ${we("package.json")} file.`).NL.Line("How to fix?",$.bold).Line(`You need to provide ${we("stores")} via ${we("syncify")} key`,m).Line("passing both your store name and a key > value list of theme targets.",m).NL.Line("{",m).Line('  "syncify": {'.replace(/"/g,$('"')),m).Line('    "stores": {'.replace(/"/g,$('"')),m).Line(`      "domain": "${Se("your-store")}"`.replace(/"/g,$('"')),m).Line('      "themes": {}'.replace(/"/g,$('"')),m).Line("    }",m).Line("  }",m).Line("}",m).NL.Line(`Replace the ${$("your-store")} with the name of your .myshopify domain.`,m).Line("Syncify will prompt you and provide a list of theme targets to select from.",m).NL.End(i.log.group).BR.toString()),process.exit(0)}function $f(e){xe(X({type:"nil"}).Line(`${`Missing ${we("syncify.config.js")} configuration`}`,h).BR.Line("Unable to resolve a configuration file within the workspace").BR.Line(`at${k} ${m.underline("~"+e)}`).BR.Line("How to fix?",$.bold).Line("You need to add one the following files to your project",m).BR.Line(` - ${$("syncify.config.ts")}`,m).Line(` - ${$("syncify.config.js")}`,m).Line(` - ${$("syncify.config.mjs")}`,m).Line(` - ${$("syncify.config.cjs")}`,m).Line(` - ${$("syncify.config.json")}`,m).BR.Line(`You can also provide configuration in your ${$("package.json")}`,m).Line(`file using the ${we('"syncify": { "config": {} }')} 'property.`,m).BR.toString(le)),process.exit(0)}function Ni(e){let t=[`Missing ${we(".env")} credentials. Syncify could not resolve credentials within the workspace.`,`Check you have ${we(".env")} file present in the root of your project`];xe(X({type:"error"}).Line("MISSING ENV",h).NL.Wrap(t).NL.End(i.log.group).BR.toString(le)),process.exit(0)}function Af(e,t){let r=e instanceof Error?Je("message",e)?e.message:e.toString():e;Je("code",e)&&(t.entries.code=e.code),Je("name",e)&&(t.entries.name=e.name),xe(X({type:"error"}).Line("ERROR",h).NL.Wrap(t.message,Se).NL.Wrap(r,Se.bold).NL.Line("How to fix?",m.bold).Wrap(t.solution,m).NL.Context({entries:t.entries}).NL.End(i.log.group).BR.toString()),process.exit(0)}function ht(e,t){xe(X({type:"error"}).Line("ERROR",h).NL.Wrap(e).NL.Line("How to fix?",m.bold).Wrap(t,m).NL.End(i.log.group).BR.toString()),process.exit(0)}function Oi(e,t){e.indexOf(".")>-1&&(e=xa("CB",fe(e.split(".").filter(Boolean).join(m(" \u2192 ")),_,Se.bold(t)),{spaced:!0}));let r=i.file.base==="package.json"?`${O("syncify")} config in the ${O("package.json")} file.`:`${O(i.file.base)} file.`;xe(X({type:"error"}).Line("ERROR",h).NL.Line(`Unknown ${we(e)} option provided.`).NL.Line("How to fix?",m.bold).Line(`The ${we(t)} option is invalid or unsupported.`).Line(`You need to remove it from the ${r}`).End(i.log.group).BR.toString()),process.exit(0)}var Pt=function(e){if(Cs(),e.log.config.silent)return;e.env.tree=!0;let t=X().BR.Top("Syncify").NL.Line(`v${e.version}`,h.whiteBright);e.terminal.cols<80&&t.Newline("red").Error("TERMINAL WIDTH WARNING",h).Newline("red").Error(`Your terminal width is below ${h("100")} columns (currently ${h(`${e.terminal.cols}`)})`).Error("This is not recommended for usage with Syncify (size matters).").Error("Expand your terminal wider for an optimal logging experience."),T(t.toLine())};Pt.time=function(){T(yr(V(`Started in ${A.stop("runtime")}`)))};Pt.modes=function(e){let t=X(),r=e.env.prod?"--prod":"--dev";if(e.mode.themes)return T(t.Wrap("Select theme target/s to be inserted into your package.json file.","You will be given a code example after selecting where you will define","a custom target name. If you would like to create a new theme, then run",`the ${we("publish")} resource`,m).toLine());if(e.mode.cache&&(r!==""?r+=` ${se} cache`:r+="cache"),e.mode.clean&&(r!==""?r+=` ${se} clean`:r+="clean"),e.spawn.invoked&&(r!==""?r+=` ${se} build`:r+="build"),e.mode.build&&(r!==""?r+=` ${se} build`:r+="build"),e.mode.export&&(r!==""?r+=` ${se} export`:r+="export"),e.mode.publish&&(r!==""?r+=` ${se} publish`:r+="publish"),e.mode.import&&(r!==""?r+=` ${se} import`:r+="import"),e.mode.watch&&(r!==""?r+=` ${se} watch`:r+="watch",e.mode.hot&&(r+=` ${se} hot`)),r!==""&&(t.Line(r,m),r=""),!nn(e.filters)){t.NL.Line(`Filters${k}`,$.bold);let n=jt(e.filters);for(let s in e.filters){let o=$(e.filters[s].map(a=>(0,Bf.relative)(e.cwd,a)).join(", "));t.Line(` ${se} ${s}${k}${n(s)}${o}`,ge)}}T(t.toLine())};Pt.spawns=function(e){if(e.mode.build||e.mode.watch){let t=X().Line(`Spawned${k}`,$.bold),r=jt(e.spawn.commands);for(let n in e.spawn.commands){let s=r(n),o=e.spawn.commands[n].pid;t.Line(` ${se} ${ge(n)}${k}${s}PID ${_} #${zt(`${o}`)}`,m)}T(t.toLine())}};Pt.stores=function(e){let t=X(),r=e.sync.themes.length;kr(e.mode.upload,e.mode.import,e.mode.build,e.mode.clean)&&r>0&&(t.Line(`Editors${k}`,h.white),Tf(t,e.sync.themes,"editor")),Oc(e.mode.upload,e.mode.import,e.mode.watch)&&r>0&&(e.mode.upload||e.mode.import?t.NL.Line(`Targets${k}`,h.white):t.NL.Line(`Previews${k}`,h.white),Tf(t,e.sync.themes,"preview")),T(t.toLine())};Pt.warnings=function(t){if(!t.log.config.warnings)return;let r=pr(Wr),n=r.reduce((o,a)=>(o=o+Wr[a].length,o),0);if(n===0)return;let s=X({type:"warning"}).Line(`${n} ${Lt("Warning",n)}`,h);for(let o of r){let a=Wr[o];if(a.length>0){a.length===n?s.Newline().Line(`${o} ${Lt("Warning",a.length)}`,h).Newline():s.Newline().Line(`${a.length} ${o} ${Lt("Warning",a.length)}`,h);for(let u of a)s.Line(`${cn} ${u}`,ne)}}An(s.toString())};function Tf(e,t,r){let n=t.reduce((s,{target:o,store:a})=>{let u=a.indexOf(".");return u>s.store&&(s.store=u),o.length>s.theme&&(s.theme=o.length),s},{store:0,theme:0});for(let{target:s,store:o,id:a}of t){let u=o.slice(0,o.indexOf(".")),c=r==="editor"?`https://${o}/admin/themes/${a}/editor`:`https://${o}?preview_theme_id=${a}`;e.Line(fe(" ",se,zt(u)," ".repeat(n.store-u.length),_," ",zt.bold(s)," ".repeat(n.theme-s.length),_," ",m.underline(c)))}}var Yt=hf(),qa=[],ji=e=>{T(Zl(e.width,e.newlines))},ut=(e,{color:t,type:r=null,prefix:n=null,suffix:s=null}={})=>{r==="error"?n===null?xe(fe(ys(t?t(e):Se(e)),Oe(s))):xe(ys((t||Se)(R(n,fe(e,Oe(s)))))):r==="warning"?n===null?T(Mr(fe(t?t(e):ne(e),Oe(s)))):T(Mr((t||ne)(R(n,fe(e,Oe(s)))))):n===null?T(be(fe(t?t(e):q(e),Oe(s)))):T(be((t||q)(R(n,fe(e,Oe(s))))))};var _e=e=>{e===""?T(`
`):e==="red"?T(C.red):e==="yellow"?T(C.yellow):T(C.line)};var Cs=(e=!1)=>{if(e===!1&&i.log.config.clear===!1)return;let t=Es.stdout.rows-2;T(t>0?`
`.repeat(t):""),(0,_i.cursorTo)(Es.stdout,0,0),(0,_i.clearScreenDown)(Es.stdout)},Ft=e=>{i.log.config.silent||i.env.tree===!1||(T(Ds(i.log.group)),i.log.config.clear&&e!==!1&&Cs(),U(e)&&(i.log.group=e,T(`
`+gs(i.log.group))))},Lf=e=>{i.log.config.silent||i.env.tree===!1||(U(e)?T(Sa(m(e)+" "+Oe(Rn()))):(Cs(),T(C.line+`
`+Sa(fe(m(i.log.group),Oe(Rn()))))))},Kt=(e,...t)=>{i.mode.export||i.mode.build||i.log.config.silent||(t.length===2?T(be(q(R("process",fe(h(e),Br,t[0],Oe(t[1])))))):T(be(q(R("process",fe(h(e),Oe(t[0])))))))},Mi=e=>{if(i.log.config.silent===!0||i.mode.watch===!1)return;A.start();let t=fe(e.kind,Br,Ir(e.namespace)),r=w(e.relative,i.log.changes)?i.log.changes[e.relative]+1:1;i.log.changes[e.relative]=r,i.log.group!==t?(_e(),Ft(t),i.log.title!==e.namespace&&(i.log.title=e.namespace)):i.log.config.clear&&(_e(),Ft(t)),i.log.uri!==e.relative&&(i.log.uri=e.input),T(Ql(ge(R("changed",fe(e.relative,Oe(`${r} change${r>1?"s":""}`)))))),qa.length>0&&T(qa.shift())},Mt=(...e)=>{i.mode.export||i.mode.build||i.log.config.silent||(e.length===1?T(be(q(R("minified",h(e[0]))))):e.length===4?T(be(q(R("minified",fe(h(e[0]),_,e[1],fs,e[2],se,"saved",e[3]))))):T(be(q(R("minified",fe(h(e[0]),fs,e[1],se,"saved",e[2],Oe(A.now())))))))},Ge=(e,{hot:t=!1}={})=>{i.mode.export||i.mode.build||i.log.config.silent||(i.warnings.has(e)&&T(Mr(ne(R("warning",fe(Te(i.warnings.get(e).size),Lt("warning",i.warnings[e].size),dn.warning))))),T(be(gi(R("syncing",e)))),re.pending>(t?0:2)&&T(be(Dt(R("queued",fe(e,se,h(wi(re.pending)),"in queue"))))))},$s=(e,t)=>(T(be(Dt(R("prompt",e))),Ds(i.log.group)),N(t)&&Ii.default.notify(t).notify(),()=>T(gs(i.log.group))),Ha=(e,t)=>{if(i.mode.watch){if(i.log.queue.add([e,t.domain,A.stop()]),i.log.idle)return;i.log.idle=!0,re.onIdle().then(()=>{for(let[r,n,s]of i.log.queue)T(be(Ee(R("uploaded",fe(h(r),_,n,Oe(s))))));i.log.queue.clear(),i.log.idle=!1})}else T(be(Ee(R("uploaded",fe(h(e),_,t.domain,Oe(A.stop()))))))},Rf=e=>{if(!i.log.config.silent)if(i.mode.watch){if(i.log.queue.add([e.target,e.store,A.stop()]),i.log.idle)return;i.log.idle=!0,re.onIdle().then(()=>{for(let[t,r,n]of i.log.queue)T(be(Ee(R("uploaded",h(t),r,n))));i.log.queue.clear(),i.log.idle=!1})}else T(be(Ee(R("uploaded",h(e.target),e.store,A.stop()))))},Dr=(e,t)=>{T(ys(le(R("invalid",e)))),Ii.default.notify({title:"Syncify Error",sound:"Pop",open:e,subtitle:e,message:"Invalid error"}).notify(),t&&xe(rf(t,{type:"error",color:le.bold}))},qe=(e,{suffix:t=null,notify:r=null}={})=>{xe(ys(le(R("error",t?e+" "+Oe(t):e)))),r!==null&&Ii.default.notify(r).notify()},Ga=e=>function(...t){i.spawn.invoked||(i.spawn.invoked=!0),i.log.group!=="Spawn"&&(T(Ds(i.log.group)),i.log.group!=="Syncify"&&Cs(),T(gs("Spawn")),i.log.group="Spawn"),i.log.title!==e&&(T(ef(ge(e))),i.log.title=e),bf.call(this,t.toString())},st=(e,t)=>{t?T(Mr(ne(R("warning",e)+Oe(t)))):T(Mr(ne(R("warning",e))))},Ua=(e,t)=>{T(be(Dt(R("retrying",e,t.target,t.store))))},Pf=(e,t)=>{T(be(sl(R("deleted",e,t.target,t.store))))};var Qe=(e,...t)=>{i.mode.build||(t.length>0?T(be(q(R("transform",fe(h(e),_,t[0],t.length===2?fe(_,t[1]):t.length===3?fe(_,t[1],Oe(t[2])):""))))):T(be(q(R("transform",h(e))))))},za=(e,t)=>{T(be(q(R("zipped",fe(h("ZIP"),e,Oe(t))))))},rr=(e,t)=>{i.mode.export||i.mode.build||T(be(R("skipped",fe(U(e)?e:e.key,Oe(t)))))};var Wi=e=>{T(yr(q.bold(e)))},Va=(e,t)=>{qa.push(be(q(R("renamed",fe(h(e),fs,h(t))))))},qi=e=>{T(be(yi(R("reloaded",fe(h("HOT RELOAD"),Oe(A.now(e)))))))},kf=(e,t)=>{i.mode.build||T(be(un(R("exported",fe(h(e),_,h(t))))))};var Hi=(e,t)=>{T(be(q(R("version",fe(e.number,fs,e.update.number,Oe(t))))))};async function Nf(e,t){let r=De(i.sync.stores[t.sidx].client,{method:"get",url:t.url,params:{"asset[key]":e}});return $n(r).then(({data:n})=>n.asset.value).catch(()=>!1)}async function Ja(e,t){let r=De(t,{method:"get",url:e.url});try{let{data:n}=await $n(r);return n}catch(n){if(n.response&&(n.response.status===429||n.response.status===500))t.params["asset[key]"]&&(Ua(t.params["asset[key]"],e),re.add(()=>Ja(e,t)));else{if(i.mode.upload)throw n.response;t.params["asset[key]"]&&(qe(t.params["asset[key]"]),dt(t.params["asset[key]"],n.response))}}}var As;async function Ts(e,t,r){return re.isPaused?void 0:(re.concurrency>2?(As>=20&&re.concurrency--,As>=32&&re.concurrency--,As>=39&&await pt(500)):re.concurrency<3&&As<30&&re.concurrency++,i.mode.upload===!1&&i.mode.import===!1&&A.start(),await $n(r).then(({headers:s,data:o})=>{if(i.mode.import===!1&&r.method==="get")return o;r.method==="delete"?Pf(t.relative,e):i.mode.watch?(i.mode.hot===!0&&t.type!==10&&t.type!==9&&qi(),Rf(e)):i.mode.upload?At.emit("upload",{status:0,get theme(){return e},get file(){return t}}):i.mode.import&&At.emit("import",{status:0,get theme(){return e},get file(){return t},get data(){return o}}),As=parseInt(s["x-shopify-shop-api-call-limit"].slice(0,2),10)}).catch(s=>{if(s.response&&(s.response.status===429||s.response.status===500))i.mode.upload===!1&&i.mode.import===!1&&Ua(t.key,e),re.add(()=>Ts(e,t,r)),i.mode.upload?At.emit("upload",{status:1,get theme(){return e},get file(){return t}}):i.mode.import&&At.emit("import",{status:1,get theme(){return e},get file(){return t}});else{if(i.mode.upload)return At.emit("upload",{status:2,error:s.response,get theme(){return e},get file(){return t}});if(i.mode.import)if(s.response===void 0)At.emit("import",{status:3,get theme(){return e},get file(){return t}});else return At.emit("import",{status:2,error:s.response,get theme(){return e},get file(){return t}});else qe(t.key,{suffix:"shopify rejected the request",notify:{title:"Request Error",message:`Failed to sync ${t.key}`}}),s.isAxiosError&&dt(t.relative,s.response)}return ui}))}l();var Ui=Y(require("axios")),zi=require("fs-extra"),iy=require("path");async function _f(e,t){if(arguments.length===1)return r=>_f(e,r);if(kr(Je("namespace",t),Je("key",t))){Dr("invalid fields");return}return Ui.default.get("metafields.json",e.client).then(({data:r})=>r.metafields.find(n=>t.namespace===n.namespace&&t.key===n.key)).catch(r=>{console.log(r)})}async function Ya(e,t){return arguments.length===1?r=>Ya(e,r):(t.type="json",t.namespace="email",t.value_type="json_string",t.key="eng",Ui.default.post("metafields.json",{metafield:t},e.client).then(({data:r})=>(console.log("created",r),r.metafield)).catch(r=>{if(console.log(r),!e.queue)return dt(t.namespace,r.response);if(on(r.response.status)){re.add(()=>Ya(e,t));return}else return dt(e.store,r.response)}))}async function Ka(e,t,r){return is(arguments.length,1)?(n,s)=>Ka(e,n,s):Ui.default.put(`metafields/${t}.json`,{metafield:r},e.client).then(n=>(console.log("created"),n.data.metafield)).catch(n=>{if(!e.queue)return dt(r.namespace,n.response);if(on(n.response.status))re.add(()=>Ka(e,t,r));else return dt(e.store,n.response)})}async function Gi(e,t){if(is(arguments.length,1))return n=>Gi(e,n);let r=await _f(e,t);return r?Ka(e,r.id,oe(t,{id:r.id,type:"json"})).catch(n=>{if(!e.queue)return dt(t.namespace,n.response);if(on(n.response.status))re.add(()=>Gi(e,t));else return dt(e.store,n.response)}):Ya(e,t)}function Vi({stores:e,themes:t}){return{assets:async(r,n,s)=>{let o=ce(s)?{method:r,params:{"asset[key]":n.key}}:{method:r,data:{asset:{key:n.key,value:s}}};await re.add(()=>fr(t,async a=>{i.mode.upload&&A.start(n.uuid),await Ts(a,n,oe({url:a.url},e[a.sidx].client,o))}))},pages:async(r,n,s)=>{await re.add(()=>fr(e,async o=>{i.mode.upload&&A.start(),console.log(s)}))},metafields:r=>re.add(function(){return qc(async function(n){await Gi(n,r)},e)})}}l();var _t=require("path");l();var vt=require("path");l();var qr=require("path");function Hr(e){return L(e)?e.filter(t=>/\*/.test(t)):/\*/.test(e)?e:null}function yn(e){if(L(e))return e.map(yn);if(e.indexOf("/")===-1)return e;let t=e.endsWith("/")?(0,qr.dirname)(e.slice(0,-1)):(0,qr.dirname)(e),r=t.lastIndexOf("/")+1;return t.slice(r)}function Xa(e){if(L(e))return e.map(Xa);let t=e.lastIndexOf("/");if(t===-1)return e;let r=e.indexOf("*");return r===-1?e.slice(0,t):e.slice(0,r)}function _n(e,t=null){let r=new RegExp(`^\\.?\\/?${e}\\/`);return function n(s){if(Array.isArray(s))return s.map(n);let o=s.charCodeAt(0)===33;if(o&&(s=s.slice(1)),r.test(s))return o?"!"+s:s;if(s.charCodeAt(0)===46&&s.charCodeAt(1)===46&&s.charCodeAt(2)===47&&ht(`Invalid path defined at: ${k} ${ne(`"${s}"`)}`,["Paths must be relative to source"]),t!==null){let a=(0,qr.join)(t,s);return(o?"!":"")+(a.startsWith(e)?a:(0,qr.join)(e,s))}else return(o?"!":"")+(0,qr.join)(e,s)}}l();var xr=require("path"),lu=Y(require("fast-glob")),fu=Y(Gr()),hp=require("fs-extra");l();var cu=require("url"),Nt=require("fs-extra"),et=require("path"),pp=require("esbuild");function mp(e,t,r=(0,et.parse)(t).root){let n=t;for(;n!==r;){let s=(0,et.join)(n,e);if((0,Nt.existsSync)(s))return s;if((0,et.extname)(s)!==".json"){let o=s+".json";if((0,Nt.existsSync)(o))return o}n=(0,et.dirname)(n)}return null}function Gy(e,t){return(0,Nt.existsSync)((0,et.join)(e,t))?(0,et.isAbsolute)(t)?(0,Nt.existsSync)(t)?t:null:mp(t,e):null}function Uy(e,t){return(0,et.isAbsolute)(t)?(0,Nt.existsSync)(t)?t:null:t.startsWith(".")?mp(t,e):require.resolve(t,{paths:[e]})}function dp(e=process.cwd(),t="tsconfig.json",r=!1){e=(0,et.resolve)(e);let n=r?Uy(e,t):Gy(e,t);if(!n)return null;let s=bi((0,Nt.readFileSync)(n,"utf-8")),o=(0,et.dirname)(n);Je("baseURL",s.compilerOptions)&&(s.compilerOptions.baseUrl=(0,et.join)(o,s.compilerOptions.baseUrl));let a=[];if(s.extends){let u=L(s.extends)?s.extends:[s.extends],c={};for(let f of u){let p=dp(o,f,!0);p&&(oe(c,{...p?.data,compilerOptions:{...c.compilerOptions,...p?.data?.compilerOptions}}),a.push(...p.files))}oe(s,{...c,...s,compilerOptions:{...c.compilerOptions,...s.compilerOptions}})}return delete s.extends,{path:n,data:s,files:[...a,n]}}function zy(e,t){return dp(e,t)}function Vy(e,t){return e.replace(Fi,`.bundled_${er()}.${t==="esm"?"mjs":"cjs"}`)}function Jy(e){if(typeof jest>"u")return"cjs";let t=(0,et.extname)(e);return t===".js"?i.pkg.type==="module"?"esm":"cjs":t===".ts"||t===".mjs"?"esm":"cjs"}function Yy(e){return e===null?null:pr(e||{}).map(t=>new RegExp(`^${t.replace(/\*/,".*")}$`))}function fp(e,t){return t?t.some(r=>xi(r)?r.test(e):e===r||e.startsWith(r+"/")):!1}function Ky({external:e,notExternal:t}={}){return{name:"bundle-require:external",setup({onResolve:r}){r({filter:/.*/},async n=>{if(!(n.path.charCodeAt(0)===46||(0,et.isAbsolute)(n.path))){if(fp(n.path,e))return{external:!0};if(!fp(n.path,t))return{external:!0}}})}}}function Xy(){return{name:"bundle-require:inject-file-scope",setup(e){e.initialOptions.define={...e.initialOptions.define,__dirname:"__injected_dirname__",__filename:"__injected_filename__","import.meta.url":"__injected_import_meta_url__"},e.onLoad({filter:Fi},async t=>{let r=await(0,Nt.readFile)(t.path,"utf-8"),n=[`const __injected_filename__ = ${JSON.stringify(t.path)};`,`const __injected_dirname__ = ${JSON.stringify((0,et.dirname)(t.path))};`,`const __injected_import_meta_url__ = ${JSON.stringify((0,cu.pathToFileURL)(t.path).href)};`];return{contents:pe(n)+r,loader:Fl((0,et.extname)(t.path))}})}}}async function Zi(e){if(!Fi.test(e.filepath))throw new Error(`${e.filepath} is not a valid JS file`);let t=e.preserveTemporaryFile??!!process.env.BUNDLE_REQUIRE_PRESERVE,r=e.cwd||i.cwd,n=e.format??Jy(e.filepath),s=e.tsconfig===null?null:zy(r,e.tsconfig),o=Yy(s?.data.compilerOptions?.paths||{});async function a(f){if(!f.outputFiles)throw new Error("[bundle-require] no output files");let{text:p}=f.outputFiles[0],g=(e.getOutputFile||Vy)(e.filepath,n);(0,Nt.writeFileSync)(g,p,"utf8");let b,y=e.require||Sl;try{b=await y(n==="esm"?(0,cu.pathToFileURL)(g).href:g,{format:n})}finally{t||await(0,Nt.unlink)(g)}return{mod:b,dependencies:f.metafile?pr(f.metafile.inputs):[]}}let u=await(0,pp.build)({...e.esbuildOptions,entryPoints:[e.filepath],absWorkingDir:r,outfile:"out.js",format:n,write:!1,platform:"node",sourcemap:"inline",bundle:!0,metafile:!0,plugins:[...Je("plugins",e.esbuildOptions)?e.esbuildOptions.plugins:[],Ky({external:e.external,notExternal:o}),Xy()]});return await a(u)}function gp(){let e=[],t=new Set,r=n=>{let s=`${n}_password`,o=s.toUpperCase();return s in i.env.vars?i.env.vars[s]:o in i.env.vars?i.env.vars[o]:null};for(let n in i.env.vars){let s=n.toLowerCase();if(s.endsWith("_api_token")){let o=s.slice(0,s.indexOf("_api_token")),a=r(o);e.push({domain:o,password:a,themes:{}})}else if(s.endsWith("_api_key")){let o=`${s.slice(0,s.indexOf("_api_key"))}`;if(!t.has(o)){let a=r(o);e.push({domain:o,password:a,themes:{}}),t.add(o)}}else if(s.endsWith("_api_secret")){let o=`${s.slice(0,s.indexOf("_api_secret"))}`;if(!t.has(o)){let a=r(o);e.push({domain:o,password:a,themes:{}}),t.add(o)}}}if(e.length>0)return e;Ni(i.cwd)}function yp(e){let t=e+"_api_token";if(w(t,i.env.vars)||(t=t.toUpperCase()),w(t,i.env.vars))return{baseURL:`https://${e}.myshopify.com/admin`,headers:{"X-Shopify-Access-Token":i.env.vars[t]}};let r=e+"_api_key",n=e+"_api_secret";if(w(r,i.env.vars)||(r=r.toUpperCase()),w(n,i.env.vars)||(n=n.toUpperCase()),w(r,i.env.vars)&&w(n,i.env.vars))return{baseURL:`https://${e}.myshopify.com/admin`,auth:{username:i.env.vars[r],password:i.env.vars[n]}};ht(`Invalid or missing ${we(e+".myshopify.com")} credentials`,[`Your shop credentials in the ${we.bold((0,xr.basename)(i.env.file))} file could`,"not be read correctly or are missing. Please check your environment file and ensure","you have provided valid authorization."])}function Ot(e,t){let{cwd:r}=i,n=Ze(t)?[]:!1,s=at("Path Resolver"),o=_n(i.dirs.input,i.cwd);if(L(e)){let a=[];for(let u of e){let c=o(u),f=lu.default.sync(c,{cwd:r,absolute:!0});if(n!==!1){let p=t(c);U(p)?n.push(p):L(p)&&n.push(...p)}f.length===0?s("No files can be resolved in",u):a.push(...f)}return n===!1?a:{paths:a,match:(0,fu.default)(n)}}if(U(e)){let a=o(e),u=lu.default.sync(a,{cwd:r});if(u.length===0&&s("No files can be resolved in",e),n!==!1){let c=t(a);U(c)?n.push(c):L(c)&&n.push(...c)}return n===!1?u:{paths:u,match:(0,fu.default)(n)}}te({option:"uri",name:"uri/path",provided:e,expects:"string | string[]"})}function jn(e,t){if(w("assertSnippet",t)||(t.assertSnippet=!0),U(e)){let{paths:r,match:n}=Ot(e,s=>(t.addWatch&&i.watch.add(s),Hr(s)));if(r)return t.flatten?r.map(s=>t.assertSnippet?{input:s,rename:(0,xr.basename)(s),snippet:!1}:{input:s,rename:(0,xr.basename)(s)}):t.assertSnippet?{input:r,rename:"[name].[ext]",snippet:!1,match:n}:{input:r,rename:"[name].[ext]",match:n}}else if(L(e)){if(e.every(U)){let{paths:r,match:n}=Ot(e,s=>(t.addWatch&&i.watch.add(s),Hr(s)));return t.flatten?r.map(s=>t.assertSnippet?{input:s,rename:(0,xr.basename)(s),snippet:!1}:{input:s,rename:(0,xr.basename)(s)}):t.assertSnippet?{input:r,rename:"[name].[ext]",snippet:!1,match:n}:{input:r,rename:"[name].[ext]",match:n}}else if(e.every(N))return e.map(r=>{w("input",r)||nt({option:"tranform",name:"input",value:r,expects:"{ input: string | string[] }"});let{paths:n,match:s}=Ot(r.input,o=>(t.addWatch&&i.watch.add(o),Hr(o)));return r.match=s,r.input=n[0],t.assertSnippet&&!w("snippet",r)&&(r.snippet=!1),w("rename",r)||(r.rename=r.snippet?"[name].liquid":"[name].[ext]"),r})}else if(N(e)){let r=[];if(w("input",e)){let n=De(e),{paths:s,match:o}=Ot(n.input,a=>(t.addWatch&&i.watch.add(a),Hr(a)));if(t.assertSnippet&&!w("snippet",n)&&(n.snippet=!1),w("rename",n)||(n.rename=n.snippet?"[name].liquid":"[name].[ext]"),t.flatten)for(let a of s)r.push(oe({},n,{input:a}));else n.input=s,n.match=o,r.push(n)}else for(let n in e){let s={snippet:n.startsWith("snippets/")},o=n.startsWith("assets/"),a=e[n],u=o||s.snippet;if(U(a)){u&&(s.rename=o?n.slice(7):n.slice(9));let{paths:c,match:f}=Ot(a,p=>(t.addWatch&&i.watch.add(p),Hr(p)));if(c)if(t.flatten)for(let p of c)r.push(oe({},s,{input:p}));else r.push(oe({},s,{input:c,match:f}))}else if(N(a)){w("input",a)||nt({option:"transform",name:n,value:a,expects:"{ input: string | string[] }"});let{paths:c,match:f}=Ot(a.input,p=>(t.addWatch&&i.watch.add(p),Hr(p)));if(c.length>0){let p=u?oe({},a,s,{rename:o?n.slice(7):n.slice(9)}):oe({},s,a);if(t.flatten)for(let d of c)r.push(oe({},p,{input:d}));else r.push(oe(p,{input:c,match:f}))}}else if(L(a))if(a.every(U)){let{paths:c,match:f}=Ot(a,p=>(t.addWatch&&i.watch.add(p),Hr(p)));if(Qy(n)&&(s.rename=(0,xr.basename)(n)),c)if(t.flatten)for(let p of c)r.push(oe({},s,{input:p}));else r.push(oe({},s,{input:c,match:f}))}else te({option:"transform",name:n,provided:a,expects:"string[]"})}return r}}function pu(e,t){return!!(w("devDependencies",e)&&w(t,e.devDependencies)||w("dependencies",e)&&w(t,e.dependencies)||w("peerDependencies",e)&&w(t,e.peerDependencies)||w("optionalDependencies",e)&&w(t,e.peerDependencies))}async function Zy(e){for(let t of Rl){let r=`${e}.${t}`;if(await(0,hp.pathExists)(r))return r}return null}async function mu(e,t){try{let r=await Zy(e);if(r!==null){let n=await Zi({cwd:i.cwd,filepath:r,...t||{}});return{path:r,config:n.mod.syncify||n.mod.default||n.mod}}return null}catch{return null}}function Qy(e){return/\[(?:file|name|dir|ext)\]/.test(e)}function Ur(e,t){let r=t,n=yn(e),s=(0,xr.extname)(e),o=(0,xr.basename)(e,s);if(ce(t))return{dir:n,ext:s,file:o,name:o,base:o+s};/(\[dir\])/.test(r)&&(r=r.replace("[dir]",n)),/(\[name\])/.test(r)&&(r=r.replace("[name]",o)),/(\[file\])/.test(r)&&(r=r.replace("[file]",o)),/(\.?\[ext\])/.test(r)&&(r=r.replace(/\.?\[ext\]/,s));let a=t.replace(t,r);return{ext:s,file:o,dir:n,name:a,base:a+s}}function Dp(e){let t=i.svg.filter(r=>r.input.has(e.input)?!0:r.match(e.input)?(r.input.add(e.input),!0):!1);return ce(t)||mt(e,"data",{get(){return t}}),e}function Rs(e){let t=i.style.find(r=>r.watch(e.input));return ce(t)?(e.type=14,e):(mt(e,"data",{get(){return t}}),t.snippet?(e.namespace="snippets",e.key=(0,vt.join)("snippets",t.rename)):e.key=(0,vt.join)("assets",t.rename),e.output?e.data.rename!==(0,vt.basename)(e.output)&&(t.snippet?e.output=(0,vt.join)(i.dirs.output,e.key):e.output=(0,vt.join)(Xa(e.output),e.data.rename)):e.output=(0,vt.join)(i.dirs.output,e.key),e)}function Ps(e){let t=i.script.filter(r=>r.watch.has(e.input));return t.length===0||mt(e,"data",{get(){return t}}),e}function hu(e,t){return mt(t,"data",{get(){return e}}),t}function gu(e){if(e.base.endsWith("-group.json"))return e;if(i.paths.sections.rename.length>0){let t=i.paths.sections.rename.find(([s])=>s(e.input));if(ce(t))return e;let r=e.base,n=Ur(e.input,t[1]);e.name=n.name,e.ext=n.ext,e.base=n.base,e.key=(0,vt.join)(e.namespace,n.base),e.output=(0,vt.join)((0,vt.dirname)(e.output),n.base),Va(r,e.base)}return e}function bp(e){if(i.paths.snippets.rename.length>0){let t=i.paths.snippets.rename.find(([s])=>s(e.input));if(ce(t))return e;let r=e.base,n=Ur(e.input,t[1]);e.name=n.name,e.ext=n.ext,e.base=n.base,e.key=(0,vt.join)(e.namespace,n.base),e.output=(0,vt.join)((0,vt.dirname)(e.output),n.base),Va(r,e.base)}return e}function eD(e){switch(e){case".liquid":return"Liquid";case".json":return"JSON";case".html":return"HTML";case".md":return"Markdown";case".js":case".mjs":return"JavaScript";case".jsx":return"JSX";case".ts":return"TypeScript";case".tsx":return"TSX";case".svg":return"SVG";case".css":return"CSS";case".scss":return"SCSS";case".sass":return"SASS";case".mov":case".mp4":case".webm":case".ogg":return"Video";case".ico":case".jpg":case".png":case".gif":case".pjpg":case".webp":return"Image";case".eot":case".ttf":case".woff":case".woff2":return"Font";case".pdf":return"PDF";case".yaml":case".yml":return"YAML"}return"Unknown"}function Ns({name:e,dir:t,ext:r,namespace:n},s){let o=s;return/\[dir\]/.test(o)&&(o=o.replace(/\[dir\]/g,t)),/\[name\]/.test(o)&&(o=o.replace(/\[name\]/g,e)),/\[file\]/.test(o)&&(o=o.replace(/\[file\]/g,e)),/\[ext\]/.test(o)&&(o=o.replace(/\[ext\]/g,r)),n==="snippets"&&s.endsWith(".liquid")===!1?o+".liquid":!s.endsWith(".[ext]")||!s.endsWith(r)?/\.[a-z]+$/.test(s)?o:o+r:o}function wp(e,t,r){return e.size=NaN,function(n,s,o){let a;return s===15||s===16?(a=(0,_t.join)(yn(e.dir),e.base),r=null):(a=(0,_t.join)(n,e.base),r=(0,_t.join)(r,a)),o===-1&&(t=i.cache.paths[t]),e.uuid=er(),e.type=s,e.key=a,e.namespace=n,e.kind=o,e.input=t,e.output=r,e.relative=(0,_t.relative)(i.cwd,t),e}}function tD(e,t){let r=e;return(n,s)=>oe({},r,{uuid:er(),key:n,namespace:s,output:t,kind:eD(r.ext),relative:(0,_t.relative)(i.cwd,t)})}function xp(e){return Os(i.paths,i.dirs.output)(e)}function Os(e,t){return function r(n){let s=new Pn((0,_t.parse)(n)),o=wp(s,n,t);if(s.ext===".liquid"){if(e.sections.match(n))return gu(o("sections",4,"Liquid"));if(e.snippets.match(n))return bp(o("snippets",3,"Liquid"));if(e.layout.match(n))return o("layout",2,"Liquid");if(e.templates.match(n))return o("templates",1,"Liquid");if(e.customers.match(n))return o("templates/customers",1,"Liquid");if(e.metaobject.match(n))return o("templates/metaobject",1,"Liquid");if(e.transforms.get(n)===9)return Rs(o("snippets",9,"CSS"))}else{if(s.ext===".schema"&&e.schema.match(n))return hu(r,o("schema",5,"JSON"));if(s.ext===".json"){if(e.metafields.match(n))return o("metafields",15,"JSON");if(e.sections.match(n))return gu(o("sections",4,"JSON"));if(e.templates.match(n))return o("templates",1,"JSON");if(e.config.match(n))return o("config",7,"JSON");if(e.locales.match(n))return o("locales",8,"JSON");if(e.customers.match(n))return o("templates/customers",1,"JSON");if(e.metaobject.match(n))return o("templates/metaobject",1,"JSON");if(e.schema.match(n))return hu(r,o("schema",5,"JSON"))}}switch(s.ext){case".js":case".mjs":return Ps(o("assets",10,"JavaScript"));case".ts":return Ps(o("assets",10,"TypeScript"));case".tsx":return Ps(o("assets",10,"TSX"));case".jsx":return Ps(o("assets",10,"JSX"));case".svg":return Dp(o("assets",11,"SVG"));case".css":return Rs(o("assets",9,"CSS"));case".scss":return Rs(o("assets",9,"SCSS"));case".sass":return Rs(o("assets",9,"SASS"));case".md":return o("pages",16,"Markdown");case".html":return o("pages",16,"HTML")}if(e.assets.match(n)){if(i.spawn.invoked)return o("assets",17);switch(s.ext){case".json":return o("assets",14,"JSON");case".svg":return o("assets",14,"SVG");case".css":return o("assets",14,"CSS");case".ico":case".jpg":case".png":case".gif":case".webp":case".pjpg":return o("assets",14,"Image");case".mov":case".mp4":case".webm":case".ogg":return o("assets",14,"Video");case".pdf":return o("assets",14,"PDF");case".eot":case".ttf":case".woff":case".woff2":return o("assets",14,"Font")}}}}function Sp(e,t){let r=(0,_t.join)(t,e),n=new Pn((0,_t.parse)(r)),s=tD(n,r);if(e.startsWith("sections/"))return s(e,"sections");if(e.startsWith("snippets/"))return s(e,"snippets");if(e.startsWith("layout/"))return s(e,"layout");if(e.startsWith("customers/",10))return s(e,"templates/customers");if(e.startsWith("metaobject/",10))return s(e,"templates/metaobject");if(e.startsWith("templates/"))return s(e,"templates");if(e.startsWith("config/"))return s(e,"config");if(e.startsWith("locales/"))return s(e,"locales");if(e.startsWith("assets/"))return s(e,"assets")}var Fp=e=>t=>{let r=new Pn((0,_t.parse)(t)),n=wp(r,t,e);switch((0,_t.basename)(r.dir)){case"sections":return n("sections",4,-1);case"snippets":return n("snippets",3,-1);case"layout":return n("layout",2);case"templates":return n("templates",1,-1);case"customers":return n("templates/customers",1,-1);case"metaobject":return n("templates/metaobject",1,-1);case"config":return n("config",7,-1);case"locales":return n("locales",8,-1);case"assets":return n("assets",14,-1)}};l();var Cp=Y(require("zlib"));var vp=["b","kb","mb","gb","tb"];function nr(e){return Rt(e)?Sr(e):Sr(ct(e))}function ct(e){return U(e)?Bn(e).toString().length:e.toString().length}function Sr(e){if(e===0)return`${h("0")}b`;let t=parseInt(String(Math.floor(Math.log(e)/Math.log(1024))),10);return t===0?`${h(`${e}`)}${vp[t]}`:`${h((e/1024**t).toFixed(1))}${vp[t]}`}function qt(e,t){let r=ct(e);return{isSmaller:r>t||r===t,gzip:Sr(Cp.default.gzipSync(e).length),before:Sr(t),after:Sr(r),saved:Sr(t-r)}}l();async function Ep(e,t,r,n){return ce(r)||r===!1?n("put",e,t):U(r)?n("put",e,r):St(r)?n("put",e,r.toString()):n("put",e,t)}function nD(e){e===0&&ht("Empty output directory",[`There are no files within ${ge((0,Ap.relative)(i.cwd,i.dirs.output)+"/**")}`,`You may need to run the ${ge.bold("syncify build")} command and try again.`]);let t=new Map,r=0;for(let n of i.sync.themes){n.target.length>r&&(r=n.target.length);let s=`${n.store}:${n.target}`;t.has(s)||t.set(s,{active:t.size===0,log:null,size:e,processed:"",failed:0,success:0,retry:0,progress:ps(e),get theme(){return n},errors:{remote:new Map,retry:new Set}})}return t}async function Bp(e){Ft("Upload"),Yt("Preparing",{style:"spinning"}),A.start("upload");let t=Vi(i.sync),r=Ze(e),n=Fp(i.dirs.output),s=$p.default.sync(`${i.dirs.output}/**`).sort(),o=nD(s.length),a=null;await pt(500);function u(p){let d=p.toRaw();a!==null&&(clearInterval(a),a=null),rt(p.toString()),a=setInterval(()=>{d[3]=be(m(R("Elapsed",q.bold(A.now("upload")))))+`
`,rt(pe(d))},100)}function c(p){Yt.stop();let{file:d,theme:g}=p,b=`${g.store}:${g.target}`,y=o.get(b),v=X().NL.Line(Ir(d.namespace),h.whiteBright).NL.Line(R("Elapsed",q.bold(A.now("upload"))),m).Line(R("Duration",q(A.stop(d.uuid))),m).Line(R("Size",q(nr(d.size))),m).Newline();p.status===0?(y.errors.retry.has(d.input)&&(y.retry-=1,y.errors.retry.delete(d.input)),y.success+=1,y.progress.increment(1),y.processed=ge(d.key)):p.status===1?(y.errors.retry.has(d.input)||(y.retry+=1,y.errors.retry.add(d.input)),y.processed=Dt(d.key)):p.status===2&&(y.errors.retry.has(d.output)&&(y.retry-=1,y.errors.retry.delete(d.output)),y.errors.remote.has(d.output)||(y.failed+=1,y.progress.increment(1),y.errors.remote.set(d.output,p),y.processed=Se(d.key)));for(let[M,{success:I,size:ee,failed:W,retry:Z,progress:Q,processed:We}]of o){let[Pe,K]=M.split(":"),de=`${h(`${I}`)} ${$("of")} ${h(`${ee}`)}`,ke=h(`${Z}`),F=h(`${W}`);v.Line(`${h(K.toUpperCase())}  ${_}  ${Pe}`,q).NL.Line(We).NL.Line(R("uploaded",de),q).Line(R("retrying",ke),Z>0?Dt:q).Line(R("failures",F),W>0?Se:q).NL.Insert(Q.render()).Newline()}u(v)}At.on("upload",c),await pt(500);for(let p of s){let d=n(p),g;try{if(g=(await(0,Tp.readFile)(d.output)).toString(),d.size=ct(g),!r)await t.assets("put",d,g);else{let y=e.apply({...d},g);await Ep(d,g,y,t.assets)}}catch(b){He("Error reading output file",{file:d.key,source:d.relative})(b)}}await re.onIdle(),clearInterval(a),rt.clear(),Ft("Errors");let f=!1;for(let{errors:p,theme:d,failed:g,success:b,size:y}of o.values())if(p.remote.size>0){let v=h(`${d.target.toUpperCase()} THEME`),M=h(`${g}`),I=`${h(`${b}`)} ${$("of")} ${h(`${y}`)}`;T(X().Line(`${v}  ${_}  ${d.store}`).NL.Line(R("uploaded",I),Ee).Line(R("failures",M),Se).NL.toString());let ee=1;for(let W of p.remote.values()){let Z=`${(ee<10?"0":"")+ee++}`;_e(),ut(Se.bold(`ERROR ${Z}`)),dt(W.file.input,W.error)}ji(),f=!0}await pt(500),f||T(yr(m("No errors!"))),rt(yr("Uploaded Completed")),process.exit(0)}l();var nd=Y(Gr()),sd=Y(require("fast-glob"));l();var Qi=require("fs-extra");var yu=require("path");function sD(e,t){let{type:r,relative:n,kind:s,key:o,output:a}=e;return async u=>{r!==17&&(i.mode.watch&&i.watch.unwatch(a),await(0,Qi.writeFile)(a,u).catch(He("Error writing asset to output directory",{file:n,source:n}))),i.mode.hot&&(Ge(o,{hot:!0}),s==="JavaScript"?i.wss.script(e.uuid,(0,yu.basename)(o)):s==="CSS"&&i.wss.stylesheet(e.uuid,(0,yu.basename)(o))),i.env.sync!==0&&i.mode.build===!1&&await t("put",e,u)}}async function eo(e,t,r){let n=sD(e,t),s=await(0,Qi.readFile)(e.input).catch(He("Error reading asset file",{file:e.relative,source:e.relative}));if(s){let o=s.toString();if($l(o))return i.mode.watch&&rr(e,"empty file"),null;if(!Ze(r))return n(o);let a=r.apply({...e},o);if(ce(a)||a===!1)return n(o);if(En(a))return n(a);if(St(a))return n(a.toString());await n(o)}return null}l();var qm=require("html-minifier-terser"),qu=require("path"),Gn=require("fs-extra");l();var Nu=require("fs-extra");l();var Nm=Y(Rm(),1);l();var Pm=(e,t,r)=>r<0?-1:e.lastIndexOf(t,r);function t1(e,t){let r=Pm(e,`
`,t-1),n=t-r-1,s=0;for(let o=r;o>=0;o=Pm(e,`
`,o-1))s++;return{line:s,column:n}}function lo(e,t,{oneBased:r=!1}={}){if(t<0||t>=e.length&&e.length>0)throw new RangeError("Index out of bounds");let n=t1(e,t);return r?{line:n.line+1,column:n.column+1}:n}var r1=e=>`\\u{${e.codePointAt(0).toString(16)}}`,vr=class e extends Error{name="JSONError";fileName;codeFrame;rawCodeFrame;#n;constructor(t){super(),this.#n=t,Error.captureStackTrace?.(this,e)}get message(){let{fileName:t,codeFrame:r}=this;return`${this.#n}${t?` in ${t}`:""}${r?`

${r}
`:""}`}set message(t){this.#n=t}},km=(e,t,r=!0)=>(0,Nm.codeFrameColumns)(e,{start:t},{highlightCode:r}),n1=(e,t)=>{let r=t.match(/in JSON at position (?<index>\d+)(?: \(line (?<line>\d+) column (?<column>\d+)\))?$/);if(!r)return;let{index:n,line:s,column:o}=r.groups;if(s&&o)return{line:Number(s),column:Number(o)};if(n=Number(n),n===e.length){let{line:a,column:u}=lo(e,e.length-1,{oneBased:!0});return{line:a,column:u+1}}return lo(e,n,{oneBased:!0})},s1=e=>e.replace(/(?<=^Unexpected token )(?<quote>')?(.)\k<quote>/,(t,r,n)=>`"${n}"(${r1(n)})`);function zr(e,t,r){typeof t=="string"&&(r=t,t=void 0);let n;try{return JSON.parse(e,t)}catch(a){n=a.message}let s;e?(s=n1(e,n),n=s1(n)):n+=" while parsing empty string";let o=new vr(n);throw o.fileName=r,s&&(o.codeFrame=km(e,s),o.rawCodeFrame=km(e,s,!1)),o}l();function Pu(e,t){if(i.warnings.has(t)){let r=i.warnings.get(t);return r.has(e)?r.get(e):r.set(e,new Set).get(e)}return i.warnings.set(t,new Map([[e,new Set]])).get(t).get(e)}function wn(e,t){let r=Pu("Shared Schema",e.input),n=X({type:"warning"}).NL.Wrap(t.message,ne).NL.Context({stack:!1,type:"warning",entries:{reference:t.$ref,schema:t.schema,section:e.relative,shared:t.shared}});r.add(n.toString())}var Om=e=>(t,r)=>{let n=Pu("sass",e.input),s=X({type:"warning"}).NL.Wrap(t,ne);if(w("span",r)){if(ce(r.span))return;let{span:a}=r,f=(w("context",a)?a.context:a.text).slice(a.start.offset,a.end.offset).split(`
`);if(f.length<15){let p=Te(a.end.line).length,d=a.start.line+1;for(let g of f){let b=Te(d++),y=p-b.length,v=y===0?"":" ".repeat(y);s.Trim(`   ${v+O(b)} ${C.trim} ${g}`)}}}let o=s.NL.Wrap(r.stack,ne).NL.Context({stack:!1,entries:{source:e.relative,deprecated:r.deprecation?"Yes":"No"}}).toString();n.has(o)||n.add(o),i.mode.build||T(Mr(ne(R("warning",fe(Te(n.size),Lt("warning",n.size)))+dn.warning)))};function _m(e,t){let r=Pu("postcss",e.input),n=pe(tf(t.node.toString(),{line:"yellow",span:Rt(t.endLine)?{start:t.line,end:t.endLine}:{start:t.line,end:t.endLine}}),Fa({stack:!1,entries:{column:t.column,file:e.relative,plugin:t.plugin}}));r.has(n)||(r.add(n),An(n))}l();function Im(e){return i.liquid.terse.liquid.minifySchema===!1?i.json.useTab?JSON.stringify(e,null,"	".repeat(i.json.indent)):JSON.stringify(e,null,i.json.indent):JSON.stringify(e,null,0)}async function i1(e){let r=(await(0,Nu.readFile)(e.input)).toString(),n=r.search(/{%-?\s*schema/);if(n<0)return[r,null,null];let s=r.indexOf("%}",n+2)+2,o=r.slice(s),a=s+o.search(/{%-?\s*endschema/);if(a<0)return qe("Missing {% endschema %} tag in file.",{suffix:e.relative,notify:{title:"Invalid Syntax",message:"Missing {% endschema %} tag in file."}}),null;try{let u=zr(r.slice(s,a));return[r.slice(0,s),u,r.slice(a)]}catch(u){return qe(e.relative,{notify:{title:"JSON Error",message:`Error when parsing ${e.base} in ExtractSchema`}}),u instanceof vr&&gn(u,e),null}}function o1(e,t){let r=[];for(let n=0,s=t.length;n<s;n++){if(!w("$ref",t[n])){r.push(t[n]);continue}let[o,a]=t[n].$ref.split(".");if(i.section.shared.has(o)){let u=i.section.shared.get(o);w(a,u.schema)?L(u.schema[a])?r.push(...u.schema[a]):N(u.schema[a])&&(w("settings",u.schema[a])?r.push(...u.schema[a].settings):r.push(u.schema[a])):i.mode.build?wn(e,{shared:u.uri,$ref:t[n].$ref,schema:"settings",message:[`An unknown Shared Schema reference key of ${h(t[n].$ref)} was provided.`,`There is no such key ${h(a)} within the shared schema.`]}):st(`undefined $ref ${h(a)} in ${h(o)} `,e.base)}else i.mode.build?wn(e,{shared:a,$ref:t[n].$ref,schema:"settings",message:[`An unknown Shared Schema file reference ${h(t[n].$ref)} was provided`,`to ${h("settings")} within section file ${h(e.base)}. There is no known shared`,"schema file using that name."]}):st(`unknown $ref ${h(t[n].$ref)} `,e.base)}return r}function a1(e,t){let r=[];for(let n=0,s=t.length;n<s;n++)if(w("$ref",t[n])){let[o,a]=t[n].$ref.split(".");if(i.section.shared.has(o)){let u=i.section.shared.get(o);w(a,u.schema)?L(u.schema[a])?r.push(...u.schema[a]):r.push(u.schema[a]):i.mode.build?wn(e,{shared:a,$ref:t[n].$ref,schema:"blocks",message:[`An unknown Shared Schema key reference of ${h(t[n].$ref)} was provided`,`to the ${h("blocks")} within section file ${h(e.base)}. The shared schema`,`file exists, but the key ${h(a)} does not.`]}):st(`undefined $ref ${h(a)} in ${h(o)} `,e.base)}else i.mode.build?wn(e,{shared:a,$ref:t[n].$ref,schema:"blocks",message:[`An unknown Shared Schema file reference ${h(t[n].$ref)} was provided`,`to ${h("blocks")} within section file ${h(e.base)}. There is no known shared`,"schema file using that name."]}):st(`unknown $ref ${h(t[n].$ref)} `,e.base)}else{let o={};for(let a in t[n])a!=="settings"&&(o[a]=t[n][a]);if(o.type==="@app"){r.push(o);continue}if(o.settings=[],w("settings",t[n]))for(let a of t[n].settings)if(w("$ref",a)){let[u,c]=a.$ref.split(".");if(i.section.shared.has(u)){let f=i.section.shared.get(u);w(c,f.schema)?L(f.schema[c])?o.settings.push(...f.schema[c]):N(f.schema[c])&&(w("settings",f.schema[c])?o.settings.push(...f.schema[c].settings):o.settings.push(f.schema[c])):i.mode.build?wn(e,{shared:c,$ref:t[n].$ref,schema:`blocks ${_} settings`,message:[`An unknown Shared Schema key reference of ${h(t[n].$ref)} was provided`,`to the ${h("blocks")} schema id ${h(a.id)} within section file`,`${h(e.base)}. The shared schema file exists, but the key ${h(c)} does not.`]}):st(`undefined $ref ${h(c)} in ${h(u)} `,e.base)}else i.mode.build?wn(e,{shared:c,$ref:t[n].$ref,schema:`blocks ${_} settings`,message:[`An unknown Shared Schema file reference ${h(t[n].$ref)} was provided`,`to ${h("blocks")} schema id ${h(a.id)} within section file ${h(e.base)}.`,"There is no known shared schema file using that name."]}):st(`unknown $ref ${h(a.$ref)} `,e.base)}else o.settings.push(a);r.push(o)}return r}async function u1(e){try{let t=await(0,Nu.readFile)(e.input),r=hr(t);if(w(e.input,i.cache.schema)&&i.cache.checksum[e.input]===r&&i.section.shared.has(e.name))return i.section.shared.get(e.name);i.cache.checksum[e.input]=r;let n=t.toString();if(n.trim().length===0)return st("empty file","no shared schema defined"),null;let s=zr(n.toString());w("$schema",s)&&delete s.$schema,w("$description",s)&&delete s.$description;for(let o in s)if(N(s[o]))w("$description",s[o])&&delete s[o].$description;else if(L(s[o]))for(let a of s[o])w("$description",a)&&delete a.$description;return i.section.shared.set(e.name,{uri:e.input,schema:s}).get(e.name)}catch(t){return qe(e.relative,{notify:{title:"JSON Error",message:`Error when parsing ${e.base}`}}),t instanceof vr&&gn(t,e),null}}async function Ou(e){let t=await i1(e);if(t===null)return null;let[r,n,s]=t;if(n===null)return r;let o=Xe(n);return o("settings")&&(n.settings=o1(e,n.settings)),o("blocks")&&(n.blocks=a1(e,n.blocks)),pe(r.trimEnd(),`
`,Im(n),`
`,s.trimStart())}async function jm(e,t,r){let n=await u1(e);if(n===null)return null;let s=Nr(i.cache.schema[n.uri]),o=await fr(s,a=>mt(e.data(a),"data",{get(){return i.cache.sections[a]}}));Kt("Shared Schema",`${o.length} ${Lt("section",o.length)}`);for(let a of o){let u=await Ou(a);Ge(a.key),await t("put",a,u),i.mode.hot&&(e.type===4?i.wss.section(a.name):a.type!==10&&a.type!==9&&await re.onIdle().then(()=>i.wss.replace()))}}l();var xn=require("path"),qs=require("fs-extra");var Mu=Y(require("postcss"));var _u=null,Iu=null;async function Wu(e){if(e==="sass")return _u=require("sass"),Ne(_u)===!1;if(e==="tailwind")return Iu=require("tailwindcss"),Ne(Iu)===!1}function Mm(e,t,r){let n=Ze(r)?{...e}:!1;return async s=>{if(Ne(s))return null;let o;if(n!==!1){let u=r.apply({...e},Bn(s));ce(u)||u===!1?o=s:(U(u)||St(u))&&(o=Te(u))}else o=s;i.cache.checksum[e.input]=hr(o),(0,qs.writeFile)(e.output,o).catch(He("Error writing stylesheet to output",{input:e.relative,output:(0,xn.relative)(i.cwd,e.output)}));let a=qt(s,e.size);if(a.isSmaller?e.kind==="SCSS"||e.kind==="SASS"||e.kind==="Tailwind"?Qe(e.kind,h("CSS"),a.before,A.stop(e.uuid)):Qe("CSS",a.before,`gzip ${a.gzip}`):e.kind==="Tailwind"?Mt("Tailwind",a.before,a.after,a.saved):Mt("CSS",a.before,a.after,a.saved),i.mode.hot&&i.wss.stylesheet(e.uuid,(0,xn.basename)(e.key)),e.kind!=="Tailwind"&&Ge(e.key),t===null)return o;await t("put",e,o)}}async function c1(e){if(ce(e.data)||Ae(e.data.sass)&&e.data.sass===!1)return fo(e);let t=N(e.data.sass)?De(i.processor.sass.config,e.data.sass):i.processor.sass.config;if(e.ext===".scss"||e.ext===".sass"){i.mode.watch&&A.start();try{let{css:r,sourceMap:n}=_u.compile(e.data.input,{loadPaths:t.include,sourceMapIncludeSources:e.data.postcss,sourceMap:t.sourcemap,style:t.style,alertColor:!1,alertAscii:!1,quietDeps:t.quietDeps,charset:e.data.snippet===!1,logger:{debug:s=>console.log("DEBUG",s),warn:Om(e)}});if(t.sourcemap){let s=(0,xn.join)(i.dirs.sourcemaps.styles,e.base+".map");(0,qs.writeFile)(s,JSON.stringify(n)).catch(He("Error writing SASS Source Map file to the cache directory",{file:(0,xn.relative)(i.cwd,s),source:e.relative}))}return Kt("SASS Dart",A.stop()),e.size=ct(r),{css:r,map:n}}catch(r){return i.mode.watch&&(A.clear(),qe(e.relative,{notify:{title:"SCSS Transform Error",message:`SASS Dart failed to process ${e.base}`}}),wf(e,r)),null}}return fo(e)}async function po(e,t){for(let r in i.processor.tailwind.map)if(i.processor.tailwind.map[r].has(e.input)){let n=xp(i.style[r].input);if(ce(n))continue;A.start(n.uuid),n.kind="Tailwind";let s=await l1(n);U(s)&&t.push([n,s])}return t}async function l1(e){i.mode.hot&&A.start(e.uuid);let t=Mm(e,null,null),r=await fo(e),n=await Wm(e,r.css,r.map);return n===null?null:e.data.snippet?t(ju(n,e.data.attrs)):t(n)}async function fo(e){try{let t=await(0,qs.readFile)(e.input);return e.size=ct(t),{css:t.toString(),map:null}}catch(t){return A.clear(),qe(e.relative,{notify:{title:"Read Error",message:`File ${e.base} could not be read`}}),Jt(t,{source:e.relative,transform:"style"}),null}}async function Wm(e,t,r){let{data:n}=e,o=Ae(n.tailwind)===!1&&n.tailwind?[Iu(n.tailwind)].concat(n.postcss):n.postcss;try{i.mode.watch&&e.kind!=="Tailwind"&&A.start();let a=await(0,Mu.default)(o).process(t,{from:n.rename,to:n.rename,map:r?{prev:r,inline:!1,absolute:!0}:null});i.mode.watch&&e.kind!=="Tailwind"&&Kt("PostCSS",A.stop());let u=a.warnings();if(u.length>0)for(let c of u)_m(e,c);return a.css.toString()}catch(a){return i.mode.watch&&(A.clear(),qe(e.relative,{notify:{title:"PostCSS Transform Error",message:`PostCSS failed to process ${e.base}`}}),Sf(e,a)),null}}function ju(e,t){return t.length>0?`<style ${t.join(" ")}>${e}</style>`:`<style>${e}</style>`}async function mo(e,t,r){i.mode.watch&&A.start(),i.mode.hot&&A.start(e.uuid);let n=Mm(e,t,r);try{if(ce(e.data)||Ae(e.data.sass)&&e.data.sass===!1)return fo(e);let s=await c1(e);if(s===null)return null;if(Ne(Mu.default)||ce(e.data)||!e.data.postcss&&!e.data.snippet)return n(s.css);if(e.data.postcss){let o=await Wm(e,s.css,s.map);return o===null?null:e.data.snippet?n(ju(o,e.data.attrs)):n(o)}return e.data.snippet?n(ju(s.css,e.data.attrs)):n(s.css)}catch(s){return console.log(s),null}}var f1=/{%-?\s*#[\s\S]+?%}/g,p1=/{%-?\s*comment\s*-?%}[\s\S]+?{%-?\s*endcomment\s*-?%}/g,m1=/{%-?\s*liquid[\s\S]+?%}/g,d1=/[^,:'"a-zA-Z0-9=] +[^'"a-zA-Z0-9=}{]/g;function ho(e){return i.liquid.terse.markup.removeComments?e.replace(p1,"").replace(f1,""):e}function h1(e){return e.replace(m1,t=>`
`+t.replace(/#.*?$/gm,"")+`
`)}function g1(e,t){if(!i.liquid.terse.liquid.minifySchema)return ho(t);let r=t.search(/{%-?\s*schema/);if(r>-1){let n=t.indexOf("%}",r+2)+2,s=t.slice(n),o=n+s.search(/{%-?\s*endschema/);if(o>-1){let a=JSON.parse(t.slice(n,o)),u=JSON.stringify(a,null,0),c=t.slice(0,n)+u+t.slice(o);return ho(c)}Dr(e.relative)}return ho(t)}function y1(e){return i.liquid.terse.liquid.stripTrims,e}async function D1(e,t){try{return await(0,qm.minify)(t,i.liquid.terse.markup)}catch(r){return Dr(e.relative),console.error(r),null}}var b1=e=>async t=>{if(!i.mode.terse)return(0,Gn.writeFile)(e.output,t).catch(He("Error writing liquid file to output",{input:e.relative,output:(0,qu.relative)(i.cwd,e.output)})),Qe(e.kind,Ir(e.namespace),Sr(e.size),A.now()),t;let r;if(e.base.endsWith(".js.liquid"))r=t.replace(d1,"").replace(/(?<=[:,]) +(?=['"{[])/g,"").replace(/{{%/g,"{ {%").replace(/%}}/g,"%} }").replace(/(?<=[%}]})\s+(?=[\]}])/g," ").replace(/>\s+(?=[{[])/,">").replace(/(?<=[}\]])\s<\//g,"</");else if(e.base.endsWith(".json.liquid"))r=JSON.stringify(JSON.parse(t),null,0);else{let o=e.type===4?g1(e,t):ho(t),a=await D1(e,o);r=h1(a)}if(Kt("HTML Terser",A.now()),Ne(r))return(0,Gn.writeFile)(e.output,t).catch(He("Error writing liquid file to output",{input:e.relative,output:(0,qu.relative)(i.cwd,e.output)})),t;let n=y1(r).replace(/^\s+/gm,"");(0,Gn.writeFile)(e.output,n);let s=qt(t,e.size);return s.isSmaller?Qe(`${e.namespace} ${s.before} \u2192 gzip ${s.gzip}`):Mt("Liquid",s.before,s.after,s.saved),n};async function Vr(e,t,r){i.mode.watch&&A.start();let s=(await(0,Gn.readFile)(e.input)).toString();if(e.type===4){let u=await Ou(e);if(u===null)return null;s=u}e.size=ct(s);let o=b1(e),a;if(Ze(r)){let u=r.apply({...e},s);ce(u)||u===!1?a=await o(s):U(u)?a=await o(u):St(u)&&(a=await o(u.toString()))}else a=await o(s);if(i.cache.checksum[e.input]=hr(a),i.processor.tailwind.map!==null&&e.type!==9){let u=await po(e,[[e,a]]);for(let c of u)Ge(c[0].key),await t("put",c[0],c[1])}else Ge(e.key),await t("put",e,a);i.mode.hot&&(e.type===4?i.wss.section(e.name):await re.onIdle().then(()=>i.wss.replace()))}l();var go=require("fs-extra");function Hu(e,t){try{return zr(t)}catch(r){return qe(e.relative,{notify:{title:"JSON Error",message:`Error when parsing ${e.base}`}}),r instanceof vr&&gn(r,e),null}}function w1(e,t=0){try{return JSON.stringify(e,null,t)}catch(r){return console.log(r),null}}async function Hs(e,t,r=0){let n=w1(t,r);if(Uc(n))return i.mode.watch&&A.stop(),t;if(r===0){let s=qt(n,e.size);Mt("JSON",s.before,s.after,s.saved)}else Qe("JSON",e.namespace,Sr(e.size),A.now());return e.type===15||(0,go.writeFile)(e.output,n).catch(He("Error writing JSON",{file:e.relative})),n}async function Jr(e,t,r){i.mode.watch&&A.start();let n=await(0,go.readFile)(e.input).catch(He("Error reading JSON file",{file:e.relative}));if(St(n)){let s=n.toString();if(e.size=ct(s),s.trim().length===0)return rr(e,"empty file"),null;if(e.type===7&&e.name==="settings_data")for(let c of i.sync.themes){let f=await Nf("config/settings_data.json",c)}let o=Hu(e,s);if(o===null)return null;if(ye(o))return rr(e,"empty file"),null;let a=i.json.indent;if(i.json.terse.enabled)switch(e.type){case 4:i.json.terse.options.groups&&(a=0);break;case 14:i.json.terse.options.assets&&(a=0);break;case 8:i.json.terse.options.locales&&(a=0);break;case 1:i.json.terse.options.templates&&(a=0);break;case 7:i.json.terse.options.config&&(a=0);break;case 15:i.json.terse.options.metafields&&(a=0);break;case 6:i.json.terse.options.metaobject&&(a=0);break}let u;if(Ze(r)){let c=r.apply({...e},o);ce(c)?u=await Hs(e,o,a):L(c)||N(c)?u=await Hs(e,Te(c),a):U(c)?u=await Hs(e,Hu(e,c),a):St(c)&&(u=await Hs(e,Hu(e,c.toString()),a))}else u=await Hs(e,o,a);if(i.cache.checksum[e.input]=hr(u),e.type!==9&&i.processor.tailwind.map!==null){let c=await po(e,[[e,u]]);for(let f of c)await t("put",f[0],f[1]),Ge(f[0].key)}else Ge(e.key),await t("put",e,u);i.mode.hot&&await re.onIdle().then(()=>i.wss.replace())}}l();var yo=require("fs-extra"),Gu=Y(require("esbuild")),Yr=require("path");async function Hm(e){e.watch.clear();let t=await Gu.default.build(e.esbuild);i.mode.terse&&i.mode.build&&(e.size=ct(t.outputFiles[0].text)),i.mode.watch?await Gm(e,t.metafile.inputs):(e.watch.has(e.input)||e.watch.add(e.input),i.watch.has(e.input)||i.watch.add(e.input))}async function Gm(e,t){let r=[],{cwd:n,watch:s,mode:o}=i;for(let a in t){if(a.indexOf("/node_modules/")>-1)continue;let u=(0,Yr.join)(n,a);e.watch.has(u)||e.watch.add(u),s.has(u)||s.add(u),o.watch&&r.push(u)}o.watch&&await Cl().then(()=>{for(let a of e.watch)a.indexOf("/node_modules/")>-1||e.watchCustom!==null&&e.watchCustom(a)||w(a.slice(n.length+1),t)||(e.watch.delete(a),s.unwatch(a))})}function x1(e,t){return t.length>0?`<script ${t.join(" ")}>${e}</script>`:`<script>${e}</script>`}function S1(e){return En("Function",e)?function(t,r){let n=e.apply({...t},r);return n===!1?(ut("cancelled"),null):En("String",n)?(ut("augment"),n):St(n)?(ut("augment"),n.toString()):r}:!1}async function Do(e,t,r){if(!e.data)return;i.mode.watch&&A.start(),i.mode.hot&&A.start(e.uuid);let n=S1(r),s=e.data.length;for(let o of e.data){let{key:a,input:u,output:c,snippet:f,attrs:p,esbuild:{format:d}}=o;try{let{metafile:g,outputFiles:b,warnings:y}=await Gu.default.build(o.esbuild);s>1&&(_e(),ut((0,Yr.relative)(i.cwd,u))),i.mode.watch&&await Gm(o,g.inputs),y.length>0&&void 0;for(let{text:v,path:M}of b)if(M.endsWith(".map")){let I=(0,Yr.join)(i.dirs.sourcemaps.scripts,`${e.base}.map`);(0,yo.writeFile)(I,v).catch(He("Error writing JavaScript Source Map to cache",{file:(0,Yr.relative)(i.cwd,I),source:e.relative}))}else{if(i.mode.terse)if(isNaN(o.size))Qe(e.kind,`${h(d.toUpperCase())} bundle`),Mt(nr(v));else{let{before:ee,after:W,saved:Z}=qt(v,o.size);Qe(`${h(d.toUpperCase())} bundle \u2192 ${h(nr(v))}`),Mt(null,ee,W,Z)}else Qe(`${h(d.toUpperCase())} bundle \u2192 ${h(nr(v))}`);let I;if(f){if(I=x1(v,p),n&&(I=n(e,I),I===null))continue;await(0,yo.writeFile)(c,I).catch(He("Error writing inline <script> snippet",{file:e.relative})),kf("script","snippet")}else{if(I=v,n&&(I=n(e,I),I===null))continue;await(0,yo.writeFile)(c,I).catch(He("Error writing JavaScript asset",{file:e.relative}))}i.mode.hot?(Ge(a,{hot:!0}),i.wss.script(e.uuid,(0,Yr.basename)(a)),t("put",o,I)):i.mode.build||(Ge(a),await t("put",o,I))}}catch(g){w("errors",g)&&(A.clear(),qe(e.relative,{notify:{title:"JavaScript Error",message:`Transform failed for ${e.base}`}}),i.errors.add(u),g.errors.forEach(xf))}}s>1&&_e()}l();var Um=Y(require("svgo")),zm=Y(require("svg-sprite")),ir=require("path"),Un=require("fs-extra");async function F1(e){let t=await(0,Un.readFile)(e);return[e,t.toString(),ct(t)]}function v1(e){return new Promise(function(t,r){e.compile((n,s)=>{if(n)return r(n);for(let o in s)for(let a in s[o])t(s[o][a].contents.toString())})})}function C1(e,t,r){async function n(s){let o=oe({},e);i.mode.watch&&A.start(),o.kind="Sprite",s.snippet?(o.namespace="snippets",o.key=(0,ir.join)("snippets",Ns(o,s.rename)),o.output=(0,ir.join)(i.dirs.output,o.key)):(o.key=(0,ir.join)("assets",Ns(o,s.rename)),o.output=(0,ir.join)(i.dirs.output,o.key));let a=s.sprite===!0?i.processor.sprite:s.sprite,u=new zm.default(a),c=await fr(Nr(s.input),F1).catch(He("Error reading an SVG file",{file:o.base,source:o.relative}));if(c){let f=c.filter(([b,y])=>Vm(y)?(rr((0,ir.relative)(i.cwd,b),"Liquid Detected"),!1):!0);o.size=0;for(let[b,y,v]of f)u.add(b,null,y),o.size=o.size+v;let p=await v1(u),d=f.length;Kt("SVG Sprite",`${d} ${Lt("SVG",d)}`,A.stop()),await(0,Un.writeFile)(o.output,p).catch(He("Error writing SVG Sprite",{file:o.key,caller:e.relative}));let g=qt(p,o.size);g.isSmaller?Qe(`${o.kind} ${g.before}`,`gzip ${g.gzip}`):Mt(o.kind,g.before,g.after,g.saved),t&&(Ge(o.key),await t("put",o,p))}}return n}function Vm(e){return/^(?:{{[\s\S]+?}}|{%[\s\S]+?%})|[^"'](?:{{[\s\S]+?}}|{%[\s\S]+?%})[^'"]/m.test(e)}function E1(e){if(/<path[^>]*[a-zA-Z"'\s](>)(?!\s*<\/path>)/g.test(e)){let r=`${m(`<${$("path")}>`)}`,n=`${Ee(`<${$("path")} />`)}`;return Qe("SVG",r,n,"patched solidus"),e.replace(/(<path[^>]*[a-zA-Z"'\s])(>)(?!\s*<\/path>)/g,"$1 /$2")}return e}function $1(e,t,r){let n=oe({},e);async function s(o){i.mode.watch&&A.start(),o.snippet?(n.namespace="snippets",n.key=(0,ir.join)("snippets",Ns(n,o.rename)),n.output=(0,ir.join)(i.dirs.output,n.key)):(n.key=(0,ir.join)("assets",Ns(n,o.rename)),n.output=(0,ir.join)(i.dirs.output,n.key));let a=o.svgo===!0?i.processor.svgo:o.svgo,c=(await(0,Un.readFile)(n.input)).toString();if(Vm(c))return rr(n,"Liquid Detected"),null;let f=E1(c);n.size=ct(f);let p;try{p=Um.default.optimize(f,a)}catch(b){return qe(n.relative,{notify:{title:"Transform Error",message:`SVGO failed to optimize ${n.key}`}}),Jt(b,{source:n.relative,output:n.key,processor:"SVGO"}),null}Kt("SVGO",A.stop());let{data:d}=p,g=qt(d,n.size);g.isSmaller?Qe(`${n.kind} ${g.before} \u2192 gzip ${g.gzip}`):Mt(n.kind,g.before,g.after,g.saved),await(0,Un.writeFile)(n.output,d).catch(He("Error writing SVG",{file:n.key,caller:e.relative})),t&&(Ge(n.key),await t("put",n,d))}return s}async function bo(e,t,r){i.mode.watch&&A.start();let n=C1(e,t,r),s=$1(e,t,r),o=e.data.length;for(let a=0;a<o;a++){let u=e.data[a];a>0&&i.mode.watch&&Mi(e),u.format==="sprite"?await n(u):u.format==="file"&&await s(u)}}l();var Co=require("path"),Rr=require("fs-extra");var ec=Y(require("zlib")),tc=Y(require("cbor")),Qm=Y(Zm());var or=new sn;function I1(e){let t=(0,Rr.readFileSync)(e),r=ec.default.gunzipSync(t);return tc.default.decode(r)}function Xr(e,t){return async()=>{let r=await tc.default.encodeAsync(t,{omitUndefinedProperties:!0,canonical:!0}),n=ec.default.gzipSync(r);return n[9]=3,(0,Qm.default)(e,n)}}async function ed(){i.cache.uri=Tn(null);let e=(0,Co.join)(i.cwd,"node_modules",".cache");(0,Rr.existsSync)(e)||(0,Rr.mkdirSync)(e);let t=(0,Co.join)(e,"syncify");(0,Rr.existsSync)(t)||(0,Rr.mkdirSync)(t);for(let r of Si)i.cache.uri[r]=(0,Co.join)(t,`${r}.bin`),(0,Rr.existsSync)(i.cache.uri[r])?i.cache[r]=I1(i.cache.uri[r]):(i.cache[r]={},or.add(Xr(i.cache.uri[r],i.cache[r])));if(i.cmd.cache)return j1()}function j1(e=null){if(e===null){for(let t of Si)nn(i.cache[t])||(i.cache[t]=H(),or.add(Xr(i.cache.uri[t],i.cache[t])));return or.onIdle()}return i.cache[e]={},or.add(Xr(i.cache.uri[e],i.cache[e]))}function td(){return or.onIdle()}function zn(e=null){if(e===null){for(let t of Si)nn(i.cache[t])||or.add(Xr(i.cache.uri[t],i.cache[t]));return or.onIdle()}else return or.add(Xr(i.cache.uri[e],i.cache[e]))}function rd(e,t=NaN){let r=e.endsWith(".myshopify.com")?e.slice(0,e.indexOf(".myshopify.com")).toLowerCase():e.toLowerCase();return isNaN(t)===!1?Ut(`${r}.${t}`,i.cache.pages)?i.cache.pages[r][t]:(w(r,i.cache.pages)?i.cache.pages[r][t]={}:i.cache.pages[r]={[t]:{}},or.add(Xr(i.cache.uri.pages,i.cache.pages)),i.cache.pages[r][t]):(w(r,i.cache.pages)||(i.cache.pages[r]={},or.add(Xr(i.cache.uri.pages,i.cache.pages))),i.cache.pages[r])}function Us(e,t){let r=e.endsWith(".myshopify.com")?e.slice(0,e.indexOf(".myshopify.com")).toLowerCase():e.toLowerCase();return w(r,i.cache.pages)?i.cache.pages[r][t.id]=t:i.cache.pages[r]={[t.id]:t},or.add(Xr(i.cache.uri.pages,i.cache.pages)),i.cache.pages[r][t.id]}function M1(){let e={stats:{total:0,errors:0,skipped:0,bundled:0}};for(let t of Ll)e[t]={group:t,time:"",size:0,files:[],report:null};return e}async function Eo(e){A.start("build"),i.mode.export||(_e(),Lf("Build"),_e());let t=new Set,r=X({type:"error"}),n=X().Newline(),s=M1(),o=ye(i.filters)===!1,a=Os(i.paths,i.dirs.output),u=(0,nd.default)(Nr(i.watch.values())),c=await(0,sd.default)("**",{absolute:!0,cwd:i.dirs.input}),f=i.cache.paths;for(let g of c.filter(u)){let b=a(g);if(!ce(b))switch(b.type){case 9:s.styles.files.push(b);break;case 10:s.scripts.files.push(b);break;case 4:s.sections.files.push(b);break;case 2:s.layouts.files.push(b);break;case 3:s.snippets.files.push(b);break;case 8:s.locales.files.push(b);break;case 7:s.configs.files.push(b);break;case 1:s.templates.files.push(b);break;case 16:s.pages.files.push(b);break;case 14:s.assets.files.push(b);break;case 15:s.metafields.files.push(b);break;case 11:for(let{uuid:y,format:v,input:M}of b.data)if(!t.has(y))if(t.add(y),v==="sprite")s.svgs.files.push(b);else for(let I of M)s.svgs.files.push(a(I));break}}function p(g,b){return A.start(g.group),async function(y){A.start(y.uuid),s.stats.total+=1;try{f[y.output]=y.input;let v=y.ext===".json"?await Jr(y,e):await b(y,e);return v===null||isNaN(y.size)?(s.stats.skipped+=1,{name:y.base,input:y.relative,time:A.stop(y.uuid),output:y.key,error:"Skipped File"}):(s.stats.bundled+=1,{name:y.base,input:y.relative,output:y.key,error:null,time:A.stop(y.uuid),size:qt(v,y.size)})}catch(v){return s.stats.errors+=1,r.Line(v.message),{name:y.base,input:y.relative,output:y.key,time:A.stop(y.uuid),error:v.message}}}}async function d(g,b){let y=o&&w(g,i.filters)?i.filters[g]:null;if(y&&y.includes(g)===!1)return 0;let v=s[g];v.size=v.files.length,v.report=await fr(v.files,p(v,b),{stopOnError:!0}),v.time=A.stop(g);let M=v.report.length,I=h(M<10?` ${M}`:`${M}`),ee=M===1?"  ":" ";n.Line(R(g,`${I} ${Lt("file",M)}${ee}${Oe(v.time)}`))}if(await d("svgs",bo),await d("layouts",Vr),await d("templates",Vr),await d("sections",Vr),await d("snippets",Vr),await d("locales",Jr),await d("configs",Jr),await d("assets",eo),await d("styles",mo),await d("scripts",Do),await zn(),i.mode.export===!1&&i.mode.publish===!1){if(n.NL.Dash("Completed",m).NL.Line(R("version",`${i.vc.number}`)).Line(R("processed",`${h(`${s.stats.total}`)} files`)).Line(R("bundled",`${h(`${s.stats.bundled}`)} files`)).Line(R("skipped",`${h(`${s.stats.skipped}`)} files`)).Line(R("duration",A.now("build"))).Line(R("warnings",h(`${i.warnings.size}`))).Line(R("errors",h(`${s.stats.errors}`))),i.warnings.size>0){n.NL.Dash("Warnings",m).Newline();let g,b=0;for(let y of i.warnings.keys())for(let[v,M]of i.warnings.get(y)){g!==v?(b=1,g=v):(b=b+1,n.Ruler()),n.Warn(`${h("WARNING")} ${ol}${h(`${b}`)}`,ne).Newline("yellow").Warn(g,ne);for(let I of M)n.Insert(I)}T(n.NL.End(i.log.group).BR.toString(q))}else T(n.NL.End(i.log.group).BR.toString(q));process.exit(0)}}l();l();var Ao=require("fs-extra"),To=Y(require("gray-matter")),ud=Y(require("markdown-it")),Bo=require("@syncify/turndown");l();function W1(e){return e==="boolean"||e==="color"||e==="date"||e==="date_time"||e==="dimension"||e==="json"||e==="money"||e==="multi_line_text_field"||e==="number_decimal"||e==="number_integer"||e==="rating"||e==="rich_text_field"||e==="single_line_text_field"||e==="url"||e==="volume"||e==="weight"}function id(e,t){for(let r of t)for(let n of["key","type","value","namespace","description"]){if(n!=="description"&&!Je(n,r))return Dr(e.relative,[`Missing ${O.bold(n)} property key value in a ${ne.bold("metafields")}`,"value in frontmatter. Frontmatter metafields require you provide the following keys:","",`${m("-")} ${$("key")}`,`${m("-")} ${$("type")}`,`${m("-")} ${$("value")}`,`${m("-")} ${$("namespace")}`,"",`${m("Update the metafield entry to include")} ${$(n)}`]),!1;if(n==="type"){let s=r[n];if(!W1(s))return Dr(e.relative,[`Invalid type ${O.bold(s)} provided in frontmatter ${ne.bold("metafields")}`,`value. Frontmatter metafields ${h("must")} be one of following types:`,"",`${m("-")} ${$("boolean")}`,`${m("-")} ${$("color")}`,`${m("-")} ${$("date")}`,`${m("-")} ${$("date_time")}`,`${m("-")} ${$("dimension")}`,`${m("-")} ${$("json")}`,`${m("-")} ${$("money")}`,`${m("-")} ${$("multi_line_text_field")}`,`${m("-")} ${$("number_decimal")}`,`${m("-")} ${$("number_integer")}`,`${m("-")} ${$("rating")}`,`${m("-")} ${$("rich_text_field")}`,`${m("-")} ${$("single_line_text_field")}`,`${m("-")} ${$("url")}`,`${m("-")} ${$("volume")}`,`${m("-")} ${$("weigh")}`,"",`${m("Update the metafield entry to an accepted")} ${$("type")}`]),!1}}return!0}l();var zs=Y(require("axios"));async function od(e){return zs.default.get("pages.json",e.client).then(({data:t})=>t.pages).catch(t=>dt(e.store,t.response))}async function ad(e,t){if(kr(Je("handle",t),Je("title",t))){console.log("invalid fields");return}return zs.default.get("pages.json",e.client).then(({data:r})=>Je("handle",t)&&Je("title",t)?r.pages.find(n=>t.title===n.title&&t.handle===n.handle):Je("handle",t)?r.pages.find(n=>t.handle===n.handle):Je("title",t)?r.pages.find(n=>t.title===n.title):void 0).catch(r=>{console.log(r)})}async function $o(e,t){i.mode.upload||A.start();let r=await zs.default.post("/pages.json",{page:t},e.client).then(({data:n})=>(Ha("page",e),n.page)).catch(n=>{on(n.response.status)?re.add(()=>$o(e,t)):Ut("response.data",n.response)&&dt(t.title,n.response)});if(r)return Us(e.domain,r),r}async function rc(e,t,r){let{mode:n}=i;n.upload||A.start();let s=`pages/${r.id}.json`,o=await zs.default.put(s,{page:r},e.client).then(({data:a})=>(n.watch?Ha("page",e):n.upload&&At.emit("upload","uploaded",r,{key:t.key,namespace:t.namespace,fileSize:nr(r.body_html)}),a.page)).catch(a=>{on(a.response.status)?re.add(()=>rc(e,t,r)):console.log(a)});if(o)return o}function H1(e){return new Bo.Turndown(i.page.import).use(Bo.GithubFlavor).turndown(e)}async function G1(e){let t=$s("No matching pages, select an option",{title:"No matching pages",message:"Open CLI and select an option"}),r=await prompts({type:"select",name:"action",message:"Page Resources",hint:" ",instructions:!1,choices:[{title:"Create Page",description:`Create a new page on ${e.domain}`,value:1},{title:"Select Page",description:`Select a page to overwrite on ${e.domain}`,value:2},{title:"Cancel",description:"Cancel, and skip this sync operation",value:4}]});return{resume:t,action:r.action}}async function U1(e){let t=await od(e);if(!t)return;let r=t.map(s=>({title:s.title,description:`https://admin.shopify.com/store/${e.store.toLowerCase()}/pages/${s.id}`,value:s.id}));return r.push({title:tui.hr(20,!1),disabled:!0,selected:!1},{title:"Create New Page",description:`Create a new page on ${e.domain}`,value:1},{title:"Cancel",description:"Cancel, and skip this sync operation",value:4}),(await prompts({type:"select",name:"action",message:"Choose Page",hint:" ",instructions:!1,choices:r})).action}async function z1(e){let t=[{title:"View Source",description:"Prints the page source in the CLI",value:5},{title:"Update Local",description:"Update the local source with remote version",value:3},{title:"Overwrite Remote",description:"Overwrite the remote version with local source",value:6},{title:"Cancel",description:"Cancel, and skip this sync operation",value:4}],r=$s("Remote version is newer than local version",{title:"Remote \u2192 Local",message:"Remote version has changed"}),n=await prompts({type:"select",name:"action",message:"Page Resources",hint:" ",instructions:!1,choices:t});if(n.action===5){_e(""),T(e.body_html),_e("");let s=await prompts({type:"select",name:"action",message:"Page Resources",hint:" ",instructions:!1,choices:t.slice(1)});return{resume:r,action:s.action}}else return{resume:r,action:n.action}}function V1(e,t){let r={title:w("title",t)?t.title:Ir(e.name.replace(/[._-]/g," "))};if(w("handle",t)){let n,s=t.handle;/^[./]{1,2}/.test(s)&&(n=s,s=s.replace(/^[./]{1,2}/,""),st(`handle ${Br} ${n} ${_} ${s}`,"fixed start")),/^pages\//.test(s)&&(n=s,s=s.replace(/^pages\//,""),st(`handle ${Br} ${n} ${_} ${s}`,"fixed sub-path")),/[_/]/.test(t.handle)&&(n=s,s=s.replace(/[_/]/g,"-"),st(`handle ${Br} ${n} ${_} ${s}`,"fixed invalid characters")),r.handle=s}else w("title",t)?r.handle=El(t.title):r.handle=e.name.toLowerCase();if(w("author",t)&&i.page.author!==""){let n,s=t.author;/\//.test(t.author)&&(n=t.author,s=n.replace(/\//g," "),st(`author ${Br} ${n} ${_} ${s}`,"fixed invalid characters")),r.author=s}else t.author=i.page.author;return w("published",t)?Ae(t.published)?r.published=t.published:(st(`published ${Br} expected boolean, got ${typeof t.published}`,"defaulted to false"),r.published=!1):r.published=!0,w("template_suffix",t)&&(w("template",t)?(st("duplicate template_suffix references","using template"),delete t.template_suffix):(t.template=t.template_suffix,delete t.template_suffix)),w("template",t)?r.template_suffix=t.template:i.page.suffixDir&&xi(i.page.global)&&i.page.global.test(e.input)!==!1&&(r.template_suffix=yn(e.input)),w("metafield",t)&&(st("use metafields instead of metafield","sync will still process"),t.metafields=t.metafield,delete t.metafield),w("metafields",t)?N(t.metafields)&&(r.metafields=[t.metafields]):r.metafields=void 0,r}async function cd(e,t){if(i.sync.stores.length>1)return rr(e,"pages do not support multistore sync"),null;let r=await(0,Ao.readFile)(e.input);if(nn(r.toString()))return i.mode.watch&&rr(e,"empty file"),null;let n=(0,To.default)(r),{data:s,content:o}=De(n),a=V1(e,s);if(L(a.metafields)&&!id(e,a.metafields))return null;e.kind==="Markdown"?(A.start(),a.body_html=(0,ud.default)(i.page.export).render(o),Qe(`${h("Markdown")} ${_} ${h("HTML")} ${se} ${A.stop()}`)):(Qe("HTML"),a.body_html=o);let u=i.sync.stores[0],c=u.store.toLowerCase(),f=await ad(u,{handle:a.handle});if(L(f))return Dr(e.relative,[`Multiple pages returned when matching on handle ${O.bold(a.handle)}`,"Syncify is unsure on how to handle this request and has cancelled the sync. Please","check the provided handle in your webshop."]),null;let p=rd(c);if(N(f)&&(a.id=f.id,p=Us(c,f)),ce(f)&&i.page.safeSync){let g=await G1(u);if(g.action===2){let b=await U1(u);if(b===4)return g.resume();if(b===1)return g.resume(),Ge(`/pages/${a.handle} ${_} ${a.title} ${m(`${se} ${e.relative}`)}`),$o(u,a);a.id=b,g.resume()}else return g.action===1?(g.resume(),Ge(`/pages/${a.handle} ${_} ${a.title} ${m(`${se} ${e.relative}`)}`),$o(u,a)):g.resume()}if(N(f)){let g=new Date(f.updated_at).getTime(),b=new Date(p.updated_at).getTime();if(g>b&&f.body_html!==a.body_html){let y=await z1(f);if(y.action===3){y.resume();let v=f.body_html;if(i.page.language==="markdown"){let M=H1(v);Qe(`${e.name}.html ${_} ${e.base}`),v=(0,To.stringify)(`
`+M,n.data)}i.watch.unwatch(e.input),await(0,Ao.writeFile)(e.input,v),Us(u.domain,f),i.watch.add(e.input)}else{if(y.action===4)return y.resume();y.action===6&&y.resume()}}}if(i.mode.build)return a.body_html;Ge(`/pages/${a.handle} ${_} ${a.title} ${m(`${se} ${e.relative}`)}`),await rc(u,e,a)&&await zn("pages")}function ld(e){let t=Vi(i.sync),r=Os(i.paths,i.dirs.output);i.mode.hot&&i.wss.connected(),i.watch.on("all",n);function n(o,a){let u=r(a);if(!ce(u)&&u.base!==i.file.base){if(u.type!==17&&Mi(u),o==="change"||o==="add")s(u);else if(o==="unlink")return u.type===16?t.pages("delete",u):t.assets("delete",u)}}async function s(o){try{switch(o.type){case 10:return Do(o,t.assets,e);case 16:return cd(o,e);case 11:return bo(o,t.assets,e);case 14:case 17:return eo(o,t.assets,e);case 5:return jm(o,t.assets,e);case 9:return mo(o,t.assets,e);case 2:case 3:return Vr(o,t.assets,e);case 6:case 1:case 4:return o.kind==="JSON"?Jr(o,t.assets,e):Vr(o,t.assets,e);case 7:case 8:return Jr(o,t.assets,e);case 15:return Jr(o,t.metafields,e)}}catch(a){console.error(a),qe(a)}}}l();l();var fd=Y(require("axios"));async function Lo(e){return fd.default.get("themes.json",e.client).then(({data:t})=>t.themes).catch(t=>dt(e.store,t.response))}var Vs=require("enquirer");var Vn={pointer(e,t){let r=this.state.index===t?V("\u251C "):V("\u2502 ");return t===0?V("\u2502 ")+`
`+r:r},prefix:V("\u2502 "),styles:{primary:Ee,success:Ee,danger:le.bold,warning:ne,muted:m,disabled:m,typing:m},symbols:{ellipsisLarge:"",ellipsisSmall:"",prefix:{pending:"",submitted:"\u2713",cancelled:"\u{10102}"},separator:{pending:"",submitted:" \u2192 ",cancelled:" \u{10102} "}}};async function pd(e){let t=0,n=(await Lo(e)).filter(({role:b})=>b!=="demo"),s=jt(n,"name"),o=n.map(b=>(b.name.length>t&&(t=b.name.length),{name:b.name,message:b.name,hint:`${s(b.name)} ${se} ${m(b.role)}`,value:b}));o.push({role:"separator",message:V("\u2500".repeat(t))},{name:"create",message:"Create Theme"},{name:"create",message:"Remove Theme"}),i.sync.stores.length>1&&o.push({role:"separator",message:V("\u2500".repeat(t))},{name:"store",message:"Select Stores",hint:`${s("Select Stores")} ${se} ${m("go back and choose store")}`});let{targets:a}=await(0,Vs.prompt)({name:"targets",type:"select",multiple:!0,message:"Select Themes",hint:"Press spacebar to select",theme:Vn,choices:o,result(b){return mi(this.map(b))},format(b){if(L(b)&&b.length>0)return ge(`${b.join(q(", "))}`)}}),u={domain:e.store.toLowerCase(),themes:{}},c=[];for(let b of a)u.themes["${"+b.name+"}"]=b.id,c.push({name:b.name,message:b.name,validate(y,v,M){if(M&&M.name===b.name){if(/[A-Z]/.test(y))return`
`+Tt.redBright("  Target name must be lowercase");if(/[0-9]/.test(y))return`
`+Tt.redBright("  Target name cannot contain numbers");if(/[ ]/.test(y))return`
`+Tt.redBright("  Target name cannot contain spaces");if(/-/.test(y))return`
`+Tt.redBright("  Target name cannot contain dashes")}return!0}});Vn.styles.primary=ge.italic,Vn.styles.typing=Ee;let f=JSON.stringify(u,null,2),p=await(0,Vs.prompt)({name:"stores",type:"snippet",required:a.map(({name:b})=>b),message:"Theme Targets",newline:`
`,format(){return this.state.submitted===!0&&this.state.completed!==100?Ee(`${this.state.completed}% completed`):` ${_}  ${Dt(`${this.state.completed}% completed`)}`},theme:Vn,fields:c,template:f}),d={syncify:JSON.parse(p.stores.result)},g=await(0,Vs.prompt)({name:"save",type:"confirm",message:"Save Settings",theme:Vn,initial:!0,newline:`
`,format(){return/^[ty1]/i.test(this.input)?"Yes":"No"},footer:C.line+["",m("The following store and theme references will be saved"),m("to your package.json file on the syncify key property."),"",JSON.stringify(d.syncify,null,2).split(`
`).join(`
`+C.line),""].join(`
`+C.line)});console.log(g)}async function J1(){let e=jt(i.sync.stores,"store"),t=i.sync.stores.map(n=>({name:n.domain,message:n.store,hint:`${e(n.store)} ${se} ${m(`https://${n.domain}`)}`,value:n})),{store:r}=await(0,Vs.prompt)({name:"store",type:"select",message:"Select Stores",choices:t,theme:Vn,result(){return this.focused.value},format(n){return Ee(n)}});return pd(r)}async function md(){return i.sync.stores.length>1?J1():pd(i.sync.stores[0])}l();var Ro=require("path");var nc=require("fs-extra");async function Y1(){let e=new Map,t=0;for(let r of i.sync.themes){r.target.length>t&&(t=r.target.length);let n=i.sync.stores[r.sidx],s=`${r.store}:${r.target}`,{assets:o}=await Ja(r,n.client);e.has(s)||e.set(s,{active:e.size===0,log:null,number:e.size+1,size:o.length,transfers:0,warning:0,failed:0,success:0,retry:0,progress:ps(o.length),get files(){return o},get theme(){return r},errors:{local:new Map,remote:new Map,retry:new Set}})}return e}function K1(e,t,r){let n=`${h(`${e.success}`)} ${$("of")} ${h(`${e.size}`)}`,s=h(`${e.failed}`),o=h(`${e.theme.target.toUpperCase()}`);return X().Line(R(o,_),ge).NL.Line(`completed in ${m(r)}`).NL.Line(R("synced",n),q).Line(R("errors",s),e.failed>0?Se:q).Line(R("location",m.underline(t))).NL.Insert(e.progress.render()).Line.toString()}function X1(e){return X().Line(`${h(e.theme.target.toUpperCase())}  ${_}  ${e.theme.store}`,m.dim).NL.Line(`${h(wi(e.number))} in queue`,ma).NL.Line(R("synced",`${h("0")} ${$("of")} ${h(`${e.size}`)}`),m.dim).Line(R("retry",h("0")),m.dim).Line(R("errors",h("0")),m.dim).NL.Insert(e.progress.render(m.dim)).NL.toString()}async function dd(e){let t=0,r=0;A.start("import"),Ft("Import"),Yt("Preparing",{style:"spinning"});let n=await Y1();await pt(500);function s(o){Yt.stop();let{theme:a,file:u}=o,c=`${a.store}:${a.target}`,f=n.get(c),p=`https://${a.store}?preview_theme_id=${a.id}`,d=X().NL.Line(R("Duration",q(A.now("import"))),m).Line(R("Transfers",q(`${r++}`)),m).Line(R("Syncing",zt(`${h(a.target)}  ${_}  ${a.store}`)),m).Line(R("Preview",dr(p)),m).Ruler(),g="";if(o.status===3)(0,nc.writeFileSync)(u.output,""),f.warning+=1,f.transfers+=1,f.progress.increment(1),g=ne(u.key);else if(o.status===0){f.errors.retry.has(u.output)&&(f.retry-=1,f.errors.retry.delete(u.output)),f.success+=1,f.transfers+=1,f.progress.increment(1);let Z=Buffer.from(o.data.value||null,"utf8");(0,nc.writeFileSync)(u.output,Z),g=Ee(u.key)}else o.status===1?(f.errors.retry.has(u.output)||(f.retry+=1,f.errors.retry.add(u.output)),g=Dt(u.key)):o.status===2&&(f.errors.retry.has(u.output)&&(f.retry-=1,f.errors.retry.delete(u.output)),f.errors.remote.has(u.output)||(f.failed+=1,f.transfers+=1,f.progress.increment(1),f.errors.remote.set(u.output,o)),g=Se(u.key));let b=`${h(`${f.success}`)} ${$("of")} ${h(`${f.size}`)}`,y=h(`${f.retry}`),v=h(`${f.failed}`),M=h(`${f.warning}`),I=X().NL.Line(`${h(f.theme.target.toUpperCase())}  ${_}  ${f.theme.store}`,ge).NL.Line(g).NL.Line(R("synced",b),q).Line(R("retry",y),f.retry>0?Dt:q).Line(R("warning",M),f.warning>0?ne:q).Line(R("failed",v),f.failed>0?Se:q).NL.Insert(f.progress.render()).NL.Ruler(),ee=[d.toString()],W=0;for(let Z of n.values())Z.active?ee.push(I.toString()):Z.log===null?(W=W+1,Z.number=W,ee.push(X1(Z))):ee.push(Z.log);rt(pe(ee))}At.on("import",s),t=n.size-1;for(let[o,a]of n){let[u,c]=o.split(":"),f=(0,Ro.join)(i.dirs.import,u,c);A.start(o),a.active=!0;for(let{key:p}of a.files){let d=Sp(p,f),g=oe({url:a.theme.url,method:"get",params:{"asset[key]":d.key}},i.sync.stores[a.theme.sidx].client);await re.add(()=>Ts(a.theme,d,g))}await re.onIdle(),t=t-1,a.active=!1,a.log=K1(n.get(o),(0,Ro.relative)(i.cwd,f),A.stop(o))}for(let{errors:o}of n.values())o.remote.size>0}l();var ar=require("fs-extra"),Fn=require("path"),Sd=require("fast-glob"),Fd=Y(require("adm-zip"));l();var Er=require("path");var hd=require("fast-glob");async function gd(e){let t=await(0,hd.glob)("templates/*",{cwd:e,absolute:!0}),r=new Set,n=new Set;for(let a of t){let{name:u}=(0,Er.parse)(a);t.filter(f=>(0,Er.parse)(f).name===u).length>1&&!n.has(u)&&n.add(u)}if(n.size===0)return 1;n.size>1?ut(`${h(`${n.size}`)} mismatch template files`,{suffix:"error",type:"error"}):ut(`${h(`${n.size}`)} mismatch template file`,{suffix:"error",type:"error"});let s=$s(`select ${h(".json")} or ${h(".liquid")} template`,{title:"Export Error",message:"Multiple templates detected"}),{action:o}=await prompts([{name:"action",type:"select",message:"Select an Option",hint:" ",instructions:!1,choices:[{title:"Select Templates",description:"Choose which templates to export",value:"select"},{title:"Export .json Templates",description:"Exports the .json templates",value:"json"},{title:"Export .liquid Templates",description:"Exports the .liquid templates",value:"liquid"},{title:"Cancel Export",value:"cancel"}]}]);if(o==="select"){let a=[];for(let u of n)a.push({name:"choice",type:"toggle",message:"templates",hint:" ",active:`${u}.json`,inactive:`${u}.liquid`,onState:({value:c})=>{c?r.add((0,Er.join)(e,"templates",`${u}.liquid`)):r.add((0,Er.join)(e,"templates",`${u}.json`))}});return await prompts(a).then(()=>s()),r}else if(o==="json"){for(let a of n)r.add((0,Er.join)(e,"templates",`${a}.json`));return s(),r}else if(o==="liquid"){for(let a of n)r.add((0,Er.join)(e,"templates",`${a}.liquid`));return s(),r}else o==="cancel"&&s();return 2}function yd(e){e.assets===0&&e.config===0&&e.templates===0&&e.layout===0&&e.snippets===0&&e.sections===0&&ht("Empty output directory",[`There are no files within ${ge((0,Er.relative)(i.cwd,i.dirs.output)+"/**")}`,`You may need to run the ${ge.bold("syncify build")} command and try again.`])}l();var Dd=Y(require("dotenv")),It=require("path"),Ht=require("fs-extra");async function bd(){let e=null;for(let t of Tl){if(e=(0,It.join)(i.cwd,t),await(0,Ht.pathExists)(e))break;e=null}if(e===null)return null;try{if((0,It.extname)(e)===".json"){i.file.path=e,i.file.relative=(0,It.relative)(i.cwd,e),i.file.base=(0,It.basename)(e);let t=await(0,Ht.readFile)(e);return bi(t.toString())}else{i.file.path=e,i.file.relative=(0,It.relative)(i.cwd,e),i.file.base=(0,It.basename)(e);let t=await Zi({cwd:i.cwd,filepath:e});return t.mod.syncify||t.mod.default||t.mod}}catch{let r=(0,It.join)(i.cwd,"syncify.config.json");return await(0,Ht.pathExists)(r)?(0,Ht.readJson)(r):null}}async function sc(){let e=(0,It.join)(i.cwd,"package.json");if(!await(0,Ht.pathExists)(e))throw new Error('Missing "package.json" file');try{i.pkg=await(0,Ht.readJson)(e),Ut("syncify.stores",i.pkg)?L(i.pkg.syncify.stores)?i.stores=i.pkg.syncify.stores:N(i.pkg.syncify.stores)&&ye(i.pkg.syncify.stores)===!1&&(i.stores=[i.pkg.syncify.stores]):i.cmd.strap||Ef(i.cwd)}catch(r){throw new Error(r)}}async function wd(e,t){let r=(0,It.join)(i.cwd,"package.json");try{let s=(await(0,Ht.readFile)(r)).toString(),o=s.indexOf('"version"'),a=s.indexOf('"',o+10)+1,u=s.indexOf('"',a+1);return s.slice(a,u)===e?(await(0,Ht.writeFile)(r,`${s.slice(0,a)}${t}${s.slice(u)}`),await sc(),!0):!1}catch(n){throw new Error(n)}}async function xd(){let e=(0,It.join)(i.cwd,".env");if(await(0,Ht.pathExists)(e)){let t=Dd.default.config({path:e});if(t.error)return Jt(t.error,{path:e}),null;i.env.file=e,i.env.vars=t.parsed}else i.cmd.setup===!1&&!i.cmd.strap&&Ni(i.cwd)}async function Po(e){let{themeVersion:t}=i.cache.build;A.start("export"),i.mode.build?(Ft("Build"),await Eo(e)):yd(i.stats);let r=await gd(i.dirs.output);if(r===2)return;r===1&&i.mode.build&&A.stop("build"),i.mode.publish?Wi("Exporting"):Ft("Export"),_e(),await(0,ar.pathExists)(i.dirs.export)||await(0,ar.mkdir)(i.dirs.export);let n=new Fd.default;for(let o of fn){let a=(0,Fn.join)(i.dirs.output,o);if(await(0,ar.pathExists)(a)){let c=await(0,Sd.glob)("*",{cwd:a,absolute:!0});for(let f of c){let p=`${o}/${(0,Fn.basename)(f)}`;(0,ar.statSync)(f).size===0?(n.addFile(p,Bn(" ")),st(p,"empty file")):(r===1||r.has(f)===!1)&&n.addLocalFile(f,o)}}}let s=ct(n.toBuffer());if(i.vc.update!==null){await(0,ar.pathExists)(i.vc.update.dir)||await(0,ar.mkdir)(i.vc.update.dir),Hi(i.vc,"bump"),za(nr(s),(0,Fn.relative)(i.cwd,i.vc.update.zip));try{await n.writeZipPromise(i.vc.update.zip),t=i.vc.update.number}catch(o){return Jt(o,{file:i.vc.zip,details:"Failed to write zip file"})}}else{await(0,ar.pathExists)(i.vc.dir)?Hi(i.vc,"overwrite"):(await(0,ar.mkdir)(i.vc.dir),Hi(i.vc,"created")),za(nr(s),(0,Fn.relative)(i.cwd,i.vc.zip));try{await n.writeZipPromise(i.vc.zip)}catch(o){return Jt(o,{file:i.vc.zip,details:"Failed to write zip file"})}}i.pkg.version!==t&&(await wd(i.pkg.version,t)?(Kt("package.json","version bumped"),i.cache.build.themeVersion=t,await zn("build")):st("package.json version failed to bump","manual increment required")),A.stop("export"),i.mode.publish===!1&&(Ft(),_e(""),process.exit(0))}l();var vd=Y(require("uWebSockets.js"));var ko=require("fs-extra");async function Cd(e){await Po(e),A.start("publish"),Wi("Publishing");let t=vd.default.App().get("/*",(n,s)=>{n.writeHeader("Access-Control-Allow-Origin","*"),n.writeHeader("Cache-Control","public, max-age=0");let o=i.vc.dir+s.getUrl();(0,ko.existsSync)(o)?n.end((0,ko.readFileSync)(o)):n.endWithoutBody()}).listen(i.publish.tunnelPort,n=>{n||console.log("Failed to listen to port "+i.publish.tunnelPort)});await pt(500),A.start("ngrok");let r=`${i.vc.number}.zip`;ut(m(r),{prefix:"server"});for(let n of i.sync.stores)A.start(n.domain),ut(n.domain,{prefix:"webshop",color:ge}),ut(`${h("role")} ${_} ${i.publish.publishRole}`,{prefix:"publish"}),ut(h(`v${i.vc.number}`),{prefix:"version",color:gi}),_e(),await pt(1e3),Yt("uploading",{style:"spinning",color:Ee}),await pt(2e3),Yt.update("dispatched"),await pt(2e3),Yt.update("extracting"),await pt(2e3),Yt.update("processing"),await pt(1e3),Yt.stop("done"),ut(`${h("published")} ${_} ${n.domain}`,{prefix:"status",color:Ee,suffix:A.now(n.domain)});t.close(),_e(),Ft(),_e(),await prompts([{name:"action",hint:" ",type:"select",message:"Post-Publishing",choices:[{title:"Update Config",value:"config"},{title:"Publish Themes",value:"publish"},{title:"Delete Themes",value:"delete"}]}])}l();function Ed(e){let t=e.toString().trim().toLowerCase();if(t==="v"){let r=pr(i.errors);for(let n=0,s=r.length;n<s;n++){let o=r[n];if(i.errors[o].size!==0){n>0&&ji(),ut(h.whiteBright(o));for(let a of i.errors[o].values())U(a)&&a.length>0&&xe(a);i.errors[o].clear()}}i.mode.upload&&(Ft(),process.exit(0))}else if(t==="s"){for(let r of i.errors)U(r)&&r.length>0&&xe(r);i.errors.clear()}else if(t==="w"){let r=i.warnings[i.log.uri];for(let n of r.keys()){let s=r.get(n);if(s.size===0)continue;let o=X({type:"warning"}).Newline("yellow").Ruler().Newline("yellow").Line(n.toUpperCase(),h.yellow).Newline("yellow");for(let a of s.values())U(a)&&a.length>0&&o.Line(a);An(o.toString()),s.clear()}}}l();function $d(e){T(nl);let t=V("-".repeat(80)),r=`
    ${h("SYNCIFY CLI  "+_+q("  v0.0.1-rc.1"))}

    ${q("Please provide a command argument.")}

    ${h("USAGE"+k)}

    $ syncify                    ${m.italic("Show this screen")}
    $ syncify {store} [theme]    ${m.italic("Store and theme targeting")}

    ${h("HELP"+k)}

    -h, --help                   ${m.italic("Print a list of all available commands")}
    -h, --help examples          ${m.italic("Print a list of command examples")}

  `;if(e.help===null)return T(r);let n=`
    ${h("SYNCIFY CLI  "+_+q("  v0.0.1-rc.1"))}

    Below are some usage examples for working with the Syncify CLI.
    The ${m("=")} character is optional and samples are using the ${m("$ sy")} alias.

    ${h("TARGETING"+k)}

    ${m("Target 1 store and 1 theme")}:
    $ sy your-store${m("=")}theme-1

    ${m("Target 1 store and 2 theme")}:
    $ sy your-store${m("=")}theme-1,some-theme,test-theme

    ${m("Target 2 stores and 1 theme")}:
    $ sy --your-store${m("=")}theme-1 --another-store${m("=")}some-theme

    ${m("Target 2 stores and 4 theme")}:
    $ sy --your-store${m("=")}theme-1,theme-2 --another-store${m("=")}some-theme,test-theme

  ${t}

    ${h("BUILDING"+k)}

    ${m("Build theme from source")}:
    $ sy --build

    ${m("Build theme with terse minification")}:
    $ sy --build --terse

    ${m("Build theme and clean")}:
    $ sy --build --clean --terse

  ${t}

    ${h("WATCHING"+k)}

    ${m("Watch 1 store and 1 theme")}:
    $ sy your-store${m("=")}theme-1 --watch

    ${m("Watch 1 store and 2 themes with hot reloading")}:
    $ sy your-store${m("=")}theme-1,theme-2 --watch --hot

    ${m("Watch 2 stores and 1 theme")}:
    $ sy --your-store${m("=")}theme-1 --another-store${m("=")}some-theme --watch

    ${m("Watch 2 stores and 2 themes")}:
    $ sy --your-store${m("=")}theme-1,theme-2 --another-store${m("=")}some-theme,test-theme --watch

    ${m("Watch 1 store with 2 themes and clean mode with hot live reloads")}:
    $ sy your-store${m("=")}theme-1,theme-2 --watch --clean --hot

    ${m("Watch 1 store with 2 themes in production mode")}:
    $ sy your-store${m("=")}theme-1,theme-2 --prod --watch

  `,s=`
    ${h("SYNCIFY CLI  "+_+q("  v0.0.1-rc.1"))}

    Welcome to the Syncify CLI. The command line utility assumes that you have
    defined stores, themes and setup credentials within a ${m(".env")} file.

    ${h("ALIASES"+k)}

      $ sy                         ${m.italic("Shorthand for syncify")}

    ${h("COMMANDS"+k)}

      $ syncify                    ${m.italic("Show this screen")}
      $ syncify {store} [theme]    ${m.italic("Store and theme targeting")}

    ${h("THEMES"+k)}

        --{store} [theme]          ${m.italic("A store reference command (run examples)")}
      -t, --theme [theme]          ${m.italic("A comma seprated list of themes")}

    ${h("PATHS"+k)}

      -c, --config    <path>       ${m.italic("Set config directory path")}
      -i, --input     <path>       ${m.italic("Set input directory path")}
      -o, --output    <path>       ${m.italic("Set output directory path")}

    ${h("MODES"+k)}

      -w, --watch                  ${m.italic("Run watch mode")}
      -b, --build                  ${m.italic("Run build mode from input")}
      -u, --upload                 ${m.italic("Run upload mode theme to stores")}
      -d, --import                 ${m.italic("Run download mode from theme and stores")}
      -e, --export                 ${m.italic("Run export mode and generate theme zip")}
      -p, --publish                ${m.italic("Run publish and create a release")}
      -r, --resource               ${m.italic("Run resource mode, resource name expected")}

    ${h("RESOURCES"+k)}

      -r, --resource themes        ${m.italic("Run the themes resource")}
      -r, --resource assets        ${m.italic("Run the theme assets resource")}
      -r, --resource pages         ${m.italic("Run the pages resource")}
      -r, --resource metafields    ${m.italic("Run the metafields resource")}
      -r, --resource redirects     ${m.italic("Run the redirects resource")}
      -r, --resource files         ${m.italic("Run the files resource")}

    ${h("ENVIRONMENT"+k)}

      --dev                       ${m.italic("Build in development mode (default)")}
      --prod                      ${m.italic("Build in production mode")}
      --hot                       ${m.italic("Run watch with hot-reloads")}

    ${h("OPERATIONS"+k)}

      --clean                     ${m.italic("Clean the output, use with modes")}
      --silent                    ${m.italic("Silent logging, only errors will print")}
      --cache                     ${m.italic("Purges the local .cache references")}

    ${h("TRIGGERS"+k)}

      --spawn  [list]             ${m.italic("Invoke a defined spawn child process/s")}
      --delete [list]             ${m.italic("Delete a remote and local file")}
      --terse  [list]             ${m.italic("invoke minify mode, accepts resource/s")}

    ${h("TRANSFORMS"+k)}

      --script                    ${m.italic("Run the script transform in isolation")}
      --style                     ${m.italic("Run the style transform in isolation")}
      --svg                       ${m.italic("Run the svg transform in isolation")}
      --image                     ${m.italic("Run the image transform in isolation")}

    ${h("UTILITY"+k)}

      -f, --filter <path>         ${m.italic("Filter operation to be used with modes")}

    ${h("VERSIONING"+k)}

      --bump patch                ${m.italic("Apply a patch version bump, use in export mode")}
      --bump minor                ${m.italic("Apply a minor version bump, use in export mode")}
      --bump major                ${m.italic("Apply a major version bump, use in export mode")}

    ${h("STRAPS"+k)}

      --strap dusk                ${m.italic("Import and generate a dusk strap")}
      --strap dawn                ${m.italic("Import and generate a dawn strap")}
      --strap silk                ${m.italic("Import and generate a silk strap")}

    ${h("HELP"+k)}

      -h, --help                  ${m.italic("Print this screen")}
      -h, --help examples         ${m.italic("Print a list of command examples")}

    ${t}

    ${m("BY \u039D\u0399\u039A\u039F\u039B\u0391\u03A3 \u03A3\u0391\u0392\u0392\u0399\u0394\u0397\u03A3")}

    ${m.underline("https://github.com/panoply")}
    ${m.underline("https://x.com/niksavvidis")}

  `;T(e.help==="examples"?n:s)}l();var eg=require("chokidar");l();var it=require("fs-extra"),Js=require("path");async function Ad(){await Jn(i.home);for(let e of Bl)i.dirs[e]=(0,Js.join)(i.home,`.${e}`),await Jn(i.dirs[e])}async function Td(){return await Jn(i.dirs.cache),await Jn(i.dirs.sourcemaps.root),Promise.all([Jn(i.dirs.sourcemaps.scripts),Jn(i.dirs.sourcemaps.styles)])}async function ic(e){if(e||(e=i.dirs.output),await(0,it.pathExists)(e)){if(i.mode.clean)try{await(0,it.emptyDir)(e)}catch(t){throw new Error(t)}}else try{await(0,it.mkdir)(e)}catch(t){throw new Error(t)}for(let t of fn){let r=(0,Js.join)(e,t),n=t.startsWith("templates/")?t.slice(10):t;if(await(0,it.pathExists)(r))i.stats[n]=(0,it.readdirSync)(r).length;else try{await(0,it.mkdir)(r),i.stats[n]=0}catch(s){throw new Error(s)}}}async function Bd(){let{dirs:e,sync:t,mode:r}=i;if(r.import){if(!await(0,it.pathExists)(e.import))try{await(0,it.mkdir)(e.import)}catch(n){throw new Error(n)}for(let n in t.themes){let{store:s,target:o}=t.themes[n],a=(0,Js.join)(e.import,s);if(await(0,it.pathExists)(a)){if(r.clean)try{await(0,it.emptyDir)(a)}catch(u){throw new Error(u)}}else try{await(0,it.mkdir)(a)}catch(u){throw new Error(u)}await ic((0,Js.join)(a,o))}}}async function Jn(e){if(L(e)){for(let t of e)if(!await(0,it.pathExists)(t))try{await(0,it.mkdir)(t)}catch(r){throw new Error(r)}}else if(!await(0,it.pathExists)(e))try{await(0,it.mkdir)(e)}catch(t){throw new Error(t)}}l();var oc=Y(Gr());function Ld(){if(!w("transform",i.config)||!w("json",i.config.transform))return;let{json:e}=i.config.transform;if(Ne(e)||(N(e)||te({option:"processors",name:"json",expects:"{}",provided:typeof e}),ye(e)))return;let t=at("liquid configuration");for(let r in e){if(r==="indent")if(Rt(e[r])){i.json[r]=e[r];continue}else te({option:"json",name:r,provided:e[r],expects:"number"});if(r==="comments")if(Ae(e[r])){i.json[r]=e[r];continue}else te({option:"json",name:r,provided:e[r],expects:"boolean"});if(r==="useTab")if(Ae(e[r])){i.json[r]=e[r];continue}else te({option:"json",name:r,provided:e[r],expects:"boolean"});if(r==="exclude"){let n=U(e[r])?[e[r]]:e[r];if(L(n)){i.json[r]=(0,oc.default)(Ot(e[r]));continue}else te({option:"json",name:r,provided:n[r],expects:"string | string[]"})}if(r==="terse"&&i.mode.terse===!0){if(ye(e.terse))i.json.terse.enabled=!1,t("Terse option is empty, minification will not apply");else if(Ae(e.terse)&&e.terse===!0)i.json.terse.enabled=!0;else if(N(e.terse)){i.json.terse.enabled=!0;for(let n in e.terse)if(n!=="exclude"&&w(n,i.json.terse))if(Ae(e.terse[r])){i.json.terse[n]=e.terse[n];continue}else te({option:`json ${_} terse`,name:n,provided:e.terse[n],expects:"boolean"});else n==="exclude"&&(i.json.terse.exclude=(0,oc.default)(Ot(e.terse[r])))}}}}l();var ur=require("path"),ac=require("fs-extra");async function Rd(){i.paths.schema.input!==null&&i.paths.schema.input.size>0&&(await Z1(),await Q1(),mt(i.section,"schema",{get(){return i.cache.schema}}))}async function Z1(){for(let e of i.paths.schema.input){let t=(0,ur.extname)(e),r=(0,ur.basename)(e,t);i.section.shared.has(r)&&ht(`Duplicated shared schema file name ${h.yellow(r+t)} detected.`,["Shared Schema JSON file names must be unique across the workspace.","Update the file name and try again."]);try{let s=(await(0,ac.readFile)(e)).toString();if(s.trim().length===0)continue;let o=zr(s.toString());w("$schema",o)&&delete o.$schema,w("$description",o)&&delete o.$description;for(let a in o)if(N(o[a]))w("$description",o[a])&&delete o[a].$description;else if(L(o[a]))for(let u of o[a])w("$description",u)&&delete u.$description;i.cache.schema[e]=new Set,i.section.shared.set(r,{uri:e,schema:o})}catch(n){return qe((0,ur.relative)(i.cwd,e),{notify:{title:"JSON Error (setSharedSchema)",message:`Error when parsing ${(0,ur.basename)(e)}`}}),n instanceof vr&&gn(n,{relative:(0,ur.relative)(i.cwd,e),base:(0,ur.basename)(e)}),null}}}async function Q1(){let{shared:e}=i.section,t=at("Section Schema");for(let r of i.paths.sections.input){let n=await(0,ac.readFile)(r),s=hr(n);if(w(r,i.cache.schema)&&i.cache.checksum[r]===s)continue;i.cache.checksum[r]=s;let o=n.toString(),a=o.search(/{%-?\s*schema/);if(a<0)continue;let u=o.indexOf("%}",a+2)+2,c=o.slice(u),f=u+c.search(/{%-?\s*endschema/);if(f<0){t("Liquid Parse Error",(0,ur.relative)(i.cwd,r));continue}try{let p=JSON.parse(o.slice(u,f)),d=Xe(p);if(d("settings")){for(let g of p.settings)if(w("$ref",g)){let b=g.$ref.split(".")[0];e.has(b)&&i.cache.schema[e.get(b).uri].add(r)}}if(d("blocks"))for(let g of p.blocks){let b=Xe(g);if(b("$ref")){let y=g.$ref.split(".")[0];e.has(y)&&i.cache.schema[e.get(y).uri].add(r)}if(b("settings")){for(let y of g.settings)if(w("$ref",y)){let v=y.$ref.split(".")[0];e.has(v)&&i.cache.schema[e.get(v).uri].add(r)}}}}catch{w(r,i.cache.sections)&&delete i.cache.sections[r],t("JSON Parse Error",(0,ur.relative)(i.cwd,r))}}}l();l();var No=require("enquirer");var Ys={prefix:V("\u2502 "),styles:{primary:Ee,success:Ee,danger:le.bold,warning:ne,muted:m,disabled:m,typing:m},symbols:{ellipsisLarge:"",ellipsisSmall:"",prefix:{pending:"",submitted:"\u2713",cancelled:"\u{10102}"},separator:{pending:"",submitted:" \u2192 ",cancelled:" \u{10102} "}},pointer(e,t){let r=this.state.index===t?C.stub.trimEnd()+" ":C.trim+" ";return t===0?C.trim+`
`+r:r}};async function Pd(e){let t=0,r={...Ys},s=(await Lo(e)).filter(({role:y})=>y!=="demo"),o=jt(s,"name"),a=s.map(y=>(y.name.length>t&&(t=y.name.length),{name:y.name,message:y.name,hint:`${o(y.name)} ${se} ${m(y.role)}`,value:y}));a.push({role:"separator",message:V("\u2500".repeat(t))},{name:"create",message:"Create Theme",value:"create"});let{targets:u}=await(0,No.prompt)({name:"targets",type:"select",multiple:!0,message:"Select Themes",hint:"Press spacebar to select",theme:r,choices:a,result(y){return mi(this.map(y))},format(y){if(L(y)&&y.length>0)return ge(`${y.join(q(", "))}`)}}),c={domain:e.store.toLowerCase(),themes:{}},f=[];for(let y of u)c.themes["${"+y.name+"}"]=y.id,f.push({name:y.name,message:y.name,validate(v,M,I){if(I&&I.name===y.name){if(/[A-Z]/.test(v))return`
`+Tt.redBright("  Target name must be lowercase");if(/[0-9]/.test(v))return`
`+Tt.redBright("  Target name cannot contain numbers");if(/[ ]/.test(v))return`
`+Tt.redBright("  Target name cannot contain spaces");if(/-/.test(v))return`
`+Tt.redBright("  Target name cannot contain dashes")}return!0}});r.styles.primary=ge.italic,r.styles.typing=Ee;let p=JSON.stringify(c,null,2),d=await(0,No.prompt)({name:"stores",type:"snippet",required:u.map(({name:y})=>y),message:"Theme Targets",newline:`
`,theme:r,fields:f,template:p,format(){return this.state.submitted===!0&&this.state.completed!==100?Ee(`${this.state.completed}% completed`):` ${_}  ${Dt(`${this.state.completed}% completed`)}`}}),g={syncify:JSON.parse(d.stores.result)},b=await(0,No.prompt)({name:"save",type:"confirm",message:"Save Settings",theme:r,initial:!0,newline:`
`,format(){return/^[ty1]/i.test(this.input)?"Yes":"No"},footer:C.line+["",m("The following store and theme references will be saved"),m("to your package.json file on the syncify key property."),"",JSON.stringify(g.syncify,null,2).split(`
`).join(`
`+C.line),""].join(`
`+C.line)});console.log(b)}async function kd(e){let t=i.mode.metafields||i.mode.pages||i.mode.redirects||i.mode.release||i.mode.publish||i.mode.themes,r=i.mode.watch||i.mode.upload||i.mode.import,n,s=[],o=!1;t&&i.cmd.stores.length===0&&i.mode.themes===!1&&vs({expected:"syncify <store>",message:["You have not provided a store to target, which is required when","there are multiple stores defined in your setup. Because you are","executing syncify in a mode which will transfers files to a remote","source, it is unable to determine which store to target."],fix:["Provide the store target name as the first command argument","followed by theme target/s and other flags."]}),i.mode.themes&&i.stores.length>0?s=gp():(n=i.cmd.stores.length===0?i.stores.map(({domain:a})=>a):i.cmd.stores,s=i.stores.filter(({domain:a})=>ia(a,n)),o=s.length>1);for(let a of s){let u=`${a.domain}.myshopify.com`.toLowerCase(),c=yp(a.domain),f=i.sync.stores.push({store:a.domain,password:a.password,domain:u,client:c,queue:o})-1;if(i.mode.themes)continue;if(i.mode.metafields||i.mode.pages)return;let p=[];w("theme",e)?p=e.theme.split(","):w(a.domain,e)?p=e[a.domain].split(","):w("themes",a)&&(p=pr(a.themes)),p.length===0&&await Pd(i.sync.stores[f]);for(let d of p)w(d,a.themes)||vf({type:"theme",expected:pr(a.themes).join(","),provided:d,message:[`Unknown theme target (${O(d)}) provided to ${O(a.domain)} store`,`Your ${O("package.json")} file contains no such theme using this name.`],fix:[`Provide an ${O("expected")} theme target or update/add an existing target.`,`You have ${O(`${p.length}`)} theme targets defined for ${O(a.domain)}:`,`

`,`${cn} ${p.join(`
${cn} `)}`,`

`]}),i.sync.themes.push({target:d,sidx:f,store:u,id:a.themes[d],url:`/themes/${a.themes[d]}/assets.json`})}r&&i.sync.themes.length===0&&vs({expected:"-t <theme>",message:["You have not provided a theme to target, which is required","when running syncify in this resource mode."],fix:[`Provide a theme name to target following a ${O("-t")} or ${O("--theme")} flag.`,"Theme targets should be passed as the 2nd argument, the 1st argument should be store name/s."]}),i.sync.stores.length===0&&ht("Unknown, missing or invalid store/theme targets",["Check your store config"]),i.env.sync=i.sync.stores.length===1&&i.sync.themes.length===1?1:2}l();var Nd=Y(require("fast-glob")),Oo=Y(Gr());async function Od(){let e=_n(i.dirs.input),t=at("paths"),r=(s,o,a)=>{if(Ne(o))return[e(a)];if(L(o))return o.map(e);if(U(o))return[e(o)];te({option:"paths",expects:"string | string[]",provided:o,name:s})},n=(s,o)=>{let a=i.config.paths[s];if(N(a)){if(ye(a))return t(`Undefined path/s on "${s}", using fallback`,"{}"),[e(o)];let u=0;"*"in a&&"[name]"in a&&(t("Multiple fallback rename keys, paths will be merged",'"*" and "[name]"'),L(a["*"])?(L(a["[name]"])?a["*"]=[...a["*"],...a["[name]"]]:U(a["[name]"])&&a["*"].push(a["[name]"]),delete a["[name]"]):L(a["[name]"])&&(L(a["*"])?a["[name]"]=[...a["[name]"],...a["*"]]:U(a["*"])&&a["[name]"].push(a["*"]),delete a["*"]));let c=[],f=[];for(let p in a)if(L(a[p])){let d=[p,a[p].map(g=>{let b=e(g);return i.watch.add(b),b})];u===0&&(u=d[1].length),p==="*"||p==="[name]"?c.push(...d):f.push(d)}else if(U(a)){let d=[p,[e(a[p])]];u===0&&(u=d[1].length),i.watch.add(d[1]),p==="*"||p==="[name]"?c.push(...d):f.push(d)}else Ne(a[p])&&te({option:`paths ${_} ${s}`,expects:"string | string[]",provided:a[p],name:p});if(u===0)return t(`Unresolved path/s in "${s}"`,"{}"),[e(o)];i.paths[s].rename=[[(0,Oo.default)(c[1]),c[0]]];for(let[p,d]of f)i.paths[s].rename.push([(0,Oo.default)([...c[1].map(g=>g[0]!=="!"?`!${g}`:g),...d]),p]);return c[1].concat(f.flatMap(p=>p[1]))}else return r(s,a,o)};for(let s of ln){let o=[];s==="snippets"||s==="sections"?o=n(s,`${s}/*`):s==="customers"||s==="metaobject"?o=r(s,i.config.paths[s],`templates/${s}/*`):o=r(s,i.config.paths[s],`${s}/*`),i.paths[s].match=(0,Oo.default)(o),s!=="metafields"&&s!=="redirects"&&(await(0,Nd.default)(o,{cwd:i.cwd})).forEach(a=>{i.paths[s].input.add(a),i.watch.add(a)})}}l();var Pr=require("path");function uc(e){let t=e.match(/^(\d{1,2})\.(\d{1,2})\.(\d{1,2})$/);if(!t)throw new Error("Unable to parse: "+e);return{patch:parseInt(t[3],10),minor:parseInt(t[2],10),major:parseInt(t[1],10)}}function _d(e){let t=Xe(i.cache.build);if(t("syncifyVersion")||(i.cache.build.syncifyVersion=i.version),t("themeVersion")||(i.cache.build.themeVersion=i.pkg.version),i.cache.build.themeVersion!==i.pkg.number){i.vc.update=uc(i.pkg.version),i.vc.update.number=i.pkg.version,i.vc.update.dir=(0,Pr.join)(i.dirs.export,`v${i.vc.major}`),i.vc.update.zip=(0,Pr.join)(i.vc.update.dir,`${i.vc.number}.zip`);let r=uc(i.cache.build.themeVersion);i.vc.number=i.cache.build.themeVersion,i.vc.patch=r.patch,i.vc.minor=r.minor,i.vc.major=r.major,i.vc.dir=(0,Pr.join)(i.dirs.export,`v${i.vc.major}`),i.vc.zip=(0,Pr.join)(i.vc.dir,`${i.vc.number}.zip`)}else{let r=uc(i.pkg.version);i.vc.number=i.pkg.version,i.vc.patch=r.patch,i.vc.minor=r.minor,i.vc.major=r.major,i.vc.dir=(0,Pr.join)(i.dirs.export,`v${i.vc.major}`),i.vc.zip=(0,Pr.join)(i.vc.dir,`${i.vc.number}.zip`)}e.release!==null&&(i.vc.update=H(i.vc),e.release==="patch"?(i.vc.update.patch=i.vc.patch+1,i.vc.update.bump="patch"):e.release==="minor"?(i.vc.update.minor=i.vc.minor+1,i.vc.update.bump="minor"):e.release==="major"&&(i.vc.update.major=i.vc.major+1,i.vc.update.bump="major",i.vc.update.dir=(0,Pr.join)(i.dirs.export,`v${i.vc.update.major}`)),i.vc.update.number=`${i.vc.update.major}.${i.vc.update.minor}.${i.vc.update.patch}`,i.vc.update.zip=(0,Pr.join)(i.vc.update.dir,`${i.vc.update.number}.zip`))}l();var Vd=Y(Hd());l();var Gd=require("child_process");function lc(e,t,r){let n=(0,Gd.spawn)(t.cmd,t.args,{stdio:"pipe"});t.pid=n.pid,async function s(){if(i.env.ready===!1)return await pt(100),s();n.stdio[0].on("data",r.bind({name:e,type:"stdin"})),n.stdio[0].on("data",r.bind({name:e,type:"stdout"})),n.stdio[2].on("data",r.bind({name:e,type:"stderr"})),i.spawn.streams.set(e,n)}()}l();var Ud=!1,zd=!1,fc=new Set;function _o(e,t){if(!Ud){Ud=!0;for(let r of fc)r();e&&process.exit(128+t)}}function Io(e){return fc.add(e),zd||(zd=!0,process.once("exit",_o),process.once("SIGINT",_o.bind(void 0,!0,2)),process.once("SIGTERM",_o.bind(void 0,!0,15)),process.on("message",t=>{t==="shutdown"&&_o(!0,-128)})),()=>fc.delete(e)}function Jd(){let{mode:e,spawn:t,config:r}=i;if(!w("spawn",r)||Ne(r.spawn))return;N(r.spawn)||te({option:"config",name:"spawn",provided:r.spawn,expects:"{ build: {}, watch: {} }"});let n=Xe(r.spawn),s=null;if(e.build&&n("build")&&(s="build"),e.watch&&n("watch")&&(s="watch"),!(Ne(e)||Ne(r.spawn[s]))&&(N(r.spawn[s])||te({option:"spawn",name:s,provided:r.spawn[s],expects:"{ build: {}, watch: {} }"}),!ye(r.spawn[s]))){for(let o in r.spawn[s]){let a=r.spawn[s][o];if(U(a)){i.spawn.commands[o]=H();let u=a.trimStart().indexOf(" ")>-1?a.trimStart().split(" "):[a];i.spawn.commands[o].cmd=u.shift().trim(),i.spawn.commands[o].args=u,i.spawn.commands[o].pid=NaN,lc(o,i.spawn.commands[o],Ga(o))}else if(L(a)){let u=a.shift().trim();i.spawn.commands[o]=H({cmd:u,args:a,pid:NaN}),lc(o,i.spawn.commands[o],Ga(o))}else te({option:"spawn",name:s,provided:r.spawn[s],expects:"string | string[]"})}Pt.spawns(i),Io(()=>{re.pause(),re.clear(),_e(""),t.streams.forEach((o,a)=>{T(`- ${m(`pid: #${o.pid} (${a}) process exited`)}`),(0,Vd.default)(o.pid)}),_e(""),t.streams.clear(),process.exit(0)})}}l();var pc=require("path"),Yd=Y(Gr());async function Kd(){if(!w("script",i.config.transform)||!i.config.transform.script||ye(i.config.transform.script))return;let e=at("Script Transform");w("entryPoints",i.processor.esbuild)&&(e("processor option is not allowed and was omitted","entryPoints"),delete i.processor.esbuild.entryPoints);let t=jn(i.config.transform.script,{addWatch:!1,flatten:!0}),r=oa(["input","watch","rename","snippet"]);w("absWorkingDir",i.processor.esbuild)||(i.processor.esbuild.absWorkingDir=i.cwd);for(let n of t){let s=n.snippet?"snippets":"assets",{name:o}=Ur(n.input,n.rename),a;!o.endsWith(".js")&&!o.endsWith(".mjs")?a=o+".js":o.endsWith(".cjs")?nt({option:"transform.script",name:"rename",value:o,expects:".js | .mjs",reason:["You cannot use cjs extensions in Shopify themes.","The .cjs extension is for Node, themes are a web environment. "]}):a=o;let u=Xe(n),c=H();if(n.snippet){if(a.endsWith(".liquid")||(a=a+".liquid"),c.attrs=[],c.snippet=!0,c.namespace="snippets",c.type=3,u("attrs")&&ye(n.attrs)===!1)if(L(n.attrs))for(let f=0;f<n.attrs.length;f++){let p=n.attrs[f];L(p)?c.attrs.push(p.join("")):te({option:"transform.script",name:`attrs[${f}]`,provided:p,expects:"string[]"})}else te({option:"transform.script",name:"attrs",provided:n.attrs,expects:"[ [ name: string, value: string ] ]"})}else c.attrs=[],c.snippet=!1,c.namespace="assets",c.type=10;if(c.uuid=er(),c.snippet=n.snippet,c.input=n.input,c.output=(0,pc.join)(i.dirs.output,s,a),c.key=(0,pc.join)(s,a),c.size=NaN,c.watch=null,c.watchCustom=null,c.esbuild=null,i.processor.esbuild.outfile=c.output,i.mode.watch&&i.watch.unwatch(c.output),u("esbuild"))if(Ae(n.esbuild)||Ne(n.esbuild))c.esbuild=ye(r)?De(i.processor.esbuild):De(i.processor.esbuild,r);else if(N(n.esbuild)){let f=Xe(n.esbuild);for(let p in["entryPoints","outdir","watch","absWorkingDir","watch","write","logLevel","incremental"])p==="entryPoints"&&f(p)?e('Option is not allowed, use Syncify "input" instead',p):p==="outdir"&&f(p)?e("Option is not allowed, Syncify will handle output location",p):p==="watch"&&f(p)?e("Option is not allowed, declare watch paths using Syncify",p):f(p)&&e("Option is not allowed and will be ignored",p);f("plugins")&&w("plugins",i.processor.esbuild)&&n.esbuild.plugins.unshift(...i.processor.esbuild.plugins),c.esbuild=ye(r)?De(i.processor.esbuild,n.esbuild):De(i.processor.esbuild,n.esbuild,r)}else te({option:"script",name:"esbuild",provided:typeof n.esbuild,expects:"boolean | null | {}"});else c.esbuild=ye(r)?De(i.processor.esbuild):De(i.processor.esbuild,r);if(c.esbuild.entryPoints=[c.input],i.mode.watch)if(!u("watch"))c.watch=new Set;else{L(n.watch)||te({option:"script",name:"watch",provided:n.watch,expects:"string[]"});let f=Ot(n.watch);c.watchCustom=(0,Yd.default)(f),c.watch=new Set(f)}else c.watch=new Set;try{await Hm(c)}catch(f){Af(f,{message:["Syncify has failed to initialize due to a script transform prebuild error.","Script transforms execute runtime builds but the compile process did not complete.","This is typically due to invalid JavaScript syntax but may also be caused due to invalid","transform options being passed."],solution:["You will need to correct the error encountered. Alternatively you can skip Syncify","from applying the transform by excluding the file."],entries:{processor:"ESBuild"}})}i.mode.terse&&(c.esbuild=De(c.esbuild,{exclude:void 0})),i.script.push(c)}}l();var mc=Y(require("fast-glob")),dc=Y(Gr());var $r=require("path"),hc=require("fs-extra");async function tb(){let e=await mu("postcss.config",{tsconfig:null});if(e!==null&&(i.processor.postcss.file=e.path,i.processor.postcss.config=e.config,i.watch.add(e.path)),i.processor.tailwind.installed=pu(i.pkg,"tailwindcss"),i.processor.tailwind.installed){await Wu("tailwind")||ht("Unable to dynamically import TailwindCSS",["Ensure you have installed tailwindcss"]);let r=await mu("tailwind.config",{tsconfig:null});r!==null&&(i.processor.tailwind.file=r.path,i.processor.tailwind.config=r.config,i.watch.add(r.path))}i.processor.sass.installed=pu(i.pkg,"sass"),i.processor.sass.installed&&(await Wu("sass")||ht("Unable to dynamically import SASS",["Ensure you have installed sass"]))}async function Xd(){if(!w("style",i.config.transform)||!i.config.transform.style||ye(i.config.transform.style))return;await tb();let e=at("Style Transform"),t=jn(i.config.transform.style,{addWatch:!1,flatten:!0}),r=_n(i.config.input);for(let n=0;n<t.length;n++){let s=t[n],o=Xe(s),a=H();if(a.uuid=er(),a.input=s.input,a.watch=null,a.attrs=[],a.postcss=null,a.sass=!1,a.tailwind=null,o("postcss")?L(s.postcss)&&s.postcss.length>0?mt(a,"postcss",{get(){return s.postcss}}):Ae(s.postcss)&&s.postcss!==!1&&Ne(s.postcss)===!1?mt(a,"postcss",{get(){return De(i.processor.postcss.config)}}):te({option:"style",name:"postcss",provided:a.postcss,expects:"boolean | []"}):mt(a,"postcss",{get(){return De(i.processor.postcss.config)}}),o("tailwind")){i.processor.tailwind.installed||Wa("tailwindcss");let f=N(s.tailwind);if(f||Ae(s.tailwind)&&s.tailwind!==!1&&Ne(s.tailwind)===!1){let p=De(f?s.tailwind:i.processor.tailwind.config);if(L(p.content)&&ye(p.content)&&(p.content=[(0,$r.join)(i.dirs.input,"**","*.{js,ts,jsx,tsx,vue,svelte,liquid,json,schema}")]),mt(a,"tailwind",{get(){return p}}),i.mode.watch&&L(a.tailwind.content)){let d=await(0,mc.default)(a.tailwind.content);i.processor.tailwind.map===null&&(i.processor.tailwind.map=H()),i.processor.tailwind.map[n]=new Set(d)}}else te({option:"style",name:"tailwind",provided:a.tailwind,expects:"boolean | {}"})}if(o("sass")&&s.sass!==!1&&i.processor.sass.installed===!0){let f=N(s.sass);if((Ae(s.sass)||f)&&Ne(s.sass)===!1)if(i.processor.sass.installed||Wa("sass"),f===!1)mt(a,"sass",{get(){return s.sass}});else{a.sass=De(i.processor.sass.config,s.sass);for(let p in s.sass)if(p==="sourcemap"||p==="warnings"||p==="quietDeps")Ae(s.sass[p])?a.sass[p]=s.sass[p]:te({option:"sass",name:p,provided:s.sass[p],expects:"boolean"});else if(p==="style")U(s.sass[p])===!1&&te({option:"sass",name:p,provided:s.sass[p],expects:"string"}),s.sass[p]==="expanded"||s.sass[p]==="compressed"?a.sass[p]=s.sass[p]:nt({option:"sass",name:p,value:s.sass[p],expects:"expanded | compressed"});else if(p==="includePaths")if(L(s.sass[p])){let d=[];for(let g of s.sass[p]){let b=(0,$r.join)(i.cwd,g);await(0,hc.exists)(b)?d.push(b):e("Cannot resolve sass includePath entry",g)}a.sass[p]=d}else te({option:"sass",name:p,provided:s.sass[p],expects:"string[]"})}else te({option:"style",name:"sass",provided:s.sass,expects:"boolean | {}"});s.snippet===!1&&!/\.s[ac]ss/.test((0,$r.extname)(a.input))&&e("Input is not a sass file",a.input)}let u=Ur(s.rename);o("rename")&&Ne(s)===!1&&(U(s.rename)===!1&&te({option:"styles",name:"rename",provided:s.rename,expects:"string"}),u=Ur(a.input,s.rename),/[a-zA-Z0-9_.-]+/.test(u.name)===!1&&te({option:"sass",name:"rename",provided:u,expects:"Characters: [a-zA-Z0-9_.-]"}),u.name.endsWith(".css")?a.rename=u.name:u.name.endsWith(".scss")?u.name=u.name.replace(".scss",".css"):u.name.endsWith(".sass")?u.name=u.name.replace(".sass",".css"):u.name.endsWith(".liquid")||(u.name=u.name+".css"));let c=[];if(i.mode.watch&&o("watch")){L(s.watch)||te({option:"styles",name:"watch",provided:s.watch,expects:"string[]"});for(let f of s.watch){let p=await(0,mc.default)((0,$r.join)(i.cwd,r(f)));p.length===0&&f[0]!=="!"&&e("Cannot resolve watch glob/path uri",f);for(let d of p)await(0,hc.exists)(d)?c.push(d):e("No file exists in path",d)}c.push(a.input);for(let f of c)i.watch.add(f);a.watch=(0,dc.default)(c)}else a.watch=(0,dc.default)([a.input]),i.watch.add(a.input);if(N(a.sass)&&(a.sass.include.unshift(i.cwd,(0,$r.join)(i.cwd,u.dir)),Ut("sass.include",s)&&(a.sass.include=s.sass.include.map(f=>(0,$r.join)(i.cwd,f)))),o("snippet")&&(Ae(s.snippet)||te({option:"styles",name:"snippet",provided:s.snippet,expects:"boolean"}),a.snippet=s.snippet,a.snippet===!0&&o("attrs")&&ye(s.attrs)===!1))if(L(s.attrs))for(let f=0;f<s.attrs.length;f++){let p=s.attrs[f];L(p)?a.attrs.push(p.join("")):te({option:"style",name:`attrs[${f}]`,provided:p,expects:"string[]"})}else te({option:"style",name:"attrs",provided:s.attrs,expects:"[ string[] ]"});a.snippet?(w("rename",a)||(a.rename=u.name),(u.name.endsWith(".liquid")===!1||a.rename.endsWith(".liquid")===!1)&&(a.rename=u.name+".liquid"),i.paths.transforms.set(a.input,9),i.mode.watch&&i.watch.unwatch((0,$r.join)(i.dirs.output,"snippets",a.rename))):(a.rename=u.name,i.mode.watch&&i.watch.unwatch((0,$r.join)(i.dirs.output,"assets",u.name))),i.style.push(a)}}l();var Zd=Y(Gr());var rb=["minifySchema"],nb=["minifyCSS","minifyJS","collapseWhitespace","removeComments"];function Qd(){let{mode:e}=i;if(!w("liquid",i.config.transform)||ye(i.config.transform.liquid))return;N(i.config.transform.liquid)||te({option:"transform",name:"liquid",expects:"{}",provided:typeof i.config.transform.liquid});let t=at("liquid configuration");if(w("terse",i.config.transform.liquid)&&e.terse===!0){if(ye(i.config.transform.liquid.terse))i.liquid.terse.enabled=!1,t("Terse option is empty, minification will not apply");else if(Ae(i.config.transform.liquid)&&i.config.transform.liquid===!0)i.liquid.terse.enabled=!0;else if(N(i.config.transform.liquid.terse)){i.liquid.terse.enabled=!0;let{terse:r}=i.config.transform.liquid;for(let n of rb)w(n,r)&&(i.liquid.terse.liquid[n]=r[n]);for(let n in nb)w(n,r)&&(i.liquid.terse.markup[n]=r[n]);w("exclude",r)&&(i.liquid.terse.exclude=(0,Zd.default)(Ot(r.exclude)))}}}l();var jo=require("path");async function eh(){if(!w("svg",i.config.transform)||!i.config.transform.svg||ye(i.config.transform.svg))return;let e=at("SVG Transform"),t=jn(i.config.transform.svg,{addWatch:!0,flatten:!1});for(let r of t){let n=r.input.filter(a=>(0,jo.extname)(a)===".svg"?!0:(e("Excluded file which is not an SVG type",(0,jo.relative)(i.cwd,a)),!1));if(n.length===0){e("No SVG file paths were resolved");continue}let s=Xe(r),o=H();o.uuid=er(),o.input=new Set(n),o.format=null,o.match=r.match,o.rename=r.rename,o.snippet=r.snippet,s("svgo")&&s("sprite")&&nt({option:"transform",name:"svg",value:"svgo AND sprite",expects:"svgo OR sprite"}),s("format")?r.format==="file"||r.format==="sprite"?(o.format=r.format,r.format==="file"?o.svgo=!0:o.sprite=!0):nt({option:"transform > svg",name:"format",value:r.format,expects:'"sprite" | "file"'}):s("svgo")?(o.format="file",o.svgo=N(r.svgo)?De(i.processor.svgo,r.svgo):!0):s("sprite")?(o.format="sprite",o.sprite=N(r.sprite)?De(i.processor.sprite,r.sprite):!0):Cf({option:"transform.svg",key:"format",expects:"sprite | file",reason:[`SVG transforms require you to define ${we("format")} Syncify needs to knows how`,"it should handle the input and which processor to use for the transform."]}),i.svg.push(o)}}l();var sh=require("path");l();var yc=Y(require("uWebSockets.js"));l();var th=Y(require("uWebSockets.js")),Zr=require("fs-extra"),Ks=require("path");var gc={enable:!0,output:[]};async function rh(){if(!gc.enable)return gc.output.push(C.red,C.red+Se("Change the socket port address or kill the session occupying it."),C.red+Se("This error typically occurs when multiple Syncify instances are active.")),qe(Se(`${h("ERROR")} on ${h(`${i.hot.method==="hot"?"HOT":"LIVE"} Reload:`)}`)),T(gc.output.join(`
`)),null;T(be(h(`${i.hot.method==="hot"?"HOT Reload":"LIVE Reload"}${k}`))),rt(be("configuring HOT Reload"));let e=(0,Ks.join)(i.dirs.output,"assets"),t=th.default.App(),r=await(0,Zr.readFile)(i.hot.source);return t.get("/*",(n,s)=>{let o=s.getUrl();if(o==="/")n.endWithoutBody();else{let a=(0,Ks.extname)(o),u=(0,Ks.join)(e,o);n.writeHeader("Access-Control-Allow-Origin","*"),n.writeHeader("Cache-Control","public, max-age=0"),a===".js"||a===".mjs"?n.writeHeader("Content-Type","application/javascript"):a===".css"?n.writeHeader("Content-Type","text/css"):a===".json"&&n.writeHeader("Content-Type","application/json"),(0,Zr.existsSync)(u)&&(0,Zr.ensureFile)(u)?n.end((0,Zr.readFileSync)(u)):o.endsWith("hot.min.js")?n.end(r):n.endWithoutBody()}}),t.listen(i.hot.server,n=>{n?rt(be(`${ge("server")}  ${_}  ${m("PORT")}  ${_} ${zt(`${i.hot.server}`)}`)):console.log("Failed to listen to port "+i.hot.server)}),t}async function nh(){let e,r=(await rh()).ws("/ws",{compression:yc.default.SHARED_COMPRESSOR,maxPayloadLength:16*1024*1024,idleTimeout:32,open:n=>{Al.forEach(s=>n.subscribe(s))},message:(n,s,o)=>{qi(Buffer.from(s).toString(o?"binary":"utf8"))}}).listen(i.hot.socket,n=>{e=n,n?(T(be(`${ge("socket")}  ${_}  ${m("PORT")}  ${_} ${zt(`${i.hot.socket}`)}`)),_e()):console.log("Failed to listen on websocket")});return Io(()=>{r.close(),yc.default.us_listen_socket_close(e)}),{get http(){return r},script:(n,s)=>r.publish("script",`script,${s},${n}`),stylesheet:(n,s)=>r.publish("stylesheet",`stylesheet,${s},${n}`),section:n=>r.publish("section",`section,${n}`),svg:n=>r.publish("svg",`svg,${n}`),assets:()=>r.publish("assets","assets"),reload:()=>r.publish("reload","reload"),replace:()=>r.publish("replace","replace"),connected:()=>r.publish("connected","connected"),disconnect:()=>r.publish("disconnect","disconnect")}}async function ih(){if(i.mode.watch!==!0||i.mode.hot===!1&&i.config.hot===!1)return;i.hot.source=(0,sh.join)(i.cwd,"node_modules","@syncify/cli","hot.min.js");let e=at("HOT Reloads");if(i.env.sync>1){e("HOT Reloads can only be used on 1 store");return}else if(i.sync.themes.length>1){e("HOT Reloads can only be used on 1 theme");return}if(kr(N(i.config.hot),Ae(i.config.hot),Ne(i.config.hot))&&te({option:"config",name:"hot",provided:i.config.hot,expects:"boolean | {}"}),N(i.config.hot)&&ye(i.config.hot)===!1){let t=Xe(i.hot);for(let r in i.config.hot)t(r)||Oi(`hot.${r}`,i.config.hot[r]),r==="label"?i.config.hot[r]==="visible"||i.config.hot[r]==="hidden"?i.hot[r]=i.config.hot[r]:nt({option:"hot",name:r,value:i.config.hot[r],expects:"visible | hidden"}):r==="strategy"?i.config.hot[r]==="hydrate"||i.config.hot[r]==="replace"?i.hot[r]=i.config.hot[r]:nt({option:"hot",name:r,value:i.config.hot[r],expects:"hydrate | replace"}):r==="method"?i.config.hot[r]==="hot"||i.config.hot[r]==="refresh"?i.hot[r]=i.config.hot[r]:nt({option:"hot",name:r,value:i.config.hot[r],expects:"hot | refresh"}):r==="scroll"?i.config.hot[r]==="preserved"||i.config.hot[r]==="top"?i.hot[r]=i.config.hot[r]:nt({option:"hot",name:r,value:i.config.hot[r],expects:"preserved | top"}):typeof i.hot[r]==typeof i.config.hot[r]?i.hot[r]=i.config.hot[r]:te({option:"hot",name:r,provided:i.config.hot[r],expects:typeof i.hot[r]})}i.wss=await nh()}l();var ah=require("path");function Dc(e,t){let r=[],n=H();i.mode.upload?(n.base="output",n.from="output",n.dirs=fn.map(s=>`${$("-")} ${O(s)}`),n.fix=[`The ${O("--filter")} (or ${O("-f")}) flag command argument expects you`,"provide a theme output directory as the starting point. Filtering begins with","a Shopify output directory name, for example:","",`${$("$")} ${$(`syncify --filter ${O("sections/file.liquid")}`)}`,`${$("$")} ${$(`syncify --filter ${O("snippets/*")}`)}`,`${$("$")} ${$(`syncify --filter ${O("templates/*.json")}`)}`,`${$("$")} ${$(`syncify --filter ${O("!assets/some-file.ext")}`)}`,"",`Syncify will automatically resolve files from within your defined ${h(n.base)} directory`,"based on the starting point directory name. You can pass glob star matches following the",`directory namespace or starting point ignores (${O("!")}) as long the directory can match.`]):(n.base="input",n.from="paths",n.dirs=ln.map(s=>`${$("-")} ${O(s)}`),n.fix=[`The ${O("--filter")} (or ${O("-f")}) flag command argument expects you`,`provide a ${mr.bold("paths")} key name as the starting point. Filtering begins with`,"a Shopify output directory name, for example:","",`${$("$")} ${$(`syncify --filter ${O("sections/file.liquid")}`)}`,`${$("$")} ${$(`syncify --filter ${O("snippets/*")}`)}`,`${$("$")} ${$(`syncify --filter ${O("templates/*.json")}`)}`,`${$("$")} ${$(`syncify --filter ${O("!assets/some-file.ext")}`)}`,"",`Syncify will automatically resolve files from within your defined ${h(n.base)} directory`,`based on the starting point ${h("paths")} name. You can pass glob star matches following the`,`starting point or ignores (${O("!")}) as long the reference can match.`]),e==="pattern"?(r.push(`Invalid ${O("--filter")} pattern provided. You cannot pass starting point`),t[0]==="*"?r.push(`glob (${O("*")}) stars as filters, Syncify does not support this.`):t[0]==="/"?r.push(`path (${O("/")}) roots as filters, Syncify does not support this.`):t[0]==="."&&r.push(`dot paths (${O(".")})  as filters, Syncify does not support this.`),r.push(`Use a starting point reference name based on the ${O(n.from)} key property`,`in your ${O(i.file.base)} file.`)):r.push(`Invalid directory provided. The ${O("--filter")} pattern expects the starting point`,"directory path be one of the following:","",...n.dirs,""),vs({message:r,expected:"--filter <dir>",fix:n.fix})}function oh(e,t,r){if((t[0]==="*"||t[0]==="/"||t[0]===".")&&Dc("pattern",t),t[0]==="!"){r.test(t.slice(1))||Dc("dir",t);return}r.test(t)||Dc("dir",t);let n=t.slice(0,t.indexOf("/"));L(i.filters[n])||(i.filters[n]=[]),i.filters[n].push((0,ah.join)(e,t))}function uh(e){if(!w("filter",e))return;let t=i.mode.upload?i.dirs.output:i.dirs.input,r=e.filter.replace(/\s+/g," ").trim(),n=i.mode.upload?new RegExp(`^(${fn.join("|")})`):new RegExp(`^(${ln.join("|")})`);if(r.indexOf(",")>-1){let s=r.split(",").filter(Boolean).map(o=>o.trim());for(let o of s)oh(t,o,n)}else oh(t,r,n)}l();async function ch(){if(N(i.config.publish)&&ye(i.config.publish)===!1)for(let e in i.config.publish)w(e,i.publish)||Oi(`publish.${e}`,i.config.publish[e]),e==="tunnelPort"?Rt(i.config.publish[e])&&isNaN(i.config.publish[e])===!1?i.publish[e]=i.config.publish[e]:nt({option:"publish",name:e,value:i.config.hot[e],expects:"visible | hidden"}):e==="publishRole"?i.config.publish[e]==="main"||i.config.publish[e]==="unpublished"||i.config.publish[e]==="development"?i.publish[e]=i.config.publish[e]:nt({option:"publish",name:e,value:i.config.hot[e],expects:"main | unpublished | development"}):e==="bindVersion"?Ae(i.config.publish[e])?i.publish[e]=i.config.publish[e]:te({option:"bindVersion",name:e,provided:i.config.publish[e],expects:typeof i.publish[e]}):e==="themeLimit"&&(Rt(i.config.publish[e])?i.config.publish[e]>5?nt({option:"publish",name:e,value:i.config.hot[e],expects:"1 - 5",reason:["Syncify requries a theme limit between 1 and 5."]}):i.publish[e]=i.config.publish[e]:te({option:"themeLimit",name:e,provided:i.config.publish[e],expects:typeof i.publish[e]}));(i.mode.publish===!0||i.mode.release===!0)&&(w("ngrok_auth_token",i.env.vars)||ht("Missing ngrok auth token",["Theme publishing requires an ngrok authorisation token",`This is easy to obtain, visit ${dr("https://ngrok.com")}`,`and create a ${h("free")} account to get a token.`,"",`Once you have obtained an auth token, provide it in your ${m(".env")}`,"file, use the following environment variable name:","",`${q('ngrok_auth_token = ""')}`]))}l();l();l();var Mb=Y(require("fs"),1),Kh=Y(require("net"),1);var Zo={};ra(Zo,{darwin:()=>Hh,darwinFast:()=>Bc,linux:()=>Ob,win32:()=>Gh,wsl:()=>_b});l();var qh=Y(require("fs"),1),Zt=Y(require("path"),1),Ac=require("os"),rs=require("child_process"),ts=Y(fh(),1);l();var Zn=Y(require("process"),1),Th=require("events"),en=Y(Sh(),1);l();var ft=typeof performance<"u"&&performance,Eh;Fh=process.hrtime,Fc=function(){var e=Fh();return e[0]*1e9+e[1]},vh=Fc(),Eh=function(){return(Fc()-vh)/1e6};var Fh,Fc,vh,Ch=ft&&ft.now?function(){return ft.now()}:Eh;function Wo(e){if(!e)throw new Error("name must be non-empty")}function Cb(e,t){for(var r=0,n=e.length,s;r<n;)s=r+n>>>1,e[s].startTime<t.startTime?r=s+1:n=s;e.splice(r,0,t)}var Go,Uo,ri,zo;ft&&ft.mark&&ft.measure&&ft.getEntriesByName&&ft.getEntriesByType&&ft.clearMarks&&ft.clearMeasures&&ft.clearResourceTimings?(Go=function(e){Wo(e),ft.mark("start "+e)},Uo=function(e){Wo(e),ft.mark("end "+e);var t=ft.measure(e,"start "+e,"end "+e);if(t)return t;var r=ft.getEntriesByName(e);return r[r.length-1]},ri=function(){return ft.getEntriesByType("measure")},zo=function(){ft.clearMarks(),ft.clearMeasures()}):(qo={},Ho=[],Go=function(e){Wo(e);var t=Ch();qo["$"+e]=t},Uo=function(e){Wo(e);var t=Ch(),r=qo["$"+e];if(!r)throw new Error("no known mark: "+e);var n={startTime:r,name:e,duration:t-r,entryType:"measure"};return Cb(Ho,n),n},ri=function(){return Ho},zo=function(){qo={},Ho=[]});var qo,Ho;var Qr=Zn.default.platform==="win32",Kn=Zn.default.browser,Xn={red:Kn?"crimson":1,yellow:Kn?"gold":3,cyan:Kn?"darkturquoise":6,green:Kn?"forestgreen":2,blue:Kn?"steelblue":4,magenta:Kn?"palevioletred":5};en.default.colors=[Xn.cyan,Xn.green,Xn.blue,Xn.magenta];var vc=class extends Th.EventEmitter{issueStatus(t,r){(t==="status"||t==="statusEnd")&&this.emit(t,[t,...r])}issueWarning(t,r){this.emit("warning",[t,...r])}},$h={},$b=25,Ah,Qn=class e{static _logToStdErr(t,r){e.loggerfn(t)(...r)}static loggerfn(t){t=`LH:${t}`;let r=$h[t];return r||(r=(0,en.default)(t),$h[t]=r,t.endsWith("error")?r.color=Xn.red:t.endsWith("warn")&&(r.color=Xn.yellow)),r}static setLevel(t){switch(Ah=t,t){case"silent":en.default.enable("-LH:*");break;case"verbose":en.default.enable("LH:*");break;case"warn":en.default.enable("-LH:*, LH:*:warn, LH:*:error");break;case"error":en.default.enable("-LH:*, LH:*:error");break;default:en.default.enable("LH:*, -LH:*:verbose")}}static formatProtocol(t,r,n){let s=!Zn.default||Zn.default.browser?1/0:Zn.default.stdout.columns,o=r.method||"?????",a=s-o.length-t.length-$b,u=r.params&&o!=="IO.read"?JSON.stringify(r.params).substr(0,a):"";e._logToStdErr(`${t}:${n||""}`,[o,u])}static isVerbose(){return Ah==="verbose"}static time({msg:t,id:r,args:n=[]},s="log"){Go(r),e[s]("status",t,...n)}static timeEnd({msg:t,id:r,args:n=[]},s="verbose"){e[s]("statusEnd",t,...n),Uo(r)}static log(t,...r){return e.events.issueStatus(t,r),e._logToStdErr(t,r)}static warn(t,...r){return e.events.issueWarning(t,r),e._logToStdErr(`${t}:warn`,r)}static error(t,...r){return e._logToStdErr(`${t}:error`,r)}static verbose(t,...r){return e.events.issueStatus(t,r),e._logToStdErr(`${t}:verbose`,r)}static greenify(t){return`${e.green}${t}${e.reset}`}static redify(t){return`${e.red}${t}${e.reset}`}static get green(){return"\x1B[32m"}static get red(){return"\x1B[31m"}static get yellow(){return"\x1B[33m"}static get purple(){return"\x1B[95m"}static get reset(){return"\x1B[0m"}static get bold(){return"\x1B[1m"}static get dim(){return"\x1B[2m"}static get tick(){return Qr?"\u221A":"\u2713"}static get cross(){return Qr?"\xD7":"\u2718"}static get whiteSmallSquare(){return Qr?"\u0387":"\u25AB"}static get heavyHorizontal(){return Qr?"\u2500":"\u2501"}static get heavyVertical(){return Qr?"\u2502 ":"\u2503 "}static get heavyUpAndRight(){return Qr?"\u2514":"\u2517"}static get heavyVerticalAndRight(){return Qr?"\u251C":"\u2523"}static get heavyDownAndHorizontal(){return Qr?"\u252C":"\u2533"}static get doubleLightHorizontal(){return"\u2500\u2500"}};Qn.events=new vc;Qn.takeTimeEntries=()=>{let e=ri();return zo(),e};Qn.getTimeEntries=()=>ri();var Ue=Qn;l();var Oh=require("path"),Ko=Y(require("child_process"),1),_h=require("fs"),Ih=Y(Nh(),1);function cr(e,t){return typeof e>"u"?t:e}async function jh(e){return new Promise(t=>setTimeout(t,e))}var es=class extends Error{constructor(t="Unexpected error",r){return super(),this.message=t,this.code=r,this.stack=new Error().stack,this}},Vo=class extends es{constructor(){super(...arguments),this.message="The CHROME_PATH environment variable must be set to a Chrome/Chromium executable no older than Chrome stable.",this.code="ERR_LAUNCHER_PATH_NOT_SET"}},Jo=class extends es{constructor(){super(...arguments),this.message="userDataDir must be false or a path.",this.code="ERR_LAUNCHER_INVALID_USER_DATA_DIRECTORY"}},ni=class extends es{constructor(){super(...arguments),this.message=`Platform ${Ar()} is not supported.`,this.code="ERR_LAUNCHER_UNSUPPORTED_PLATFORM"}},Yo=class extends es{constructor(){super(...arguments),this.message="No Chrome installations found.",this.code="ERR_LAUNCHER_NOT_INSTALLED"}};function Ar(){return Ih.default?"wsl":process.platform}function Mh(){switch(Ar()){case"darwin":case"linux":return kb();case"wsl":process.env.TEMP=$c(`${process.env.PATH}`);case"win32":return Nb();default:throw new ni}}function Rb(e=""){let t=/\/mnt\/([a-z])\//.exec(e);if(!t)return e;let r=t[1];return e.replace(`/mnt/${r}/`,`${r.toUpperCase()}:\\`).replace(/\//g,"\\")}function Wh(e=""){if(/[a-z]:\\/iu.test(e))return e;try{return Ko.default.execFileSync("wslpath",["-w",e]).toString().trim()}catch{return Rb(e)}}function Xo(e,t){try{return Ko.default.execFileSync("wslpath",["-u",e]).toString().trim()}catch{return t}}function Pb(e){let r=/\/mnt\/([a-z])\/Users\/([^\/:]+)\/AppData\//.exec(e)||[];return`/mnt/${r[1]}/Users/${r[2]}/AppData/Local`}function $c(e){let r=/\/([a-z])\/Users\/([^\/:]+)\/AppData\//.exec(e)||[];return Xo(`${r[1]}:\\Users\\${r[2]}\\AppData\\Local`,Pb(e))}function kb(){return Ko.default.execSync("mktemp -d -t lighthouse.XXXXXXX").toString().trim()}function Nb(){let e=process.env.TEMP||process.env.TMP||(process.env.SystemRoot||process.env.windir)+"\\temp",t=Math.floor(Math.random()*9e7+1e7),r=(0,Oh.join)(e,"lighthouse."+t);return(0,_h.mkdirSync)(r,{recursive:!0}),r}var Tc=/\r?\n/;function Bc(){let e=[process.env.CHROME_PATH,process.env.LIGHTHOUSE_CHROMIUM_PATH,"/Applications/Google Chrome Canary.app/Contents/MacOS/Google Chrome Canary","/Applications/Google Chrome.app/Contents/MacOS/Google Chrome"];for(let t of e)if(t&&tn(t))return t;return Hh()[0]}function Hh(){let e=["/Contents/MacOS/Google Chrome Canary","/Contents/MacOS/Google Chrome"],t="/System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/LaunchServices.framework/Versions/A/Support/lsregister",r=[],n=Lc();n&&r.push(n),(0,rs.execSync)(`${t} -dump | grep -i 'google chrome\\( canary\\)\\?\\.app' | awk '{$1=""; print $0}'`).toString().split(Tc).forEach(a=>{e.forEach(u=>{let c=Zt.default.join(a.substring(0,a.indexOf(".app")+4).trim(),u);tn(c)&&r.indexOf(c)===-1&&r.push(c)})});let s=(0,ts.default)(process.env.HOME||(0,Ac.homedir)()),o=[{regex:new RegExp(`^${s}/Applications/.*Chrome\\.app`),weight:50},{regex:new RegExp(`^${s}/Applications/.*Chrome Canary\\.app`),weight:51},{regex:/^\/Applications\/.*Chrome.app/,weight:100},{regex:/^\/Applications\/.*Chrome Canary.app/,weight:101},{regex:/^\/Volumes\/.*Chrome.app/,weight:-2},{regex:/^\/Volumes\/.*Chrome Canary.app/,weight:-1}];return process.env.LIGHTHOUSE_CHROMIUM_PATH&&o.unshift({regex:new RegExp((0,ts.default)(process.env.LIGHTHOUSE_CHROMIUM_PATH)),weight:150}),process.env.CHROME_PATH&&o.unshift({regex:new RegExp((0,ts.default)(process.env.CHROME_PATH)),weight:151}),Uh(r,o)}function Lc(){if(tn(process.env.CHROME_PATH))return process.env.CHROME_PATH;if(tn(process.env.LIGHTHOUSE_CHROMIUM_PATH))return Ue.warn("ChromeLauncher","LIGHTHOUSE_CHROMIUM_PATH is deprecated, use CHROME_PATH env variable instead."),process.env.LIGHTHOUSE_CHROMIUM_PATH}function Ob(){let e=[],t=Lc();if(t&&e.push(t),[Zt.default.join((0,Ac.homedir)(),".local/share/applications/"),"/usr/share/applications/"].forEach(o=>{e=e.concat(jb(o))}),["google-chrome-stable","google-chrome","chromium-browser","chromium"].forEach(o=>{try{let a=(0,rs.execFileSync)("which",[o],{stdio:"pipe"}).toString().split(Tc)[0];tn(a)&&e.push(a)}catch{}}),!e.length)throw new Vo;let s=[{regex:/chrome-wrapper$/,weight:51},{regex:/google-chrome-stable$/,weight:50},{regex:/google-chrome$/,weight:49},{regex:/chromium-browser$/,weight:48},{regex:/chromium$/,weight:47}];return process.env.LIGHTHOUSE_CHROMIUM_PATH&&s.unshift({regex:new RegExp((0,ts.default)(process.env.LIGHTHOUSE_CHROMIUM_PATH)),weight:100}),process.env.CHROME_PATH&&s.unshift({regex:new RegExp((0,ts.default)(process.env.CHROME_PATH)),weight:101}),Uh(Ib(e.filter(Boolean)),s)}function _b(){return process.env.LOCALAPPDATA=$c(`${process.env.PATH}`),process.env.PROGRAMFILES=Xo("C:/Program Files","/mnt/c/Program Files"),process.env["PROGRAMFILES(X86)"]=Xo("C:/Program Files (x86)","/mnt/c/Program Files (x86)"),Gh()}function Gh(){let e=[],t=[`${Zt.default.sep}Google${Zt.default.sep}Chrome SxS${Zt.default.sep}Application${Zt.default.sep}chrome.exe`,`${Zt.default.sep}Google${Zt.default.sep}Chrome${Zt.default.sep}Application${Zt.default.sep}chrome.exe`],r=[process.env.LOCALAPPDATA,process.env.PROGRAMFILES,process.env["PROGRAMFILES(X86)"]].filter(Boolean),n=Lc();return n&&e.push(n),r.forEach(s=>t.forEach(o=>{let a=Zt.default.join(s,o);tn(a)&&e.push(a)})),e}function Uh(e,t){return e.map(n=>{for(let s of t)if(s.regex.test(n))return{path:n,weight:s.weight};return{path:n,weight:10}}).sort((n,s)=>s.weight-n.weight).map(n=>n.path)}function tn(e){if(!e)return!1;try{return qh.default.accessSync(e),!0}catch{return!1}}function Ib(e){return Array.from(new Set(e))}function jb(e){let t=/(^[^ ]+).*/,r="^Exec=/.*/(google-chrome|chrome|chromium)-.*",n=[];if(tn(e)){let s;try{s=(0,rs.execSync)(`grep -ER "${r}" ${e} | awk -F '=' '{print $2}'`,{stdio:"pipe"})}catch{s=(0,rs.execSync)(`grep -Er "${r}" ${e} | awk -F '=' '{print $2}'`,{stdio:"pipe"})}s=s.toString().split(Tc).map(o=>o.replace(t,"$1")),s.forEach(o=>tn(o)&&n.push(o))}return n}l();var zh=require("http");function Vh(){return new Promise((e,t)=>{let r=(0,zh.createServer)();r.listen(0),r.once("listening",()=>{let{port:n}=r.address();r.close(()=>e(n))}),r.once("error",t)})}l();var Rc=["--disable-features="+["Translate","OptimizationHints","MediaRouter","DialMediaRouteProvider","CalculateNativeWinOcclusion","InterestFeedContentSuggestions","CertificateTransparencyComponentUpdater","AutofillServerCommunication","PrivacySandboxSettings4"].join(","),"--disable-extensions","--disable-component-extensions-with-background-pages","--disable-background-networking","--disable-component-update","--disable-client-side-phishing-detection","--disable-sync","--metrics-recording-only","--disable-default-apps","--mute-audio","--no-default-browser-check","--no-first-run","--disable-backgrounding-occluded-windows","--disable-renderer-backgrounding","--disable-background-timer-throttling","--disable-ipc-flooding-protection","--password-store=basic","--use-mock-keychain","--force-fieldtrials=*BackgroundTracing/default/","--disable-hang-monitor","--disable-prompt-on-repost","--disable-domain-reliability","--propagate-iph-for-testing"];var Qo=require("child_process");var Wb=Ar()==="wsl",qb=Ar()==="win32",Jh="SIGINT",Hb=130,Gb=new Set(["darwin","linux","win32","wsl"]),ns=new Set,Yh=()=>{Ub(),process.exit(Hb)};async function Xh(e={}){e.handleSIGINT=cr(e.handleSIGINT,!0);let t=new Pc(e);e.handleSIGINT&&ns.size===0&&process.on(Jh,Yh),ns.add(t),await t.launch();let r=()=>{ns.delete(t),ns.size===0&&process.removeListener(Jh,Yh),t.kill()};return{pid:t.pid,port:t.port,kill:r,process:t.chromeProcess}}function Ub(){let e=[];for(let t of ns)try{t.kill(),ns.delete(t)}catch(r){e.push(r)}return e}var Pc=class e{constructor(t={},r={}){if(this.opts=t,this.tmpDirandPidFileReady=!1,this.fs=r.fs||Mb,this.spawn=r.spawn||Qo.spawn,Ue.setLevel(cr(this.opts.logLevel,"silent")),this.startingUrl=cr(this.opts.startingUrl,"about:blank"),this.chromeFlags=cr(this.opts.chromeFlags,[]),this.prefs=cr(this.opts.prefs,{}),this.requestedPort=cr(this.opts.port,0),this.portStrictMode=t.portStrictMode,this.chromePath=this.opts.chromePath,this.ignoreDefaultFlags=cr(this.opts.ignoreDefaultFlags,!1),this.connectionPollInterval=cr(this.opts.connectionPollInterval,500),this.maxConnectionRetries=cr(this.opts.maxConnectionRetries,50),this.envVars=cr(t.envVars,Object.assign({},process.env)),typeof this.opts.userDataDir=="boolean")if(!this.opts.userDataDir)this.useDefaultProfile=!0,this.userDataDir=void 0;else throw new Jo;else this.useDefaultProfile=!1,this.userDataDir=this.opts.userDataDir}get flags(){let t=this.ignoreDefaultFlags?[]:Rc.slice();return t.push(`--remote-debugging-port=${this.port}`),!this.ignoreDefaultFlags&&Ar()==="linux"&&t.push("--disable-setuid-sandbox"),this.useDefaultProfile||t.push(`--user-data-dir=${Wb?Wh(this.userDataDir):this.userDataDir}`),process.env.HEADLESS&&t.push("--headless"),t.push(...this.chromeFlags),t.push(this.startingUrl),t}static defaultFlags(){return Rc.slice()}static getFirstInstallation(){return Ar()==="darwin"?Bc():Zo[Ar()]()[0]}static getInstallations(){return Zo[Ar()]()}makeTmpDir(){return Mh()}prepare(){let t=Ar();if(!Gb.has(t))throw new ni;this.userDataDir=this.userDataDir||this.makeTmpDir(),this.outFile=this.fs.openSync(`${this.userDataDir}/chrome-out.log`,"a"),this.errFile=this.fs.openSync(`${this.userDataDir}/chrome-err.log`,"a"),this.setBrowserPrefs(),this.pidFile=`${this.userDataDir}/chrome.pid`,Ue.verbose("ChromeLauncher",`created ${this.userDataDir}`),this.tmpDirandPidFileReady=!0}setBrowserPrefs(){if(Object.keys(this.prefs).length===0)return;let t=`${this.userDataDir}/Default`;this.fs.existsSync(t)||this.fs.mkdirSync(t,{recursive:!0});let r=`${t}/Preferences`;try{if(this.fs.existsSync(r)){let n=this.fs.readFileSync(r,"utf-8"),s=JSON.parse(n);this.fs.writeFileSync(r,JSON.stringify({...s,...this.prefs}),"utf-8")}else this.fs.writeFileSync(r,JSON.stringify({...this.prefs}),"utf-8")}catch(n){Ue.log("ChromeLauncher",`Failed to set browser prefs: ${n.message}`)}}async launch(){if(this.requestedPort!==0){this.port=this.requestedPort;try{await this.isDebuggerReady(),Ue.log("ChromeLauncher",`Found existing Chrome already running using port ${this.port}, using that.`);return}catch{if(this.portStrictMode)throw new Error(`found no Chrome at port ${this.requestedPort}`);Ue.log("ChromeLauncher",`No debugging port found on port ${this.port}, launching a new Chrome.`)}}if(this.chromePath===void 0){let t=e.getFirstInstallation();if(!t)throw new Yo;this.chromePath=t}return this.tmpDirandPidFileReady||this.prepare(),this.pid=await this.spawnProcess(this.chromePath),Promise.resolve()}async spawnProcess(t){let n=await(async()=>this.chromeProcess?(Ue.log("ChromeLauncher",`Chrome already running with pid ${this.chromeProcess.pid}.`),this.chromeProcess.pid):(this.requestedPort===0&&(this.port=await Vh()),Ue.verbose("ChromeLauncher",`Launching with command:
"${t}" ${this.flags.join(" ")}`),this.chromeProcess=this.spawn(t,this.flags,{detached:process.platform!=="win32",stdio:["ignore",this.outFile,this.errFile],env:this.envVars}),this.chromeProcess.pid&&this.fs.writeFileSync(this.pidFile,this.chromeProcess.pid.toString()),Ue.verbose("ChromeLauncher",`Chrome running with pid ${this.chromeProcess.pid} on port ${this.port}.`),this.chromeProcess.pid))();return await this.waitUntilReady(),n}cleanup(t){t&&(t.removeAllListeners(),t.end(),t.destroy(),t.unref())}isDebuggerReady(){return new Promise((t,r)=>{let n=Kh.createConnection(this.port,"127.0.0.1");n.once("error",s=>{this.cleanup(n),r(s)}),n.once("connect",()=>{this.cleanup(n),t()})})}waitUntilReady(){let t=this;return new Promise((r,n)=>{let s=0,o="Waiting for browser.",a=()=>{s===0&&Ue.log("ChromeLauncher",o),s++,o+="..",Ue.log("ChromeLauncher",o),t.isDebuggerReady().then(()=>{Ue.log("ChromeLauncher",o+`${Ue.greenify(Ue.tick)}`),r()}).catch(u=>{if(s>t.maxConnectionRetries){Ue.error("ChromeLauncher",u.message);let c=this.fs.readFileSync(`${this.userDataDir}/chrome-err.log`,{encoding:"utf-8"});return Ue.error("ChromeLauncher",`Logging contents of ${this.userDataDir}/chrome-err.log`),Ue.error("ChromeLauncher",c),n(u)}jh(t.connectionPollInterval).then(a)})};a()})}kill(){if(this.chromeProcess){this.chromeProcess.on("close",()=>{delete this.chromeProcess,this.destroyTmp()}),Ue.log("ChromeLauncher",`Killing Chrome instance ${this.chromeProcess.pid}`);try{if(qb){let t=(0,Qo.spawnSync)(`taskkill /pid ${this.chromeProcess.pid} /T /F`,{shell:!0,encoding:"utf-8"}),{stderr:r}=t;r&&Ue.error("ChromeLauncher","taskkill stderr",r)}else this.chromeProcess.pid&&process.kill(-this.chromeProcess.pid,"SIGKILL")}catch(t){let r=`Chrome could not be killed ${t.message}`;Ue.warn("ChromeLauncher",r)}this.destroyTmp()}}destroyTmp(){if(this.outFile&&(this.fs.closeSync(this.outFile),delete this.outFile),this.userDataDir===void 0||this.opts.userDataDir!==void 0)return;this.errFile&&(this.fs.closeSync(this.errFile),delete this.errFile),(this.fs.rmSync||this.fs.rmdirSync)(this.userDataDir,{recursive:!0,force:!0,maxRetries:10})}};var Zh=Y(require("chrome-remote-interface"));var Vb=()=>i.hot.previewBar?"":`
  const preview = document.getElementById("preview-bar-iframe");
  if (preview) preview.style.display = "none";
`,Jb=()=>`

  const injection = new Promise((resolve, reject) => {

    try {

      const inject = document.getElementById('syncify-hot-injection');

      if (inject) {
        console.log('Script already injected.');
        return resolve();
      }

      const script = document.createElement('script');
      script.setAttribute('spx-eval', 'false');
      script.setAttribute('id', 'syncify-hot-injection');
      script.setAttribute('src', 'http://localhost:${i.hot.server}/hot.min.js');

      script.onload = () => {

        // console.log('Script loaded successfully.');

        window.syncify.connect({
          server: ${i.hot.server},
          socket: ${i.hot.socket},
          strategy: "${i.hot.strategy}",
          method: "${i.hot.method}"
        });

        resolve();

      };

      script.onerror = (e) => {
        console.error('Failed to load script:', e);
        reject(new Error('Script load error'));
      };

      document.head.appendChild(script);
      // console.log('Script appended to the document.');

    } catch (err) {

      // console.error('Error during script injection:', err);
      reject(err);

    }
  });

  injection.then(() => {

    ${i.hot.loadEventJS}

  });
`,Qh=async()=>{try{let e=await Xh({port:9222,chromeFlags:i.hot.chromeFlags,ignoreDefaultFlags:!0,userDataDir:i.dirs.chrome}),t=await(0,Zh.default)({port:e.port}),{Page:r,Runtime:n}=t;await n.enable(),await r.enable(),await r.navigate({url:`https://${i.sync.themes[0].store}?preview_theme_id=${i.sync.themes[0].id}`}),await r.loadEventFired(async()=>{await n.evaluate({returnByValue:!0,awaitPromise:!0,expression:`
            ${Vb()}
            ${i.mode.hot?Jb():""}
          `})}),i.mode.hot&&r.navigatedWithinDocument(async s=>{await n.evaluate({returnByValue:!0,awaitPromise:!0,expression:`
            window.syncify.sections.load();
          `})}),process.on("exit",()=>e.kill())}catch(e){console.error("An error occurred:",e)}};async function tg(e,t){if(A.start("runtime"),Pt(i),await xd(),await sc(),await Zb(),await ed(),i.mode.setup||i.mode.strap||i.mode.themes||(process.env.SYNCIFY_ENV=i.env.dev?"dev":"prod",process.env.SYNCIFY_WATCH=String(i.mode.watch),_d(e),uh(e),Pt.modes(i),await kd(e),i.mode.themes)||(Yb(),Kb(),ch(),Jd(),await Promise.all([Ad(),Td(),ic(),Bd(),Od()]).catch(n=>{Jt(n,{details:"Directory and path generation error"})}),i.mode.themes))return;Ld(),Qd(),Xb(),i.mode.build||Pt.stores(i),await Rd(),await Kd(),await eh(),await Xd();let r=await Promise.all([ih(),td()]).catch(n=>{Jt(n,{details:"Runtime error"})});return Pt.warnings(i),i.mode.build||Pt.time(),await Qh().catch(n=>{console.error(n),process.exit(1)}),r}function Yb(){(i.cmd.watch||i.cmd.upload)&&(i.watch=new eg.FSWatcher({persistent:!0,ignoreInitial:!0,usePolling:!0,interval:75,binaryInterval:100,ignored:["*.map"],ignorePermissionErrors:!0}),i.watch=Qc(i.watch,{has:{value(e,t=i.cwd){return i.watch._watched.has(t)?i.watch._watched.get(t).items.has(e):!1}},paths:{get(){return Nr(this._closers.keys())}},watching:{get(){return i.watch._watched}}}))}function Kb(){if(w("processors",i.config)&&N(process.config))for(let e in i.config.processors)ye(i.config.processors[e])||(L(i.config.processors[e])?i.processor[e].config=i.config.processors[e]:N(i.config.processors[e])&&(e==="esbuild"?i.processor[e]=De(i.processor[e],i.config.processors[e]):i.processor[e].config=De(i.processor[e].config,i.config.processors[e])))}function Xb(){if(w("plugins",i.config)&&L(i.config.plugins))for(let e of i.config.plugins)w("onInit",e)&&e.onInit.call({...i},i.config),w("onChange",e)&&i.plugins.onChange.push([e.name,e.onChange]),w("onTransform",e)&&i.plugins.onTransform.push([e.name,e.onTransform]),i.mode.watch&&(w("onWatch",e)&&i.plugins.onWatch.push([e.name,e.onWatch]),w("onReload",e)&&i.plugins.onReload.push([e.name,e.onReload])),i.mode.build&&w("onBuild",e)&&i.plugins.onBuild.push([e.name,e.onBuild])}async function Zb(){let e=await bd();e!==null?i.config=e:w("syncify",i.pkg)&&(w("config",i.pkg.syncify)?i.config=i.pkg.syncify.config:!w("stores",i.pkg.syncify)&&i.cmd.setup===!1&&!i.cmd.strap&&$f(i.cwd))}l();var ea=require("enquirer");l();async function rg(e){return $n.get("/oauth/access_scopes.json",e).then(({data:t})=>t).catch(t=>!1)}async function ng(){let e=X({type:"info"}),t={store:null,domain:null,token:null,ngrok:null,version:null,scopes:{read_content:!1,read_files:!1,read_online_store_pages:!1,read_themes:!1,write_content:!1,write_files:!1,write_online_store_pages:!1,write_themes:!1}},r=oe({},Ys,{pointer(f,p){return this.state.index===p?C.stub.trimEnd()+" ":C.trim+" "}}),n=[`Existing Setup${k}  `,`Shopify Domain${k}  `,`Admin API Token${k} `,`Ngrok API Token${k} `];if(i.env.file!==null)return T(e.Line("Environment references exist, setup can only be used for new installations.").NL.End(i.log.group).BR.toString());let{domain:s}=await(0,ea.prompt)({type:"input",name:"domain",message:n[1],required:!0,format(f){return f+".myshopify.com"},validate(f){return this.state.symbols.pointer="  ",f===".myshopify.com"||f.length===0?"Enter myshopify.com domain name":!0},theme:r}),{token:o}=await(0,ea.prompt)({type:"input",name:"token",required:!0,message:n[2],theme:r,validate(f){return this.state.symbols.pointer="  ",!f||f.length<10?"Invalid Admin API Token":!0}}),{ngrok:a}=await(0,ea.prompt)({type:"input",name:"ngrok",required:!0,message:n[3],theme:r,validate(f){return this.state.symbols.pointer="  ",!f||f.length<10?"Invalid Ngrok API Token":!0}}),u=await rg({baseURL:`https://${s}.myshopify.com/admin`,headers:{"X-Shopify-Access-Token":o.trim()}});if(Ae(u))return T(e.NL.Wrap(`Connection failed on ${we(`${s}.myshopify.com`)}. Please check the API Access Token`,"is correct and you have set the right access scopes, then try again.",le).NL.End(i.log.group).BR.toString());if(u.access_scopes.length>0){e.Newline();for(let{handle:f}of u.access_scopes)f in t.scopes&&(t.scopes[f]=!0,e.Line(`${al} ${f}`))}let c=0;for(let f in t.scopes)t.scopes[f]===!1&&(e.Line(`${_r} ${f}`,le),c=c+1);if(c>0)return T(e.NL.Wrap("Syncify requires read and write access to all the above resources.","Provide access to all scopes listed in red (above) and try again.",le).NL.End(i.log.group).BR.toString());T(e.toLine()),t.store=s,t.domain=`${s}.myshopify.com`,t.token=o.trim(),t.ngrok=a.trim()}l();var sg=require("enquirer"),ig=require("fs-extra");var si=require("path");async function og(){let e=(0,si.join)(i.cwd,"node_modules","@syncify/cli","straps"),t={dawn:(0,si.join)(e,"dawn"),dusk:(0,si.join)(e,"dusk"),silk:(0,si.join)(e,"silk")},r=oe({},Ys,{pointer(s,o){return this.state.index===o?C.stub.trimEnd()+" ":C.trim+" "}}),{template:n}=await(0,sg.prompt)({type:"select",name:"template",message:`Choose Strap${k}    `,required:!0,theme:r,choices:[{name:"dusk",message:"Dusk  ",hint:"Stripped theme"},{name:"dawn",message:"Dawn  ",hint:"Shopify Slop"},{name:"silk",message:"Silk  ",hint:"Custom theme"}]});(0,ig.copy)(t[n],i.cwd)}l();var e2=e=>e;var t2={get dev(){return ii.default.env.SYNCIFY_ENV==="dev"},get terse(){return i.cmd.terse},get prod(){return ii.default.env.SYNCIFY_ENV==="prod"},get watch(){return ii.default.env.SYNCIFY_WATCH==="true"}};async function ag(e,t,r){if(e.help)return $d(e);if(await tg(e,t),i.mode.themes)return md();if(i.mode.setup)return ng();if(i.mode.strap)return og();ii.default.stdin.on("data",Ed);try{if(i.env.ready=!0,i.mode.build&&i.mode.export===!1)return Eo(r);if(i.mode.watch)return ld(r);if(i.mode.upload)return Bp(r);if(i.mode.import)return dd(r);if(i.mode.export&&i.mode.publish===!1)return Po(r);if(i.mode.publish)return Cd(r);if(i.mode.interactive)return console.log("TODO: --interactive is not yet supported");if(i.mode.metafields)return console.log("TODO: --metafields is not yet supported")}catch(n){console.log(n)}}0&&(module.exports={$,defineConfig,env,run});
/*! Bundled license information:

normalize-path/index.js:
  (*!
   * normalize-path <https://github.com/jonschlinkert/normalize-path>
   *
   * Copyright (c) 2014-2018, Jon Schlinkert.
   * Released under the MIT License.
   *)

imurmurhash/imurmurhash.js:
  (**
   * @preserve
   * JS Implementation of incremental MurmurHash3 (r150) (as of May 10, 2013)
   *
   * @author <a href="mailto:jensyt@gmail.com">Jens Taylor</a>
   * @see http://github.com/homebrewing/brauhaus-diff
   * @author <a href="mailto:gary.court@gmail.com">Gary Court</a>
   * @see http://github.com/garycourt/murmurhash-js
   * @author <a href="mailto:aappleby@gmail.com">Austin Appleby</a>
   * @see http://sites.google.com/site/murmurhash/
   *)

lighthouse-logger/index.js:
  (**
   * @license Copyright 2016 The Lighthouse Authors. All Rights Reserved.
   * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0
   * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.
   *)

chrome-launcher/dist/utils.js:
  (**
   * @license Copyright 2017 Google Inc. All Rights Reserved.
   * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0
   * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.
   *)

chrome-launcher/dist/chrome-finder.js:
  (**
   * @license Copyright 2016 Google Inc. All Rights Reserved.
   * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0
   * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.
   *)

chrome-launcher/dist/random-port.js:
  (**
   * @license Copyright 2016 Google Inc. All Rights Reserved.
   * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0
   * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.
   *)

chrome-launcher/dist/flags.js:
  (**
   * @license Copyright 2017 Google Inc. All Rights Reserved.
   * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0
   * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.
   *)

chrome-launcher/dist/chrome-launcher.js:
  (**
   * @license Copyright 2016 Google Inc. All Rights Reserved.
   * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0
   * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.
   *)
*/
